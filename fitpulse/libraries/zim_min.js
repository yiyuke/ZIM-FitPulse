// ZIM - JavaScript Canvas Framework at https://zimjs.com - code creativity!
// See https://zimjs.com/code for CDN, ES6 and NPM modules and TypeScript
// Distill to minify only code used by app, SHIM for Adobe Animate, and more
// (c) 2025 ZIM - free to use - donations welcome! https://zimjs.com/donate
// See zim_doc.js version for further notes and copyright

"use strict";var zimBlob,zimWindow,WW=window||{},createjs=WW.createjs,zns=WW.zns,zon=null==WW.zon||WW.zon,zog=zon?console.log.bind(console):function(){},zogStyle=" border:thin solid black; color: black",zogg=zon?console.log.bind(console,"%c Z ","background: #acd241;"+zogStyle):function(){},zogp=zon?console.log.bind(console,"%c Z ","background: #e472c4;"+zogStyle):function(){},zogb=zon?console.log.bind(console,"%c Z ","background: #50c4b7;"+zogStyle):function(){},zogr=zon?console.log.bind(console,"%c Z ","background: #fb4758;"+zogStyle):function(){},zogy=zon?console.log.bind(console,"%c Z ","background: #ebcb35;"+zogStyle):function(){},zogo=zon?console.log.bind(console,"%c Z ","background: #f58e25;"+zogStyle):function(){},zogl=zon?console.log.bind(console,"%c Z ","background: #eeeeee;"+zogStyle):function(){},zogd=zon?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){};function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){if(z_d("2"),document.getElementById(e))return document.getElementById(e).style;zon&&zogy("zss(): id not found")}function zgo(e,t,o,n,r,i){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var l="";return o&&(l+="width="+o+","),n&&(l+="height="+n+","),r&&(l+="fullscreen=yes,"),i&&(l+="modal=yes,alwaysRaised=yes"),WW.open(e,t,l)}WW.location.href=e}function zum(e){if(z_d("4"),!zot(e))return Number(String(e).replace(/[^\d.-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),WW.event&&(WW.event.cancelBubble=!0))}function zil(){return z_d("6"),WW.zilK&&(WW.removeEventListener("keydown",WW.zilK),WW.removeEventListener("wheel",WW.zilW),WW.removeEventListener("DOMMouseScroll",WW.zilS)),WW.zilK=function(e){(e=e||event).keyCode&&32<=e.keyCode&&e.keyCode<=40&&e.preventDefault()},WW.zilW=function(e){(e=e||event).preventDefault()},WW.zilS=WW.zilW,WW.addEventListener("keydown",WW.zilK,{passive:!1}),WW.addEventListener("wheel",WW.zilW,{passive:!1}),WW.addEventListener("DOMMouseScroll",WW.zilS,{passive:!1}),[WW.zilK,WW.zilW,WW.zilS]}function zet(r,e){return z_d("6.1"),new function(){var l=this;this.on=function(e,t){if(!(zot(r)||zot(e)||zot(t)))for(var o=l.tags,n=0;n<o.length;n++)o[n].addEventListener(e,t)},this.off=function(e,t){if(!(zot(r)||zot(e)||zot(t)))for(var o=l.tags,n=0;n<o.length;n++)o[n].removeEventListener(e,t)},Object.defineProperty(l,"tags",{get:function(){return zot(r)?[]:"string"==typeof r||r instanceof String?(e&&zogo(r,document.querySelector(r)),e?[document.querySelector(r)]:document.querySelectorAll(r)):"string"==typeof r.innerHTML?[r]:[]},set:function(){}}),this.css=function(e,t){for(var o=l.tags,n=0;n<o.length;n++)if(1==arguments.length&&e.constructor==={}.constructor)for(var r in e)o[n].style[r]=e[r];else{if(1==arguments.length)return l.tags[0].style[e];o[n].style[e]=t}},this.prop=function(e,t){if(!zot(e)){for(var o=l.tags,n=[],r=0;r<o.length;r++)if(zot(t))if(e.constructor==={}.constructor)for(var i in e)o[r][i]=e[i];else n.push(o[r][e]);else o[r][e]=t;return zot(t)?n:void 0}}}}function isDUO(e){return 1==e.length&&null!=e[0]&&e[0].constructor==={}.constructor}function zob(e,t,o,n){var r=zim&&(zim.ZIMONON||ZIMONON);if(isDUO(t)){z_d("7");var i,l,a=t[0];for(l in a)(i=l.match(/^(.+)gColor$/))&&(a[i[1]+"ackgroundColor"]=a[l],delete a[l]);for(var s,c=(zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1]:o).replace(/\s+/g,"").split(","),u=[],d=0;d<c.length;d++)s=c[d].split("=")[0],c[d]=s,u.push(a[s]);for(d in a)c.indexOf(d)<0&&zon&&zogy(e,"bad argument "+d);return!(o=Object.prototype.isPrototypeOf.call(e.prototype,n)?new(e.bind.apply(e,[null].concat(u))):e.apply(null,u))||(r&&!o.arguments&&(o.arguments=[a]),o)}r&&n&&t&&zot(n.arguments)&&(n.arguments=Array.prototype.slice.call(t))}function zik(e){if(z_d("7.5"),z_d("17.6"),!zot(e))return zim.Pick.choose(e)}var zta=console.table&&zon?console.table.bind(console):function(){},zor=function(){for(var e=0;e<arguments.length;e++)if(!zot(arguments[e]))return arguments[e]},zim=function(Jo){function $o(e,t,o,n,r){Jo.timeCheck||(z_d("9.99"),Jo.timeCheck=!0);var i=zot(WW.TIME)?zot(Jo.TIME)?"seconds":Jo.TIME:WW.TIME;return i&&i.toLowerCase&&(i=i.toLowerCase()),"milliseconds"!=i&&"ms"!=i&&(i="seconds"),t&&t.toLowerCase&&(t=t.toLowerCase()),"ms"!=t&&"milliseconds"!=t&&"seconds"!=t&&"s"!=t||(i=t),zot(e)?i.charAt(0):("ms"==i&&(i="milliseconds"),"s"==i&&(i="seconds"),i=i.charAt(0),r||en(e,i,o,n),i)}function en(e,t,o,n){zot(o)&&(o=10),zot(n)&&(n=9),(Jo.TIMECHECK||WW.TIMECHECK)&&("m"!=t&&o<e||"m"==t&&e<n)&&zon&&zogy("TIME - warning: time is in "+("m"==t?"milliseconds":"seconds")+" ("+e+")")}if(Jo.chop=function(o,e,t,n,r,i){if(z_d("7.8"),!zot(o)){zot(e)&&(e=3),zot(t)&&(t=3),zot(n)&&(n=!0),zot(r)&&(r=0),zot(i)&&(i=1),o.getBounds||(o=new Jo.Bitmap(o));var l=o.getBounds();zot(l)&&zogy("ZIM chop() - obj must have bounds");var a=l.width/e,s=l.height/t,c=r,u=[];return Jo.loop(t,function(t){Jo.loop(e,function(e){e=new Jo.Bitmap(o,a+2*c,s+2*c,e*a-c,t*s-c,i);0!=r?(e.setBounds(c,c,a,s),e.regX=c,e.regY=c):e.setBounds(c,c,a,s),u.push(e)})}),n?new Jo.Tile(u,e,t,0,0,!0).sca(o.scaleX,o.scaleY):u}},Jo.shuffle=function(e,t){if(z_d("8"),!zot(e)){var o,n;if(Array.isArray(e)||(e=Object.values(arguments)),0==(l=e.length))return e;if(t){for(var r={},i=[],l=0;l<e.length;l++)r[l]=e[l],i.push(l);var a=Jo.copy(i);for(Jo.shuffle(i);Jo.arraysEqual(a,i);)Jo.shuffle(i);for(l=0;l<i.length;l++)e[l]=r[i[l]];return e}for(;--l;)o=Math.floor(Math.random()*(l+1)),n=e[l],e[l]=e[o],e[o]=n;return e}},Jo.pluck=function(e,t){if(z_d("9.26"),zot(e)||0==e.length)return null;Array.isArray(e)||(e=Object.values(arguments));var o=Math.floor(Math.random()*e.length),n=e[o];return t&&e.splice(o,1),n},Jo.rand=function(e,t,o,n){return z_d("9"),zot(e)&&zot(t)?Math.random():((zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),e%1==0&&t%1==0||(o=!1),zot(o)&&(o=!0),n&&.5<Math.random()&&(e*=-1,t*=-1),o&&(t<e?e++:e<t&&t++),0==e&&0==t?0:(t=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(t):t))},Jo.seedRandom=function(e){return z_d("9.01"),function(i,l,a,s,e,t,c){function u(e){var t,o=e.length,l=this,n=0,r=l.i=l.j=0,i=l.S=[];for(o||(e=[o++]);n<s;)i[n]=n++;for(n=0;n<s;n++)i[n]=i[r=255&r+e[n%o]+(t=i[n])],i[r]=t;(l.g=function(e){for(var t,o=0,n=l.i,r=l.j,i=l.S;e--;)t=i[n=255&n+1],o=o*s+i[255&(i[n]=i[r=255&r+t])+(i[r]=t)];return l.i=n,l.j=r,o})(s)}function d(e,t){for(var o,n=e+"",r=0;r<n.length;)t[255&r]=255&(o^=19*t[255&r])+n.charCodeAt(r++);return h(t)}function h(e){return String.fromCharCode.apply(0,e)}var p,g=a.pow(s,6),f=a.pow(2,52),m=2*f,o=a.seedrandom=function(e,t,o){var n=[],e=d(function e(t,o){var n,r=[],i=typeof t;if(o&&"object"==i)for(n in t)try{r.push(e(t[n],o-1))}catch(e){}return r.length?r:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,h(l)]:null==e?function(t){try{return p?h(p.randomBytes(s)):(i.crypto.getRandomValues(t=new Uint8Array(s)),h(t))}catch(e){return[+new Date,i,(t=i.navigator)&&t.plugins,i.screen,h(l)]}}():e,3),n),r=new u(n);return d(h(r.S),l),(t.pass||o||function(e,t,o){return o?(a[c]=e,t):e})(function(){for(var e=r.g(6),t=g,o=0;e<f;)e=(e+o)*s,t*=s,o=r.g(1);for(;m<=e;)e/=2,t/=2,o>>>=1;return(e+o)/t},e,"global"in t?t.global:this==a)};if(d(a[c](),l),e&&e.exports){e.exports=o;try{p=require("crypto")}catch(e){}}else t&&t.amd&&t(function(){return o})}(this,[],Math,256,"object"==typeof module&&module,"function"==typeof define&&define,"random"),Jo.randomO||(Jo.randomO=Math.random),zot(e)?Math.random=Jo.randomO:Math.seedrandom(e),e},Jo.odds=function(e){return z_d("9.1"),(zot(e)||isNaN(e))&&(e=50),Math.random()<=e/100},Jo.rarity=function(e,t,o,r){if(z_d("9.2"),zot(e)||e.constructor!={}.constructor)return[];zot(t)&&(t=!0),zot(o)&&(o=!0),zot(r)&&(r=!1);var i=[];return Jo.loop(e,function(e,t){var o,n=Jo.colors.indexOf(e);-1!=n&&(e=Jo.colorsHex[n]),Array.isArray(t)?((e=new(+e==+e?Number:String)(e))._payload=t[1],e.dynamicPayload=r,Object.defineProperty(e,"payload",{get:function(){return(this.dynamicPayload||null==this._lastPayload)&&(this._lastPayload=Jo.Pick.choose(this._payload)),this._lastPayload},set:function(e){this._lastPayload=null,this._payload=e}}),o=t[0],Jo.loop(o,function(){i.push(e)})):(o=t,Jo.loop(o,function(){+e==+e&&(e=+e),i.push(e)}))}),t&&Jo.shuffle(i),i},Jo.repeats=function(e,t){if(z_d("9.25"),zot(e)||!Array.isArray(e))return 0;var o={},n=0,r=0;return Jo.loop(e,function(e){null!=o[e]?(o[e]++,r++):o[e]=0,o[e]>n&&(n=o[e])}),t?r:n},Jo.series=function(){var r,t;if(z_d("13.61"),null==arguments[0])return null;if(0==arguments.length)return function(){};1==arguments.length&&Array.isArray(arguments[0])?r=arguments[0]:1==arguments.length&&arguments[0].constructor=={}.constructor?(zot((t=arguments[0]).min)&&(t.min=0),zot(t.max)&&(t.max=1),zot(t.step)&&(t.step=1),r=[],Jo.loop(Math.floor(Math.abs(t.max-t.min)+t.step),function(e){r.push(e+t.min)},null,null,t.step),t=null):r=Array.prototype.slice.call(arguments);function o(e,t){if(c&&u%c!=0)return u++,i;u++;var o,n=r.length;if((g||f)&&l%n==0&&Jo.shuffle(r),o=r[(10*n+l)%n],0==l&&0,f&&l%n==0&&1<n)for(;o==i;)Jo.shuffle(r),o=r[(10*n+l)%n];return d?0<a&&n<=l+a*s?(a=-1,l=n-1-(l+s-(n-1))):a<0&&l+a*s<0?(a=1,l=s-l):l+=a*s:h?0<a&&n<=l+a*s?(a=-1,l=n-1-(l+s-(n-1))+s):a<0&&l+a*s<0?(a=1,l=s-l-s):l+=a*s:p?0<a&&n<=l+a*s?l=n-1:a<0&&l+a*s<0?l=0:l+=a*s:l+=a*s,i=o,!Jo.isPick(o)||o.noPick&&t?o:Jo.Pick.choose(o)}var i,l=0,a=1,s=1,c=0,u=0,d=!1,h=!1,p=!1,g=!1,f=!1,n=o.original=Jo.copy(r);return o.array=r,o.type="series",Object.defineProperty(o,"index",{get:function(){var e=r.length;return(10*e+l)%e},set:function(e){l=e,u=0}}),Object.defineProperty(o,"length",{get:function(){return r.length},set:function(){}}),o.jump=function(e){return l=e,o},o.reverse=function(e){return zot(e)&&(e=!0),a=e?-1:1,0==l&&(l=r.length-1),o},o.bounce=function(e){zot(e)&&(e=!0);var t=r.length;return l=(10*t+l)%t,d=e,o},o.flip=function(e){zot(e)&&(e=!0);var t=r.length;return l=(10*t+l)%t,h=e,o},o.step=function(e){return zot(e)&&(e=1),s=Math.floor(e),o},o.every=function(e){return zot(e)&&(e=1),c=Math.abs(e),u=0,o},o.constrain=function(e){return zot(e)&&(e=!0),p=e,o},o.random=function(e){return zot(e)&&(e=!0),e||(r=n),g=1==e,o},o.mix=function(e){return zot(e)&&(e=!0),e||(r=n),f=1==e,o},o.shuffle=function(e){return zot(e)&&(e=!0),e?Jo.shuffle(r):r=n,o},o},Jo.makeSeries=function(e){if(z_d("13.6"),zot(e))return function(){};function t(){return e[o++%e.length]}var o=0;return t.array=e,t},Jo.loop=function(t,o,n,e,r,i,l,a,s,c){if(f=zob(Jo.loop,arguments,"obj, call, reverse, interval, step, start, end, immediate, complete, completeParams"))return f;if(z_d("9.5"),!zot(t)&&!zot(o)){zot(n)&&(n=!1),zot(e)&&(e=0),(zot(r)||r<=0)&&(r=1),zot(a)&&(a=!0),t.constructor===Number&&(t=Number(t)),t.constructor===String&&(t=String(t));var u,d,h,p,g,f=0==e&&s&&"function"==typeof s,m="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":"string"==typeof t?"string":t instanceof NodeList?"nodelist":t instanceof HTMLCollection?"htmlcollection":t.type&&"Dictionary"==t.type?"Dictionary":"invalid";if("invalid"!=m){if("number"==m||"string"==m||"array"==m||"nodelist"==m||"htmlcollection"==m||"Dictionary"==m){if("Dictionary"==m&&(g=Jo.copy(t.values),t=Jo.copy(t.objects)),u="number"==m?t:t.length,0==(d=y(u-1)))return!0;if(n)if(0===e){for(h=i;l<=h;h-=r)if(void 0!==(p="number"==m?o(h,d,i,l,t):"array"==m||"string"==m?o(t[h],h,d,i,l,t):"Dictionary"==m?o(t[h],g[h],h,d,i,l,t):o(t.item(h),h,d,i,l,t))&&"next"!=p)return p}else Jo.interval(e,function(e){if(h=e.count,a||h--,r&&(h*=r),h=i-h,"next"==(p="number"==m?o(h,d,i,l,t,e):"array"==m||"string"==m?o(t[h],h,d,i,l,t,e):"Dictionary"==m?o(t[h],g[h],h,d,i,l,t,e):o(t.item(h),h,d,i,l,t,e)))e.next();else if(void 0!==p)return e.clear(),p},d,a,null,null,s,c);else if(0===e){for(h=i;h<=l;h+=r)if(void 0!==(p="number"==m?o(h,d,i,l,t):"array"==m||"string"==m?o(t[h],h,d,i,l,t):"Dictionary"==m?o(t[h],g[h],h,d,i,l,t):o(t.item(h),h,d,i,l,t))&&"next"!=p)return p}else Jo.interval(e,function(e){if(h=e.count+i,a||h--,1!=r&&(h=h*r-i),"next"==(p="number"==m?o(h,d,i,l,t,e):"array"==m||"string"==m?o(t[h],h,d,i,l,t,e):"Dictionary"==m?o(t[h],g[h],h,d,i,l,t,e):o(t.item(h),h,d,i,l,t,e)))e.next();else if(void 0!==p)return e.clear(),p},d,a,null,null,s,c);return f&&s(c),!0}if("object"==m){u=0;var z=[];for(h in t)u++,z.push(h);if(0==(d=y(u-1)))return!0;if(n)if(0===e){for(h=i;l<=h;h-=r)if(void 0!==(p=o(z[h],t[z[h]],h,d,i,l,t)))return p}else Jo.interval(e,function(e){if(h=e.count,a||h--,r&&(h*=r),"next"==(p=o(z[h=i-h],t[z[h]],h,d,i,l,t,e)))e.next();else if(void 0!==p)return e.clear(),p},d,a,null,null,s,c);else if(0===e){for(h=i;h<=l;h+=r)if(void 0!==(p=o(z[h],t[z[h]],h,d,i,l,t)))return p}else Jo.interval(e,function(e){if(h=e.count+i,a||h--,1!=r&&(h=h*r-i),"next"==(p=o(z[h],t[z[h]],h,d,i,l,t,e)))e.next();else if(void 0!==p)return e.clear(),p},d,a,null,null,s,c);return f&&s(c),!0}}}function y(e){return zot(i)&&(i=n?e:0),zot(l)&&(l=n?0:e),n&&i<l||!n&&l<i||(i<0&&l)<0||e<i&&e<l?0:(i=Math.max(0,Math.min(i,e)),l=Math.max(0,Math.min(l,e)),Math.floor((n?i-l:l-i)/r)+1)}},Jo.timeout=function(e,t,o,n){var r;if(r=zob(Jo.timeout,arguments,"time, call, pauseOnBlur, timeUnit",this))return r;if(z_d("9.7"),!zot(t)&&"function"==typeof t){n=Jo.interval(e,t,1,!1,o,n);return n.type="timeoutObj",n}},Jo.interval=function(e,n,t,o,r,i,l,a){var s;if(s=zob(Jo.interval,arguments,"time, call, total, immediate, pauseOnBlur, timeUnit, complete, completeParams",this))return s;if(z_d("9.8"),!zot(n)&&"function"==typeof n){var c=$o(e,i);if(zot(e)&&(e="s"==c?1:1e3),zot(o)&&(o=!1),zot(t)||!(isNaN(t)||t<=0)){zot(t)&&(t=-1);var u,d={count:0,total:t,paused:!1,time:e,active:!0,timeUnit:i};return r&&(zot(Jo.blurCheck)&&Jo.setBlurDetect(),Jo.pauseOnBlur.push(d)),o&&setTimeout(function(){n(d),p()},5),d.type="intervalObject",d.pause=function(e,t,o){zot(e)&&(e=!0),e?(clearTimeout(u),clearTimeout(d.id),cancelAnimationFrame(d.rid),d.pauseTimeLeft=d.interval-(Date.now()-d.startTime)/("s"==c?1e3:1)):(d.paused||d.pause(!0),u=setTimeout(function(){d.count++,n(d),h(),p()},t?0:(o?d.interval:d.pauseTimeLeft)*("s"==c?1e3:1)),d.pauseTimeLeft=null),d.paused=e},d.next=function(){d.count++,n(d),p()},d.clear=function(){d.active=!1,clearTimeout(u),cancelAnimationFrame(d.rid),clearTimeout(d.id);var e,t=d.count;for(e in d)delete d[e];d.active=!1,d.count=t,d.pause=function(){},d.clear=function(){}},h(),d}}function h(){d.startTime=Date.now(),d.interval=Jo.Pick.choose(d.time),d.id=setTimeout(function(){d.paused||d.active&&(d.count++,n(d),h(),p())},d.interval*("s"==c?1e3:1))}function p(){-1!=t&&d.count>=(o?d.total-1:d.total)&&(l&&"function"==typeof l&&l(a),d.clear())}},Jo.async=function(e,t,o,n,r){var i,l,a,s,c,u;z_d("29"),zot(e)||(i=document.createElement("script"),l=$o(n),zot(n)&&(n="s"==l?2:2e3),t?(a=o||t.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1],Jo.asyncList||(Jo.asyncList={}),Jo.asyncList[a]||(Jo.asyncList[a]=[]),Jo.asyncList[a].push(t),Jo.async[a]=(s=i,c=!1,u=setTimeout(function(){c=r,"function"==typeof t&&t("asyncError",r?"cancelled":"timeout")},n*("s"==l?1e3:1)),function(e){clearTimeout(u),Jo.asyncList[a]&&(t=Jo.asyncList[a].shift()),"function"!=typeof t||c||t(e),s&&s.parentNode.removeChild(s),s=null})):(Jo.async.z_s&&Jo.async.z_s.parentNode&&Jo.async.z_s.parentNode.removeChild(Jo.async.z_s),Jo.async.z_s=i),e.match(/\?/)||(e+="?"),i.setAttribute("src",e+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(i))},Jo.couple=function(e){if(z_d("29.2"),!Jo.isJSON(e))return e;var t,o=JSON.parse(e),n={};for(t in o){var r,i=o[t];for(r in i)n[t+"_"+r]=i[r]}return JSON.stringify(n)},Jo.decouple=function(e){if(z_d("29.3"),!Jo.isJSON(e))return e;var t,o=JSON.parse(e),n={};for(t in o){var r=t.split("_",2);if(2!=r.length)return e;n[r[0]]||(n[r[0]]={}),n[r[0]][r[1]]=o[t]}return JSON.stringify(n)},Jo.convertColor=function(e,o,n){if(Jo.convertColorCheck||(z_d("27.5"),Jo.convertColorCheck=!0),zot(o)&&(o="hex"),"number"==typeof(e=zik(e))&&(e="#"+e.toString(16)),!zot(e)&&e.toLowerCase){e=e.toLowerCase(),o=o.toLowerCase();var t,r,i,l,a=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],s=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if("zim"==o)return Jo.colorsHex.indexOf(e)<0?e:Jo.colors[Jo.colorsHex.indexOf(e)];if(t=e.match(/rgba\((.*)\)/)){var c=(u=t[1].split(",")).pop();if(zot(n)&&(n=c),"array"==o)return u.push(c),u;if(e="rgb("+u.join(",")+")","rgb"==o)return e;if("hsl"==o)return h(u[0],u[1],u[2])}if(zot(n)&&(n=1),t=e.match(/rgb\((.*)\)/))return"rgba"==o?"rgba("+t[1]+","+n+")":"hex"==o?(r=1!=n?","+n:"","#"+(i=p(t[1]+r))[0]+i[1]+i[2]+i[3]):"hexnumber"==o?(r=1!=n?","+n:0,i=p(t[1]+r),parseInt(i[0]+""+i[1]+i[2],16)):"hexstring"==o?(r=1!=n?","+n:0,"0xff"+(i=p(t[1]+r))[0]+i[1]+i[2]):"string"==o?(e=p(t[1]).join("").toLowerCase(),-1==(l=s.indexOf(e))?"#"+e:a[l]):"array"==o?(r=1!=n?","+n:0,p(t[1]+r)):"hsl"==o?h((u=t[1].split(","))[0],u[1],u[2]):e;if("hsl"==o)return Jo.convertColor(Jo.convertColor(e,"rgb"),"hsl");if("array"==o||"rgb"==o||"rgba"==o)return"#"==e.charAt(0)?g(e):g(Jo.convertColor(e));if("hex"==o){if("#"==e.charAt(0)){if(1==n)return e;if(r=d(Math.round(255*n)),4!=e.length&&5!=e.length)return 9==e.length?e.substring(0,a.length-2)+r:e+r;var u=e.split("");return u[1]=u[1]+""+u[1],u[2]=u[2]+""+u[2],u[3]=u[3]+""+u[3],u[4]=r,u.join("")}}else if("hexnumber"==o){if("#"==e.charAt(0))return parseInt(e.replace(/^#/,""),16)}else if("hexstring"==o){if("#"==e.charAt(0))return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),6==e.length&&(e="ff"+e),"0x"+e.replace(/^#/,"")}else"#"==e.charAt(0)&&3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));return"string"==o?-1==(l=s.indexOf(e))?"#"+e:a[l]:"hexnumber"==o?parseInt(s[-1!=a.indexOf(e.toLowerCase())?a.indexOf(e):0],16):"hexstring"==o?(6==(e=s[-1!=a.indexOf(e.toLowerCase())?a.indexOf(e):0]).length&&(e="ff"+e),"0x"+e.replace(/^#/,"")):(r=1!=n?d(Math.round(255*n)):"","#"+s[-1!=a.indexOf(e.toLowerCase())?a.indexOf(e):0]+r)}function d(e){e=Number(e).toString(16);return e.length<2&&(e="0"+e),e}function h(e,t,o){e/=255,t/=255,o/=255;var n=Math.max(e,t,o),r=n-Math.min(e,t,o),t=r?n===e?(t-o)/r:n===t?2+(o-e)/r:4+(e-t)/r:0;return[60*t<0?60*t+360:60*t,100*(r?n<=.5?r/(2*n-r):r/(2-(2*n-r)):0),100*(2*n-r)/2]}function p(e){e=e.split(",");return[d(e[0]),d(e[1]),d(e[2]),zot(void 0)?"":d(Math.round(255*Number(e[3])))]}function g(e){var t;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3==(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),"rgb"==o?"rgb("+[t>>16&255,t>>8&255,255&t]+")":"array"==o?[t>>16&255,t>>8&255,255&t,n]:"rgba("+[t>>16&255,t>>8&255,255&t].join(",")+","+n+")"):/^#([A-Fa-f0-9]{4}){1,2}$/.test(e)?(8==(t=e.substring(1).split("")).length&&(n=t.slice(-2).join(""),t=t.slice(0,6)),4==t.length&&(n=t[3]+""+t[3],t=[t[0],t[0],t[1],t[1],t[2],t[2]]),n=parseInt(n,16)/255,t="0x"+t.join(""),"rgb"==o?"rgb("+[t>>16&255,t>>8&255,255&t]+")":"rgba("+[t>>16&255,t>>8&255,255&t].join(",")+","+n+")"):"rgb"==o?"rgb(0,0,0)":"rgba(0,0,0,1)"}},Jo.colorRange=function(e,t,o){Jo.colorRangeCheck||(z_d("27.6"),Jo.colorRangeCheck=!0),zot(o)&&(o=.5),o=Math.max(0,Math.min(1,o)),zot(e)&&(e="white"),zot(t)&&(t="black");var n=e=zik(e),r=t=zik(t),i=Jo.convertColor(e,"rgb"),l=Jo.convertColor(t,"rgb");e=i.substring(4,i.length-1).split(","),t=l.substring(4,l.length-1).split(",");var a,s="#";if(0==o)s=n;else if(1==o)s=r;else for(var c=0;c<e.length;c++)a=t[c]-e[c],(a=Math.floor(parseInt(e[c],10)+a*o).toString(16)).length<2&&(a="0"+a),s+=a;return s},Jo.lighten=function(e,t){return Jo.lightenCheck||(z_d("27.65"),Jo.lightenCheck=!0),zot(t)&&(t=.5),0<=t?Jo.colorRange(String(e),"#FFFFFF",t):Jo.colorRange(String(e),"#000000",-t)},Jo.darken=function(e,t){return zot(t)&&(t=.5),Jo.darkenCheck||(z_d("27.66"),Jo.darkenCheck=!0),0<=t?Jo.colorRange(String(e),"#000000",t):Jo.colorRange(String(e),"#ffffff",-t)},Jo.toColor=function(e,t,o){return Jo.toColorCheck||(z_d("27.67"),Jo.toColorCheck=!0),zot(o)&&(o=.5),Jo.colorRange(String(e),t,o)},Jo.toAlpha=function(e,t){return Jo.toAlphaCheck||(z_d("27.68"),Jo.toAlphaCheck=!0),zot(t)&&(t=.5),Jo.convertColor(String(e),"rgba",t)},Jo.toBW=function(e){return 0===e.indexOf("#")&&(e=e.slice(1)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6!==e.length?(zogy("ZIM toBW() - needs hex input"),e):186<.299*parseInt(e.slice(0,2),16)+.587*parseInt(e.slice(2,4),16)+.114*parseInt(e.slice(4,6),16)?"#000000":"#FFFFFF"},Jo.invertColor=function(e){if(Jo.invertColorCheck||(z_d("27.86"),Jo.invertColorCheck=!0),0===e.indexOf("#")&&(e=e.slice(1)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6!==e.length)return zogy("ZIM invertColor() - needs hex input"),e;var t=parseInt(e.slice(0,2),16),o=parseInt(e.slice(2,4),16),e=parseInt(e.slice(4,6),16);function n(e,t){return t=t||2,(new Array(t).join("0")+e).slice(-t)}return t=(255-t).toString(16),o=(255-o).toString(16),e=(255-e).toString(16),"#"+n(t)+n(o)+n(e)},Jo.zimEase=function(e,t,o,n,r){z_d("27.69");var i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E=!1;return zot(r)&&(r=!0),e?(Array.isArray(e[1])&&(E=!0,y=e[1],e=e[0],b=y[0],v=y[1],w=y[2],C=y[3],P=1-(A=5*(C+0)-20*(w+b)+30*v)-(T=10*+w+30*(b-v))-(k=10*+v-4*(x=5*+b))-x),i=e[0],l=e[1],a=e[2],y=e[3],h=1-(d=5*(y+0)-20*(a+i)+30*l)-(u=10*+a+30*(i-l))-(c=10*+l-4*(s=5*+i))-s):t?(h=t[0],d=t[1],u=t[2],c=t[3],i=(s=t[4])/5,l=(c+4*s)/10,a=(u+6*s+3*c)/10,y=(d+4*s+3*c+2*u)/5):(c=u=d=h=0,s=1),o?z={reverse:m=function(){return Jo.zimEase(null,[h,d,u,c,s],!0)},points:[i,l,a,y],polynomials:[h,d,u,c,s],noPick:function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}return e<.5?(p=100*(e*=2),g=(p/=100)*p,(h*(f=g*p)*g+d*g*g+u*f+c*g+s*p)/2):(p=100*(e=1-2*(e-.5)),g=(p/=100)*p,1-(h*(f=g*p)*g+d*g*g+u*f+c*g+s*p)/2)}}:E?z={reverse:m=function(){return zon&&zogy("zimEase - multi array points cannot be reversed"),Jo.zimEase(null,[h,d,u,c,s])},points:[[i,l,a,y],[b,v,w,C]],polynomials:[[h,d,u,c,s],[P,A,T,k,x]],noPick:function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}return e<.5?(p=100*(e*=2),g=(p/=100)*p,(h*(f=g*p)*g+d*g*g+u*f+c*g+s*p)/2):(p=100*(e=2*(e-.5)),g=(p/=100)*p,.5+(P*(f=g*p)*g+A*g*g+T*f+k*g+x*p)/2)}}:(z={reverse:m=function(){return Jo.zimEase(null,[h,d,u,c,s],null,!0)},points:[i,l,a,y],polynomials:[h,d,u,c,s]}).noPick=n?function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}return p=100-100*e,g=(p/=100)*p,1-(h*(f=g*p)*g+d*g*g+u*f+c*g+s*p)}:function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}return p=100*e,g=(p/=100)*p,h*(f=g*p)*g+d*g*g+u*f+c*g+s*p},z.noPick.reverse=m,z},Jo.spline=function(e,t,o,n,r){z_d("27.695"),zot(e)&&(e=[]),zot(t)&&(t=1),zot(o)&&(o=!1),zot(r)&&(r=o);var i=(e=function(e,t){if(!Array.isArray(e[0]))for(d=0;d<e.length;d++)e[d]=[e[d].x,e[d].y];var o,n,r;t&&(o=e[e.length-1],n=e[e.length-2],r=e[0],t=e[1],e.unshift(o),e.unshift(n),e.push(r),e.push(t));var i=[];for(d=0;d<e.length;d++)i.push(e[d][0],e[d][1]);return i}(e,o)).length,l=i-4,a=o?e[2]:e[0],s=o?e[3]:e[1],c="M"+[a,s];n&&n.mt(a,s);for(var u=o?i-4:i-2,d=o?2:0;d<u;d+=2){var h=d?e[d-2]:e[0],p=d?e[d-1]:e[1],g=e[d+0],f=e[d+1],m=e[d+2],z=e[d+3],h=g+(m-h)/6*t,p=f+(z-p)/6*t,g=m-((d!==l?e[d+4]:m)-g)/6*t,f=z-((d!==l?e[d+5]:z)-f)/6*t;c+="C"+[h,p,g,f,m,z],n&&n.bt(h,p,g,f,m,z)}return r&&((r=c.split("C")).pop(),c=r.join("C")),c},Jo.getPointAtPercent=function(e,t,o,n,r){z_d("27.697"),zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=50);r=dist(e,t,o,n)*r/100,n=angle(e,t,o,n);return new Jo.Point(e+r*Math.cos(n*Jo.RAD),t+r*Math.sin(n*Jo.RAD))},Jo.pointAlongCurve=function(e,t,o,n){if(z_d("27.7"),e&&e[0]&&e[1]&&e[2]&&e[3]){zot(n)&&(n=!1);var r,i,l,a,s=new Jo.Bezier(e[0],e[1],e[2],e[3]),e=n?(r=s.mx(t),s.my(t)):(r=s.x(t),s.y(t));if(o){var o=t-.05,t=t+.05;return o<0&&(o=0),1<t&&(t=1),t=n?(i=s.mx(o),l=s.my(o),a=s.mx(t),s.my(t)):(i=s.x(o),l=s.y(o),a=s.x(t),s.y(t)),{x:r,y:e,angle:Jo.angle(i,l,a,t)}}return{x:r,y:e}}},Jo.distanceAlongCurve=function(e){return z_d("27.8"),(Jo.dist(e[0],e[3])+(Jo.dist(e[0],e[1])+Jo.dist(e[1],e[2])+Jo.dist(e[2],e[3])))/2},Jo.closestPointAlongCurve=function(l,e,t,o,n){z_d("27.9");var a,s=1e7,c=0,u=0;zot(t)&&(t=10);var d=0,h=[],p=0;return Jo.loop(e,function(e,n){var r=Jo.distanceAlongCurve(e);d+=r;var i=new Jo.Bezier(e[0],e[1],e[2],e[3]);Jo.loop(t,function(e,t){h.push(p+r*e/t);var o={x:i.x(e/t),y:i.y(e/t)},t=Jo.dist(l,o);t<s&&(s=t,a=o,c=n,u=e)}),p=d}),n?(h[c*t+u]||0)/d*100:o?a:c},Jo.transformPoints=function(e,t,o,n,r){if(z_d("27.95"),!zot(e)&&Array.isArray(e)){zot(n)&&(n=0),zot(r)&&(r=0),e=Jo.copy(e);var i=n,l=r;"rotation"==t&&(0!=n&&(e=Jo.transformPoints(e,"x",-i)),0!=r&&(e=Jo.transformPoints(e,"y",-l)));for(var a=0;a<e.length;a++){var s,c,u,d=e[a];Array.isArray(d)&&("x"==t?d[0]+=o:"y"==t?d[1]+=o:"scaleX"==t?(d[0]=(d[0]-n)*o+n,d[4]=d[4]*o,d[6]=d[6]*o):"scaleY"==t?(d[1]=(d[1]-r)*o+r,d[5]=d[5]*o,d[7]=d[7]*o):"scale"==t?(d[0]=(d[0]-n)*o+n,d[4]=d[4]*o,d[6]=d[6]*o,d[1]=(d[1]-r)*o+r,d[5]=d[5]*o,d[7]=d[7]*o):"rotation"==t&&(s=o*Math.PI/180,c=d[0],u=d[1],d[0]=c*Math.cos(s)-u*Math.sin(s),d[1]=u*Math.cos(s)+c*Math.sin(s),c=d[4],u=d[5],d[4]=c*Math.cos(s)-u*Math.sin(s),d[5]=u*Math.cos(s)+c*Math.sin(s),c=d[6],u=d[7],d[6]=c*Math.cos(s)-u*Math.sin(s),d[7]=u*Math.cos(s)+c*Math.sin(s)))}return"rotation"==t&&(0!=n&&(e=Jo.transformPoints(e,"x",i)),0!=r&&(e=Jo.transformPoints(e,"y",l))),e}},Jo.trimPointEnds=function(e){z_d("27.97"),e[0][4]=0,e[0][5]=0,e[0][8]="free",e[e.length-1][6]=0,e[e.length-1][7]=0,e[e.length-1][8]="free"},Jo.reversePoints=function(e){return z_d("27.975"),e.reverse(),Jo.loop(e,function(e){var t=e[6];e[6]=e[4],e[4]=t;t=e[7];e[7]=e[5],e[5]=t}),e},Jo.appendPoints=function(e,t,o){return z_d("27.98"),zot(e)&&zot(t)?[]:zot(e)?t:zot(t)?e:(e[e.length-1][6]=t[0][6],e[e.length-1][7]=t[0][7],o&&(e[e.length-1][8]=o),t.shift(),e=e.concat(t))},Jo.prependPoints=function(e,t,o){return z_d("27.985"),zot(e)&&zot(t)?[]:zot(e)?t:zot(t)?e:(t[t.length-1][6]=e[0][6],t[t.length-1][7]=e[0][7],o&&(e[e.length-1][8]=o),e.shift(),e=t.concat(e))},Jo.splitPoints=function(e,t,o){if(z_d("27.99"),!(zot(e)||(zot(t)&&(t=Math.floor(e.length/2)),t<0||t>e.length-1))){zot(o)&&(o=!0);var n=Jo.copy(e.slice(0,t+1)),t=Jo.copy(e.slice(t));return o&&(Jo.trimPointEnds(n),Jo.trimPointEnds(t)),[n,t]}},Jo.outlineImage=function(e){if(z_d("27.995"),!e)return[];var e=e.cache?(e.cache(),e.cacheCanvas):e,s={NONE:0,UP:1,LEFT:2,DOWN:3,RIGHT:4,getBlobOutlinePoints:function(e){s.sourceCanvas=document.createElement("canvas"),s.sourceCanvas.width=e.width+2,s.sourceCanvas.height=e.height+2,s.sourceContext=s.sourceCanvas.getContext("2d"),s.sourceContext.drawImage(e,1,1);e=s.getFirstNonTransparentPixelTopDown(s.sourceCanvas);return s.walkPerimeter(e.x,e.y)},getFirstNonTransparentPixelTopDown:function(e){for(var t,o,n=e.getContext("2d"),r=0;r<e.height;r++)for(o=n.getImageData(0,r,e.width,1).data,t=0;t<o.length;t+=4)if(0<o[t+3])return{x:t/4,y:r};return null},walkPerimeter:function(e,t){e<0&&(e=0),e>s.sourceCanvas.width&&(e=s.sourceCanvas.width),t<0&&(t=0),t>s.sourceCanvas.height&&(t=s.sourceCanvas.height);var o,n=[],r=e,i=t,l=s.sourceContext.getImageData(0,0,s.sourceCanvas.width,s.sourceCanvas.height),a=4*l.width;do{switch(o=(i-1)*a+4*(r-1),s.step(o,l.data,a),0<=r&&r<s.sourceCanvas.width&&0<=i&&i<s.sourceCanvas.height&&n.push(r-2,i-1),s.nextStep){case s.UP:i--;break;case s.LEFT:r--;break;case s.DOWN:i++;break;case s.RIGHT:r++}}while(r!=e||i!=t);return n.push(r-1,i-1),n},step:function(e,t,o){switch(s.upLeft=0<t[e+3],s.upRight=0<t[e+7],s.downLeft=0<t[e+o+3],s.downRight=0<t[e+o+7],s.previousStep=s.nextStep,s.state=0,s.upLeft&&(s.state|=1),s.upRight&&(s.state|=2),s.downLeft&&(s.state|=4),s.downRight&&(s.state|=8),s.state){case 1:s.nextStep=s.UP;break;case 2:case 3:s.nextStep=s.RIGHT;break;case 4:s.nextStep=s.LEFT;break;case 5:s.nextStep=s.UP;break;case 6:s.previousStep==s.UP?s.nextStep=s.LEFT:s.nextStep=s.RIGHT;break;case 7:s.nextStep=s.RIGHT;break;case 8:s.nextStep=s.DOWN;break;case 9:s.previousStep==s.RIGHT?s.nextStep=s.UP:s.nextStep=s.DOWN;break;case 10:case 11:s.nextStep=s.DOWN;break;case 12:s.nextStep=s.LEFT;break;case 13:s.nextStep=s.UP;break;case 14:s.nextStep=s.LEFT;break;default:s.nextStep=s.NONE}}},t=s.getBlobOutlinePoints(e),o=[];for(z_i=0;z_i<t.length;z_i++)var n=t[z_i],r=null!=r?(o.push([r,n]),null):n;return o.reverse()},Jo.simplifyPoints=function(e,t,o,n){function r(e,t){var o=e.length-1,n=[e[0]];return function e(t,o,n,r,i){for(var l,a,s,c,u,d,h,p=r,g=o+1;g<n;g++){var f=(a=t[g],s=t[o],c=t[n],f=h=d=u=void 0,u=s[0],d=s[1],h=c[0]-u,f=c[1]-d,0===h&&0===f||(1<(s=((a[0]-u)*h+(a[1]-d)*f)/(h*h+f*f))?(u=c[0],d=c[1]):0<s&&(u+=h*s,d+=f*s)),(h=a[0]-u)*h+(f=a[1]-d)*f);p<f&&(l=g,p=f)}r<p&&(1<l-o&&e(t,o,l,r,i),i.push(t[l]),1<n-l&&e(t,l,n,r,i))}(e,0,o,t,n),n.push(e[o]),n}z_d("27.997"),zot(n)&&(n=!0),zot(t)&&(t=10);var i,l,a,o=(l=t,a=o,(i=e).length<=2?i:(l=void 0!==l?l*l:1,i=r(i=a?i:function(e,t){for(var o,n,r,i,l=e[0],a=[l],s=1,c=e.length;s<c;s++)o=e[s],r=l,i=void 0,i=(n=o)[0]-r[0],r=n[1]-r[1],t<i*i+r*r&&(a.push(o),l=o);return l!==o&&a.push(o),a}(i,l),l)));return n&&o.pop(),o},Jo.makeID=function(e,t,o){z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");for(var n,r,i=[2,3,4,5,6,7,8,9],l="abcdefghjkmnpqrstuvwxyz".split(""),a=e.constructor===Array?e:"numbers"==e?i:"letters"==e?l:i.concat(l),s="",c=0;c<t;c++)n=a[Math.floor(Math.random()*a.length)],r=Math.random(),"uppercase"==o||"mixed"==o&&.5<r?n.toUpperCase&&(n=n.toUpperCase()):n.toLowerCase&&(n=n.toLowerCase()),s+=String(n);return s},Jo.makeSyllable=function(e,t){z_d("13.55");var o="bcdfghjklmnprstvwxz",n="aeiouaeiouaeiouy";zot(e)&&(e=3),zot(t)&&(t=Jo.rand()<.3);var r="",i=t?n:o;return Jo.loop(e,function(){var e,t;r+=(e=i,t=Jo.rand(e.length-1),e.substring(t,t+1)),i=i==n?o:n}),r},Jo.makePrimitive=function(e){return z_d("13.56"),function o(n){return Array.isArray(n)?(Jo.loop(n,function(e){e=o(e)}),n):n.constructor==={}.constructor?(Jo.loop(n,function(e,t){n[e]=o(t)}),n):n instanceof String?String(n):n instanceof Number?Number(n):n instanceof Boolean?Boolean(n):n}(e)},Jo.makeMath=function(){z_d("13.565");for(var e=Object.getOwnPropertyNames(Math),t=0;t<e.length;t++)WW[e[t]]=Math[e[t]]},Jo.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},Jo.setProps=function(e,t){z_d("17.15"),zot(e)||(Array.isArray(e)||(e=[e]),Jo.loop(e,function(o){Jo.loop(t,function(e,t){o[e]=zik(t)})}))},Jo.mobile=function(e){return z_d("28"),zot(WW.MOBILE)||"default"==WW.MOBILE?zot(Jo.MOBILE)||"default"==Jo.MOBILE?(zot(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!e||void 0===WW.orientation)&&(!/safari/i.test(navigator.userAgent)||"ios")):Jo.MOBILE:WW.MOBILE},Jo.vee=function(e){return z_d("28.5"),!zot(e)&&("Pick"==e.type||Array.isArray(e)||e.constructor=={}.constructor&&(!zot(e.max)||!zot(e.noPick))||"function"==typeof e)},Jo.extend=function(e,t,o,n,r){var i;if(i=zob(Jo.extend,arguments,"subclass, superclass, override, prefix, prototype"))return i;if(!zot(e)&&!zot(t)){zot(n)&&(n="super"),zot(o)&&(o=[]),Array.isArray(o)||(o=[o]),zot(r)&&(r=!0);var l,a={};for(l in e.prototype)Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(e.prototype,l));for(l in h.prototype=t.prototype,e.prototype=new h,a)Object.defineProperty(e.prototype,l,Object.getOwnPropertyDescriptor(a,l));var s,c=e.prototype,u=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(u){c[(n+="_")+"constructor"]=u.constructor;for(var d=0;d<o.length;d++)"function"==typeof u[s=o[d]]&&(c[n+s]=u[s]);if(r)for(s in u)Object.prototype.hasOwnProperty.call(c,s)&&"function"==typeof u[s]&&(c[n+s]=u[s])}return e}function h(){this.constructor=e}zon&&e!=Jo.StageGL&&zogy("zim.extend() - please supply a class and its superclass")},Jo.copy=function(e,t,o){if(Jo.copyCheck||(z_d("10"),Jo.copyCheck=!0),zot(t)&&(t=!1),zot(o)&&(o=!0),null==e||!(e instanceof Array||e.constructor=={}.constructor))return t&&null!=e&&e.clone&&e.type&&("Container"!=e.type&&"Stage"!=e.type&&"StageGL"!=e.type||o)?e.clone():e;if(e instanceof Array){for(var n=[],r=0;r<e.length;r++)n[r]=Jo.copy(e[r],t,o);return n}if(e.constructor=={}.constructor){var i,l={};for(i in e){var a=Jo.copy(e[i],t,o);Object.prototype.hasOwnProperty.call(e,i)&&(l[i]=a)}return l}},Jo.merge=function(){Jo.mergeCheck||(z_d("12"),Jo.mergeCheck=!0);for(var e,t={},o=0;o<arguments.length;o++)for(e in arguments[o])Object.prototype.hasOwnProperty.call(arguments[o],e)&&(t[e]=arguments[o][e]);return t},Jo.sortObject=function(e,t,o){z_d("12.1");function n(e){return e[t]}var e=Object.entries(e).sort(function(e,t){return o?n(e[1])<n(t[1])?1:n(e[1])>n(t[1])?-1:0:n(e[1])>n(t[1])?1:n(e[1])<n(t[1])?-1:0}),e=new Map(e),r={};return e.forEach(function(e,t){r[t]=e}),r},Jo.arraysEqual=function(e,t,o){if(z_d("11"),zot(e)||zot(t))return!1;if(zot(o)&&(o=!0),e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!Jo.arraysEqual(e[n],t[n],o))return!1}else{if(o&&e[n]!=t[n])return!1;if(!o)return Jo.arraysEqual(e.sort(),t.sort(),!0)}return!0},Jo.arrayMinMax=function(e){if(z_d("11.2"),!Array.isArray(e))return{min:null,max:null};for(var t=e[0],o=e[0],n=e.length;n--;)t=e[n]<t?e[n]:t,o=e[n]>o?e[n]:o;return{min:t=isNaN(t)?null:t,max:o=isNaN(o)?null:o}},Jo.isEmpty=function(e){if(Jo.zimEmptyCheck||(z_d("11.5"),Jo.zimEmptyCheck=!0),!zot(e)){var t,o=0;for(t in e){o++;break}return 0==o}},Jo.isPick=function(e){if(Jo.zimPickCheck||(z_d("11.7"),Jo.zimPickCheck=!0),!zot(e))return Array.isArray(e)||e.constructor=={}.constructor&&(null!=e.min&&null!=e.max||e.noPick)||e.constructor===Function&&(null!=e.array||null!=e())},Jo.isJSON=function(e){if(z_d("11.6"),"string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(e){return!1}},Jo.parseJSON=function(t){var o;z_d("11.65");try{o=JSON.parse(t)}catch(e){o=function(e){e=e.trim();try{return new Function("return "+e)()}catch(e){return zogy("JSON did not parse"),null}}(t)}return o},Jo.zut=function(e){if(zot(e)||"object"==typeof e)return!0},Jo.decimals=function(e,t,o,n,r,i,l){if(Jo.zimDecimalCheck||(z_d("13"),Jo.zimDecimalCheck=!0),zot(e))return 0;zot(t)&&(t=1),zot(o)&&(o=0),zot(n)&&(n=1),zot(r)&&(r=!0),zot(i)&&(i=!1);var a=Math.round(e*Math.pow(10,t))/Math.pow(10,t);i&&(u=a-Math.floor(a),a=Jo.decimals(Math.floor(a)+60*u/100,2));var s,c,u=Jo.sign(a);if(0<o)for(s=String(a).indexOf("."),c=String(a).length,s<0&&(s=c++,a+="."),h=0;h<o-(c-s-1);h++)a+="0";if(1<n){-1==u&&(a=a.substr(1,a.length-1)),s=String(a).indexOf("."),c=String(a).length;for(var d=s<0?c:s,h=0;h<n-d;h++)a="0"+a;-1==u&&(a="-"+a)}return 0==n&&(a=a.toString().replace(/^0\./,".")),0<o+n&&!r&&0==Number(a)&&(a=0),i&&(a=String(a).replace(".",":")),Jo.zut(l)?a:null},Jo.countDecimals=function(e){return Jo.zimCountDecimalsCheck||(z_d("13.05"),Jo.zimCountDecimalsCheck=!0),e%1?e.toString().split(".")[1].length:0},Jo.sign=function(e){return Jo.zimSignCheck||(z_d("13.1"),Jo.zimSignCheck=!0),e?e<0?-1:1:0},Jo.constrain=function(e,t,o,n){if(z_d("13.2"),!zot(e))return zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),o<t&&(t=o=t),zot(n)&&(n=!1),n&&e<0?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o))},Jo.dist=function(e,t,o,n){if(Jo.zimDistCheck||(z_d("13.3"),Jo.zimDistCheck=!0),!zot(e)&&!zot(t))return zot(e.x)||zot(t.x)?(zot(o)&&(o=0),zot(n)&&(n=0)):(n=t.y,o=t.x,t=e.y,e=e.x),Math.sqrt(Math.pow(o-e,2)+Math.pow(n-t,2))},Jo.rectIntersect=function(e,t,o){return Jo.zimRectIntersectCheck||(z_d("13.32"),Jo.zimRectIntersectCheck=!0),zot(o)&&(o=0),!(e.x>=t.x+t.width+o||e.x+e.width+o<=t.x||e.y>=t.y+t.height+o||e.y+e.height+o<=t.y)},Jo.boundsAroundPoints=function(e){Jo.zimBoundsAroundPointsCheck||(z_d("13.34"),Jo.zimBoundsAroundPointsCheck=!0);for(var t=1e4,o=1e4,n=-1e4,r=-1e4,i=0;i<e.length;i++){var l=e[i];l.x<t&&(t=l.x),l.x>n&&(n=l.x),l.y<o&&(o=l.y),l.y>r&&(r=l.y)}return{x:t,y:o,width:n-t,height:r-o}},Jo.angle=function(e,t,o,n){if(Jo.angleCheck||(z_d("13.4"),Jo.angleCheck=!0),!zot(e)&&!zot(t))return zot(e.x)?(zot(o)&&(o=e,e=0),zot(n)&&(n=t,t=0)):zot(t)?(t=e=0,o=e.x,n=e.y):(n=t.y,o=t.x,t=e.y,e=e.x),(180*Math.atan2(n-t,o-e)/Math.PI+360)%360},Jo.TAU=2*Math.PI,Jo.DEG=180/Math.PI,Jo.RAD=Math.PI/180,Jo.PHI=.5*Math.pow(5,.5)+.5,Jo.smoothStep=function(e,t,o){z_d("13.7");t=Jo.constrain((e-t)/(o-t),0,1);return t*t*t*(t*(6*t-15)+10)},Jo.unicodeToUTF=function(e){if(z_d("13.75"),e){" "!=e&&(e=e.replace(/^\s+/g,""));var t="",o="",n=e.charCodeAt(0),t=n;return 56320<=(o=e.charCodeAt(1))&&o<=57343&&(n=1024*(t-55296)+(o-56320)+65536),t=t.toString(16),o=o.toString(16),n=n.toString(16),"\\u"+t+"\\u"+o}},Jo.capitalizeFirst=function(e){return z_d("13.78"),e.charAt(0).toUpperCase()+e.slice(1)},Jo.Ajax=function(i,e,l,t){z_d("13.8");var a=new XMLHttpRequest;this.master=i,this.couple=e,this.lock=l,this.unique=t;var s=this;this.get=function(e,t){var o=zot(s.master)?"":"&master="+encodeURI(i),n=zot(s.lock)?"":"&lock="+encodeURI(l),r=s.unique?"&unique=true":"";a.open("GET",e+o+n+r,!0),a.onload=function(){200==a.status?t&&t(Jo.isJSON(a.responseText)?JSON.parse(a.responseText):a.responseText):t&&t(null,"Error: "+a.status)},a.send()},this.post=function(e,t,o,n,r){var i,l;if(l=zob(s.post,arguments,"url, data, command, extra, callback"))return l;zot(e)||(a.open("POST",e,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onload=function(){var e=a.responseText;Jo.isJSON(e)&&(s.couple&&(e=Jo.decouple(e)),e=JSON.parse(e)),r&&r(e)},Jo.isJSON(t)||(t=JSON.stringify(t)),s.couple&&(t=Jo.couple(t)),i=zot(s.master)?"":"&master="+encodeURIComponent(s.master),l=zot(s.lock)?"":"&lock="+encodeURIComponent(s.lock),e=s.unique?"&unique=true":"",o=zot(o)?"":"&command="+encodeURIComponent(o),n=zot(n)?"":"&extra="+encodeURIComponent(n),a.send("data="+encodeURIComponent(t)+i+l+o+n+e))},this.put=function(e,t,o){a.open("PUT",e,!0),a.setRequestHeader("Content-type","application/json"),a.onload=function(){o&&o(Jo.isJSON(a.responseText)?JSON.parse(a.responseText):s.http.responseText)},a.send(JSON.stringify(t))}},Jo.Noise=function(e){z_d("13.9"),zot(e)&&(e=1e6*Math.random());var t=e;this.seed=e;var E=this,S={};function o(e){var t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t}function n(e,t,o){this.dx=-t-e*S.SQUISH_2D,this.dy=-o-e*S.SQUISH_2D,this.xsb=t,this.ysb=o}function r(e,t,o,n){this.dx=-t-e*S.SQUISH_3D,this.dy=-o-e*S.SQUISH_3D,this.dz=-n-e*S.SQUISH_3D,this.xsb=t,this.ysb=o,this.zsb=n}function i(e,t,o,n,r){this.dx=-t-e*S.SQUISH_4D,this.dy=-o-e*S.SQUISH_4D,this.dz=-n-e*S.SQUISH_4D,this.dw=-r-e*S.SQUISH_4D,this.xsb=t,this.ysb=o,this.zsb=n,this.wsb=r}S.NORM_2D=1/47,S.NORM_3D=1/103,S.NORM_4D=1/30,S.SQUISH_2D=(Math.sqrt(3)-1)/2,S.SQUISH_3D=(Math.sqrt(4)-1)/3,S.SQUISH_4D=(Math.sqrt(5)-1)/4,S.STRETCH_2D=(1/Math.sqrt(3)-1)/2,S.STRETCH_3D=(1/Math.sqrt(4)-1)/3,S.STRETCH_4D=(1/Math.sqrt(5)-1)/4,S.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],S.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],S.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],S.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],S.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],S.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],S.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],S.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],S.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],S.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],S.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],S.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];for(var l,a,s,c,u,d=[],h=0;h<S.p2D.length;h+=4){for(s=S.base2D[S.p2D[h]],u=c=null,l=0;l<s.length;l+=3)u=new n(s[l],s[l+1],s[l+2]),null===c?d[h/4]=u:c.next=u,c=u;u.next=new n(S.p2D[h+1],S.p2D[h+2],S.p2D[h+3])}for(this.lookup2D=[],h=0;h<S.lookupPairs2D.length;h+=2)this.lookup2D[S.lookupPairs2D[h]]=d[S.lookupPairs2D[h+1]];var p=[];for(h=0;h<S.p3D.length;h+=9){for(s=S.base3D[S.p3D[h]],u=c=null,l=0;l<s.length;l+=4)u=new r(s[l],s[l+1],s[l+2],s[l+3]),null===c?p[h/9]=u:c.next=u,c=u;u.next=new r(S.p3D[h+1],S.p3D[h+2],S.p3D[h+3],S.p3D[h+4]),u.next.next=new r(S.p3D[h+5],S.p3D[h+6],S.p3D[h+7],S.p3D[h+8])}for(this.lookup3D=[],h=0;h<S.lookupPairs3D.length;h+=2)this.lookup3D[S.lookupPairs3D[h]]=p[S.lookupPairs3D[h+1]];var g=[];for(h=0;h<S.p4D.length;h+=16){for(s=S.base4D[S.p4D[h]],u=c=null,l=0;l<s.length;l+=5)u=new i(s[l],s[l+1],s[l+2],s[l+3],s[l+4]),null===c?g[h/16]=u:c.next=u,c=u;u.next=new i(S.p4D[h+1],S.p4D[h+2],S.p4D[h+3],S.p4D[h+4],S.p4D[h+5]),u.next.next=new i(S.p4D[h+6],S.p4D[h+7],S.p4D[h+8],S.p4D[h+9],S.p4D[h+10]),u.next.next.next=new i(S.p4D[h+11],S.p4D[h+12],S.p4D[h+13],S.p4D[h+14],S.p4D[h+15])}for(this.lookup4D=[],h=0;h<S.lookupPairs4D.length;h+=2)this.lookup4D[S.lookupPairs4D[h]]=g[S.lookupPairs4D[h+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);var f=new Uint8Array(256);for(h=0;h<256;h++)f[h]=h;for((e=new Uint32Array(1))[0]=t,e=o(o(o(e))),h=255;0<=h;h--)e=o(e),(a=new Uint32Array(1))[0]=(e[0]+31)%(h+1),a[0]<0&&(a[0]+=h+1),this.perm[h]=f[a[0]],this.perm2D[h]=14&this.perm[h],this.perm3D[h]=this.perm[h]%24*3,this.perm4D[h]=252&this.perm[h],f[a[0]]=f[h];this.simplex1D=function(e){return E.simplex2D(e,1)},this.simplex2D=function(e,t){var o=(e+t)*S.STRETCH_2D,n=[e+o,t+o],r=n[0],o=n[1],n=[Math.floor(r),Math.floor(o)],i=n[0],l=n[1],n=(i+l)*S.SQUISH_2D,t=[e-(i+n),t-(l+n)],a=t[0],s=t[1],n=[r-i,o-l],t=n[0],r=n[1],o=t+r,n=new Uint32Array(4);n[0]=t-r+1,n[1]=o,n[2]=o+r,n[3]=o+t;for(var n=n[0]|n[1]<<1|n[2]<<2|n[3]<<4,c=E.lookup2D[n],u=0;void 0!==c;){var d,h=[a+c.dx,s+c.dy],p=h[0],g=h[1],f=2-p*p-g*g;0<f&&(h=(d=[i+c.xsb,l+c.ysb])[0],d=d[1],d=E.perm2D[E.perm[255&h]+d&255],u+=(f*=f)*f*(S.gradients2D[d]*p+S.gradients2D[d+1]*g)),c=c.next}return u*S.NORM_2D},this.simplex3D=function(e,t,o){var n=(e+t+o)*S.STRETCH_3D,r=[e+n,t+n,o+n],i=r[0],l=r[1],n=r[2],r=[Math.floor(i),Math.floor(l),Math.floor(n)],a=r[0],s=r[1],c=r[2],r=(a+s+c)*S.SQUISH_3D,o=[e-(a+r),t-(s+r),o-(c+r)],u=o[0],d=o[1],h=o[2],r=[i-a,l-s,n-c],o=r[0],i=r[1],l=r[2],n=o+i+l,r=new Uint32Array(7);r[0]=i-l+1,r[1]=o-i+1,r[2]=o-l+1,r[3]=n,r[4]=n+l,r[5]=n+i,r[6]=n+o;for(var r=r[0]|r[1]<<1|r[2]<<2|r[3]<<3|r[4]<<5|r[5]<<7|r[6]<<9,p=E.lookup3D[r],g=0;void 0!==p;){var f,m,z=[u+p.dx,d+p.dy,h+p.dz],y=z[0],b=z[1],v=z[2],w=2-y*y-b*b-v*v;0<w&&(f=(m=[a+p.xsb,s+p.ysb,c+p.zsb])[0],z=m[1],m=m[2],m=E.perm3D[E.perm[E.perm[255&f]+z&255]+m&255],g+=(w*=w)*w*(S.gradients3D[m]*y+S.gradients3D[m+1]*b+S.gradients3D[m+2]*v)),p=p.next}return g*S.NORM_3D},this.simplex4D=function(e,t,o,n){var r=(e+t+o+n)*S.STRETCH_4D,i=[e+r,t+r,o+r,n+r],l=i[0],a=i[1],s=i[2],r=i[3],i=[Math.floor(l),Math.floor(a),Math.floor(s),Math.floor(r)],c=i[0],u=i[1],d=i[2],h=i[3],i=(c+u+d+h)*S.SQUISH_4D,p=e-(c+i),g=t-(u+i),f=o-(d+i),m=n-(h+i),n=[l-c,a-u,s-d,r-h],i=n[0],l=n[1],a=n[2],s=n[3],r=i+l+a+s,n=new Uint32Array(11);n[0]=a-s+1,n[1]=l-a+1,n[2]=l-s+1,n[3]=i-l+1,n[4]=i-a+1,n[5]=i-s+1,n[6]=r<<6,n[7]=r+s,n[8]=r+a,n[9]=r+l,n[10]=r+i;for(var n=n[0]|n[1]<<1|n[2]<<2|n[3]<<3|n[4]<<4|n[5]<<5|n[6]<<6|n[7]<<8|n[8]<<11|n[9]<<14|n[10]<<17,z=E.lookup4D[n],y=0;void 0!==z;){var b,v,w,C=[p+z.dx,g+z.dy,f+z.dz,m+z.dw],x=C[0],k=C[1],T=C[2],A=C[3],P=2-x*x-k*k-T*T-A*A;0<P&&(b=(w=[c+z.xsb,u+z.ysb,d+z.zsb,h+z.wsb])[0],v=w[1],C=w[2],w=w[3],w=E.perm4D[E.perm[E.perm[E.perm[255&b]+v&255]+C&255]+w&255],y+=(P*=P)*P*(S.gradients4D[w]*x+S.gradients4D[w+1]*k+S.gradients4D[w+2]*T+S.gradients4D[w+3]*A)),z=z.next}return y*S.NORM_4D}},void 0!==createjs&&(Jo.Point=function(e,t,o,n,r,i,l,a,s,c){z_d("13.45"),zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=0),zot(i)&&(i=0),zot(l)&&(l=0),zot(a)&&(a=0),zot(s)&&(s=0),zot(c)&&(c=0),this.createjsPoint_constructor(e,t),this.type="Point",this.x=e,this.y=t,this.z=o,this.q=n,this.r=r,this.s=i,this.t=l,this.u=a,this.v=s,this.w=c,this.angle=function(e){return 180*this.createjsPoint_angle(e)/Math.PI},this.project=function(e,t){return this.createjsPoint_project(e*Math.PI/180,t)}},Jo.extend(Jo.Point,createjs.Point,["angle","project"],"createjsPoint")),Jo.Bezier=function(e,t,o,n){z_d("13.47"),this.a=e,this.b=t,this.c=o,this.d=n,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var r=this.x(0),i=this.y(0),l=0,a=1;a<=this.len;a+=1){var s=this.x(.01*a),c=this.y(.01*a),u=r-s,d=i-c;l+=Math.sqrt(u*u+d*d),this.arcLengths[a]=l,r=s,i=c}this.length=l},Jo.Bezier.prototype={map:function(e){for(var t=e*this.arcLengths[this.len],o=0,n=this.len,r=0;o<n;)r=o+((n-o)/2|0),this.arcLengths[r]<t?o=r+1:n=r;this.arcLengths[r]>t&&r--;e=this.arcLengths[r];return e===t?r/this.len:(r+(t-e)/(this.arcLengths[r+1]-e))/this.len},mx:function(e){return this.x(this.map(e))},my:function(e){return this.y(this.map(e))},x:function(e){return(1-e)*(1-e)*(1-e)*this.a.x+(1-e)*(1-e)*3*e*this.b.x+3*(1-e)*(e*e)*this.c.x+e*e*e*this.d.x},y:function(e){return(1-e)*(1-e)*(1-e)*this.a.y+(1-e)*(1-e)*3*e*this.b.y+3*(1-e)*(e*e)*this.c.y+e*e*e*this.d.y}},Jo.Boundary=function(e,t,o,n){z_d("13.46"),zot(e.x)||(n=e.height,o=e.width,t=e.y,e=e.x),zot(e)||zot(t)||zot(o)||zot(n)||(this.x=e,this.y=t,this.width=o,this.height=n,this.contract=function(e,t,o,n){return zot(e)||(zot(t)&&(t=e),zot(o)?o=2*e:o+=e,zot(n)?n=2*t:n+=t,this.x+=e,this.y+=t,this.width-=o,this.height-=n),this})},Jo.GradientColor=function(e,t,o,n,r,i){if(z_d("13.465"),this.type="GradientColor",this.colors=zot(e)?["black","white"]:e,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),1==this.colors.length&&this.colors.push(this.colors[0]),this.ratios=zot(t)?0:t,!Array.isArray(this.ratios)){this.angle=this.ratios,this.ratios=[];for(var l=0;l<this.colors.length;l++)this.ratios.push(l/(this.colors.length-1))}!zot(o)&&(zot(n)||zot(r)||zot(i))?(this.angle=o,o=null):zot(this.angle)&&zot(o)&&zot(n)&&zot(r)&&zot(i)?this.angle=0:(this.x0=zot(o)?0:o,this.y0=zot(n)?0:n,this.x1=zot(r)?0:r,this.y1=zot(i)?100:i)},Jo.RadialColor=function(e,t,o,n,r,i,l,a){if(z_d("13.466"),this.type="RadialColor",this.colors=zot(e)?["black","white"]:e,Array.isArray(this.colors)||(this.colors=[this.colors,this.colors]),1==this.colors.length&&this.colors.push(this.colors[0]),this.ratios=t,!Array.isArray(this.ratios)){this.ratios=[];for(var s=0;s<this.colors.length;s++)this.ratios.push(s/(this.colors.length-1))}this.x0=o,this.y0=n,this.r0=r,this.x1=i,this.y1=l,this.r1=a},Jo.BitmapColor=function(e,t,o){z_d("13.467"),this.type="BitmapColor","string"==typeof e&&WW.asset&&(e=WW.asset(e)),"Bitmap"!=e.type&&e.bitmap&&(e=e.bitmap),this.image="Bitmap"==e.type?e.image:e,this.repetition=t,this.matrix=o},Jo.Damp=function(e,t){z_d("14");var o;if(o=zob(Jo.Damp,arguments,"startValue, damp",this))return o;this.lastValue=zot(e)?0:e,this.damp=zot(t)?.1:t},Jo.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},Jo.Damp.prototype.immediate=function(e){return this.lastValue=e,this},Jo.Proportion=function(t,o,n,r,i,l,e,a,s){var c,u;if(c=zob(Jo.Proportion,arguments,"baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp, clampMin, clampMax",this))return c;z_d("15"),zot(n)&&(n=0),zot(r)&&(r=1),zot(i)&&(i=1),zot(l)&&(l=!1),zot(e)&&(e=!0),zot(a)&&(a=e),zot(s)&&(s=e),this.convert=function(e){if(zot(e)&&(e=t),!isNaN(e)&&o-t!=0)return a&&(e=Math.max(e,t)),s&&(e=Math.min(e,o)),u=(e-t)/(o-t),u=0<i?n+(r-n)*u:r-(r-n)*u,l&&(u=Math.round(u)),u}},Jo.ProportionDamp=function(e,t,o,n,r,i,l,a,s,c){var u;if(u=zob(Jo.ProportionDamp,arguments,"baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp, clampMin, clampMax",this))return u;z_d("16"),zot(o)&&(o=0),zot(n)&&(n=1),zot(r)&&(r=.1),zot(i)&&(i=1),zot(l)&&(l=!1),zot(a)&&(a=!0),zot(s)&&(s=a),zot(c)&&(c=a),this.damp=r;var d,h,p,g=this,f=0,m=e,f=o,z=setInterval(y,20);function y(){isNaN(m)||t-e==0||(s&&(m=Math.max(m,e)),c&&(m=Math.min(m,t)),d=(m-e)/(t-e),h=n-o,f+=((p=0<i?o+h*d:n-h*d)-f)*g.damp)}this.immediate=function(e){return g.convert(e),y(),f=p,l&&(f=Math.round(f)),g},this.immediateValue=function(e){return f=e,g},this.convert=function(e){return m=e,l?Math.round(f):f},this.dispose=function(){return clearInterval(z),!0}},Jo.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var o=this.objects=[],n=this.values=[];this.type="Dictionary",this.add=function(e,t){zot(e)||(zot(t)&&(t=!0),this.unique&&this.remove(e),o.push(e),n.push(t),this.length++)},this.at=function(e){if(!zot(e)){e=o.indexOf(e);return-1<e?n[e]:null}},this.remove=function(e){if(zot(e))return!1;e=o.indexOf(e);return-1<e&&(o.splice(e,1),n.splice(e,1),this.length--,!0)},this.clear=function(){return o=this.objects=[],n=this.values=[],this.length=null,this},this.dispose=function(){return n=o=null,!(this.length=null)}},Jo.Hierarchy=function(t,s){z_d("17.5");var i,o=this;function n(e){var r=[],i=[];return function o(e,n){Jo.loop(e,function(e,t){r.push(t.obj),i.push(e),t.open&&o(t.list,n+1)})}(e,0),[r,i]}function r(a,s,c,u){var d=0,e={};return function r(e,i,l){Jo.loop(e,function(e,t){var o,n;"removeItem"==a&&e==c||("insertBefore"==a&&e==c&&(d=h(i,d,l,s,u)),o={},n=t.list,t.list=o,t.opened=!1,t.open=!1,(t=i["id"+d]=t).obj.type&&"TabsButton"==t.obj.type&&(t.obj=t.obj.text),d++,r(n,o,l+1),"insertAfter"==a&&e==c&&(d=h(i,d,l,s,u)))})}(o.data,e,0),i=d,e}function h(t,o,n,e,r){var i;return r?(i={},Array.isArray(e)&&(e=e[0]),t["id"+o]={obj:e,level:n,open:!1,opened:!1,list:i},o++,Array.isArray(r)||(r=[r]),Jo.loop(r,function(e){i["id"+o]={obj:e,level:n+1,open:!1,opened:!1,list:{}},o++})):(Array.isArray(e)||(e=[e]),Jo.loop(e,function(e){t["id"+o]={obj:e,level:n,open:!1,opened:!1,list:{}},o++})),o}zot(t)||(zot(s)&&(s=!1),o.processSimple=function(l){var a=0,e={};return function n(e,r,i,o){var t;zot(e)||(l=e),l.constructor=={}.constructor?(l.list&&(l=(t=l).list),o&&t&&Jo.loop(t,function(e,t){"list"!=e&&(o[e]=t)}),Jo.loop(l,function(e,t){var o={},e=r["id"+a]={obj:e,level:i,open:s,opened:!1,list:o};a++,n(t,o,i+1,e)})):Array.isArray(l)&&Jo.loop(l,function(e){r["id"+a]={obj:e},a++})}(t,e,0),i=a,e},o.processComplex=function(e){var r=0;return function o(e,n){Jo.loop(e,function(e,t){t.level=n,zot(t.open)&&(t.open=s),zot(t.opened)&&(t.opened=!1),t.list&&o(t.list,n+1),r++})}(e,0),i=r,e},zot(t.id0)?o.data=o.processSimple(t):o.data=o.processComplex(t),o.getLinearList=function(e){return zot(e)&&(e=o.data),n(e)[0]},o.getLinearIDs=function(e){return zot(e)&&(e=o.data),n(e)[1]},o.getData=function(n){var r;return function o(e){Jo.loop(e,function(e,t){return e==n?r=t:void o(t.list)})}(o.data),r},o.getNextSibling=function(n){var r,i;return function o(e){Jo.loop(e,function(e,t){return!i&&r?i=e:void(e==n?r=t:o(t.list))})}(o.data),i},o.getPrevSibling=function(r){var i,l=[];return function o(e,n){Jo.loop(e,function(e,t){return e==r?i=l[n]||l[n-1]:(l[n]=e,void o(t.list,n+1))})}(o.data,0),i},o.insertBefore=function(e,t,o){return r("insertBefore",e,t,o)},o.insertAfter=function(e,t,o){return r("insertAfter",e,t,o)},o.removeItem=function(e){return r("removeItem",null,e)},o.replaceItem=function(e,t){return o.getData(t).obj=e,r("replaceItem")},o.getParent=function(r){return function o(e,n){e=Jo.loop(e,function(e,t){return e==r?(--i,n):t.list&&!Jo.isEmpty(t.list)?o(t.list,e):void 0});if(!0!==e)return e}(o.data)},Object.defineProperty(o,"length",{get:function(){return i},set:function(){zon&&zogy("Hierarchy() - length is read only")}}))},Jo.Pick=function(e){Jo.pickCheck||(z_d("17.6"),Jo.pickCheck=!0),this.choices=e,this.num=function(e){for(var t=[],o=0;o<e;o++)t.push(Jo.Pick.choose(this));return this.choices=Jo.Pick.series(t),this};var r=this;this.loop=function(e,t){for(var o,n=0;n<e;n++)if(void 0!==(o=t(Jo.Pick.choose(r),n,e)))return o}},Jo.Pick.prototype.type="Pick",Jo.Pick.series=function(){return Jo.pickCheck||(z_d("17.6"),Jo.pickCheck=!0),Jo.series.apply(null,arguments)},Jo.Pick.rand=function(e,t,o,n){return Jo.pickCheck||(z_d("17.6"),Jo.pickCheck=!0),Jo.rand(e,t,o,n)},Jo.Pick.choose=function(e,t,o){if(Jo.pickCheck||(z_d("17.6"),Jo.pickCheck=!0),null==t&&(t=!0),null==e)return e;if("Pick"==e.type||t){var n,t=e.choices||e;return Array.isArray(t)?(n=t[Math.floor(Math.random()*t.length)],Jo.Pick.choose(n)):t.constructor==={}.constructor?zot(t.noPick)?zot(t.max)?t:(zot(t.integer)&&(t.integer=!1),n=Jo.Pick.rand(t.min,t.max,t.integer,t.negative)):t.noPick:t instanceof Function?(null==t.count?t.count=0:t.count++,Jo.Pick.choose(t(o,!0))):e}return e},Jo.Pick.getMinMax=function(e){return zot(e.min)||zot(e.max)?Array.isArray(e)?Jo.arrayMinMax(e):"series"==e.type?Jo.arrayMinMax(e.array):{min:null,max:null}:e},Jo.scrollX=function(e,t){return z_d("18"),Jo.abstractScroll("X","Left",e,t)},Jo.scrollY=function(e,t){return z_d("19"),Jo.abstractScroll("Y","Top",e,t)},Jo.abstractScroll=function(e,t,o,n){z_d("20");var r,i,l,a,s,c=$o(n),u="X"==e?"Y":"X";return zot(o)?document.documentElement&&document.documentElement["scroll"+t]||document.body["scroll"+t]:(zot(n)?WW.scrollTo(Jo["scroll"+u](),o):((c=n*("s"==c?1e3:1))<50&&(c=50),r=c/50,i=Jo["scroll"+e](),l=(o-i)/r,a=0,s=setInterval(function(){a++,i+=l,WW.scrollTo(Jo["scroll"+u](),i),r<=a&&(WW.scrollTo(Jo["scroll"+u](),o),clearInterval(s))},50)),o)},Jo.windowWidth=function(){z_d("21");var e,t=isNaN(WW.innerWidth)?WW.clientWidth:WW.innerWidth,o=isNaN(WW.innerHeight)?WW.clientHeight:WW.innerHeight;return!Jo.mobile()||zot(WW.orientation)||WW.parent||(o<t&&90!=Math.abs(WW.orientation)||t<o&&90==Math.abs(WW.orientation))&&(e=t,t=o,o=e),WW.zdf&&WW.zdf.swapRotation?o:t},Jo.windowHeight=function(){z_d("22");var e,t=isNaN(WW.innerWidth)?WW.clientWidth:WW.innerWidth,o=isNaN(WW.innerHeight)?WW.clientHeight:WW.innerHeight;return!Jo.mobile()||zot(WW.orientation)||WW.parent||(o<t&&90!=Math.abs(WW.orientation)||t<o&&90==Math.abs(WW.orientation))&&(e=t,t=o,o=e),WW.zdf&&WW.zdf.swapRotation?t:o},Jo.browserZoom=function(){if(Jo.zimBZ)return zot(Jo.zimBZA)?Jo.decimals((WW.devicePixelRatio||1)/Jo.zimBZ1,2):Jo.zimBZA;if(z_d("22.2"),Jo.zimBZ=!0,void 0===e){if(!WW.zdf)return Jo.zimBZA=1;var e=WW.zdf}if(!e.retina)return Jo.zimBZA=1;Jo.zimBZ1=WW.devicePixelRatio||1},Jo.getQueryString=function(e){if(z_d("22.5"),zot(e)&&(e=location.search.replace("?","")),""==e)return{};for(var t=e.split("&"),o={},n=0;n<t.length;n++){var r=t[n].split("=");void 0===o[r[0]]?o[r[0]]=decodeURIComponent((r[1]+"").replace(/\+/g,"%20")):"string"==typeof o[r[0]]?o[r[0]]=[o[r[0]],decodeURIComponent((r[1]+"").replace(/\+/g,"%20"))]:o[r[0]].push(decodeURIComponent((r[1]+"").replace(/\+/g,"%20")))}return o},Jo.swapHTML=function(e,t){return z_d("17.2"),Jo.swapProperties("innerHTML",zid(e),zid(t))},Jo.urlEncode=function(e){return z_d("23"),e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},Jo.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},Jo.setCookie=function(e,t,o){if(z_d("25"),!zot(e)&&!zot(t)){var n=o?((n=new Date).setTime(n.getTime()+24*o*60*60*1e3),"; expires="+n.toGMTString()):"";return document.cookie=e+"="+escape(t)+n+"; path=/",!0}},Jo.getCookie=function(e){z_d("26");for(var t,o=document.cookie.split(/;\s*/),n=new Array,r=0;r<o.length;r++)n[(t=o[r].split("="))[0]]=t[1];if(void 0!==n[e])return unescape(n[e])},Jo.deleteCookie=function(e){return z_d("27"),!zot(Jo.getCookie(e))&&(Jo.setCookie(e,"",-1),!0)},null==createjs)return zon&&zogr("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),Jo;function v(e,n,r,t,i,o,l,a,s,c,u,d,h,p,g,f){var m;z_d("50.964"),zot(n)&&(n=null!=e.width?e.width:500),zot(r)&&(r=null!=e.radius?e.height:500),zot(c)&&(c=null!=e.rate?e.rate:1),zot(u)&&(u=null!=e.version?e.version:"#version 300 es"),m=""==u?"attribute vec3 vertexPosition;\nvoid main() {\n\tgl_Position = vec4(vertexPosition, 1.0);\n}":"in vec3 vertexPosition;\nvoid main() {\n\tgl_Position = vec4(vertexPosition, 1.0);\n}",zot(o)&&(o=null!=e.vertex?e.vertex:m),m=""==u?"void main() {\n\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}":"out vec4 fragColor;\nvoid main() {\n\tfragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}",zot(t)&&(t=null!=e.fragment?e.fragment:m),zot(i)&&(i=null!=e.uniforms?e.uniforms:null),zot(l)&&(l=null==e.dynamic||e.dynamic),zot(a)&&(a=null!=e.preCall?e.preCall:null),zot(s)&&(s=null!=e.postCall?e.postCall:null),zot(d)&&(d=null!=e.canvas?e.canvas:null),zot(h)&&(h=null!=e.vertexPosition?e.vertexPosition:"vertexPosition"),zot(p)&&(p=null==e.strip||e.strip),zot(g)&&(g=null!=e.log?e.log:null),zot(d)&&((d=document.createElement("canvas")).setAttribute("width",n),d.setAttribute("height",r),d.setAttribute("id","shaderCanvas")),o=u+"\nprecision mediump float;\n\n// ZIM Default Uniforms\nprecision mediump float;\nuniform vec3 iResolution;\nuniform float iTime;\nuniform float iTimeDelta;\nuniform float iFrameRate;\nuniform float iFrame;\nuniform vec4 iMouse;\nuniform vec4 iDate;\nuniform float iChange;\n\n"+o;e=(t=u+"\nprecision mediump float;\n\n// ZIM Default Uniforms\nuniform vec3 iResolution;\nuniform float iTime;\nuniform float iTimeDelta;\nuniform float iFrameRate;\nuniform float iFrame;\nuniform vec4 iMouse;\nuniform vec4 iDate;\nuniform float iChange;\n"+t).match(/(void |.*)mainImage\(\s*(out\s*vec4\s*([^,]*)),\s*in\s*(vec[234]\s*[^)\s]*)\s*\)/i);t=t.replace(/(void |.*)mainImage\(\s*(out\s*vec4\s*[^,]*),\s*in\s*(vec[234]\s*[^)\s]*)\s*\)/i,"$2;\nvoid main()"),e&&e[4]&&(u="main() {\n\t"+e[4]+" = gl_FragCoord.xy; // ZIM shadertoy adjust",t=(t=t.replace(/main\(\)\s*{/i,u)).replace(/main\(\)\s*(\n|\r)\s*{/i,u),e&&e[3]&&(t=t.replace(/gl_FragColor/g,e[3]))),g&&(zogd("VERTEX SHADER:\n\n"+o),zogd("FRAGMENT SHADER:\n\n"+t)),zot(d)&&(d=document.createElement("canvas")).setAttribute(id,"shaderCanvas_"+Jo.makeID()),zot(i)||"Uniforms"!=i.type&&(i=new Jo.Uniforms(i)),f.dynamic=l,f.rate=zik(c),f.change=0;var z=d.getContext("webgl2");z.enable(z.CULL_FACE),z.cullFace(z.BACK),z.frontFace(z.CCW),z.clearColor(1,1,1,1),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT);var y=function(e,t,o,n){zot(n)&&(n=!0);e||console.error("This browser doesn't support WebGL");e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);var r=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,t),e.shaderSource(i,o),e.compileShader(r),e.compileShader(i);o={vertexStatus:e.getShaderParameter(r,e.COMPILE_STATUS)||e.getShaderInfoLog(r),fragmentStatus:e.getShaderParameter(i,e.COMPILE_STATUS)||e.getShaderInfoLog(i)};if(!0!==o.vertexStatus||!0!==o.fragmentStatus)throw new Error("Failed to compile. "+JSON.stringify(o,null,2));o=e.createProgram();e.attachShader(o,r),e.attachShader(o,i),e.linkProgram(o);i=e.getProgramParameter(o,e.LINK_STATUS)||e.getProgramInfoLog(o);if(!0!==i)throw new Error("Linking filed:\n"+i);if(n){e.validateProgram(o);e=e.getProgramParameter(o,e.VALIDATE_STATUS)||e.getProgramInfoLog(o);if(!0!==e)throw new Error("Validation failed.\n"+e)}return o}(z,o,t);a&&"function"==typeof a&&a(y,z,d),z.useProgram(y);var b=[];s&&"function"==typeof s&&s(y,z,d,b),p?0==b.length&&(b=[1,1,-1,1,1,-1,-1,-1]):0==b.length&&(b=[-1,-1,1,1,-1,1,1,1,-1,-1,1,-1]);s=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,s),z.bufferData(z.ARRAY_BUFFER,new Float32Array(b),z.STATIC_DRAW);h=z.getAttribLocation(y,h);function v(e,t,o,n,r,i){zot(e)&&(e="1f"),zot(t)?zogf("uniform - must have name"):z["uniform"+e](z.getUniformLocation(y,t),o,n,r,i)}z.vertexAttribPointer(h,2,z.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0),z.enableVertexAttribArray(h);var w=0;function C(e){zot(i)||(i.update(),Jo.loop(i.obj,function(e,t){var o=1;Array.isArray(t)?o=t.length:t=[t],v(o+"f",e,t[0],t[1],t[2],t[3])}));var t=new Date;v("3f","iResolution",n,r);var o=Jo.decimals(60*t.getHours()*60+60*t.getMinutes()+t.getSeconds()+t.getMilliseconds()/1e3,4);v("4f","iDate",t.getFullYear(),t.getMonth(),o),v("1f","iTime",e?Jo.decimals(e.runTime/1e3,4):0),v("1f","iChange",f.rate),v("1f","iChange",f.change+=f.rate/60),v("1f","iTimeDelta",e?Jo.decimals(e.delta/1e3,4):0),v("1f","iFrame",e?w++:0),v("1f","iFrameRate",Jo.decimals(createjs.Ticker.getMeasuredFPS())),f.stage&&(v("4f","iMouse",(e=f.globalToLocal(f.stage.frame.mouseX,f.stage.frame.mouseY)).x,r-e.y,x?1:0,k?1:0),k=!1),p?z.drawArrays(z.TRIANGLE_STRIP,0,4):z.drawArrays(z.TRIANGLES,0,b.length)}var x=!1,k=!1;f.on("mousedown",function(){x=!0}),f.on("pressup",function(){x=!1}),f.tap(function(){k=!0}),C();h=Jo.Ticker.add(C);return l||(Jo.Ticker.remove(h),setTimeout(C,50),f.stage&&f.stage.update()),{dynamic:l,fragment:t,vertex:o,program:y,uniforms:i,gl:z,canvas:d,update:C,setUniform:v,ticker:h}}function zt(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}var c;Jo.localToGlobal=function(e,t,o,n){if(Jo.coordinatesCheck||(z_d("50.43"),Jo.coordinatesCheck=!0),null!=e&&null!=t){t=n.call(o,e,t),o=o.stage;if(!WW.zdf){if(!o)return t;WW.zdf={stage:o,canvas:o.canvas}}return t.x/=Jo.scaX,t.y/=Jo.scaY,t}},Jo.globalToLocal=function(e,t,o,n){if(Jo.coordinatesCheck||(z_d("50.43"),Jo.coordinatesCheck=!0),null!=e&&null!=t){var r=o.stage;if(!WW.zdf){if(!r)return n.call(o,e,t);WW.zdf={stage:r,canvas:r.canvas}}return e*=Jo.scaX,t*=Jo.scaY,n.call(o,e,t)}},Jo.localToLocal=function(e,t,o,n){if(Jo.coordinatesCheck||(z_d("50.43"),Jo.coordinatesCheck=!0),null!=e&&null!=t&&null!=o){t=n.localToGlobal(e,t),n=n.stage;if(!WW.zdf){if(!n)return o.globalToLocal(t.x,t.y);WW.zdf={stage:n,canvas:n.canvas}}return o==(n=n||WW.zdf.stage)?t:t?o.globalToLocal(t.x,t.y):void 0}},Jo.displayBase=function(n){Jo.zimDBCheck||(z_d("50.432"),Jo.zimDBCheck=!0);var t,o,r,i=n;Object.defineProperty(n,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t,o;!1!==n.scaleDimensions?zot(t=this.getBounds())||0==t.width?zon&&zogy("DisplayObject() - width needs bounds set with setBounds()"):(o=e/t.width,this.scaleX=this.scaleY=o):(o=0!=n.width?n.height/n.width:0,n.setWidth(e),n.setHeight(e*o),n.drawShape())}}),Object.defineProperty(n,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t,o;!1!==n.scaleDimensions?zot(t=this.getBounds())||0==t.height?zon&&zogy("DisplayObject() - height needs bounds set with setBounds()"):(o=e/t.height,this.scaleX=this.scaleY=o):(o=0!=n.height?n.width/n.height:0,n.setHeight(e),n.setWidth(e*o),n.drawShape())}}),Object.defineProperty(n,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t;!1!==n.scaleDimensions?!zot(t=this.getBounds())&&0!=t.width||!zon?(t=e/t.width,this.scaleX=t):zogy("DisplayObject() - widthOnly needs bounds set with setBounds()"):(n.setWidth(e),n.drawShape())}}),Object.defineProperty(n,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t;!1!==n.scaleDimensions?!zot(t=this.getBounds())&&0!=t.height||!zon?(t=e/t.height,this.scaleY=t):zogy("DisplayObject() - heightOnly needs bounds set with setBounds()"):(n.setHeight(e),n.drawShape())}}),Object.defineProperty(n,"level",{enumerable:!0,get:function(){return this.parent?this.parent.getChildIndex(this):null},set:function(e){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(e,this.parent.numChildren-1)))}}),Object.defineProperty(n,"depth",{enumerable:!0,get:function(){return this._depth},set:function(e){var t;this._depth=e,zot(this.vrChannel)||(t=this.vrParallaxDistance?e*this.vrParallax*this.vrParallaxDistance:0,"left"==this.vrChannel?this.x=this.vrStartX+e+t:"right"==this.vrChannel&&(this.x=this.vrStartX-e+t))}}),Object.defineProperty(n,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(e){this.compositeOperation=e}}),i.name||Object.defineProperty(i,"name",{get:function(){return t},set:function(e){t=e,Jo.zimObjectIDs[e]=i}}),i._draggable,Object.defineProperty(i,"draggable",{get:function(){return this._draggable},set:function(e){e!=this._draggable&&(this._draggable=e,this._draggable?this.drag():this.noDrag())}}),i.on("mousedown",function(e){e&&e.nativeEvent&&e.nativeEvent.touches&&e.target.stage&&(o=e.target.stage.frame).allowDefault&&(r=!0,o.allowDefault=!1)}),i.on("pressup",function(){o&&r&&(o.allowDefault=!0)});for(var l=["hue","saturation","brightness","contrast"],a=0;a<l.length;a++)!function(){for(var o=l[a],e=0;e<2;e++)!function(){var t=0==e?"":"Batch";Object.defineProperty(i,o+t,{get:function(){return i.effects&&i.effects.multi?i.effects.multi[o]:0},set:function(e){i.effects&&i.effects.multi?i.effects.multi[o]=e:i.effect(new Jo.MultiEffect("hue"==o?e:0,"saturation"==o?e:0,"brightness"==o?e:0,"contrast"==o?e:0)),t||i.updateEffects()}})}()}()},Jo.gD=function(e){var t;Jo.zimGDCheck||(z_d("50.435"),Jo.zimGDCheck=!0),e&&(e.z_bc&&((t=e.z_bc).width=t.height=1,t.getContext&&t.getContext("2d").clearRect(0,0,1,1),delete e.z_bc),Jo.KEYFOCUS==e&&(Jo.KEYFOCUS=null),WW.KEYFOCUS==e&&(WW.KEYFOCUS=null),e.veeObj&&(e.veeObj=null),e.draggable&&e.noDrag(),e.zimTweens&&e.stopAnimate(),e.zimWire&&e.noWire(),e.zimWired&&e.noWired(),e.zimClickHoldDownEvent&&e.noHold(),e.motionController&&e.motionController.dispose(),e.transformControls&&e.transformControls.dispose(),e.zimClickDownEvent&&(e.zimClickDownEvent=null),e.zimClickUpEvent&&(e.zimClickUpEvent=null),e.physics&&e.removePhysics(),e.name&&Jo.zimObjectIDs[e.name]==e&&delete Jo.zimObjectIDs[e.name])},Jo.Stage=function(e,t,o){var n;z_d("50.44"),zot(e)||(zot(n="CANVAS"==e.tagName?e:zid(e))||(this.cjsStage_constructor(e),this.setBounds(0,0,n.width,n.height),this.type="Stage",WW.zdf||(WW.zimDefaultFrame=WW.zdf={stage:this}),o?createjs.Touch.enable(this,!0):t&&createjs.Touch.enable(this,!1),this.cache=function(e,t,o,n,r,i){var l,a;return zot(o)&&(zot(e)?zot(l=this.getBounds())||(a=0<this.borderWidth?this.borderWidth/2:0,e=l.x-a,t=l.y-a,o=l.width+2*a,n=l.height+2*a):(o=e,n=t,t=e=0)),this.cjsStage_cache(e,t,o,n,r,i),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(e){var t=e.clone();t.type="pressdown",e.target.dispatchEvent(t)},void 0,!1,void 0,!0),this.loop=function(e,t,o,n,r,i){return Jo.loop(this,e,t,o,n,r,i)},this.hitTestGrid=function(e,t,o,n,r,i,l,a,s,c,u,d){return Jo.hitTestGrid(this,e,t,o,n,r,i,l,a,s,c,u,d)},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},this.frame=WW.zdf,!createjs||createjs.stageTransformable||!WW.zdf.retina&&"undefined"==typeof exportRoot||(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(e){this.cjsStage_scaleX=e,this.cjsStage_scaleY=e,Jo.scaX=createjs.stageTransformable?1:e,Jo.scaY=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(e){this.cjsStage_scaleX=e,Jo.scaX=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(e){this.cjsStage_scaleY=e,Jo.scaY=createjs.stageTransformable?1:e}}),this.localToGlobal=function(e,t){return Jo.localToGlobal(e,t,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(e,t){return Jo.globalToLocal(e,t,this,this.cjsStage_globalToLocal)},this.localToLocal=function(e,t,o){return Jo.localToLocal(e,t,o,this)})))},Jo.extend(Jo.Stage,createjs.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),Jo.StageGL=function(e,t,o,n){var r;z_d("50.45"),zot(e)||(zot(r="CANVAS"==e.tagName?e:zid(e))||(this.cjsStageGL_constructor(e,t),this.setBounds(0,0,r.width,r.height),this.type="StageGL",WW.zdf||(WW.zdf={stage:this}),n?createjs.Touch.enable(this,!0):o&&createjs.Touch.enable(this,!1),this.cache=function(e,t,o,n,r,i){var l,a;return zot(o)&&(zot(e)?zot(l=this.getBounds())||(a=0<this.borderWidth?this.borderWidth/2:0,e=l.x-a,t=l.y-a,o=l.width+2*a,n=l.height+2*a):(o=e,n=t,t=e=0)),this.cjsStageGL_cache(e,t,o,n,r,i),this.z_bc=this.cacheCanvas,this},this.on("mousedown",function(e){var t=e.clone();t.type="pressdown",e.target.dispatchEvent(t)},void 0,!1,void 0,!0),this.loop=function(e,t,o,n,r,i){return Jo.loop(this,e,t,o,n,r,i)},this.hitTestGrid=function(e,t,o,n,r,i,l,a,s,c,u,d){return Jo.hitTestGrid(this,e,t,o,n,r,i,l,a,s,c,u,d)},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},this.frame=WW.zdf,!createjs||createjs.stageTransformable||!WW.zdf.retina&&"undefined"==typeof exportRoot||(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(e){this.cjsStage_scaleX=e,this.cjsStage_scaleY=e,Jo.scaX=createjs.stageTransformable?1:e,Jo.scaY=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(e){this.cjsStage_scaleX=e,Jo.scaX=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(e){this.cjsStage_scaleY=e,Jo.scaY=createjs.stageTransformable?1:e}}),this.localToGlobal=function(e,t){return Jo.localToGlobal(e,t,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(e,t){return Jo.globalToLocal(e,t,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(e,t,o){return Jo.localToLocal(e,t,o,this)})))},Jo.extend(Jo.StageGL,createjs.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),Jo.Container=function(e,t,o,n,r,i,l){var a;if(a=zob(Jo.Container,arguments,"a, b, c, d, style, group, inherit",this))return a;Jo.containerCheck||(z_d("50.5"),z_d("50.435"),Jo.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=i;var p=this,i=!1===r?{}:Jo.getStyle(this.type,this.group,l);zot(e)&&(e=null!=i.a?i.a:null),zot(t)&&(t=null!=i.b?i.b:null),zot(o)&&(o=null!=i.c?i.c:null),zot(n)&&(n=null!=i.d?i.d:null);n=s(e,t,o,n);function s(e,t,o,n){var r=[];return zot(e)?r=[e,t,o,n]:zot(t)?e.x?r=[e.x,e.y,e.width,e.height]:(r[0]=0,r[1]=0,r[2]=e,r[3]=e):zot(o)?(r[0]=0,r[1]=0,r[2]=e,r[3]=t):(r[0]=e,r[1]=t,r[2]=o,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}zot(e)||this.setBounds(n[0],n[1],n[2],n[3]),this.cache=function(e,t,o,n,r,i,l,a,s){if("AC"==p.type&&WW.zdf)return WW.zdf.ac("cache",arguments,p),p;if(c=zob(p.cache,arguments,"a,b,c,d,scale,options,margin,rtl,willReadFrequently"))return c;var c,u=p.getBounds();return zot(o)&&(zot(e)?zot(u)||(c=0<p.borderWidth?p.borderWidth/2:0,e=u.x-c,t=u.y-c,o=u.width+2*c,n=u.height+2*c):(o=e,n=t,t=e=0)),"Triangle"==p.type&&(e-=p.borderWidth||0,o+=p.borderWidth?2*p.borderWidth:0,t-=p.borderWidth||0,n+=p.borderWidth?2*p.borderWidth:0),zot(l)&&(l=0),p.cjsContainer_cache(e-l,t-l,o+2*l,n+2*l,r,i,a,s),u&&(0==p.width&&0<o||i&&i.adjustBounds)&&(i=p.width,p.setBounds(e,t,o,n),0!=i&&(e==u.x&&t==u.y&&o==u.width&&n==u.height||p.reg(e,t),p.hitArea=(new Jo.Shape).f(black).dr(e-l,t-l,o+2*l,n+2*l))),p.z_bc=p.canvas=p.cacheCanvas,p},this.uncache=function(){return p.cjsContainer_uncache(),p},this.childrenToBitmap=function(){var e=this.cacheCanvas,t=new Jo.Bitmap(this.cache().cacheCanvas);return e||this.uncache(),this.removeAllChildren(),t.addTo(this),this},this.sortBy=function(n,r){if(zot(n))return this;return this.sortChildren(function(e,t,o){return e[n]>t[n]?r?-1:1:e[n]<t[n]?r?1:-1:0}),this},this.normalize=function(t,o,n,r,i,l,a){var e,s,c,u,d,h;return(e=zob(p.normalize,arguments,"prop, from, from2, min, max, overflow, flip"))?e:(this.z_norm&&(zot(t)&&(t=this.z_norm.prop),zot(o)&&(o=this.z_norm.from),zot(n)&&(n=this.z_norm.from2),zot(n)&&(r=this.z_norm.min),zot(i)&&(i=this.z_norm.max),zot(l)&&(l=this.z_norm.factor),zot(a)&&(a=this.z_norm.clamp)),zot(o)||"left"==o?o="start":"right"==o?o="end":"middle"==o?o="center":"start"!=o&&"center"!=o&&"end"!=o&&(o="start"),"center"==o&&zot(n)&&(n="center"),"top"==n?n="start":"bottom"==n?n="end":"middle"==n?n="center":"start"!=n&&"center"!=n&&"end"!=n&&(n="start"),this.z_norm={prop:t,from:o,from2:n,min:r,max:i,factor:l,clamp:a},this.normalized=!0,p.saveOriginalReg=function(){p.loop(e=>{e._orX=e.regX,e._orY=e.regY})},p.resetOriginalReg=function(){p.loop(e=>{e.reg(e._orX,e._orY,!0)})},"reg"==t?(p.resetOriginalReg(),p.saveOriginalReg(),c=s=-1e7,p.loop(e=>{e._dx=e._dy=null,"center"==o?e._dx=p.width/2-e.x:"end"==o?e._dx=p.width-e.x:"start"==o&&(e._dx=0-e.x),"center"==n?e._dy=p.height/2-e.y:"start"==n?e._dy=0-e.y:"end"==n&&(e._dy=p.height-e.y),e.reg(e._dx,e._dy,!0),s=Math.max(s,Math.abs(e._orX-e._dx)),c=Math.max(c,Math.abs(e._orY-e._dy))}),p.loop(e=>{e.ratio=1-Math.sqrt(Math.pow(e._orX-e._dx,2)+Math.pow(e._orY-e._dy,2))/Math.sqrt(Math.pow(s,2)+Math.pow(c,2)),-1==l&&(e.ratio=1-e.ratio),a&&(e.ratio=Jo.constrain(e.ratio,0,1))})):((zot(r)||zot(i))&&(h=-(d=1e9),p.loop(e=>{zot(r)&&e[t]<d&&(d=e[t]),zot(i)&&e[t]>h&&(h=e[t])}),zot(r)&&(r=d),zot(i)&&(i=h)),"start"==o?u=[0,1,-1]:"end"==o&&(u=[0,1,1]),"center"==o&&(u=[-1,1,-1]),p.proportion=new Jo.Proportion(r,i,u[0],u[1],u[2],!1,a),p.loop(function(e){e.ratio=Math.abs(p.proportion.convert(e[t])),"center"==o&&(e.ratio=1-e.ratio)})),this)};n=WW.zdf||1;createjs&&!createjs.stageTransformable&&n.retina&&(this.localToGlobal=function(e,t){return Jo.localToGlobal(e,t,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(e,t){return Jo.globalToLocal(e,t,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(e,t,o){return Jo.localToLocal(e,t,o,this)}),this.setBounds=function(e,t,o,n){n=s(e,t,o,n);return p.cjsContainer_setBounds(n[0],n[1],n[2],n[3]),p.width,p},this.getBounds=function(e){return e?p.boundsToGlobal(null,null,null,e):p.cjsContainer_getBounds()},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},Jo.displayBase(p),!1!==r&&Jo.styleTransforms(this,i),this.clone=function(e){if("AC"==this.type&&WW.zdf)return zon&&zogy("ZIM asset() - cannot clone lazy-loaded asset - use Frame() assets parameter or loadAssets() method"),WW.zdf.ac("clone",arguments,this),this;var t=this.getBounds();return zot(t)&&(t={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new Jo.Container(t.x,t.y,t.width,t.height,r,this.group,l)),e)},this.hasProp=function(e){return!zot(this[e])||Object.prototype.hasOwnProperty.call(this,e)}},Jo.Container.prototype.dispose=function(e){return function e(t,o){t&&Jo.gD(t);!o&&t&&t.dispose&&t.dispose!==Jo.Container.prototype.dispose&&t.dispose(null,null,!0);if(t&&t.addChild&&(t.dispatchEvent("removed"),t.removeAllEventListeners(),t.numChildren))for(var n=t.numChildren-1;0<=n;n--)e(t.getChildAt(n));t&&t.parent&&t.parent.removeChild(t)}(this,e),!0},Jo.Container.prototype.specialColor=function(e,t,o,n){if("GradientColor"==t.type){if(!zot(t.angle)){if(!o.width&&zot(n))return void(e.style=t.colors[0]);var r,i,l,a,s,c,u,d=n||o.getBounds();t.angle+=36e6,t.angle%=360,"Circle"==o.type?(l=d.width/2*Math.cos(t.angle*Jo.RAD),a=d.width/2*Math.sin(t.angle*Jo.RAD),t.x0=-l,t.y0=-a,t.x1=l,t.y1=a):(u=t.angle%90,r=(s=d.width*Math.sin(u*Jo.RAD))*Math.sin(u*Jo.RAD),i=-s*Math.cos(u*Jo.RAD),c=d.height*Math.sin(u*Jo.RAD),l=d.width+c*Math.cos(u*Jo.RAD),a=c*Math.sin(u*Jo.RAD),c=-(s=d.height*Math.sin(u*Jo.RAD))*Math.cos(u*Jo.RAD),u=d.height-s*Math.sin(u*Jo.RAD),0<=t.angle&&t.angle<90?(t.x0=d.x+r,t.y0=d.y+i,t.x1=d.x+l,t.y1=d.y+a):90<=t.angle&&t.angle<180?(t.x0=d.x+r,t.y0=d.y+i,t.x1=d.x+c,t.y1=d.y+u):(180<=t.angle&&t.angle<270?(t.x0=d.x+l,t.y0=d.y+a):(t.x0=d.x+c,t.y0=d.y+u),t.x1=d.x+r,t.y1=d.y+i))}e.linearGradient(t.colors,t.ratios,t.x0,t.y0,t.x1,t.y1)}else if("RadialColor"==t.type){if(zot(t.x0)&&zot(n)){if(!o.width)return void(e.style=t.colors[0]);d=n||o.getBounds();t.r0=0,"Circle"==o.type?(t.x0=0,t.y0=0,t.r1=d.width/2):(t.x0=d.x+d.width/2,t.y0=d.y+d.height/2,t.r1=Math.sqrt(Math.pow(d.width/2,2)+Math.pow(d.height/2,2))),t.x1=t.x0,t.y1=t.y0}e.radialGradient(t.colors,t.ratios,t.x0,t.y0,t.r0,t.x1,t.y1,t.r1)}else"BitmapColor"==t.type&&e.bitmap(t.image,t.repetition,t.matrix)},Jo.extend(Jo.Container,createjs.Container,["cache","uncache","setBounds","getBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),zimify(Jo.Container.prototype),Jo.Shape=function(e,t,o,n,r,i,l,a,s){if(c=zob(Jo.Shape,arguments,"a, b, c, d, graphics, optimize, style, group, inherit",this))return c;z_d("50.6"),this.cjsShape_constructor(r),this.type="Shape",this.group=a;var c=!1===l?{}:Jo.getStyle(this.type,this.group,s),d=this;zot(e)&&(e=null!=c.a?c.a:null),zot(t)&&(t=null!=c.b?c.b:null),zot(o)&&(o=null!=c.c?c.c:null),zot(n)&&(n=null!=c.d?c.d:null),zot(r)&&(r=null!=c.graphics?c.graphics:null),zot(i)&&(i=null!=c.optimize&&c.optimize);n=u(e,t,o,n);function u(e,t,o,n){var r=[];return zot(e)?r=[e,t,o,n]:zot(t)?e.x?r=[e.x,e.y,e.width,e.height]:(r[0]=0,r[1]=0,r[2]=e,r[3]=e):zot(o)?(r[0]=0,r[1]=0,r[2]=e,r[3]=t):(r[0]=e,r[1]=t,r[2]=o,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}if(zot(e)||this.setBounds(n[0],n[1],n[2],n[3]),!i)for(var h=["mt","lt","a","at","bt","ct","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","pg","p"],p=0;p<h.length;p++)!function(){var e=p;d[h[e]]=function(){return("ct"==h[e]?d.graphics.curveTo:d.graphics[h[e]]).apply(d.graphics,arguments),d}}();Object.defineProperty(d,"command",{get:function(){return d.graphics.command},set:function(){}}),this.cache=function(e,t,o,n,r,i,l,a,s){if(c=zob(d.cache,arguments,"a,b,c,d,scale,options,margin,rtl,willReadFrequently"))return c;var c,u=d.getBounds();return zot(o)&&(zot(e)?zot(u)||(c=0<d.borderWidth?d.borderWidth/2:0,e=u.x-c,t=u.y-c,o=u.width+2*c,n=u.height+2*c):(o=e,n=t,t=e=0)),zot(l)&&(l=0),d.cjsShape_cache(e-l,t-l,o+2*l,n+2*l,r,i,a,s),u&&i&&i.adjustBounds&&(e!=u.x||t!=u.y||o!=u.width||n!=u.height)&&(d.setBounds(e,t,o,n),d.reg(e,t),d.hitArea=(new Jo.Shape).f(black).dr(e-l,t-l,o+2*l,n+2*l)),d.z_bc=d.canvas=d.cacheCanvas,d},this.setBounds=function(e,t,o,n){n=u(e,t,o,n);return this.cjsShape_setBounds(n[0],n[1],n[2],n[3]),this.width,this},!(this.getBounds=function(e){return e?d.boundsToGlobal(null,null,null,e):d.cjsShape_getBounds()})!==l&&Jo.styleTransforms(this,c),this.clone=function(e){zot(e)&&(e=!0);var t=this.getBounds();zot(t)&&(t={x:null,y:null,width:null,height:null});t=d.cloneProps(new Jo.Shape(t.x,t.y,t.width,t.height,r,l,a,s));return t.graphics=e?d.graphics.clone():d.graphics,t};c=WW.zdf||1;createjs&&!createjs.stageTransformable&&c.retina&&(this.localToGlobal=function(e,t){return Jo.localToGlobal(e,t,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(e,t){return Jo.globalToLocal(e,t,this,this.cjsShape_globalToLocal)},this.localToLocal=function(e,t,o){return Jo.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||Object.prototype.hasOwnProperty.call(this,e)},Jo.displayBase(d),this.dispose=function(){Jo.gD(this),this.graphics.c(),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},Jo.extend(Jo.Shape,createjs.Shape,["cache","clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),zimify(Jo.Shape.prototype),Jo.Bitmap=function(a,g,f,m,z,t,o,e,n){if(r=zob(Jo.Bitmap,arguments,"image, width, height, left, top, scale, style, group, inherit",this))return r;z_d("50.7"),this.group=e;var r=!1===o?{}:Jo.getStyle("Bitmap",this.group,n);zot(t)&&(t=null!=r.scale?r.scale:1),zot(g)&&(g=null!=r.width?r.width:a?a.width:100),zot(f)&&(f=null!=r.height?r.height:a?a.height:100),zot(m)&&(m=null!=r.left?r.left:0),zot(z)&&(z=null!=r.top?r.top:0);var i,l,s,e=!1,c=a;zot(a)||a.uncache&&(e=!0,i=a.cacheCanvas,s=(l=a).getBounds(),a.cache(m,z,g,f,t),this.z_bc=a=a.cacheCanvas),this.cjsBitmap_constructor(a),l&&!i&&l.uncache(),s&&l.setBounds(s.x,s.y,s.width,s.height);var y=this;this.type="Bitmap",zot(g)||zot(f)||this.setBounds(0,0,g*t,f*t),this.cacheScale=t,this.drawImageData=function(e,t,o,n,r,i){var l;zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=g),zot(i)&&(i=f),y.proxyCanvas||((l=y.proxyCanvas=document.createElement("canvas")).setAttribute("width",g),l.setAttribute("height",f),y.proxyContext=l.getContext("2d"),a=c=y.image=l),y.proxyContext&&y.proxyContext.putImageData(y.imageData,e,t,o,n,r,i)},WW.zdf&&(WW.zdf.canvas.getContext("2d")?this.imageData=WW.zdf.canvas.getContext("2d").createImageData(g,f):this.imageData=document.createElement("canvas").getContext("2d").createImageData(g,f),zot(a)&&y.drawImageData(),a&&a.match&&a.match(/data:image/i)&&setTimeout(function(){y.stage&&y.stage.update(),setTimeout(function(){y.stage&&y.stage.update()},50)},50)),a&&a.nodeName&&"video"!=a.nodeName.toLowerCase()&&(y.sourceRect=e?{x:0,y:0,width:g*t,height:f*t}:{x:m,y:z,width:g,height:f}),this.setBounds=function(e,t,o,n){var r,n=(r=t,t=o,o=n,n=[],zot(e=e)?n=[e,r,t,o]:zot(r)?e.x?n=[e.x,e.y,e.width,e.height]:(n[0]=0,n[1]=0,n[2]=e,n[3]=e):zot(t)?(n[0]=0,n[1]=0,n[2]=e,n[3]=r):(n[0]=e,n[1]=r,n[2]=t,n[3]=o),zot(n[3])&&(n[3]=n[2]),n);return y.cjsBitmap_setBounds(n[0],n[1],n[2],n[3]),y.width,y},this.getBounds=function(e){return e?y.boundsToGlobal(null,null,null,e):y.cjsBitmap_getBounds()},this.cache=function(e,t,o,n,r,i,l,a){var s,c;return(s=zob(y.cache,arguments,"a,b,c,d,scale,options,rtl,willReadFrequently"))?s:(y.cacheScale=r,zot(o)&&(zot(e)?zot(c=this.getBounds())||(s=0<this.borderWidth?this.borderWidth/2:0,e=c.x-s,t=c.y-s,o=c.width+2*s,n=c.height+2*s):(o=e,n=t,t=e=0)),c=y.getBounds(),y.cjsBitmap_cache(e,t,o,n,r,i,l,a),c&&i&&i.adjustBounds&&(e!=c.x||t!=c.y||o!=c.width||n!=c.height)&&(y.setBounds(e,t,o,n),y.reg(e,t),y.hitArea=(new Jo.Shape).f(black).dr(e-margin,t-margin,o+2*margin,n+2*margin)),y.z_bc=y.canvas=y.cacheCanvas,y)},this.clone=function(){var e=this.cloneProps(new Jo.Bitmap(c,g,f,m,z,t,o,this.group,n));return e.cloned=!0,e.src=y.src,e.file=y.file,e.image=y.image,e.svg=y.svg,e.item=y.item,e};var b,u=WW.zdf||1;createjs&&!createjs.stageTransformable&&u.retina&&(this.localToGlobal=function(e,t){return Jo.localToGlobal(e,t,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(e,t){return Jo.globalToLocal(e,t,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(e,t,o){return Jo.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||Object.prototype.hasOwnProperty.call(this,e)},this.getColorAt=function(e,t,o){b||(y.cache(null,null,null,null,null,null,null,!0),b=y.cacheCanvas.getContext("2d"),y.uncache());t=b.getImageData(e,t,1,1).data;return t[3]/=255,o?t:"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},this.keyOut=function(e,t,o){zot(e)&&(e="#389b26"),zot(t)&&(t=.1),Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]),zot(o)||Array.isArray(o)||(o=[o]);for(var n=[],r=[],i=[],l=0;l<e.length;l++)n[l]=Jo.convertColor(e[l],"array"),null!=t[l]?r[l]=255*t[l]:r[l]=255*t[0],o&&(null!=o[l]?i[l]=Jo.convertColor(o[l],"array"):i[l]=Jo.convertColor(o[0],"array"),i[l][3]*=255);y.cacheCanvas&&y.updateCache(),b||(y.cache(null,null,null,null,null,null,null,!0),b=y.cacheCanvas.getContext("2d"));var a=b.getImageData(m,z,g,f),s=a.data,c=s.length/4;if(o)for(l=0;l<c;l++)for(var u=s[4*l+0],d=s[4*l+1],h=s[4*l+2],p=0;p<e.length;p++)u>n[p][0]-r[p]&&u<n[p][0]+r[p]&&d>n[p][1]-r[p]&&d<n[p][1]+r[p]&&h>n[p][2]-r[p]&&h<n[p][2]+r[p]&&(s[4*l+0]=i[p][0],s[4*l+1]=i[p][1],s[4*l+2]=i[p][2],s[4*l+3]=i[p][3]);else for(l=0;l<c;l++){u=s[4*l+0],d=s[4*l+1],h=s[4*l+2];for(p=0;p<e.length;p++)u>n[p][0]-r[p]&&u<n[p][0]+r[p]&&d>n[p][1]-r[p]&&d<n[p][1]+r[p]&&h>n[p][2]-r[p]&&h<n[p][2]+r[p]&&(s[4*l+3]=0)}return b.putImageData(a,z,m),this},this.addBitmapData=function(){if(!createjs.BitmapData)return zogy("zim.Bitmap addBitmapData() needs CreatejS 1.5.0 or greater"),y;var e=y.cacheCanvas||y.cache().cacheCanvas,t=new createjs.BitmapData(e),e=new Jo.Bitmap(t.canvas);return e.bitmapData=t,e},this.color=function(e,t,o,n){if(y.stage){if(!y.bitmapData)return zogy("zim.Bitmap must be made with addBitmapData() to use color()"),y;zot(e)&&(e=red),e=zik(e),zot(t)&&(t=dark);var r=y.stage.frame||zdf,n=null!=o&&null!=n?{x:o,y:n}:y.globalToLocal(r.mouseX,r.mouseY),r=this.bitmapData.getPixel(n.x,n.y);if(!(r==Jo.convertColor(e,"hexnumber")||r<Jo.convertColor(t,"hexnumber"))){e=Jo.convertColor(e,"hexstring");return y.bitmapData.floodFill(n.x,n.y,e),y}}},Jo.displayBase(y),!1!==o&&Jo.styleTransforms(this,r),this.doDispose=function(){Jo.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.cloned||this.id&&((u=this.stage&&this.stage.frame?this.stage.frame:WW.zdf)&&u.assets&&u.assets[this.id]&&delete u.assets[this.id],Jo.assets[this.id]&&delete Jo.assets[this.id]),this.parent&&this.parent.removeChild(this)}},Jo.Bitmap.fromData=function(t,o){var n=100,r=100,i=new Image;i.onload=function(){n=i.naturalWidth,r=i.naturalHeight,zot(n)&&(n=i.width),zot(r)&&(r=i.height);var e=new Jo.Bitmap(t,n,r);setTimeout(function(){o(e)},50)},i.src=t},Jo.extend(Jo.Bitmap,createjs.Bitmap,["cache","clone","dispose","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),Jo.Bitmap.prototype.dispose=function(){return this.doDispose()},zimify(Jo.Bitmap.prototype),Jo.SlicedBitmap=function(t,o,i,l,a,n,r,e,s,c){var u;if(u=zob(Jo.SlicedBitmap,arguments,"width, height, obj, slices, types, gap, scale, style, group, inherit",this))return u;z_d("50.75"),this.group=s;var d,s=!1===e?{}:Jo.getStyle("SlicedBitmap",this.group,c),e="ZIM SlicedBitmap needs DisplayObject";if(zot(i)&&(i=null!=s.obj?s.obj:null),i.getBounds){var c=i.getBounds(),h=c.width,p=c.height;if(zot(t)&&(t=null!=s.width?s.width:500),zot(o)&&(o=null!=s.height?s.height:500),i.cacheCanvas)d=i.cacheCanvas;else{if(!i.cache)return void zogy(e);i.cache(c.x,c.y,h,p),d=i.cacheCanvas}zot(l)&&(l=null!=s.slices?s.slices:[[],[]]);var g=[[1],[1]];Jo.loop(l,function(e,t){Jo.loop(e,function(){g[t].push(1)})}),zot(a)&&(a=null!=s.types?s.types:g),zot(r)&&(r=null!=s.scale?s.scale:1);var f=Jo.copy(l);Jo.loop(f[0],function(e,t){f[0][t]=e*h}),Jo.loop(f[1],function(e,t){f[1][t]=e*p});var m=this.scaleBitmap=new createjs.ScaleBitmap(d,f,a,n),f=null;m.setDrawSize(t,o),m.cache(0,0,t,o,r),this.zimBitmap_constructor(m.cacheCanvas),this.type="SlicedBitmap";var z=this;z.slicesSca=function(e,t){return zot(e)&&(e=z.slicesScaleX),zot(t)&&(t=e),i.slicesScaleX=e,i.slicesScaleY=t,z},Object.defineProperty(z,"slicesWidth",{get:function(){return t},set:function(e){t=e,m.setDrawSize(t,o),m.cache(0,0,t,o,r),z.sourceRect=new createjs.Rectangle(0,0,t*r,o*r),z.setBounds(null),z.transformControls&&z.transformControls.resize()}}),Object.defineProperty(z,"ssW",{get:function(){return t},set:function(e){t=e,m.setDrawSize(t,o),m.cache(0,0,t,o,r),z.sourceRect=new createjs.Rectangle(0,0,t*r,o*r),z.setBounds(null)}}),Object.defineProperty(z,"slicesHeight",{get:function(){return o},set:function(e){o=e,m.setDrawSize(t,o),m.cache(0,0,t,o,r),z.sourceRect=new createjs.Rectangle(0,0,t*r,o*r),z.setBounds(null),z.transformControls&&z.transformControls.resize()}}),Object.defineProperty(z,"ssH",{get:function(){return o},set:function(e){o=e,m.setDrawSize(t,o),m.cache(0,0,t,o,r),z.sourceRect=new createjs.Rectangle(0,0,t*r,o*r),z.setBounds(null)}});var y=t;Object.defineProperty(z,"slicesScaleX",{get:function(){return t/y},set:function(e){z.slicesWidth=e?y*e:0}}),Object.defineProperty(z,"ssX",{get:function(){return t/y},set:function(e){z.ssW=e?y*e:0}});var b=o;Object.defineProperty(z,"slicesScaleY",{get:function(){return o/b},set:function(e){z.slicesHeight=e?b*e:0}}),Object.defineProperty(z,"ssY",{get:function(){return o/b},set:function(e){z.ssH=e?b*e:0}}),Object.defineProperty(z,"slicesScale",{get:function(){return t/y},set:function(e){z.slicesWidth=e?y*e:0,z.slicesHeight=e?b*e:0}}),Object.defineProperty(z,"slices",{get:function(){return l},set:function(e){!zot(e)&&Array.isArray(e)||(e=[[],[]]),l=e;var e=i.getBounds(),o=e.width,n=e.height,r=Jo.copy(l);Jo.loop(r[0],function(e,t){r[0][t]=e*o}),Jo.loop(r[1],function(e,t){r[1][t]=e*n}),m.slices=r,r=null,m.updateCache()}}),Object.defineProperty(z,"types",{get:function(){return a},set:function(e){var o;!zot(e)&&Array.isArray(e)||(o=[[1],[1]],Jo.loop(l,function(e,t){Jo.loop(e,function(){o[t].push(1)})}),e=o),m.types=a=e,m.updateCache()}}),Object.defineProperty(z,"gap",{get:function(){return n},set:function(e){m.gap=n=e}}),Object.defineProperty(z,"exchange",{get:function(){return[l,a]},set:function(e){var t=i.getBounds(),o=t.width,n=t.height;l=e[0];var r=Jo.copy(l);Jo.loop(r[0],function(e,t){r[0][t]=e*o}),Jo.loop(r[1],function(e,t){r[1][t]=e*n}),m.slices=r,r=null,m.types=a=e[1],m.updateCache()}}),Jo.loop(20,function(t){Object.defineProperty(z,"sH"+t,{get:function(){return l[0][t]},set:function(e){l[0][t]=e,z.slices=l}})}),Jo.loop(20,function(t){Object.defineProperty(z,"sV"+t,{get:function(){return l[1][t]},set:function(e){l[1][t]=e,z.slices=l}})}),Jo.loop(20,function(t){Object.defineProperty(z,"tH"+t,{get:function(){return a[0][t]},set:function(e){a[0][t]=e,z.types=a}})}),Jo.loop(20,function(t){Object.defineProperty(z,"tV"+t,{get:function(){return a[1][t]},set:function(e){a[1][t]=e,z.types=a}})})}else zogy(e)},Jo.extend(Jo.SlicedBitmap,Jo.Bitmap,null,"zimBitmap",!1),Jo.Sprite=function(o,n,r,i,l,a,s,c,u,d,h,p,e,g,f,m,z,y,t,b){if(w=zob(Jo.Sprite,arguments,"image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, frame, style, group, inherit",this))return w;z_d("50.8"),this.type="Sprite",this.group=t;var v,w=!1===y?{}:Jo.getStyle(this.type,this.group,b),_=this;if(zot(z)&&(z=null!=w.frame?w.frame:WW.zdf),o&&"string"==typeof o&&(o=z.asset(o)),zot(p)&&!zot(o)){zot(n)&&(n=null!=w.cols?w.cols:1),zot(r)&&(r=null!=w.rows?w.rows:1),zot(i)&&(i=null!=w.count?w.count:n*r),zot(l)&&(l=null!=w.offsetX?w.offsetX:0),zot(a)&&(a=null!=w.offsetY?w.offsetY:0),zot(s)&&(s=null!=w.spacingX?w.spacingX:0),zot(c)&&(c=null!=w.spacingY?w.spacingY:0),zot(u)&&(u=(null!=w.width?w:o).width),zot(d)&&(d=(null!=w.height?w:o).height),o.bitmap&&(o=o.bitmap);var C=(u-l+s)/n-s,x=(d-a+c)/r-c,k=[],T=0;e:for(var A=0;A<r;A++)for(var P=0;P<n;P++){if(++T>i)break e;k.push([l+P*(C+s),a+A*(x+c),C,x])}I(o,k,h)}else if(f)h=(v=f).animations;else{if(!p)return;var E,S,B,z=_.stage?_.stage.frame:WW.zdf;if("string"==typeof p&&(p=z.asset(p)),p.frames&&!Array.isArray(p.frames)){for(S in E=[],p.frames)W=p.frames[S].frame,E.push([W.x,W.y,W.w,W.h]);p.frames=E}if(p.frames&&!Array.isArray(p.frames[0])){for(E=[],S=0;S<p.frames.length;S++){var W=p.frames[S].frame;E.push([W.x,W.y,W.w,W.h])}p.frames=E}!p.images&&p.meta&&p.meta.image&&(p.images=[p.meta.image]),k=p.frames,h=p.animations,zot(o)?(t=p.images?p.images[0]:null)&&t.split?(B=[],Jo.loop(p.images,function(e){var t=e.split("/").pop();z.asset(t)&&"EmptyAsset"!=z.asset(t).type?B.push(z.asset(t)):z.asset(e)&&"EmptyAsset"!=z.asset(e).type||"EmptyAsset"!=z.asset(e).type?B.push(z.asset(e)):zon&&zogy("Sprite() - please preload Sprite in Frame or with loadAssets")}),I(B,k,h)):v=new createjs.SpriteSheet(p):I(o,k,h)}function I(o,e,t){Array.isArray(o)||(o=[o]),Jo.loop(o,function(e,t){o[t]=e.image});t={images:o,frames:e,animations:t||[]};v=new createjs.SpriteSheet(t)}this.animations=h,this.cjsSprite_constructor(v,m),zot(m)||this.stop(),zot(e)&&(e=Jo.makeID()),this.id=e,zot(g)&&(g=!0),_.globalControl=g;var R,Y=0;this.parseFrames=function(e,t,o,n){var i=[],l=Number.MAX_VALUE,a=0;if(zot(e))zot(t)&&(t=0),zot(o)&&(o=_.totalFrames-1),s(t,o);else{if(zot(_.animations)||zot(_.animations[e]))return[];r(_.animations[e])}function r(e){var t;Array.isArray(e)?(s((t=e)[0],t[1],t[3]),t[2]&&!zot(_.animations[t[2]])&&r(_.animations[t[2]])):e.constructor=={}.constructor?function(e){if(!zot(e.frames)){zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)e.speed<l&&(l=e.speed),e.speed>a&&(a=e.speed),i.push({f:e.frames[t],s:e.speed});e.next&&!zot(_.animations[e.next])&&r(_.animations[e.next])}}(e):isNaN(e)||i.push({f:Math.floor(e),s:1})}function s(e,t,o){var n;if(zot(o)&&(o=1),e<t)for(n=e;n<=t;n++)r(n);else for(n=t;n<=e;n++)r(e-(n-t));function r(e){o<l&&(l=o),a<o&&(a=o),i.push({f:e,s:o})}}if(n)return i;l=Jo.constrain(Jo.decimals(l),.1),a=Jo.constrain(Jo.decimals(a),.1);for(var c,u=[],d=l!=a,h=0;h<i.length;h++)if(c=i[h],d)for(var p=0;p<Jo.constrain(Math.round(l<1?c.s/l:c.s),.1);p++)u.push(c.f);else u.push(c.f);return u},this.run=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S){if(B=zob(_.run,arguments,"time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, frame, tweek, id, globalControl, pauseOnBlur"))return B;var B=$o();if(zot(A)&&(A=1),zot(P)||(_.id=P),zot(E)||(_.globalControl=E),!zot(T))return x=k=T,_.frame=T,_.randFrame=!1,_;if(Array.isArray(t)){for(var W,I,M=[],O=0,j=0;j<t.length;j++){(L=t[j]).lookup=_.parseFrames(L.label,L.startFrame,L.endFrame),0==j&&(I=L.lookup[0]),delete L.startFrame,delete L.endFrame,L.obj=Jo.merge(L.obj,{normalizedFrame:L.lookup.length-1}),L.set=Jo.merge(L.set,{normalizedFrames:{noPick:L.lookup},normalizedFrame:0}),zot(L.wait)&&(L.wait=O*A),W=L.label,delete L.label,M.push(L),O=0;var L=zot(L.time)?e:L.time;0<k-x&&(O=L/(k-x)/2)}if(0==M.length)return this;1==M.length?(e=M[0].time,t=W,D()):_.gotoAndStop(I)}else D();function D(){R=_.parseFrames(t,x,k),Y=0,_.gotoAndStop(R[Y]),x=k=null,M={normalizedFrame:R.length-1}}zot(e)&&(e="s"==B?1:1e3),_.running&&_.stopAnimate(_.id),_.running=!0,Array.isArray(M)||((O=0)<k-x&&(O=e/Math.abs(k-x)/2),R&&0<R.length&&(O=e/R.length/2),a&&zot(c)&&(c=O*A),f&&zot(m)&&(m=O*A));return Jo.animate({target:_,obj:M,time:e,ease:"linear",call:function(){_.running=!1,_.stop(),o&&"function"==typeof o&&o(n||_)},params:n,wait:r,waitedCall:i,waitedParams:l,loop:a,loopCount:s,loopWait:c,loopPick:g,loopCall:u,loopParams:d,loopWaitCall:h,loopWaitParams:p,rewind:f,rewindWait:m,rewindCall:z,rewindParams:y,rewindWaitCall:b,rewindWaitParams:v,rewindTime:w,rewindEase:C,override:!1,pauseOnBlur:S,id:_.id}),_.runPaused=!1,_.pauseAnimate(!1),_},this.runPaused=!0,this.pauseRun=function(e){return zot(e)&&(e=!0),_.runPaused=e,(_.globalControl?Jo:_).pauseAnimate(e,_.id),_},this.stopRun=function(){return _.runPaused=!0,_.running=!1,(_.globalControl?Jo:_).stopAnimate(_.id),_},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){e=Math.round(e),_.randFrame=!1,this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return Y},set:function(e){Y=Math.round(e),this.gotoAndStop(R[Y])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return R},set:function(e){R=e}}),Object.defineProperty(this,"totalFrames",{get:function(){return v.getNumFrames()},set:function(){zogy("zim.Sprite - totalFrames is read only")}}),!1!==y&&Jo.styleTransforms(this,w),this.clone=function(e){var t=this.cloneProps(new Jo.Sprite(o,n,r,i,l,a,s,c,u,d,h,p,null,g,f,m,z,y,this.group,b));return!e&&_.randFrame||(t.frame=_.frame),t},createjs&&!createjs.stageTransformable&&z.retina&&(this.localToGlobal=function(e,t){return Jo.localToGlobal(e,t,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(e,t){return Jo.globalToLocal(e,t,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(e,t,o){return Jo.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||Object.prototype.hasOwnProperty.call(this,e)},Jo.displayBase(_),this.setBounds=function(e,t,o,n){var r,n=(r=t,t=o,o=n,n=[],zot(e=e)?n=[e,r,t,o]:zot(r)?e.x?n=[e.x,e.y,e.width,e.height]:(n[0]=0,n[1]=0,n[2]=e,n[3]=e):zot(t)?(n[0]=0,n[1]=0,n[2]=e,n[3]=r):(n[0]=e,n[1]=r,n[2]=t,n[3]=o),zot(n[3])&&(n[3]=n[2]),n);return _.cjsSprite_setBounds(n[0],n[1],n[2],n[3]),_.width,_},this.getBounds=function(e){return e?_.boundsToGlobal(null,null,null,e):_.cjsSprite_getBounds()},m||(_.gotoAndStop(Jo.rand(_.totalFrames-1)),_.randFrame=!0),this.dispose=function(){Jo.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},Jo.extend(Jo.Sprite,createjs.Sprite,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),zimify(Jo.Sprite.prototype),Jo.MovieClip=function(e,t,o,n,r,i,l){var a;if(a=zob(Jo.MovieClip,arguments,"mode, startPosition, loop, labels, style, group, inherit",this))return a;z_d("50.9"),this.type="MovieClip",this.group=i;i=!1===r?{}:Jo.getStyle(this.type,this.group,l);zot(e)&&(e=null!=i.mode?i.mode:null),zot(t)&&(t=null!=i.startPosition?i.startPosition:null),zot(o)&&(o=null!=i.loop?i.loop:null),zot(n)&&(n=null!=i.labels?i.labels:null),this.cjsMovieClip_constructor(e,t,o,n),!1!==r&&Jo.styleTransforms(this,i),this.clone=function(){return this.cloneProps(new Jo.MovieClip(e,t,o,n,r,this.group,l))},this.hasProp=function(e){return!zot(this[e])||Object.prototype.hasOwnProperty.call(this,e)};i=WW.zdf||1;createjs&&!createjs.stageTransformable&&i.retina&&(this.localToGlobal=function(e,t){return Jo.localToGlobal(e,t,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(e,t){return Jo.globalToLocal(e,t,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(e,t,o){return Jo.localToLocal(e,t,o,this)}),Jo.displayBase(this),this.setBounds=function(e,t,o,n){var r,n=(r=t,t=o,o=n,n=[],zot(e=e)?n=[e,r,t,o]:zot(r)?e.x?n=[e.x,e.y,e.width,e.height]:(n[0]=0,n[1]=0,n[2]=e,n[3]=e):zot(t)?(n[0]=0,n[1]=0,n[2]=e,n[3]=r):(n[0]=e,n[1]=r,n[2]=t,n[3]=o),zot(n[3])&&(n[3]=n[2]),n);return that.cjsMovieClip_setBounds(n[0],n[1],n[2],n[3]),that.width,that},this.getBounds=function(e){return e?that.boundsToGlobal(null,null,null,e):that.cjsMovieClip_getBounds()},this.dispose=function(){Jo.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},Jo.extend(Jo.MovieClip,createjs.MovieClip,["clone","setBounds","getBounds","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),zimify(Jo.MovieClip.prototype),Jo.SVGContainer=function(e,A,m,P,E,t,o,n){var r;if(r=zob(Jo.SVGContainer,arguments,"svg, splitTypes, geometric, showControls, interactive, style, group, inherit",this))return r;z_d("50.95"),this.group=o;o=!1===t?{}:Jo.getStyle("SVGContainer",this.group,n);e&&"Bitmap"==e.type&&(e=e.svg);var S,i,l,a,B=this,W=new Jo.Point(0,0);function I(){function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var o=[],n=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(n=(l=a.next()).done)&&(o.push(l.value),!t||o.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function P(e,t,o,n,r,i,l){var a=e.x,e=e.y;return{x:n*(a*=t)-r*(e*=o)+i,y:r*a+n*e+l}}function E(e,t,o,n){var r=e*o+t*n;return 1<r&&(r=1),r<-1&&(r=-1),(e*n-t*o<0?-1:1)*Math.acos(r)}var S=2*Math.PI;return function(e){var t=e.px,o=e.py,n=e.cx,r=e.cy,i=e.rx,l=e.ry,a=e.xAxisRotation,s=void 0===a?0:a,c=e.largeArcFlag,u=void 0===c?0:c,a=e.sweepFlag,c=void 0===a?0:a,d=[];if(0===i||0===l)return[];var h=Math.sin(s*S/360),p=Math.cos(s*S/360),e=p*(t-n)/2+h*(o-r)/2,a=-h*(t-n)/2+p*(o-r)/2;if(0==e&&0==a)return[];i=Math.abs(i),l=Math.abs(l);s=Math.pow(e,2)/Math.pow(i,2)+Math.pow(a,2)/Math.pow(l,2);1<s&&(i*=Math.sqrt(s),l*=Math.sqrt(s));var a=A(function(e,t,o,n,r,i,l,a,s,c,u,d){var h=Math.pow(r,2),p=Math.pow(i,2),g=Math.pow(u,2),f=Math.pow(d,2),m=h*p-h*f-p*g;m<0&&(m=0),m/=h*f+p*g;l=(m=Math.sqrt(m)*(l===a?-1:1))*r/i*d,m=m*-i/r*u,o=c*l-s*m+(e+o)/2,c=s*l+c*m+(t+n)/2,t=(u-l)/r,n=(d-m)/i,r=(-u-l)/r,m=(-d-m)/i,i=E(1,0,t,n),m=E(t,n,r,m);return 0===a&&0<m&&(m-=S),1===a&&m<0&&(m+=S),[o,c,i,m]}(t,o,n,r,i,l,u,c,h,p,e,a),4),g=a[0],f=a[1],m=a[2],z=a[3],a=Math.abs(z)/(S/4);Math.abs(1-a)<1e-7&&(a=1);var y=Math.max(Math.ceil(a),1);z/=y;for(var b,v,w,C,x,k,T=0;T<y;T++)d.push((b=m,k=x=C=w=void 0,w=1.5707963267948966===(v=z)?.551915024494:-1.5707963267948966===v?-.551915024494:4/3*Math.tan(v/4),C=Math.cos(b),x=Math.sin(b),k=Math.cos(b+v),v=Math.sin(b+v),[{x:C-x*w,y:x+C*w},{x:k+v*w,y:v-k*w},{x:k,y:v}])),m+=z;return d.map(function(e){var t=P(e[0],i,l,p,h,g,f),o=t.x,n=t.y,r=P(e[1],i,l,p,h,g,f),t=r.x,r=r.y,e=P(e[2],i,l,p,h,g,f);return{x1:o,y1:n,x2:t,y2:r,x:e.x,y:e.y}})}}function s(e){var o,n,r,i,l,e=e.split(";");return Jo.loop(e,function(e){var t;""!=e&&(e.match(/rgb/i)||(e=e.replace(/,/g,"")),e=(t=e.split(":"))[0].trim().toLowerCase(),t=t[1].trim().toLowerCase().replace("px",""),"fill"==e&&(o=t),"stroke"==e&&(n=t),"stroke-width"==e&&(r=t),"opacity"==e&&(l=i=t),"fill-opacity"==e&&(i=t),"stroke-opacity"==e&&(l=t))}),[o,n,r,i,l]}function c(e,t){var o,n,r,i,l,a,s,c,u=j(t),d=u[0],h=u[1],p=u[2],g=u[5],f=u[6];"circle"==e?(l=.5523*(i=Number(t.getAttribute("r").trim())),o=m?new Jo.Circle(Number(t.getAttribute("r")),d,h,p):new Jo.Blob(d,h,p,4,i,l,"mirror",null,P,null,null,null,null,null,null,null,null,null,null,null,null,null,E)):"rect"==e?o=m?new Jo.Rectangle(Number(t.getAttribute("width")),Number(t.getAttribute("height")),d,h,p,Number(t.getAttribute("rx"))):(n=Number(t.getAttribute("width")),a=Number(t.getAttribute("height")),r=Number(t.getAttribute("rx")),u=Number(t.getAttribute("ry")),r&&u?(i=.5523*r,l=.5523*u,new Jo.Blob(d,h,p,[[r,0,0,0,-i,0,0,0,"free"],[n-r,0,0,0,0,0,i,0,"free"],[n,u,0,0,0,-l,0,0,"free"],[n,a-u,0,0,0,0,0,l,"free"],[n-r,a,0,0,i,0,0,0,"free"],[r,a,0,0,0,0,-i,0,"free"],[0,a-u,0,0,0,l,0,0,"free"],[0,u,0,0,0,0,0,-l,"free"]],null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,null,null,E)):new Jo.Blob(d,h,p,[[0,0],[n,0],[n,a],[0,a]],null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,null,null,E)):"line"==e?o=new Jo.Squiggle(h,p,[[Number(t.getAttribute("x1")),Number(t.getAttribute("y1"))],[Number(t.getAttribute("x2")),Number(t.getAttribute("y2"))]],null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,null,null,E):"polygon"==e||"polyline"==e?(a=(a=(a=t.getAttribute("points")).replace(/-/g," -")).replace(/\s+/g," "),s=[],-1!=a.indexOf(",")?Jo.loop(a.split(" "),function(e){e=e.split(",");s.push([Number(e[0].trim()),Number(e[1].trim())])}):Jo.loop(a.split(" "),function(e,t){(t+1)%2==0&&s.push([c,e.trim()]),c=e.trim()}),o="polygon"==e?new Blob(d,h,p,s):new Jo.Squiggle(h,p,s,null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,null,null,E)):"ellipse"==e&&(o=new Jo.Blob(d,h,p,function(e,t,o,n){zog(e,t,o,n);var r=.5522848*o,i=.5522848*n,l=e+o,a=t+n;return[[e-o,t,0,0,e,a+i-n,e,t-i,"mirror"],[e,t-n,0,0,e-r,t,l+r-o,t,"mirror"],[l,t,0,0,e,t-i,e+r-r,a+i-n,"mirror"],[e,a,0,0,l-o+r,t,e-r,t,"mirror"]]}(0,0,Number(t.getAttribute("rx")),Number(t.getAttribute("ry"))),null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,null,null,E)),o.loc(g,f,B);t=t.getAttribute("transform");(t||O)&&M(o,t||O),!E||"Rectangle"!=o.type&&"Circle"!=o.type||o.transform({showReg:!1,visible:P})}function M(r,e){e=e.split(")");Jo.loop(e,function(e){var t,o,n;""!=e&&(t=(o=e.trim().split("("))[0].trim().toLowerCase(),e=o[1].trim().toLowerCase().replace("px","").replace("deg",""),"translate"==t&&(o=e.split(","),r.mov(Number(o[0].trim()),o[1]?Number(o[1].trim()):0)),"scale"==t&&(n=e.split(","),"Blob"==r.type||"Squiggle"==r.type?1==n.length?r.transformPoints("scale",Number(n[0].trim())):2==n.length&&(r.transformPoints("scaleX",Number(n[0].trim())),r.transformPoints("scaleY",Number(n[1].trim()))):1==n.length?r.sca(Number(n[0].trim())):2==n.length&&r.sca(Number(n[0].trim()),Number(n[1].trim()))),"rotate"==t&&(1==(n=e.split(",")).length?n.push(0,0):2==n.length&&n.push(0),r.rot(Number(n[0].trim()),Number(n[1].trim()),Number(n[2].trim()))),"skewX"==t&&(r.skewX=e),"skewY"==t&&(r.skewY=e))})}if(zot(A)&&(A=!1),zot(m)&&(m=!0),!zot(e)){if(w=zot(e.draggable)?(e.getAttribute||(i=new DOMParser,e=i.parseFromString(e,"image/svg+xml").documentElement),this.svg=e):(i=new DOMParser,w=(e=e.innerHTML?i.parseFromString(e.innerHTML,"text/xml"):e).getElementsByTagName("svg"),this.svg=w?e.getElementsByTagName("svg")[0]:null),zot(w)||(l=w.getAttribute("width"),a=w.getAttribute("height")),l=l&&Number(l.trim()),a=a&&Number(a.trim()),this.zimContainer_constructor(l,a),this.type="SVGContainer",zot(w))return;var O,u=Jo.black,d=Jo.black,h=Jo.black,p=Jo.black,g=2,f=2,z=1,y=1,b=1,v=1,w=e.getElementsByTagName("svg");0==w.length&&(w=[e]),function a(e){Jo.loop(e,function(e){var t,o,n,r,i,l=e.tagName.toLowerCase();"path"==l&&C(e),"circle"==l&&c("circle",e),"rect"==l&&c("rect",e),"ellipse"==l&&c("ellipse",e),"line"==l&&c("line",e),"polygon"==l&&c("polygon",e),"polyline"==l&&c("polyline",e),"g"==l&&((l=e.getAttribute("style"))&&(t=(i=s(l))[0],o=i[1],n=i[2],r=i[3],i=i[4]),O=e.getAttribute("transform"),d=e.getAttribute("fill")?e.getAttribute("fill"):zot(t)?u:t,p=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(o)?h:o,f=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(n)?g:n,y=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(r)?z:r,v=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(i)?b:i),a(e.children),"g"==e.tagName.toLowerCase()&&(d=u,p=h,f=g,y=z,v=b,O=null)},!0)}(w)}function j(e){var t,o,n,r,i,l=e.getAttribute("style");l&&(t=(a=s(l))[0],o=a[1],n=a[2],r=a[3],i=a[4]),t=e.getAttribute("fill")?e.getAttribute("fill"):zot(t)?d:t,o=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(o)?p:o,n=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(n)?f:n,r=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(r)?y:r,i=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(i)?v:i;var l=e.getAttribute("x")?e.getAttribute("x"):0,l=e.getAttribute("cx")?e.getAttribute("cx"):l,a=e.getAttribute("y")?e.getAttribute("y"):0,a=e.getAttribute("cy")?e.getAttribute("cy"):a;return zot(r)||zot(t)||(t=Jo.convertColor(t,"rgba",Number(r))),zot(i)||zot(o)||(o=Jo.convertColor(o,"rgba",Number(i))),[t,o,Number(n),Number(r),Number(i),Number(l),Number(a)]}function C(t,e){zot(e)&&(e=!0);var o,n,r,i,l,a,s=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],c=["m","l","h","v","c","s","q","t","a","z"],u=new Jo.Point(0,0),d=zot(t.getAttribute)?t:t.getAttribute("d");d=(d=(d=(d=(d=d.replace(/,/g," ")).replace(/([a-zA-Z])/g," $1 ")).replace(/-/g," -")).replace(/\s+/g," ")).replace(/\.(\d*)\./g,".$1 ."),e&&(o=j(t),n=o[0],r=o[1],i=o[2]);var h,p,g=[],f=[0,0],m=new Jo.Point(0,0),z=new Jo.Point(0,0,0,0),y=new Jo.Point(0,0,0,0,0,0),b=new Jo.Point(0,0,0,0,0,0,0),d=d.split(" "),d=d.slice(1,d.length),v=[],w=!1,C=!1,x="squiggle",k=null;function T(){h=v[v.length-1],2<=g.length&&("z"!=h&&"Z"!=h||(x="blob")),(l="squiggle"==x?new Jo.Squiggle(r,i,g,null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,null,null,E):new Jo.Blob(n,r,i,g,null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,null,null,null,E)).loc(0,0,B),h=v[v.length-1],v[v.length-2],0<=c.indexOf(h)?(f[0]=g[g.length-1][0],f[1]=g[g.length-1][1],W.x=g[g.length-1][0],W.y=g[g.length-1][1],(g=[]).push([f[0],f[1]])):(f=[0,0],g=[[0,0]]),v=[],"z"!=h&&"Z"!=h&&v.push(h),u.x=0,u.y=0;var e=t.getAttribute("transform");(e||O)&&M(l,e||O)}return Jo.loop(d,function(e,t){var o;0==t&&(W.x=0,W.y=0,f=[0,0],h=""),-1==s.indexOf(e)?("lxo"==p&&(p="lx",v.push("l"),w=!0),"lyo"==p&&(p="ly",w=!0),"Lxo"==p&&(p="Lx",v.push("L"),w=!0),"Lyo"==p&&(p="Ly",w=!0),a=Number(e),a=Math.round(100*a)/100,"X"==p?(W.x=a,p="Y"):"Y"==p?(W.y=a,p="Lxo",g.push([W.x,W.y])):"x"==p?(W.x=W.x+a,p="y"):"y"==p&&(W.y=W.y+a,p="lxo",g.push([W.x,W.y])),"H"==p||"h"==p?(u.x=g[g.length-1][0],u.y=g[g.length-1][1],u.x=u.x+("h"==p?a:a-W.x),g.push([u.x,u.y]),p="Lx"):"V"!=p&&"v"!=p||(u.x=g[g.length-1][0],u.y=g[g.length-1][1],u.y=u.y+("v"==p?a:a-W.y),g.push([u.x,u.y]),p="lx"),"Lx"==p?(m.x=a,p="Ly"):"Ly"==p?(m.y=a,u.x=m.x,u.y=m.y,g.push([u.x,u.y]),p="Lx"):"lx"==p?(0<v.length&&(0!=u.x&&0!=u.y?(W.x=u.x,W.y=u.y):(W.x=u.x+W.x,W.y=u.y+W.y)),m.x=W.x+a,p=w?"lyo":"ly"):"ly"==p&&(m.y=W.y+a,u.x=m.x,u.y=m.y,g.push([u.x,u.y]),p="lx"),"qx"==p||"Qx"==p?(0<g.length?(W.x=g[g.length-1][0],W.y=g[g.length-1][1]):(W.x=0,W.y=0),z.x="qx"==p?W.x+a:a,p="qx"==p?"qy":"Qy"):"qy"==p||"Qy"==p?(z.y="qy"==p?W.y+a:a,p="qy"==p?"qz":"Qz",C&&(C=!1,(o=g[g.length-1])[6]=-o[4],o[7]=-o[5],o[8]="mirror",u.x=z.x,u.y=z.y,g[g.length]=[u.x,u.y,0,0,-o[6],o[7],0,0,"free"],p="qy"==p?"qx":"Qx")):"qz"==p||"Qz"==p?(z.z="qz"==p?W.x+a:a,p="qz"==p?"qq":"Qq"):"qq"!=p&&"Qq"!=p||(z.w="qq"==p?W.y+a:a,o=g[g.length-1],u.x=o[0],u.y=o[1],1==g.length?(o[2]=0,o[3]=0,o[4]=0,o[5]=0,o[6]=2/3*(z.x-u.x),o[7]=2/3*(z.y-u.y),o[8]="free"):g[g.length]=[u.x,u.y,0,0,0,0,2/3*(z.x-u.x),2/3*(z.y-u.y),"free"],u.x=z.z,u.y=z.w,g[g.length]=[u.x,u.y,0,0,2/3*(z.x-u.x),2/3*(z.y-u.y),0,0,"free"],p="qq"==p?"qx":"Qx"),"cx"==p||"Cx"==p?(0<g.length?(W.x=g[g.length-1][0],W.y=g[g.length-1][1]):(W.x=0,W.y=0),y.x="cx"==p?W.x+a:a,p="cx"==p?"cy":"Cy"):"cy"==p||"Cy"==p?(y.y="cy"==p?W.y+a:a,p="cy"==p?"cz":"Cz"):"cz"==p||"Cz"==p?(y.z="cz"==p?W.x+a:a,p="cz"==p?"cq":"Cq"):"cq"==p||"Cq"==p?(y.q="cq"==p?W.y+a:a,p="cq"==p?"cr":"Cr",C&&((o=g[g.length-1])[2]=0,o[3]=0,zot(o[4])&&(o[4]=0),zot(o[5])&&(o[5]=0),o[6]=-o[4],o[7]=-o[5],o[8]="mirror",u.x=y.z,u.y=y.q,g[g.length]=[u.x,u.y,0,0,y.x-u.x,y.y-u.y,0,0,"free"],p="cr"==p?"cx":"Cx")):"cr"==p||"Cr"==p?(y.r="cr"==p?W.x+a:a,p="cr"==p?"cs":"Cs"):"cs"==p||"Cs"==p?(y.s="cs"==p?W.y+a:a,o=g[g.length-1],1==g.length&&(o[2]=0,o[3]=0,o[4]=0,o[5]=0),o[6]=y.x-o[0],o[7]=y.y-o[1],o[8]="free",u.x=y.r,u.y=y.s,g[g.length]=[u.x,u.y,0,0,y.z-u.x,y.q-u.y,0,0,"free"],p="cs"==p?"cx":"Cx"):"ax"==p||"Ax"==p?(0<g.length?(W.x=g[g.length-1][0],W.y=g[g.length-1][1]):(W.x=0,W.y=0),b.x=a,p="ax"==p?"ay":"Ay"):"ay"==p||"Ay"==p?(b.y=a,p="ay"==p?"az":"Az"):"az"==p||"Az"==p?(b.z=a,p="az"==p?"aq":"Aq"):"aq"==p||"Aq"==p?(b.q=a,p="aq"==p?"ar":"Ar"):"ar"==p||"Ar"==p?(b.r=a,p="ar"==p?"as":"As"):"as"==p||"As"==p?(b.s="as"==p?W.x+a:a,p="as"==p?"at":"At"):"at"!=p&&"At"!=p||(b.t="at"==p?W.y+a:a,t=(S=S||I())({px:W.x,py:W.y,cx:b.s,cy:b.t,rx:b.x,ry:b.y,xAxisRotation:b.z,largeArcFlag:b.q,sweepFlag:b.r}),Jo.loop(t,function(e,t){o=g[g.length-1],1==g.length&&(o[2]=0,o[3]=0,o[4]=0,o[5]=0),0==t&&1==g.length?(o[6]=e.x1-u.x-W.x,o[7]=e.y1-u.y-W.y):(o[6]=e.x1-u.x,o[7]=e.y1-u.y),o[8]="free",u.x=e.x,u.y=e.y,g[g.length]=[u.x,u.y,0,0,e.x2-u.x,e.y2-u.y,0,0,"free"]}),p="at"==p?"ax":"Ax")):(v.push(e),"s"!=e&&(C=!1),1<v.length&&("M"!=e&&"m"!=e||(T(),"M"==e?(W.x=0,W.y=0):(W.x=g[g.length-1][0],W.y=g[g.length-1][1]),g=[],(v=[]).push(e))),"M"==e?p="X":"m"==e?p="x":"L"==e?(p="Lx",A&&k&&"l"!=k&&T(),k="l"):"l"==e?(p="lx",A&&k&&"l"!=k&&T(),k="l"):"H"==e?(p="H",A&&k&&"l"!=k&&T(),k="l"):"h"==e?(p="h",A&&k&&"l"!=k&&T(),k="l"):"V"==e?(p="V",A&&k&&"l"!=k&&T(),k="l"):"v"==e?(p="v",A&&k&&"l"!=k&&T(),k="l"):"C"==e?(p="Cx",A&&k&&"c"!=k&&T(),k="c"):"c"==e?(p="cx",A&&k&&"c"!=k&&T(),k="c"):"S"==e?(C=!0,p="Cx",A&&k&&"c"!=k&&T(),k="c"):"s"==e?(C=!0,p="cx",A&&k&&"c"!=k&&T(),k="c"):"Q"==e?(p="Qx",A&&k&&"q"!=k&&T(),k="q"):"q"==e?(p="qx",A&&k&&"q"!=k&&T(),k="q"):"T"==e?(C=!0,p="Qx",A&&k&&"q"!=k&&T(),k="q"):"t"==e?(C=!0,p="qx",A&&k&&"q"!=k&&T(),k="q"):"A"==e?(p="Ax",A&&k&&"a"!=k&&T(),k="a"):"a"==e?(p="ax",A&&k&&"a"!=k&&T(),k="a"):"z"!=e&&"Z"!=e||(x="blob"))}),e&&T(),g}!(B.processPath=function(e){return C(e,!1)})!==t&&Jo.styleTransforms(this,o),this.clone=function(){return B.cloneProps(new Jo.SVGContainer(e,A,m,P,E,t,this.group,n))}},Jo.extend(Jo.SVGContainer,Jo.Container,"clone","zimContainer",!1),Jo.Tag=function(t,o,n,r,i,l,a,s,c,u,e,d){var h;if(h=zob(Jo.Tag,arguments,"width, height, id, frame, backgroundColor, padding, paddingH, paddingV, expand, style, group, inherit",this))return h;z_d("67.7"),this.group=e;e=!1===u?{}:Jo.getStyle("Tag",this.group,d);if(zot(t)&&(t=null!=e.width?e.width:250),zot(o)&&(o=null!=e.height?e.height:70),zot(n)&&(n=null!=e.id?e.id:"zimTag_"+Jo.rand(1e4)),void 0===r){if(!WW.zdf)return void(zon&&zogy("zim.Tag - please provide a reference to zim Frame"));r=WW.zdf}zot(i)&&(i=null!=e.backgroundColor?e.backgroundColor:"rgba(0,0,0,0)"),zot(l)&&(l=null!=e.padding?e.padding:10),zot(a)&&(a=null!=e.paddingH?e.paddingH:l),zot(s)&&(s=null!=e.paddingV?e.paddingV:l),zot(c)&&(c=null!=e.expand?e.expand:20),!0===c&&(c=20),this.zimContainer_constructor(t,o,null,null,!1),this.type="Tag",this.tagID=n,this.id=n;var p=this,g=r.stage;p.background=new Jo.Rectangle(t+a,o+s,i).center(this).expand(c||0);var f=p.tag=document.createElement("div");(r.tag||document.body).appendChild(f),f.setAttribute("id",n),f.setAttribute("name",n),f.zimDisplay=f.style.display||"inline-block",f.style.cssText="resize:none; z-index:3; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var m=new createjs.DOMElement(f);m.alpha=0;var z=r.retina&&WW.devicePixelRatio||1;this.resize=function(e,t){zot(e)&&(e=!0),p.time1&&clearTimeout(p.time1),t||(p.time1=setTimeout(function(){p.resize(null,!0)},40));var o=p.getConcatenatedMatrix().decompose(),n=p.localToGlobal(0,0);return r.retina?(t=Jo.browserZoom(),r.tag?(m.x=n.x/z/t,m.y=n.y/z/t):(m.x=r.x/g.scaleX+n.x/z/t,m.y=r.y/g.scaleY+n.y/z/t),Jo.sca(m,o.scaleX/z/g.scaleX/t,o.scaleY/z/g.scaleY/t)):(m.x=r.x+n.x*r.scale,m.y=r.y+n.y*r.scale,Jo.sca(m,r.scale*o.scaleX,r.scale*o.scaleY)),m.alpha=p.alpha,p.parent&&(m.alpha*=p.parent.alpha),e&&p.stage&&g.update(),p},this.resize(),p.added(function e(){g.addChild(m);p.time2=setTimeout(function(){f.style.display=f.zimDisplay},50);p.resize();p.on("added",e,null,!0)}),p.on("removed",function(){p.time1&&clearTimeout(p.time1),p.time2&&clearTimeout(p.time2),g.removeChild(m),f&&(f.style.display="none")}),this.add=function(e){return f.innerHTML+=e,p},Object.defineProperty(this,"innerHTML",{get:function(){return f.innerHTML},set:function(e){f.innerHTML=e}}),Object.defineProperty(this,"style",{get:function(){return f.style},set:function(e){f.style=e}}),!1!==u&&Jo.styleTransforms(this,e),this.clone=function(){var e=new Jo.Tag(t,o,n,r,i,l,a,s,c,u,this.group,d);return p.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return r},set:function(e){e!=r&&(r.off("update",p.updateEvent),r.off("resize",p.resizeEvent),r=e,p.resizeEvent=r.on("resize",p.resize),p.updateEvent=r.on("update",p.resize),p.resize())}}),this.resizeEvent=r.on("resize",p.resize),this.updateEvent=r.on("update",p.resize),this.dispose=function(e,t,o){var n;return p.stage&&(n=p.stage),r.off("update",p.updateEvent),r.off("resize",p.resizeEvent),f&&f.parentNode&&f.parentNode.removeChild(f),f=null,o||(this.zimContainer_dispose(!0),n&&n.update()),!0}},Jo.extend(Jo.Tag,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Shader=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m){if(z=zob(Jo.Shader,arguments,"width, height, fragment, uniforms, vertex, dynamic, preCall, postCall, rate, version, canvas, vertexPosition, strip, log, style, group, inherit",this))return z;z_d("50.96"),this.group=f;var z=!1===g?{}:Jo.getStyle("Shader",this.group,m),f=v(z,e,t,o,n,r,i,l,a,s,c,u,d,h,p,this);this.zimBitmap_constructor(f.canvas),this.type="Shader",this.uniforms=f.uniforms,this.canvas=f.canvas,this.gl=f.gl,this.setUniform=f.setUniform,this.update=f.update,this.program=f.program,this.fragment=f.fragment,this.vertex=f.vertex,this.ticker=f.ticker;var y=this,b=f.dynamic;Object.defineProperty(this,"dynamic",{get:function(){return b},set:function(e){e?Jo.Ticker.add(this.ticker):Jo.Ticker.remove(this.ticker),b=!!e}}),!1!==g&&Jo.styleTransforms(this,z),this.clone=function(){return y.cloneProps(new Jo.Shader(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,this.group,m))},this.dispose=function(e,t,o){return this.ticker&&Jo.Ticker.remove(this.ticker),this.uniforms&&this.uniforms.dispose(),this.canvas=null,this.gl=null,this.program=null,this.ticker=null,o||this.zimBitmap_dispose(!0),!0}},Jo.extend(Jo.Shader,Jo.Bitmap,["clone","dispose"],"zimBitmap",!1),Jo.ShaderOverlay=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m){if(z=zob(Jo.ShaderOverlay,arguments,"width, height, fragment, uniforms, vertex, dynamic, preCall, postCall, rate, version, canvas, vertexPosition, strip, log, style, group, inherit",this))return z;z_d("50.962"),this.group=f;var z=!1===g?{}:Jo.getStyle("ShaderOverlay",this.group,m),f=v(z,e,t,o,n,r,i,l,a,s,c,u,d,h,p,this);this.zimTag_constructor(e,t),this.type="ShaderOverlay",this.uniforms=f.uniforms,this.canvas=f.canvas,this.gl=f.gl,this.setUniform=f.setUniform,this.update=f.update,this.program=f.program,this.fragment=f.fragment,this.vertex=f.vertex,this.ticker=f.ticker;var y=this,b=f.dynamic;y.canvas.style.visibility="visible",y.tag.appendChild(y.canvas),Object.defineProperty(this,"dynamic",{get:function(){return b},set:function(e){e?Jo.Ticker.add(this.ticker):Jo.Ticker.remove(this.ticker),b=!!e}}),!1!==g&&Jo.styleTransforms(this,z),this.clone=function(){return y.cloneProps(new Jo.Shader(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,this.group,m))},this.dispose=function(e,t,o){return this.ticker&&Jo.Ticker.remove(this.ticker),this.uniforms&&this.uniforms.dispose(),this.canvas=null,this.gl=null,this.program=null,this.ticker=null,o||this.zimTag_dispose(!0),!0}},Jo.extend(Jo.ShaderOverlay,Jo.Tag,["clone","dispose"],"zimTag",!1),Jo.Uniforms=function(i){this.zimContainer_constructor(),z_d("50.966");var l=this;l.type="Uniforms",Jo.loop(i,function(e,t){t&&l[i]}),l.obj=i;var a=["A","B","C","D"];Jo.loop(i,function(n,r){Array.isArray(r)||(r=[r]),Jo.loop(r,function(e,t,o){1==o?l[n]=r[0]:l[n+"_"+a[t]]=r[t]})}),l.update=function(){Jo.loop(i,function(n,r){Array.isArray(r)||(r=[r]),Jo.loop(r,function(e,t,o){1==o?i[n]=l[n]:r[t]=l[n+"_"+a[t]]})})}},Jo.extend(Jo.Uniforms,Jo.Container,null,"zimContainer",!1),Jo.CustomShape=function(e,t,o,n){Jo.zimCustomShapeCheck||(z_d("50.97"),Jo.zimCustomShapeCheck=!0),this.zimContainer_constructor(e,t,o,n,!1);var r=this;this.mouseChildren=!1,r._dashedOffset=5,Object.defineProperty(r,"color",{get:function(){return r._color},set:function(e){zot(e)&&(e="black"),(r._color=e)&&e.type?r.specialColor(r.colorCommand,e,r):r.colorCommand.style=e}}),this.setColorRange=function(e,t){return zot(t)?(r.startColor=r.color,r.endColor=e):(zot(e)?r.startColor=r.color:r.startColor=e,r.endColor=t),r},r._colorRange=0,Object.defineProperty(r,"colorRange",{get:function(){return r._colorRange},set:function(e){r._colorRange=e,zot(r.startColor)||zot(r.endColor)||(r.color=Jo.colorRange(r.startColor,r.endColor,e))}}),Object.defineProperty(r,"borderColor",{get:function(){return r._borderColor},set:function(e){(r._borderColor=e)&&!r.borderWidth&&(r.borderWidth=1),r.borderColorCommand?e&&e.type?r.specialColor(r.borderColorCommand,e,r):r.borderColorCommand.style=e:r.drawShape()}}),Object.defineProperty(r,"borderWidth",{get:function(){return r._borderWidth},set:function(e){0<e||(e=0),r._borderWidth=e,r.borderWidthCommand&&0!=r._borderWidth?(r.borderWidthCommand.width=r._borderWidth,r._dashed&&(r.borderDashedCommand.segments=r._dashed,r.borderDashedCommand.offset=r._dashedOffset)):(r.borderWidthCommand=null,r.drawShape())}}),Object.defineProperty(r,"thickness",{get:function(){return r._thickness},set:function(e){0<e||(e=0),r._thickness=e,r.thicknessCommand&&0!=r._thickness?(r.thicknessCommand.width=r._thickness,r._dashed&&(r.dashedCommand.segments=r._dashed,r.dashedCommand.offset=r._dashedOffset)):r.drawShape()}}),Object.defineProperty(r,"dashed",{get:function(){return r._dashed},set:function(e){var t;if((r._dashed=e)&&!Array.isArray(r._dashed)&&(r.dashed=[10,10]),"Squiggle"==r.type||"Line"==r.type){if(!r.thicknessCommand||0==r._thickness)return;t=r.dashedCommand}else{if(!r.borderWidthCommand||0==r._borderWidth)return;t=r.borderDashedCommand}t?r._dashed?(t.segments=r._dashed,t.offset=r._dashedOffset):(t.segments=null,t.offset=null):r.drawShape()}}),Object.defineProperty(r,"dashedOffset",{get:function(){return r._dashedOffset},set:function(e){var t;if(isNaN(e)&&(e=5),r._dashedOffset=e,"Squiggle"==r.type||"Line"==r.type){if(!r.thicknessCommand||0==r._thickness)return;t=r.dashedCommand}else{if(!r.borderWidthCommand||0==r._borderWidth)return;t=r.borderDashedCommand}t?r._dashed?(t.segments=r._dashed,t.offset=r._dashedOffset):(t.segments=null,t.offset=null):r.drawShape()}}),Object.defineProperty(r,"corner",{get:function(){return r._corner},set:function(e){r._corner=e,r.drawShape()}}),this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},this.radialGradient=function(e,t,o,n,r,i,l,a){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,l,a),this},this.cloneAll=function(e,t,o,n){var r=this.getBounds();zot(r)&&(r={x:null,y:null,width:null,height:null});e=this.cloneChildren(this.cloneProps(new Jo.Container(r.x,r.y,r.width,r.height,t,o,n)),e);return e.mouseChildren=!1,e.type=this.type,e}},Jo.extend(Jo.CustomShape,Jo.Container,null,"zimContainer",!1),Jo.Circle=function(e,t,o,n,r,l,a,s,c,i,u,d){var h;if(h=zob(Jo.Circle,arguments,"radius, color, borderColor, borderWidth, dashed, percent, percentClose, percentArc, strokeObj, style, group, inherit",this))return h;z_d("51"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Circle",this.group=u;u=!1===i?null!=u?Jo.getStyle(null,null,d,this.group):{}:Jo.getStyle(this.type,this.group,d);zot(e)&&(e=null!=u.radius?u.radius:50),zot(r)&&(r=null!=u.dashed&&u.dashed),zot(o)&&(o=null!=u.borderColor?u.borderColor:null),zot(n)&&(n=null!=u.borderWidth?u.borderWidth:null),o<0||n<0?o=n=null:null!=o&&null==n&&(n=1),zot(t)&&(t=null!=u.color?u.color:0<n?"rgba(0,0,0,0)":Jo.black),zot(l)&&(l=null!=u.percent?u.percent:100),zot(a)&&(a=null==u.percentClose||u.percentClose),zot(s)&&(s=null!=u.percentArc?u.percentArc:null),zot(c)&&(c=null!=u.strokeObj?u.strokeObj:{});var p=function(){return arguments}(e,t,o,n,l);this.veeObj={radius:p[0],color:p[1],borderColor:p[2],borderWidth:p[3],percent:p[4]},e=Jo.Pick.choose(e),t=Jo.Pick.choose(t),o=Jo.Pick.choose(o),n=Jo.Pick.choose(n),l=Jo.Pick.choose(l);var g=this;g._radius=e,g._color=t,g._borderColor=o,g._borderWidth=n,g._dashed=r,g._dashed&&!Array.isArray(g._dashed)&&(g._dashed=[10,10]);r=this.shape=new createjs.Shape;this.addChild(r);var f=r.graphics;g.drawShape=function(){f.c(),g.colorCommand=f.f(g._color).command,g._color&&g._color.type&&g.specialColor(g.colorCommand,g._color,g),(zot(g._borderWidth)||0<g._borderWidth)&&(zot(g._borderColor)&&zot(g._borderWidth)||(zot(g._borderColor)&&(g._borderColor=Jo.black),g.borderColorCommand=f.s(g._borderColor).command,g._borderColor&&g._borderColor.type&&g.specialColor(g.borderColorCommand,g._borderColor,g),g.borderWidthCommand=f.ss(g._borderWidth,c.caps,c.joints,c.miterLimit,c.ignoreScale).command,g._dashed&&(g.borderDashedCommand=f.sd(Array.isArray(g._dashed)?g._dashed:[10,10],g._dashedOffset).command)));var e,t,o,n,r,i=2*g._radius;"number"==typeof l&&0<=l&&l<100?(o=360*l/100/2,f.arc(0,0,g._radius,(-o-90)*Math.PI/180,(o-90)*Math.PI/180,!1),n=Math.sin(o*Math.PI/180)*g._radius,e=Math.cos(o*Math.PI/180)*g._radius,zot(s)||(t=Math.sqrt(Math.pow(n,2)+Math.pow(g._radius+e+s/100*g._radius,2)),0<=s&&(r=Math.asin(n/t),o=g._radius+s/100*g._radius,n=-90*Jo.RAD+r,r=-90*Jo.RAD-r,f.arc(0,o,t,n,r,!0))),a&&f.cp(),i=g._radius-e):f.dc(0,0,g._radius),g.setBounds(-g._radius,-g._radius,2*g._radius,i)},g.drawShape(),t.type&&(g.color=t),Object.defineProperty(g,"radius",{get:function(){return g._radius},set:function(e){g._radius=e,g.drawShape()}}),Object.defineProperty(g,"percentage",{get:function(){return l},set:function(e){l=e,g.drawShape()}}),Object.defineProperty(g,"percentClose",{get:function(){return a},set:function(e){a=e,g.drawShape()}}),Object.defineProperty(g,"percentArc",{get:function(){return s},set:function(e){s=e,g.drawShape()}}),!1!==i&&Jo.styleTransforms(this,u),this.clone=function(e,t){t=zot(t)?i:t;e&&(t=!1);t=g.cloneProps(new Jo.Circle(e||!Jo.isPick(p[0])?g.radius:p[0],e||!Jo.isPick(p[1])?g.color:p[1],e||!Jo.isPick(p[2])?g.borderColor:p[2],e||!Jo.isPick(p[3])?g.borderWidth:p[3],g.dashed,e||!Jo.isPick(p[4])?l:p[4],a,s,c,t,this.group,d));return g.linearGradientParams&&t.linearGradient.apply(t,g.linearGradientParams),g.radialGradientParams&&t.radialGradient.apply(t,g.radialGradientParams),t}},Jo.extend(Jo.Circle,Jo.CustomShape,"clone","zimCustomShape",!1),Jo.Rectangle=function(r,i,l,e,t,o,n,a,s,c,u,d){if(h=zob(Jo.Rectangle,arguments,"width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, scaleDimensions, style, group, inherit",this))return h;z_d("52"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=u;var h=!1===c?null!=u?Jo.getStyle(null,null,d,this.group):{}:Jo.getStyle(this.type,this.group,d);zot(r)&&(r=null!=h.width?h.width:null),zot(i)&&(i=null!=h.height?h.height:zot(r)?100:r),zot(r)&&(r=i),zot(o)&&(o=null!=h.corner?h.corner:0),zot(n)&&(n=null!=h.dashed&&h.dashed),zot(e)&&(e=null!=h.borderColor?h.borderColor:null),zot(t)&&(t=null!=h.borderWidth?h.borderWidth:null),e<0||t<0?e=t=null:null!=e&&null==t&&(t=1),zot(l)&&(l=null!=h.color?h.color:0<t?"rgba(0,0,0,0)":Jo.black),zot(a)&&(a=null!=h.strokeObj?h.strokeObj:{}),zot(s)&&(s=null==h.scaleDimensions||h.scaleDimensions);var p=function(){return arguments}(r,i,l,e,t);this.veeObj={width:p[0],height:p[1],color:p[2],borderColor:p[3],borderWidth:p[4]},r=Jo.Pick.choose(r),i=Jo.Pick.choose(i),l=Jo.Pick.choose(l),e=Jo.Pick.choose(e),t=Jo.Pick.choose(t);var g=this;g._color=l,g._borderColor=e,g._borderWidth=t,g._dashed=n,g._dashed&&!Array.isArray(g._dashed)&&(g._dashed=[10,10]),g._corner=o,g.scaleDimensions=s,g.setWidth=function(e){r=e},g.setHeight=function(e){i=e};s=this.shape=new createjs.Shape;this.addChild(s);var f=s.graphics;g.drawShape=function(){if(f.c(),g.colorCommand=f.f(g._color).command,l&&l.type&&g.specialColor(g.colorCommand,l,g),(zot(g._borderWidth)||0<g._borderWidth)&&(zot(g._borderColor)&&zot(g._borderWidth)||(zot(g._borderColor)&&(g._borderColor=Jo.black),g.borderColorCommand=f.s(g._borderColor).command,g._borderColor&&g._borderColor.type&&g.specialColor(g.borderColorCommand,g._borderColor,g),g.borderWidthCommand=f.ss(g._borderWidth,a.caps,a.joints,a.miterLimit,a.ignoreScale).command,g._dashed&&(g.borderDashedCommand=f.sd(Array.isArray(g._dashed)?g._dashed:[10,10],g._dashedOffset).command))),Array.isArray(g._corner)){var e=g._corner;2==e.length&&(e=[e,e,e,e]);for(var t=[],o=!1,n=0;n<4;n++)zot(e[n])&&(e[n]=0),Array.isArray(e[n])?(o=!0,t.push(e[n])):t.push([e[n],e[n]]);e=t,o?f.mt(0,e[0][1]).curveTo(0,0,e[0][0],0).lt(r-e[1][0],0).curveTo(r,0,r,e[1][1]).lt(r,i-e[2][1]).curveTo(r,i,r-e[2][0],i).lt(e[3][0],i).curveTo(0,i,0,i-e[3][1]).cp():f.rc(0,0,r,i,g._corner[0],g._corner[1],g._corner[2],g._corner[3])}else 0<g._corner?f.rr(0,0,r,i,g._corner):f.r(0,0,r,i);g.setBounds(0,0,r,i),l.type&&(g.color=l)},g.drawShape(),!1===c&&null==u||Jo.styleTransforms(this,h),this.clone=function(e,t){t=zot(t)?c:t;return e&&(t=!1),g.cloneProps(new Jo.Rectangle(e||!Jo.isPick(p[0])?r:p[0],e||!Jo.isPick(p[1])?i:p[1],e||!Jo.isPick(p[2])?g.color:p[2],e||!Jo.isPick(p[3])?g.borderColor:p[3],e||!Jo.isPick(p[4])?g.borderWidth:p[4],o,g._dashed,a,g.scaleDimensions,t,this.group,d))}},Jo.extend(Jo.Rectangle,Jo.CustomShape,"clone","zimCustomShape",!1),Jo.Triangle=function(a,s,o,e,t,n,r,c,u,i,d,l,h,p){var g;if(g=zob(Jo.Triangle,arguments,"a, b, c, color, borderColor, borderWidth, corner, center, adjust, dashed, strokeObj, style, group, inherit",this))return g;z_d("53"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Triangle",this.group=h;h=!1===l?{}:Jo.getStyle(this.type,this.group,p);zot(a)&&(a=null!=h.a?h.a:100),zot(s)&&(s=null!=h.b?h.b:a),zot(o)&&(o=null!=h.c?h.c:a),-1==s&&(s=Math.sqrt(Math.pow(a,2)+Math.pow(o,2))),-1==o&&(o=Math.sqrt(Math.pow(a,2)+Math.pow(s,2))),zot(r)&&(r=null!=h.corner?h.corner:0),zot(c)&&(c=null==h.center||h.center),zot(u)&&(u=null!=h.adjust?h.adjust:0),zot(t)&&(t=null!=h.borderColor?h.borderColor:null),zot(n)&&(n=null!=h.borderWidth?h.borderWidth:null),t<0||n<0?t=n=null:null!=t&&null==n&&(n=1),zot(e)&&(e=null!=h.color?h.color:0<n?"rgba(0,0,0,0)":Jo.black),zot(u)&&(u=null!=h.adjust?h.adjust:0),zot(d)&&(d=null!=h.strokeObj?h.strokeObj:{});var f=function(){return arguments}(a,s,o,e,t,n);this.veeObj={a:f[0],b:f[1],c:f[2],color:f[3],borderColor:f[4],borderWidth:f[5]},a=Jo.Pick.choose(a),s=Jo.Pick.choose(s),o=Jo.Pick.choose(o),this.a=a,this.b=s,this.c=o,e=Jo.Pick.choose(e),t=Jo.Pick.choose(t),n=Jo.Pick.choose(n);var m=this;m._color=e,m._borderColor=t,m._borderWidth=n,m._dashed=i,m._dashed&&!Array.isArray(m._dashed)&&(m._dashed=[10,10]),m._corner=r;n=[a,s,o];n.sort(function(e,t){return t-e});var z,y,b=n[0],v=n[1],w=n[2],C=[n.indexOf(a),n.indexOf(s),n.indexOf(o)];v+w<b?zogy("zim display - Triangle(): invalid triangle lengths"):(z=this.shape=new createjs.Shape,this.adjusted=u,this.addChild(z),y=z.graphics,m.drawShape=function(){var e=[];Array.isArray(m._corner)?e=m._corner:e.push(m._corner,m._corner,m._corner);for(var t=0;t<3;t++)(e[t]<0||"number"!=typeof e[t])&&(e[t]=0);y.c(),m.colorCommand=y.f(m._color).command,m._color&&m._color.type&&m.specialColor(m.colorCommand,m._color,m),(zot(m._borderWidth)||0<m._borderWidth)&&(zot(m._borderColor)&&zot(m._borderWidth)||(zot(m._borderColor)&&(m._borderColor=Jo.black),m.borderColorCommand=y.s(m._borderColor).command,m._borderColor&&m._borderColor.type&&m.specialColor(m.borderColorCommand,m._borderColor,m),m.borderWidthCommand=y.ss(m._borderWidth,d.caps,d.joints,d.miterLimit,d.ignoreScale).command,m._dashed&&(m.borderDashedCommand=y.sd(Array.isArray(m._dashed)?m._dashed:[10,10],m._dashedOffset).command))),m.one={x:0,y:0},m.two={x:a,y:0};var o=180*Math.acos((Math.pow(v,2)+Math.pow(w,2)-Math.pow(b,2))/(2*v*w))/Math.PI,n=180*Math.asin(v*Math.sin(o*Math.PI/180)/b)/Math.PI,r=[o,n,180-o-n];m.angles=[r[C[1]],r[C[2]],r[C[0]]];var i=m.angles[1],l=Math.cos(i*Math.PI/180)*s,o=Math.sin(i*Math.PI/180)*s,n=Math.max(a,a-l),r=o;m.setBounds(0,u,n,r),z.y=r,m.three={x:a-l,y:0-o};i=a*e[0]/(e[0]+e[1]||1);y.mt(i,0).at(a,0,a-l,0-o,e[1]).at(a-l,0-o,0,0,e[2]).at(0,0,a,0,e[0]).lt(i,0),y.cp(),c&&(m.regX=n/2,m.regY=r/2),u&&(m.shape.y+=u)},m.drawShape(),e.type&&(m.color=e),!1!==l&&Jo.styleTransforms(this,h),this.clone=function(e,t){t=zot(t)?l:t;e&&(t=!1);t=m.cloneProps(new Jo.Triangle(e||!Jo.isPick(f[0])?a:f[0],e||!Jo.isPick(f[1])?s:f[1],e||!Jo.isPick(f[2])?o:f[2],e||!Jo.isPick(f[3])?m.color:f[3],e||!Jo.isPick(f[4])?m.borderColor:f[4],e||!Jo.isPick(f[5])?m.borderWidth:f[5],r,c,u,i,d,t,this.group,p));return m.linearGradientParams&&t.linearGradient.apply(t,m.linearGradientParams),m.radialGradientParams&&t.radialGradient.apply(t,m.radialGradientParams),t})},Jo.extend(Jo.Triangle,Jo.CustomShape,"clone","zimCustomShape"),Jo.Poly=function(e,t,o,n,r,i,l,a,s,c,u,d){var h;if(h=zob(Jo.Poly,arguments,"radius, sides, pointSize, color, borderColor, borderWidth, dashed, strokeObj, flat, style, group, inherit",this))return h;z_d("53.1"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Poly",this.group=u;u=!1===c?{}:Jo.getStyle(this.type,this.group,d);zot(e)&&(e=null!=u.radius?u.radius:50),zot(t)&&(t=null!=u.sides?u.sides:5),zot(o)&&(o=null!=u.pointSize?u.pointSize:0),zot(l)&&(l=null!=u.dashed&&u.dashed),zot(r)&&(r=null!=u.borderColor?u.borderColor:null),zot(i)&&(i=null!=u.borderWidth?u.borderWidth:null),r<0||i<0?r=i=null:null!=r&&null==i&&(i=1),zot(n)&&(n=null!=u.color?u.color:0<i?"rgba(0,0,0,0)":Jo.black),zot(a)&&(a=null!=u.strokeObj?u.strokeObj:{}),zot(s)&&(s=null!=u.flat&&u.flat);var p=function(){return arguments}(e,t,o,n,r,i);this.veeObj={radius:p[0],sides:p[1],pointSize:p[2],color:p[3],borderColor:p[4],borderWidth:p[5]},e=Jo.Pick.choose(e),t=Jo.Pick.choose(t),o=Jo.Pick.choose(o),n=Jo.Pick.choose(n),r=Jo.Pick.choose(r),i=Jo.Pick.choose(i);var g=this;g._radius=e,g._color=n,g._sides=t,g._pointSize=o,g._borderColor=r,g._borderWidth=i,g._dashed=l,g._dashed&&!Array.isArray(g._dashed)&&(g._dashed=[10,10]);l=this.shape=new createjs.Shape;this.addChild(l);var f=l.graphics;g.drawShape=function(){var e;f.c(),g.colorCommand=f.f(g._color).command,g._color&&g._color.type&&g.specialColor(g.colorCommand,g._color,g),(zot(g._borderWidth)||0<g._borderWidth)&&(zot(g._borderColor)&&zot(g._borderWidth)||(zot(g._borderColor)&&(g._borderColor=Jo.black),g.borderColorCommand=f.s(g._borderColor).command,g._borderColor&&g._borderColor.type&&g.specialColor(g.borderColorCommand,g._borderColor,g),g.borderWidthCommand=f.ss(g._borderWidth,a.caps,a.joints,a.miterLimit,a.ignoreScale).command,g._dashed&&(g.borderDashedCommand=f.sd(Array.isArray(g._dashed)?g._dashed:[10,10],g._dashedOffset).command))),e=!s||g._sides%2!=0?-90:g._sides%4==0?360/g._sides/2:0,f.dp(0,0,g._radius,g._sides,g._pointSize,e),g.setBounds(-g._radius,-g._radius,2*g._radius,2*g._radius)},g.drawShape(),n.type&&(g.color=n),Object.defineProperty(g,"radius",{get:function(){return g._radius},set:function(e){g._radius=e,g.drawShape()}}),Object.defineProperty(g,"sides",{get:function(){return g._sides},set:function(e){g._sides=e,g.drawShape()}}),Object.defineProperty(g,"pointSize",{get:function(){return g._pointSize},set:function(e){g._pointSize=e,g.drawShape()}}),!1!==c&&Jo.styleTransforms(this,u),this.clone=function(e,t){t=zot(t)?c:t;e&&(t=!1);t=g.cloneProps(new Jo.Poly(e||!Jo.isPick(p[0])?g.radius:p[0],e||!Jo.isPick(p[1])?g.sides:p[1],e||!Jo.isPick(p[2])?g.pointSize:p[2],e||!Jo.isPick(p[3])?g.color:p[3],e||!Jo.isPick(p[4])?g.borderColor:p[4],e||!Jo.isPick(p[5])?g.borderWidth:p[5],g.dashed,a,t,this.group,d));return g.linearGradientParams&&t.linearGradient.apply(t,g.linearGradientParams),g.radialGradientParams&&t.radialGradient.apply(t,g.radialGradientParams),t}},Jo.extend(Jo.Poly,Jo.CustomShape,"clone","zimCustomShape",!1),Jo.Line=function(e,o,x,k,T,t,A,r,n,P,E,i,S,B,l,a,s){var c;if(c=zob(Jo.Line,arguments,"length, thickness, color, startHead, endHead, dashed, strokeObj, lineType, lineOrientation, curveH, curveV, points, startLength, endLength, style, group, inherit",this))return c;z_d("53.15"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Line",this.group=a;a=!1===l?{}:Jo.getStyle(this.type,this.group,s);zot(e)&&(e=null!=a.length?a.length:100),zot(t)&&(t=null!=a.dashed&&a.dashed),zot(o)&&(o=null!=a.thickness?a.thickness:3),zot(x)&&(x=null!=a.color?a.color:Jo.black),zot(k)&&(k=null!=a.startHead?a.startHead:null),zot(T)&&(T=null!=a.endHead?a.endHead:null),zot(A)&&(A=null!=a.strokeObj?a.strokeObj:{}),zot(r)&&(r=null!=a.lineType?a.lineType:"straight"),"corner"!==r&&"curve"!=r&&(r="straight"),zot(n)&&(n=null!=a.lineOrientation?a.lineOrientation:"auto"),"vertical"!==n&&"horizontal"!=n&&(n="auto"),zot(P)&&(P=null!=a.curveH?a.curveH:20),zot(E)&&(E=null!=a.curveV?a.curveV:20),zot(A)&&(A=null!=a.strokeObj?a.strokeObj:{}),zot(S)&&(S=null!=a.startLength?a.startLength:null),zot(B)&&(B=null!=a.endLength?a.endLength:null);var u=function(){return arguments}(e,x,o,k,T,S,B);this.veeObj={length:u[0],color:u[1],thickness:u[2],startHead:u[3],endHead:u[4],startLength:u[5],endLength:u[6]},e=Jo.Pick.choose(e),x=Jo.Pick.choose(x),o=Jo.Pick.choose(o),k=Jo.Pick.choose(k),T=Jo.Pick.choose(T),k&&k.clone&&(k=k.clone()),T&&T.clone&&(T=T.clone()),S=Jo.Pick.choose(S),B=Jo.Pick.choose(B);var W=this;function d(e,t){"triangle"==t||"arrow"==t?(W["_"+e+"Head"]=new Jo.Triangle(4*o,4*o,4*o,x)).rotation=90:"circle"==t&&(W["_"+e+"Head"]=new Jo.Circle(2.2*o,x)),zot(W["_"+e+"Head"].startAngle)&&(W["_"+e+"Head"].startAngle=W["_"+e+"Head"].rotation)}W._length=e,W._color=x,W._thickness=o,W._dashed=t,W._dashed&&!Array.isArray(W._dashed)&&(W._dashed=[10,10]),W._startX=0,W._startY=0,W._endX=e,W._endY=0,W._startHead=k,W._endHead=T,W._points=i,W._lineOrientation=n,W.angle=0,W.lineType=r,W._startHead&&d("start",W._startHead),W._endHead&&d("end",W._endHead),k=W._startHead,T=W._endHead,k&&"Triangle"==k.type&&(k.startRegY=k.regY),T&&"Triangle"==T.type&&(T.startRegY=T.regY);n=this.shape=new createjs.Shape;this.addChild(n);var I=n.graphics;W.drawShape=function(e,t){var o;if(I.c(),W.colorCommand=I.s(W._color).command,x&&x.type&&W.specialColor(W.colorCommand,x,W),W.thicknessCommand=I.ss(W._thickness,A.caps,A.joints,A.miterLimit,A.ignoreScale).command,W._dashed&&(W.dashedCommand=I.sd(Array.isArray(W._dashed)?W._dashed:[10,10],W._dashedOffset).command),W._points){var n=W._points[0];W._startX=n[0],W._startY=n[1];var r=W._points[W._points.length-1],i=[r[r.length-2],r[r.length-1]];W._endX=i[0],W._endY=i[1],I.mt(n[0],n[1]);for(var l,a=1;a<W._points.length;a++){var s=W._points[a];1==a&&(o=[W._startX,W._startY,s[0],s[1]]),2==s.length?I.lt(s[0],s[1]):4==s.length?I.qt(s[0],s[1],s[2],s[3]):6==s.length&&I.bt(s[0],s[1],s[2],s[3],s[4],s[5])}l=4<=s.length?[s[s.length-4],s[s.length-3],W._endX,W._endY]:[(C=W._points[W._points.length-2])[C.lenth-2],C[C.lenth-1],W._endX,W._endY]}else{var c,u,d,h,p,g,f,m,z,y,b,v,w,r=W._startX,i=W._startY,n=W._endX,C=W._endY;"straight"==W.lineType?(k&&"Triangle"==k.type&&((k.regY=0)!=(c=Jo.dist(r,i,n,C))&&(r+=W._startHead.height/2*(n-r)/c),0!=c&&(i+=W._startHead.height/2*(C-i)/c)),T&&"Triangle"==T.type&&((T.regY=0)!=(c=Jo.dist(r,i,n,C))&&(n-=W._endHead.height/2*(n-r)/c),0!=c&&(C-=W._endHead.height/2*(C-i)/c))):(e?"horizontal"==W._lineOrientation||"horizontal"==W.autoOrientation?k&&"Triangle"==k.type&&(k.regY=0,r=r<n?Math.min(n,r+W._startHead.height/2):Math.max(n,r-W._startHead.height/2)):k&&"Triangle"==k.type&&(k.regY=0,i=i<C?Math.min(C,i+W._startHead.height/2):Math.max(C,i-W._startHead.height/2)):k&&"Triangle"==k.type&&(k.regY=k.startRegY),t?"horizontal"==W._lineOrientation||"horizontal"==W.autoOrientation?T&&"Triangle"==T.type&&(T.regY=0,r<n?n-=W._endHead.height/2:n+=W._endHead.height/2):T&&"Triangle"==T.type&&(T.regY=0,i<C?C-=W._endHead.height/2:C+=W._endHead.height/2):T&&"Triangle"==T.type&&(T.regY=T.startRegY)),"straight"==W.lineType?(I.mt(r,i).lt(n,C),o=l=[r,i,n,C]):"corner"==W.lineType?(u=r+.4*(n-r),g=i+.4*(C-i),"auto"==W._lineOrientation&&(W.autoOrientation=Math.abs(r-n)>Math.abs(i-C)?"horizontal":"vertical"),"horizontal"==W._lineOrientation||"horizontal"==W.autoOrientation?(o=l=[r,i,u,i],d=u,null!=S&&(r<u?S<u-r&&(d=r+S):S<r-u&&(d=r-S)),null!=B?(p=u<n?B<n-u?n-B:u:B<u-n?n+B:u,null==S&&(d=p)):p=d,I.mt(r,i).lt(d,i).lt(p,C).lt(n,C)):(o=l=[r,i,r,g],f=g,null!=S&&(i<g?S<g-i&&(f=i+S):S<i-g&&(f=i-S)),null!=B?(m=g<C?B<C-g?C-B:g:B<g-C?C+B:g,null==S&&(f=m)):m=f,I.mt(r,i).lt(r,f).lt(n,m).lt(n,C))):(t=n<r?-1:1,u=C<i?-1:1,d=r,h=i,p=Math.abs(r-n),g=Math.abs(i-C),f=Math.min(P,.5*p),m=Math.min(E,.5*g),"auto"==W._lineOrientation&&(W.autoOrientation=Math.abs(r-n)>Math.abs(i-C)?"horizontal":"vertical"),null!=S&&null!=B&&(S=null,zon&&zogy("ZIM Line() - startLength ignored")),"horizontal"==W._lineOrientation||"horizontal"==W.autoOrientation?(z=g-2*m,y=(p-2*f)/2,w=0,null!=S&&(w=Math.max(0,p/2-S)),null!=B&&(w=Math.min(0,-(p/2-B))),I.mt(d,h),0<y&&(d+=(y-w)*t,I.lt(d,h)),v=h,h+=m*u,d+=f*t,I.qt(d,v,d,h),o=l=[r,i,d,i],0<z&&(h+=z*u,I.lt(d,h)),h+=m*u,b=d,d+=f*t,I.qt(b,h,d,h),0<y&&(d+=(y+w)*t,I.lt(d,h))):(z=p-2*f,y=(g-2*m)/2,w=0,null!=S&&(w=Math.max(0,g/2-S)),null!=B&&(w=Math.min(0,-(g/2-B))),I.mt(d,h),0<y&&(h+=(y-w)*u,I.lt(d,h)),b=d,d+=f*t,h+=m*u,I.qt(b,h,d,h),o=l=[r,i,r,h],0<z&&(d+=z*t,I.lt(d,h)),d+=f*t,v=h,h+=m*u,I.qt(d,v,d,h),0<y&&(h+=(y+w)*u,I.lt(d,h))))}W.setBounds(Math.min(W._startX,W._endX),Math.min(W._startY,W._endY),Math.abs(W._startX-W._endX),Math.abs(W._startY-W._endY)),W._length=Math.sqrt(Math.pow(W._startX-W._endX,2)+Math.pow(W._startY-W._endY,2)),W.angle=180*Math.atan2(W._endY-W._startY,W._endX-W._startX)/Math.PI,W._startHead&&W._startHead.loc&&(W._startHead.loc(W._startX,W._startY,W),h=180*Math.atan2(o[3]-o[1],o[2]-o[0])/Math.PI,W._startHead.rotation=h-180+W._startHead.startAngle),W._endHead&&W._endHead.loc&&(W._endHead.loc(W._endX,W._endY,W),l=180*Math.atan2(l[3]-l[1],l[2]-l[0])/Math.PI,W._endHead.rotation=l+W._endHead.startAngle)},W.drawShape(),x.type&&(W.color=x),this.setPoints=function(e,t,o,n,r,i){return Array.isArray(e)&&zot(t)?W.points=e:(e&&!zot(e.x)?(W._startX=zot(e.x)?W._startX:e.x,W._startY=zot(e.y)?W._startY:e.y,t&&(W._endX=zot(t.x)?W._endX:t.x,W._endY=zot(t.y)?W._endY:t.y)):(W._startX=zot(e)?W._startX:e,W._startY=zot(t)?W._startY:t,W._endX=zot(o)?W._endX:o,W._endY=zot(n)?W._endY:n),W.drawShape(r,i)),W},this.from=function(e,t,o){var n,r;return zot(o)&&(o=!0),e&&e.parent&&W.parent&&o&&(n=(r=e.parent.localToLocal(e.x,e.y,W.parent)).x,r=r.y),e&&!zot(e.x)?(W._startX=zot(n)?zot(e.x)?W._startX:e.x:n,W._startY=zot(r)?zot(e.y)?W._startY:e.y:r):(W._startX=zot(e)?W._startX:e,W._startY=zot(t)?W._startY:t),W.drawShape(),W},this.to=function(e,t,o){var n,r;return zot(o)&&(o=!0),e&&e.parent&&W.parent&&o&&(n=(r=e.parent.localToLocal(e.x,e.y,W.parent)).x,r=r.y),e&&!zot(e.x)?(W._endX=zot(n)?zot(e.x)?W._endX:e.x:n,W._endY=zot(r)?zot(e.y)?W._endY:e.y:r):(W._endX=zot(e)?W._endX:e,W._endY=zot(t)?W._endY:t),W.drawShape(),W},Object.defineProperty(W,"length",{get:function(){return W._length},set:function(e){var t,o,n=0!=W.length?e/W.length:0;isNaN(n)||(t=W.scaleX,o=W.scaleY,W.scaleX*=n,W.scaleY*=n,e=W.localToGlobal(W._startX,W._startY),n=W.localToGlobal(W._endX,W._endY),W.scaleX=t,W.scaleY=o,e=W.globalToLocal(e.x,e.y),n=W.globalToLocal(n.x,n.y),W.setPoints(e,n))}}),Object.defineProperty(W,"startPoint",{get:function(){return new Jo.Point(W._startX,W._startY)},set:function(e){W._startX=zot(e.x)?W._startX:e.x,W._startY=zot(e.y)?W._startY:e.y,W.drawShape()}}),Object.defineProperty(W,"endPoint",{get:function(){return new Jo.Point(W._endX,W._endY)},set:function(e){W._endX=zot(e.x)?W._endX:e.x,W._endY=zot(e.y)?W._endY:e.y,W.drawShape()}}),Object.defineProperty(W,"startHead",{get:function(){return W._startHead},set:function(e){W._startHead=e,W.drawShape()}}),Object.defineProperty(W,"endHead",{get:function(){return W._endHead},set:function(e){W._endHead=e,W.drawShape()}}),Object.defineProperty(W,"startX",{get:function(){return W._startX},set:function(e){W._startX=e||0,W.drawShape()}}),Object.defineProperty(W,"startY",{get:function(){return W._startY},set:function(e){W._startY=e||0,W.drawShape()}}),Object.defineProperty(W,"endX",{get:function(){return W._endX},set:function(e){W._endX=e||0,W.drawShape()}}),Object.defineProperty(W,"endY",{get:function(){return W._endY},set:function(e){W._endY=e||0,W.drawShape()}}),Object.defineProperty(W,"startLength",{get:function(){return S},set:function(e){u[5]=e,S=zik(e),W.drawShape()}}),Object.defineProperty(W,"endLength",{get:function(){return B},set:function(e){u[6]=e,B=zik(e),W.drawShape()}}),Object.defineProperty(W,"points",{get:function(){return W._points},set:function(e){e&&(W._points=e,W.drawShape())}}),Object.defineProperty(W,"lineOrientation",{get:function(){return W._lineOrientation},set:function(e){e&&(W._lineOrientation=e,W.drawShape())}}),!1!==l&&Jo.styleTransforms(this,a),this.clone=function(e,t){var o=zot(t)?l:t;e&&(o=!1);var n=e||!Jo.isPick(u[3])?W._startHead:u[3];n&&n.clone&&((n=n.clone()).rotation=W._startHead.startAngle);t=e||!Jo.isPick(u[4])?W._endHead:u[4];t&&t.clone&&((t=t.clone()).rotation=W._endHead.startAngle);o=W.cloneProps(new Jo.Line(e||!Jo.isPick(u[0])?W.length:u[0],e||!Jo.isPick(u[2])?W.thickness:u[2],e||!Jo.isPick(u[1])?W.color:u[1],n,t,W.dashed,A,r,W._lineOrientation,P,E,Jo.copy(i),e||!Jo.isPick(u[5])?S:u[5],e||!Jo.isPick(u[6])?B:u[6],o,this.group,s));return W.points?o.setPoints(W.points):o.setPoints(W._startX,W._startY,W._endX,W._endY),W.linearGradientParams&&o.linearGradient.apply(o,W.linearGradientParams),W.radialGradientParams&&o.radialGradient.apply(o,W.radialGradientParams),o}},Jo.extend(Jo.Line,Jo.CustomShape,"clone","zimCustomShape",!1),Jo.Squiggle=function(x,k,T,A,P,E,S,B,W,I,t,M,O,j,e,o,n,r,L,D,i,_,R,Y,l,X){var a;if(a=zob(Jo.Squiggle,arguments,"color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return a;z_d("53.2"),this.group=l;var N=!1===Y?{}:Jo.getStyle("Squiggle",this.group,X);zot(k)&&(k=null!=N.thickness?N.thickness:6),zot(A)&&(A=null!=N.length?N.length:300),zot(T)&&(T=null!=N.points?N.points:5),"string"==typeof T&&(h=new Jo.SVGContainer,T=h.processPath(T));var s,F,H,V,G,U,q,Q,Z,K,J,$,c,ee,te,oe,u,d,h="number"!=typeof T,ne="number"==typeof T?T:T.length;function p(){oe&&oe.removeAllEventListeners(),V.num=ne="number"==typeof T?T:T.length,ne=Math.max(2,ne),P=A/ne,Z=V.shape=new Jo.Shape({style:!1}).addTo(V);var o=V.sticks=new Jo.Shape({style:!1}).addTo(V);I<=0&&o.removeFrom();var m=Z.graphics;m.c();var z=o.graphics;z.c();var e=I/10*8,t=I;V.selectPoints?(V.selectedBalls=new Jo.SelectionSet,V.selectedRect1s=new Jo.SelectionSet,V.selectedRect2s=new Jo.SelectionSet,V.selectionManager=new Jo.SelectionManager([V.selectedBalls,V.selectedRect1s,V.selectedRect2s],"ctrl",!1)):V.selectionManager=new Jo.SelectionManager(null,"ctrl");var u,n,r,l,i,a,s,c,d,h=Jo.mobile();for(oe=V.controls=new Jo.Container({style:!1}).addTo(V),V.interactive&&oe.drag({onTop:!h}),U=[],Q=[],q=[],u=0;u<ne;u++)(d=new Jo.Container({style:!1}).addTo(oe)).num=u,"number"==typeof T?(s=Jo.Pick.choose(P),c=new Jo.Container(s,k,null,null,!1).addTo(V).loc({x:u*A/(ne-1)-s/2,y:u%2*s}),l=new Jo.Circle(e,V.selectPoints&&V.selectedBalls.isSelected(u)?L:V.circleColor,V.circleBorderColor,2,null,null,null,null,null,!1).centerReg(c).loc({x:s/2,y:0}),i=new Jo.Rectangle(t,t,V.selectPoints&&V.selectedRect1s.isSelected(u)?L:y(E),0==I?null:Jo.dark,0==I?null:2,null,null,null,null,!1).centerReg(c).loc({x:0,y:0}),a=new Jo.Rectangle(t,t,V.selectPoints&&V.selectedRect2s.isSelected(u)?L:y(E),0==I?null:Jo.dark,0==I?null:2,null,null,null,null,!1).centerReg(c).loc({x:s,y:0}),s=c.localToLocal(l.x,l.y,oe),l.x=s.x,l.y=s.y,l.addTo(d,null,!1),s=c.localToLocal(i.x,i.y,oe),i.x="none"==E?0:s.x-l.x,i.y="none"==E?0:s.y-l.y,i.addTo(d,null,!1),c=c.localToLocal(a.x,a.y,oe),a.x="none"==E?0:c.x-l.x,a.y="none"==E?0:c.y-l.y,a.addTo(d,null,!1),d.x=l.x,d.y=l.y,l.x=0,l.y=0,"none"==E&&l.addTo(d,null,!1)):(n=(r=T[u])[8]||E,d.loc({x:r[0],y:r[1]}),l=new Jo.Circle(e,V.circleColor,V.circleBorderColor,2,null,null,null,null,null,!1).centerReg({add:!1}).addTo(d).loc({x:r[2],y:r[3]}),i=new Jo.Rectangle(t,t,y(n),0==I?null:Jo.dark,0==I?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(d,0).loc({x:r[4],y:r[5]}),a=new Jo.Rectangle(t,t,y(n),0==I?null:Jo.dark,0==I?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(d,0).loc({x:r[6],y:r[7]})),l.mySet=d,l.rect1=i,l.rect2=a,l.index=u,h?l.on("mousedown",g):l.on("dblclick",f),i.ball=l,(i.other=a).ball=l,a.other=i,0==I&&(l.expand(10),i.expand(10),a.expand(10)),h&&(l.expand(),i.expand(),a.expand()),n=[d,l,i,a,r?r[8]:E],U.push(n),q.push(l),Q.push(d);var p=!1;function g(e){p?(e.preventDefault(),f(e)):(p=!0,setTimeout(function(){p=!1},300))}function f(e){var t,o;V.lockControlType||(t=e.target,o=U[t.index][4]||E,Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=V.types[(V.types.indexOf(o)+(V.shiftKey?-1:1)+V.types.length)%V.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),U[t.index][4]=o,t.rect1.color=y(o),t.rect2.color=y(o),V.drawShape(),x.type&&(V.color=x),(o=new createjs.Event("change")).controlType="bezierSwitch",V.dispatchEvent(o),t.stage.update())}function y(e){var t={straight:"#e472c4",free:"#ebcb35",none:"#50c4b7"};return t[e]||"#993399"}var b,v=Jo.mobile();V.drawShape=function(){m.c();var e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f=v?10:6;if(k<f)for(m.s("rgba(0,0,0,.01)").ss(f),s=(n=U[0][0]).localToLocal(U[0][1].x,U[0][1].y,Z),m.mt(s.x,s.y),e=0;e<U.length;e++)o=((t=e)+1)%U.length,n=U[t][0],r=U[t][1],i=U[t][2],l=U[t][3],a=U[o][0],c=U[o][1],u=U[o][2],h=n.localToLocal(l.x,l.y,Z),p=a.localToLocal(u.x,u.y,Z),g=a.localToLocal(c.x,c.y,Z),e!=U.length-1&&m.bt(h.x,h.y,p.x,p.y,g.x,g.y);for(V.colorCommand||(V.colorCommand=m.s(V._color).command,x&&x.type&&V.specialColor(V.colorCommand,x,V)),V.thicknessCommand||(V.thicknessCommand=m.ss(V._thickness,R.caps,R.joints,R.miterLimit,R.ignoreScale).command),V._dashed&&(V.dashedCommand||(V.dashedCommand=m.sd(Array.isArray(V._dashed)?V._dashed:[10,10],V._dashedOffset).command)),s=(n=U[0][0]).localToLocal(U[0][1].x,U[0][1].y,Z),m.mt(s.x,s.y),z.c().s(V.stickColor).ss(V.stickThickness),e=0;e<U.length;e++)o=((t=e)+1)%U.length,n=U[t][0],r=U[t][1],i=U[t][2],l=U[t][3],a=U[o][0],c=U[o][1],u=U[o][2],h=n.localToLocal(l.x,l.y,Z),p=a.localToLocal(u.x,u.y,Z),g=a.localToLocal(c.x,c.y,Z),e!=U.length-1&&m.bt(h.x,h.y,p.x,p.y,g.x,g.y),s=n.localToLocal(r.x,r.y,Z),d=n.localToLocal(i.x,i.y,Z),0==e&&(i.visible=0),0!=e&&z.mt(s.x,s.y).lt(d.x,d.y),e!=U.length-1&&z.mt(s.x,s.y).lt(h.x,h.y),e==U.length-1&&(l.visible=0);V._dashed&&m.append(V.dashedCommand),m.append(V.thicknessCommand),m.append(V.colorCommand)},V.drawShape(),x.type&&(V.color=x);var w=!1;function C(e){var t;"Circle"==e.target.type&&(t=V.lastindex=V.controls.getChildIndex(e.target.parent),V.controls.numChildren<=2||(e=V.points,V.selectPoints&&(V.lastPoints=Jo.copy(e)),e.splice(t,1),V.points=e,V.stage.update(),V.lastSelected=V.lastindex=null))}oe.on("mousedown",function(t){var e,o,n;if((G=t.target.stage,!V.lockControls)&&(w=!0,oe.loop(function(e){e!=t.target.parent&&(null==e.lastChildren&&(e.lastChildren=e.mouseChildren),null==e.lastMouse&&(e.lastMouse=e.mouseEnabled),e.noMouse())}),null==Z.lastMouse&&(Z.lastMouse=Z.mouseEnabled),Z.mouseEnabled=!1,V.selectPoints&&(V.keyFocus=!0),b={x:t.target.x,y:t.target.y},t.target.rect1?((l=t.target).startX=l.x,l.startY=l.y,l.rect1.startX=l.rect1.x,l.rect1.startY=l.rect1.y,l.rect2.startX=l.rect2.x,l.rect2.startY=l.rect2.y):((n=t.target).startX=n.x,n.startY=n.y,e=(l=n.ball).index,o=E,zot(U[e][4])||(o=U[e][4]),"straight"==o&&(o=(e=n.other).x-l.x,n=e.y-l.y,e.stickLength=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)))),V.selectPoints)){var r=V.selectionManager.currentSet;if(r&&r.selections&&0<r.selections.length)for(u=0;u<r.selections.length;u++){var i=V.pointObjects[r.selections[u]];i[1].startX=i[1].x,i[1].startY=i[1].y,i[2].startX=i[2].x,i[2].startY=i[2].y,i[3].startX=i[3].x,i[3].startY=i[3].y}}}),V.selectPoints&&oe.tap({call:function(e){var t;for(e.target.rect1?(t=e.target,V.selectedBalls.toggle(t.parent.num)):((e=e.target).color="white",((t=e.ball).rect1==e?V.selectedRect1s:V.selectedRect2s).toggle(t.parent.num)),u=0;u<V.pointObjects.length;u++){var o=V.pointObjects[u];o[1].color=V.selectedBalls.isSelected(u)?L:V.circleColor,o[2].color=V.selectedRect1s.isSelected(u)?L:y(o[4]),o[3].color=V.selectedRect2s.isSelected(u)?L:y(o[4])}G.update()},mobileUp:!0}),oe.on("pressmove",function(e){if(!V.lockControls)if(V.selectPoints){var t=re();if(-1==t.indexOf(e.target))te(e.target),V.drawShape();else if(0<t.length){for(var o=e.target.x-e.target.startX,n=e.target.y-e.target.startY,r=0;r<t.length;r++){var i=t[r];i.x=i.startX+o,i.y=i.startY+n,te(i)}V.drawShape()}}else te(e.target),V.drawShape()}),oe.on("pressup",function(t){var e,o;V.lockControls||(w=!1,oe.loop(function(e){e!=t.target.parent&&(null!=e.lastChildren&&(e.mouseChildren=e.lastChildren),null!=e.lastMouse&&(e.mouseEnabled=e.lastMouse),e.lastChildren=null,e.lastMouse=null)}),null!=Z.lastMouse&&(Z.mouseEnabled=Z.lastMouse),Z.lastMouse=null,e=t.target.x!=b.x||t.target.y!=b.y,o=new createjs.Event("change"),t.target.rect1?(o.controlType="bezierPoint",function(e){if(V.selectPoints){var t=re();if(t&&-1==t.indexOf(e))ie(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)ie(t[o]);else ie(e)}else ie(e)}(t.target)):o.controlType="bezierHandle",e&&V.dispatchEvent(o))}),V.changeControl=function(e,t,o,n,r,i,l,a,s){var c;if(c=zob(V.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return c;if(zot(e))for(u=0;u<U.length;u++)V.changeControl(u,t,o,n,r,i,l,a);else{e=U[e];"none"==(e[4]=t)?(zot(l)||(e[2].x=l),zot(a)||(e[2].y=a),e[2].x=e[1].x,e[2].y=e[1].y,e[3].x=e[1].x,e[3].y=e[1].y,e[1].parent.addChild(e[1])):(zot(o)||(e[2].x=o),zot(n)||(e[2].y=n),zot(r)||(e[3].x=r),zot(i)||(e[3].y=i),zot(l)||(e[1].x=l),zot(a)||(e[1].y=a),e[1].parent.addChildAt(e[1],0)),s&&(V.update(),G&&G.update())}},V.transformPoints=function(e,t,o,n,r){return zot(r)&&(r=!0),V.points=Jo.transformPoints(V.points,e,t,o,n),r&&V.approximateBounds(),V},V.traverse=function(e,t,o,n,r){var i=Jo.copy(V.segmentRatios);i.unshift(0),zot(o)&&(o=t+1);var l,t=100*i[t],o=100*i[o];!r&&o<t?l=100-t+o:!r&&t<o?l=o-t:r&&o<t?l=-(t-o):r&&t<o&&(l=-(100-o+t));var a=new createjs.Event("traversed");return(a.obj=e).animate({ease:"linear",props:{path:V,startPercent:t,percent:l},time:n,call:function(){V.dispatchEvent(a)}}),V},V.reversePoints=function(){return T=Jo.copy(V.points),V.points=Jo.reversePoints(Jo.copy(V.points)),V.update(),V},V.appendPoints=function(e,t){var o=Jo.copy(V.points);return V.points=Jo.appendPoints(o,e,t),V.update(),V},V.prependPoints=function(e,t){var o=Jo.copy(V.points);return V.points=Jo.rependPoints(o,T,t),V.update(),V},V.splitPoints=function(e){var t=Jo.copy(V.points);if(!(e<1||e>t.length-1)){var o=Jo.splitPoints(t,e),t=o[0],e=o[1],o=V.clone();return V.points=t,V.update(),o.points=e,V.parent&&o.addTo(V.parent),o}},V.makeBlob=function(n,e){zot(n)&&(n="mirror"),zot(e)&&(e=5);var t=Jo.copy(V.points);return Jo.loop(t,function(e,t,o){e[8]||(e[8]="mirror"),0==t&&("free"==n&&(e[4]=e[5]=0),e[8]=n),t==o-1&&("free"==n&&(e[6]=e[7]=0),e[8]=n)}),Math.abs(t[0][0]-t[t.length-1][0])<e&&Math.abs(t[0][1]-t[t.length-1][1])<e&&(t[0][4]=t[t.length-1][4],t[0][5]=t[t.length-1][5],t.pop()),new Jo.Blob({points:t,borderColor:V.color,borderWidth:V.thickness,showControls:V.controlsVisible,interactive:V.interactive,onTop:V.onTop,dashed:V.dashed,stickColor:V.stickColor,stickThickness:V.stickThickness})},V.update=function(e){return e?V.points=V.pointsAdjusted:V.drawShape(),V.zimAnimateChanged=!0,V},V.interactive&&M&&Z.drag({onTop:!1}),K=Z.on("mousedown",function(e){G=e.target.stage,b={x:Z.x,y:Z.y},V.selectPoints&&(V.keyFocus=!0),V.onTop&&(e=V.parent.numChildren-1,"Keyboard"==V.parent.getChildAt(e).type&&e--,V.parent.setChildIndex(V,e))}),J=Z.on("pressmove",function(){oe.x=Z.x,oe.y=Z.y,o.x=Z.x,o.y=Z.y}),$=Z.on("pressup",function(){var e=Z.x!=b.x||Z.y!=b.y,t=Z.localToLocal(V.regX,V.regY,V.parent);V.x=t.x,V.y=t.y,oe.x=oe.y=o.x=o.y=Z.x=Z.y=0,e&&((e=new createjs.Event("change")).controlType="move",V.dispatchEvent(e)),G&&G.update()}),V.move||ae(!0),V.toggleEvent=V.on("mousedown",function(){V.allowToggle&&(F||(V.showControls(),V.dispatchEvent("controlsshow")))}),V.added(function(){G=V.stage,V.toggleStageEvent&&G.off("stagemousedown",V.toggleStageEvent),V.toggleStageEvent=G.on("stagemousedown",function(e){!w&&V.allowToggle&&V.stage&&F&&!V.hitTestPoint(e.stageX/Jo.scaX,e.stageY/Jo.scaY,!1)&&(V.hideControls(),V.dispatchEvent("controlshide"))})}),V.clickEvent=V.on("click",function(){V.ctrlKey&&setTimeout(function(){V.clone(!0).addTo(V.stage).mov(0,100),V.allowToggle&&(V.hideControls(),V.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",V.dispatchEvent(e),V.stage.update()},50)}),V.hideControls=function(){return V.toggled=!1,oe.visible=!1,o.visible=!1,F=!1,V.stage&&V.stage.update(),!V.allowToggle&&V.move&&ae(),V},B||V.hideControls(),V.showControls=function(){return V.toggled=!0,oe.visible=!0,o.visible=!0,F=!0,oe.x=Z.x,oe.y=Z.y,o.x=Z.x,o.y=Z.y,V.addChildAt(Z,0),V.move&&!V.allowToggle&&le(),V.stage&&V.stage.update(),V},V.toggle=function(e){return!0!==e&&(!1===e||F)?V.hideControls():V.showControls(),V},V.recordData=function(e){zot(e)&&(e=!1);var t={type:"Squiggle",index:V.parent?V.parent.getChildIndex(V):-1,x:V.x,y:V.y,points:V.getPoints(),color:V.color,thickness:V.thickness,move:V.move,allowToggle:V.allowToggle,controlsVisible:F};return e?JSON.stringify(t):t},V.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n,t=e.points;for(n in zot(t)||V.setPoints(t),delete e.points,V.num=t.length,e)V[n]=e[n];return V.parent&&V.parent.setChildIndex(V,o),V.update(),V}},V.getPoints=function(e){zot(e)&&(e=!1);var t,o=V.points;return e&&(V.pane||(t=V.pane=new Jo.Pane({container:V.stage,width:Math.min(500,V.stage.width-20),height:Math.min(500,V.stage.height-20),draggable:!0}),e=V.textArea=new Jo.TextArea(Math.min(400,V.stage.width-70),Math.min(400,V.stage.height-70)),t.add(e)),V.textArea.text=JSON.stringify(o),V.pane.show()),o},V.recordPoints=V.getPoints,!(V.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=U[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8]);return V.update(),V})!==Y&&Jo.styleTransforms(V,N),V.clone=function(e,t){var o=[],n=!1;Jo.loop(V.pointControls,function(e){e.scaleX+e.scaleY+e.regX+e.regY+e.rotation!=2&&(n=!0),o.push([e.scaleX,e.scaleY,e.regX,e.regY,e.rotation])});e=V.cloneProps(new Jo.Squiggle(t?V.colorCommand:e||!Jo.isPick(H[0])?V.color:H[0],V.thickness,V.getPoints(),A,P,E,S,oe.visible,W,I,V.allowToggle,V.move,O,j,V.circleColor,V.circleBorderColor,V.stickColor,V.stickThickness,L,D,V.editPoints,_,R,Y,V.group,X));return n&&(Jo.loop(e.pointControls,function(e,t){e.scaleX=o[t][0],e.scaleY=o[t][1],e.regX=o[t][2],e.regY=o[t][3],e.rotation=o[t][4]}),e.update()),V.linearGradientParams&&e.linearGradient.apply(e,V.linearGradientParams),V.radialGradientParams&&e.radialGradient.apply(e,V.radialGradientParams),e},V.shape.on("mousedown",function(e){G=e.target.stage,V.editPoints&&(V.controlsVisible?(V.pressX=e.stageX/Jo.scaX,V.pressY=e.stageY/Jo.scaX):(V.pressX=null,V.pressY=null))}),V.addPointFactor=10,V.addMinDistance=15,V.shape.on("pressup",function(e){var o,t,n,r,i,l;V.editPoints&&V.pressX&&Math.abs(V.pressX-e.stageX/Jo.scaX)<ee&&Math.abs(V.pressY-e.stageY/Jo.scaY)<ee&&(V.selectPoints&&(V.lastPoints=Jo.copy(V.points)),l=V.points,o=V.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY),t=Jo.closestPointAlongCurve(o,V.segmentPoints),"anywhere"==V.editPoints?(l.splice(t+1,0,[o.x,o.y,0,0,0,0,0,0]),V.points=l,V.changeControl({index:t+1,type:"mirror",update:!0})):(i=V.pointsAdjusted,e=V.getSegmentPoint(i[t],i[(t+1)%i.length]),i=Jo.distanceAlongCurve(e),e=Math.round(i/V.addPointFactor),i=V.interpolate(e,t,!1,l),n=1e4,Jo.loop(i,function(e,t){e=Jo.dist(e,o);e<n&&(n=e,r=t)}),n<V.addMinDistance&&(i=(l=V.segmentRatios)[t],l=0<t?l[t-1]:0,V.addPoint(100*(l+r/(e+1)*(i-l))))),V.lastindex=t+1,V.lastSelected=V.controls.getChildAt(V.lastindex),V.stage.update())}),V.controls.on("click",function(e){V.lastSelected=e.target.parent,V.lastindex=V.controls.getChildIndex(e.target.parent),V.editPoints&&V.selectionManager.shiftKey&&C(e)}),V.controls.hold(C),F||V.hideControls(),V.dispatchEvent("update")}function re(){var e=[],t=V.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=V.pointObjects[t.selections[o]];t==V.selectedBalls?e.push(n[1]):t==V.selectedRect1s?e.push(n[2]):t==V.selectedRect2s&&e.push(n[3])}return e}function ie(e){var t,o,n;"Circle"==e.type&&(o=(t=e).mySet,n=t.rect1,e=t.rect2,n.x-=t.x,n.y-=t.y,e.x-=t.x,e.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0)}function le(){"always"!=V.move&&(c||(c=!0,Z.drag({onTop:!1}),K=Z.on("mousedown",K),J=Z.on("pressmove",J),$=Z.on("pressup",$)))}function ae(e){"always"!=V.move&&(e||c)&&(c=!1,Z.noDrag(),Z.off("mousedown",K),Z.off("pressmove",J),Z.off("pressup",$))}function g(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function f(e,t,o,n,r,i,l,a){var s=e.length-1,c=0,u=0;100==n&&"Squiggle"==V.type&&(n=99.99),n=(n+1e5)%100,Jo.loop(o,function(e,t){return n/100<e?(s=t,u=e,!0):void(c=e)});var d=V.segmentPoints[s],h=0<u?(n/100-c)/(u-c):0,p=Jo.pointAlongCurve(d,h,null,a),o=[p.x,p.y,0,0];if(!i){if(!l)return"none"!=r&&(a=g(d[0],d[1],h),i=g(d[1],d[2],h),l=g(d[2],d[3],h),d=g(a,i,h),h=g(i,l,h),o[4]=d.x-p.x,o[5]=d.y-p.y,o[6]=h.x-p.x,o[7]=h.y-p.y,a=V.localToLocal(a.x,a.y,t[s]),e[s][6]=a.x,e[s][7]=a.y,t=V.localToLocal(l.x,l.y,t[(s+1)%e.length]),e[(s+1)%e.length][4]=t.x,e[(s+1)%e.length][5]=t.y),r&&(o[8]=r),e.splice(s+1,0,o),s+1;V.interpolatedPoints.push({x:p.x,y:p.y,r:n/100})}}0!=ne&&(zot(P)&&(P=null!=N.controlLength?N.controlLength:A/ne),this.zimCustomShape_constructor(A,P,null,null,!1),this.type="Squiggle",this.mouseChildren=!0,zot(O)&&(O=null!=N.dashed&&N.dashed),zot(x)&&(x=null!=N.color?N.color:Jo.blue),x.style&&(this.colorCommand=x,x=Jo.black),zot(E)&&(E=null!=N.controlType?N.controlType:null),zot(s=E)&&(E="mirror"),zot(S)&&(S=null!=N.lockControlType&&N.lockControlType),zot(_)&&(_=null==N.interactive||N.interactive),zot(B)&&(B=null!=N.showControls?N.showControls:_),F=B,zot(W)&&(W=null!=N.lockControls?N.lockControls:!_),zot(I)&&(I=null!=N.handleSize?N.handleSize:Jo.mobile()?20:10),zot(t)&&(t=null!=N.allowToggle?N.allowToggle:_),zot(M)&&(M=null!=N.move?N.move:_),zot(e)&&(e=null!=N.circleColor?N.circleColor:Jo.light),zot(o)&&(o=null!=N.circleBorderColor?N.circleBorderColor:Jo.dark),zot(n)&&(n=null!=N.stickColor?N.stickColor:Jo.darker),zot(r)&&(r=null!=N.stickThickness?N.stickThickness:1),zot(L)&&(L=null!=N.selectColor?N.selectColor:Jo.white),zot(D)&&(D=null!=N.selectPoints?N.selectPoints:_),this.circleColor=e,this.circleBorderColor=o,this.stickColor=n,this.stickThickness=r,zot(j)&&(j=null==N.onTop||N.onTop),zot(i)&&(i=null!=N.editPoints?N.editPoints:_),zot(R)&&(R=null!=N.strokeObj?N.strokeObj:{}),H=function(){return arguments}(x),this.veeObj={color:H[0]},x=Jo.Pick.choose(x),(V=this).types=["mirror","straight","free","none"],this.interactive=_,this.num=ne,this.onTop=j,this.move=M,this.editPoints=i,this.allowToggle=t,this.lockControlType=S,this.selectPoints=D,this.lockControls=W,V._color=x,V._thickness=k,V._dashed=O,V._dashed&&!Array.isArray(V._dashed)&&(V._dashed=[10,10]),c=V.move,ee=2,s&&"number"!=typeof T&&Jo.loop(T,function(e){"none"==(e[8]=s)&&(e[4]=e[5]=e[6]=e[7]=0)}),p(),V.selectionManager.on("keydown",function(e){if(V.selectPoints&&V.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=re();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=V.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=V.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=V.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=V.selectionManager.shiftKey?10:1),te(n)}V.drawShape(),V.dispatchEvent("update"),V.stage&&V.stage.update()}}}),V.selectionManager.on("keyup",function(e){if(V.selectPoints&&V.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=re();if(0<t.length)for(var o=0;o<t.length;o++)ie(t[o])}}),V.selectionManager.on("undo",function(){var e;V.selectPoints&&V.keyFocus&&V.lastPoints&&(e=Jo.copy(V.lastPoints),V.lastPoints=Jo.copy(V.points),V.points=e,V.stage&&V.stage.update())}),te=function(e){var t,o,n,r;V.lockControls||(e.rect1?(t=(o=e).x-o.startX,n=o.y-o.startY,o.rect1.x=o.rect1.startX+t,o.rect1.y=o.rect1.startY+n,o.rect2.x=o.rect2.startX+t,o.rect2.y=o.rect2.startY+n):(t=(r=e).other,n=(o=r.ball).index,e=E,zot(U[n][4])||(e=U[n][4]),"straight"!=e&&"mirror"!=e||(n=r.x-o.x,r=r.y-o.y,"mirror"==e?(t.x=o.x-n,t.y=o.y-r):(r=Math.atan2(r,n),n=-t.stickLength*Math.cos(r+Math.PI),r=-t.stickLength*Math.sin(r+Math.PI),t.x=o.x-n,t.y=o.y-r))))},Object.defineProperty(V,"move",{get:function(){return M},set:function(e){M!=e&&((M=e)?le:ae)()}}),Object.defineProperty(V,"interactive",{get:function(){return _},set:function(e){F=_=e,V.allowToggle=_,V.editPoints=_,V.lockControls=!_,V.selectPoints=_,V.move=_;e=V.points;V.points=e}}),Object.defineProperty(V,"allowToggle",{get:function(){return t},set:function(e){t!=e&&((t=e)?V.move&&le():!F&&V.move&&ae())}}),u=W,Object.defineProperty(V,"lockControls",{get:function(){return u},set:function(e){(u=e)?(V.controls.mouseChildren=!1,V.controls.mouseEnabled=!1):(V.controls.mouseChildren=!0,V.controls.mouseEnabled=!0)}}),V.lockControls=u,Object.defineProperty(V,"controlsVisible",{get:function(){return F},set:function(e){(F=e)?V.showControls():V.hideControls()}}),null!=WW.KEYFOCUS&&(Jo.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Jo.KEYFOCUS==V},set:function(){Jo.KEYFOCUS=V}}),Jo.KEYFOCUS||V.selectPoints&&(V.keyFocus=!0,(d=document.activeElement)&&d.blur()),Object.defineProperty(V,"points",{get:function(){for(var e,t,o=[],n=0;n<U.length;n++)t=U[n],e=[Jo.decimals(t[0].x),Jo.decimals(t[0].y),Jo.decimals(t[1].x),Jo.decimals(t[1].y),Jo.decimals(t[2].x),Jo.decimals(t[2].y),Jo.decimals(t[3].x),Jo.decimals(t[3].y)],t[4]&&"mirror"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){var t=V.x,o=V.y,n=V.visible,r=[],i=!1;Jo.loop(V.pointControls,function(e){e.scaleX+e.scaleY+e.regX+e.regY+e.rotation!=2&&(i=!0),r.push([e.scaleX,e.scaleY,e.regX,e.regY,e.rotation])}),V.dispose(!0),T=e,p(),V.lockControls=u,V.x=t,V.y=o,V.visible=n,i&&(Jo.loop(V.pointControls,function(e,t){e.scaleX=r[t][0],e.scaleY=r[t][1],e.regX=r[t][2],e.regY=r[t][3],e.rotation=r[t][4]}),V.update())}}),Object.defineProperty(V,"pointsAdjusted",{get:function(){var o,n,r=[],i=V.pointObjects;return Jo.loop(i.length,function(e){var t;n=i[e],o=U[e],n=0==n[0].rotation&&0==n[0].scaleX&&0==n[0].scaleY?[Jo.decimals(o[0].x),Jo.decimals(o[0].y),Jo.decimals(o[1].x),Jo.decimals(o[1].y),Jo.decimals(o[2].x),Jo.decimals(o[2].y),Jo.decimals(o[3].x),Jo.decimals(o[3].y)]:(t=n[0].localToLocal(n[2].x,n[2].y,n[0].parent),e=n[0].localToLocal(n[3].x,n[3].y,n[0].parent),[Jo.decimals(o[0].x),Jo.decimals(o[0].y),Jo.decimals(o[1].x),Jo.decimals(o[1].y),Jo.decimals(t.x-o[0].x),Jo.decimals(t.y-o[0].y),Jo.decimals(e.x-o[0].x),Jo.decimals(e.y-o[0].y)]),o[4]&&"mirror"!==o[4]&&n.push(o[4]),r.push(n)}),r},set:function(){zon&&zogy("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(V,"pointObjects",{get:function(){return U},set:function(){zon&&zogy("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(V,"pointControls",{get:function(){return Q},set:function(){zon&&zogy("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(V,"pointCircles",{get:function(){return q},set:function(){zon&&zogy("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(V,"segmentPoints",{get:function(){var t=[],o=V.pointsAdjusted;return Jo.loop(o.length-1,function(e){e=V.getSegmentPoint(o[e],o[e+1]);t.push(e)}),t},set:function(){zon&&zogy("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(V,"segmentRatios",{get:function(){var t=[],o=0;Jo.loop(V.segmentPoints,function(e){e=Jo.distanceAlongCurve(e);t.push(e),o+=e});var n=[],r=0;return Jo.loop(t,function(e){r+=e/o,n.push(r)}),n},set:function(){zon&&zogy("Squiggle() - segmentRatios is read only")}}),V.approximateBounds=function(e,t,o){zot(e)&&(e=80),zot(o)&&(o=0),e/=V.num;var n=V.interpolate(e,null,!0,null,!0),e=Jo.boundsAroundPoints(n);if(V.setBounds(e.x-o,e.y-o,e.width+2*o,e.height+2*o),t){if(!V.parent)return zon&&zogy("approximateBounds() - add to stage to first to see points"),V;V.hitPathPoints?V.hitPathPoints.removeAllChildren():V.hitPathPoints=(new Jo.Container).addTo(),V.hitPathPoints.top();for(var r=0;r<n.length;r++){var i=n[r],i=V.localToGlobal(i.x,i.y);new Jo.Circle(3).loc(i.x,i.y,V.hitPathPoints)}}return V},V.getPointAngle=function(e){var t,o=V.pointObjects[e][0],n=V.pointObjects[e][2],e=V.pointObjects[e][3],e=o==V.stage?(t=new Jo.Point(n.x,n.y),new Jo.Point(e.x,e.y)):(t=o.localToGlobal(n.x,n.y),o.localToGlobal(e.x,e.y));return Jo.angle(t.x,t.y,e.x,e.y)},V.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},e={x:t[0]+t[4],y:t[1]+t[5]},t={x:t[0],y:t[1]};return 0==oe.x&&0==oe.y||(o.x+=oe.x,n.x+=oe.x,e.x+=oe.x,t.x+=oe.x,o.y+=oe.y,n.y+=oe.y,e.y+=oe.y,t.y+=oe.y),[o,n,e,t]}},V.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=V.pointsAdjusted;return 2==V.num?[[V.getSegmentPoint(t[0],t[1])],[0]]:0==e?[[V.getSegmentPoint(t[0],t[1]),V.getSegmentPoint(t[1],t[2])],[0,1]]:e>=V.num-2?[[V.getSegmentPoint(t[V.num-3],t[V.num-2]),V.getSegmentPoint(t[V.num-2],t[V.num-1])],[V.num-3,V.num-2]]:[[V.getSegmentPoint(t[e-1],t[e]),V.getSegmentPoint(t[e],t[e+1]),V.getSegmentPoint(t[e+1],t[e+2])],[e-1,e,e+1]]},V.getCurvePoint=function(o,e,t,n,r){(zot(o)||isNaN(o))&&(o=0),zot(e)&&(e=V.segmentRatios),zot(t)&&(t=V.segmentPoints),zot(n)&&(n=!1),zot(r)&&(r=!1);var i=e,r=t,e=Jo.loop(i,function(e,t){if(o<=e)return t}),t=0<e?i[e-1]:0,i=0<e?i[e]-i[e-1]:i[e];if(i){i=(o-t)/i,i=Jo.pointAlongCurve(r[e],i,n,!0),n=V.localToGlobal(i.x,i.y);return n.angle=i.angle,n.z=e,zot(n)?void 0:n}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=V.points,n=V.segmentRatios,t=f(o,V.pointControls,n,e,t=t||s);return V.points=o,V.num=o.length,t},this.removePoint=function(e){if(!(zot(e)||e<0)){var t=Jo.copy(V.points);return t.splice(e,1),V.points=t,V.stage&&V.stage.update(),V}},this.addPoints=function(r,i,l,a,s,c,u){zot(c)&&(c=Jo.copy(V.points));var d,e=Jo.copy(V.segmentRatios),h=0;return s&&(V.interpolatedPoints=[]),a&&(d=e.length*r),Jo.loop(e,function(t,o){s&&f(c,V.pointControls,V.segmentRatios,100*h,i,!zot(l)&&o!=l,s,u);var e=a?Math.round(d*(t-h)):r,n=1/(e+1);Jo.loop(e,function(e){e=h+(t-h)*n*(e+1);f(c,V.pointControls,V.segmentRatios,100*e,i,!zot(l)&&o!=l,s,u),!s&&0<r&&(V.points=c)}),h=t}),s&&"Squiggle"==V.type&&f(c,V.pointControls,V.segmentRatios,100,i,!1,s,u),V.stage&&V.stage.update(),V.num=c.length,V},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),V.addPoints(e,"none",t,o,!0,n,r),V.interpolatedPoints},h&&V.approximateBounds(),this.dispose=function(e,t,o){if(V.shape){if(Jo.gD(V),G&&V.toggleStageEvent&&G.off("stagemousedown",V.toggleStageEvent),V.controls.noDrag(),V.controls.removeAllEventListeners(),V.selectPoints&&V.selectionManager&&V.selectionManager.dispose(),V.selectedBalls=null,V.selectedRect1s=null,V.selectedRect2s=null,V.selectionManager=null,V.off("mousedown",V.toggleEvent),V.off("click",V.clickEvent),e){V.shape.dispose(),V.shape=null;for(var n=0;n<V.points.length;n++)V.pointObjects[n][0].removeAllEventListeners(),V.pointObjects[n][1].removeAllEventListeners(),V.pointObjects[n][2].removeAllEventListeners(),V.pointObjects[n][3].removeAllEventListeners();V.controls.removeFrom(V),V.sticks.dispose(),q=U=null}else V.removeAllEventListeners(),q=U=null,o||this.zimCustomShape_dispose(!0);return!0}})},Jo.extend(Jo.Squiggle,Jo.CustomShape,["clone","dispose"],"zimCustomShape",!1),Jo.Blob=function(C,e,t,x,k,T,A,P,o,E,S,n,B,W,I,r,i,l,a,M,O,s,j,L,D,c,_){var u;if(u=zob(Jo.Blob,arguments,"color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, circleColor, circleBorderColor, stickColor, stickThickness, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return u;z_d("53.5"),this.group=c;var R=!1===D?{}:Jo.getStyle("Blob",this.group,_);zot(k)&&(k=null!=R.radius?R.radius:100),this.zimCustomShape_constructor(-k,-k,2*k,2*k,!1),this.type="Blob",this.mouseChildren=!0,zot(W)&&(W=null!=R.dashed&&R.dashed),zot(e)&&(e=null!=R.borderColor?R.borderColor:null),zot(t)&&(t=null!=R.borderWidth?R.borderWidth:null),e<0||t<0?e=t=null:null!=e&&null==t&&(t=1),zot(C)&&(C=null!=R.color?R.color:0<t?"rgba(0,0,0,0)":Jo.green),C.style&&(this.colorCommand=C,C=Jo.black),e&&e.style&&(this.borderColorCommand=e,e=Jo.black),zot(x)&&(x=null!=R.points?R.points:4);var c="number"!=typeof x,Y="number"==typeof x?x:x.length,X=T;zot(T)&&(T=null!=R.controlLength?R.controlLength:4*k/Y),zot(A)&&(A=null!=R.controlType?R.controlType:null);var d=A;zot(A)&&(A="straight"),zot(P)&&(P=null!=R.lockControlType&&R.lockControlType),zot(j)&&(j=null==R.interactive||R.interactive),zot(o)&&(o=null!=R.showControls?R.showControls:j);var N=o;zot(E)&&(E=null!=R.lockControls?R.lockControls:!j),zot(S)&&(S=null!=R.handleSize?R.handleSize:Jo.mobile()?20:10),zot(n)&&(n=null!=R.allowToggle?R.allowToggle:j),zot(B)&&(B=null!=R.move?R.move:j),zot(r)&&(r=null!=R.circleColor?R.circleColor:Jo.light),zot(i)&&(i=null!=R.circleBorderColor?R.circleBorderColor:Jo.dark),zot(l)&&(l=null!=R.stickColor?R.stickColor:Jo.darker),zot(a)&&(a=null!=R.stickThickness?R.stickThickness:1),zot(M)&&(M=null!=R.selectColor?R.selectColor:Jo.white),zot(O)&&(O=null!=R.selectPoints?R.selectPoints:j),this.circleColor=r,this.circleBorderColor=i,this.stickColor=l,this.stickThickness=a,zot(I)&&(I=null==R.onTop||R.onTop),zot(s)&&(s=null!=R.editPoints?R.editPoints:j),zot(L)&&(L=null!=R.strokeObj?R.strokeObj:{});var F=function(){return arguments}(C,e);this.veeObj={color:F[0],borderColor:F[1]},C=Jo.Pick.choose(C),e=Jo.Pick.choose(e);var H,V,G,U,q,Q,Z,K,J=this;this.interactive=j,this.num=Y,this.editPoints=s,this.selectPoints=O,this.lockControls=E,this.onTop=I,this.move=B,this.allowToggle=n,this.lockControlType=P,this.types=["mirror","straight","free","none"],J._color=C,J._borderColor=e,J._borderWidth=t,J._dashed=W,J._dashed&&!Array.isArray(J._dashed)&&(J._dashed=[10,10]);var $,ee,h=J.move,te=2;function p(e){if("circle"!=e&&"rectangle"!=e&&"triangle"!=e||("circle"==e&&(e=new Jo.Circle(k)),"rectangle"==e&&(e=new Jo.Rectangle(2*k,2*k).centerReg({add:!1})),"triangle"==e&&(e=new Jo.Triangle(2*k,2*k,2*k))),"Circle"!=e.type&&"Rectangle"!=e.type&&"Triangle"!=e.type&&"Flare"!=e.type)return e;var t,o,r,i,l,a,n=e.getBounds();return"Circle"==e.type?(r=4,X=T=2*k*.5523):"Rectangle"==e.type?(e.centerReg({add:!1}),r=e.corner?("number"==typeof(t=Jo.copy(e.corner))?t=[[t,t],[t,t],[t,t],[t,t]]:Array.isArray(t)&&(2==t.length&&(t=[t,t,t,t]),Jo.loop(4,function(e){zot(t[e])&&(t[e]=[0,0]),Array.isArray(t[e])||(t[e]=[t[e],t[e]])})),o=.55,[[-n.width/2,-(n.height/2-t[0][1]),0,0,0,0,0,-t[0][1]*o,"straight"],[-(n.width/2-t[0][0]),-n.height/2,0,0,-t[0][0]*o,0,0,0,"straight"],[n.width/2-t[1][0],-n.height/2,0,0,0,0,t[1][0]*o,0,"straight"],[n.width/2,-(n.height/2-t[1][1]),0,0,0,-t[1][1]*o,0,0,"straight"],[n.width/2,n.height/2-t[2][1],0,0,0,0,0,t[2][1]*o,"straight"],[n.width/2-t[2][0],n.height/2,0,0,t[2][0]*o,0,0,0,"straight"],[-(n.width/2-t[3][0]),n.height/2,0,0,0,0,-t[3][0]*o,0,"straight"],[-n.width/2,n.height/2-t[3][1],0,0,0,t[3][1]*o,0,0,"straight"]]):[[n.x-n.width/2,n.y-n.height/2],[n.x+n.width/2,n.y-n.height/2],[n.x+n.width/2,n.y+n.height/2],[n.x-n.width/2,n.y+n.height/2]],J.setBounds(n.x-n.width/2,n.y-n.height/2,n.width,n.height),J.regX=e.regX-n.width/2,J.regY=e.regY-n.height/2):"Triangle"==e.type?(r=[[e.three.x-e.width/2,e.three.y+e.height/2+e.adjusted],[e.two.x-e.width/2,e.two.y+e.height/2+e.adjusted],[e.one.x-e.width/2,e.one.y+e.height/2+e.adjusted]],J.setBounds(n.x-n.width/2,n.y-n.height/2,n.width,n.height)):"Flare"==e.type&&(i=n.width/2+n.x,l=n.height/2+n.y,r=[],n=Jo.copy(e.points),a={x:null,y:null},Jo.loop(n,function(e,t){var o=Math.round(e.x),n=Math.round(e.y);o==a.x&&n==a.y||(a={x:o,y:n},r.push([o-i,e.y-l]))}),J.setBounds(-e.width/2,-e.height/2,e.width,e.height)),r}function g(){if(ee&&ee.removeAllEventListeners(),J.selectPoints?(J.selectedBalls=new Jo.SelectionSet,J.selectedRect1s=new Jo.SelectionSet,J.selectedRect2s=new Jo.SelectionSet,J.selectionManager=new Jo.SelectionManager([J.selectedBalls,J.selectedRect1s,J.selectedRect2s],"ctrl",!1)):J.selectionManager=new Jo.SelectionManager(null,"ctrl"),!((Y="number"==typeof x?x:x.length)<=0)){zot(X)&&(T=4*k/Y),U=J.shape=new Jo.Shape({style:!1}).addTo(J);var o=J.sticks=new Jo.Shape({style:!1}).addTo(J);S<=0&&o.removeFrom();var s=U.graphics;s.c();var c=o.graphics;c.c();var e,t,n,u,r,i,l,a,d,h=S/10*8,p=S,g=Jo.mobile();for(ee=J.controls=new Jo.Container({style:!1}).addTo(J),J.interactive&&ee.drag({onTop:!g}),H=[],G=[],V=[],e=0;e<Y;e++)(d=new Jo.Container({style:!1}).addTo(ee)).num=e,"number"==typeof x?(l=Jo.Pick.choose(T),(a=new Jo.Container(l,k,null,null,!1).reg(l/2,k).addTo(J)).rotation=e/Y*360,u=new Jo.Circle(h,J.selectPoints&&J.selectedBalls.isSelected(e)?M:J.circleColor,J.circleBorderColor,2,null,null,null,null,null,!1).centerReg(a).loc({x:l/2,y:0}),t=new Jo.Rectangle(p,p,J.selectPoints&&J.selectedRect1s.isSelected(e)?M:v(A),0==S?null:Jo.dark,0==S?null:2,null,null,null,null,!1).centerReg(a).loc({x:0,y:0}),n=new Jo.Rectangle(p,p,J.selectPoints&&J.selectedRect2s.isSelected(e)?M:v(A),0==S?null:Jo.dark,0==S?null:2,null,null,null,null,!1).centerReg(a).loc({x:l,y:0}),l=a.localToLocal(u.x,u.y,ee),u.x=l.x,u.y=l.y,u.addTo(d,null,!1),l=a.localToLocal(t.x,t.y,ee),t.x="none"==A?0:l.x-u.x,t.y="none"==A?0:l.y-u.y,t.addTo(d,null,!1),a=a.localToLocal(n.x,n.y,ee),n.x="none"==A?0:a.x-u.x,n.y="none"==A?0:a.y-u.y,n.addTo(d,null,!1),d.x=u.x,d.y=u.y,u.x=0,u.y=0,"none"==A&&u.addTo(d,null,!1)):(r=(i=x[e])[8]||A,d.loc({x:i[0],y:i[1]}),u=new Jo.Circle(h,J.circleColor,J.circleBorderColor,2,null,null,null,null,null,!1).centerReg({add:!1}).addTo(d).loc({x:i[2],y:i[3]}),t=new Jo.Rectangle(p,p,v(r),0==S?null:Jo.dark,0==S?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(d,0).loc({x:i[4],y:i[5]}),n=new Jo.Rectangle(p,p,v(r),0==S?null:Jo.dark,0==S?null:2,null,null,null,null,!1).centerReg({add:!1}).addTo(d,0).loc({x:i[6],y:i[7]})),u.mySet=d,u.rect1=t,u.rect2=n,u.index=e,0==S&&(u.expand(10),t.expand(10),n.expand(10)),g?u.on("mousedown",y):u.on("dblclick",b),t.ball=u,(t.other=n).ball=u,n.other=t,g&&(u.expand(),t.expand(),n.expand()),r=[d,u,t,n,i?i[8]:A],H.push(r),V.push(u),G.push(d);var f,m,z=!1;J.drawShape=function(){var e,t,o,n,r,i,l;s.c(),J.colorCommand||(J.colorCommand=s.f(J._color).command,C&&C.type&&J.specialColor(J.colorCommand,C,J)),(zot(J._borderWidth)||0<J._borderWidth)&&(zot(J._borderColor)&&zot(J._borderWidth)||(zot(J._borderColor)&&(J._borderColor=Jo.black),J.borderColorCommand||(J.borderColorCommand=s.s(J._borderColor).command,J._borderColor&&J._borderColor.type&&J.specialColor(J.borderColorCommand,J._borderColor,J)),J.borderWidthCommand||(J.borderWidthCommand=s.ss(J._borderWidth,L.caps,L.joints,L.miterLimit,L.ignoreScale).command),J._dashed&&(J.borderDashedCommand||(J.borderDashedCommand=s.sd(Array.isArray(J._dashed)?J._dashed:[10,10],J._dashedOffset).command)))),o=(e=H[0][0]).localToLocal(H[0][1].x,H[0][1].y,U),s.mt(o.x,o.y),c.c().s(J.stickColor).ss(J.stickThickness);for(var a=0;a<H.length;a++)i=(a+1)%H.length,e=H[a][0],u=H[a][1],n=H[a][2],r=H[a][3],t=H[i][0],l=H[i][1],i=H[i][2],r=e.localToLocal(r.x,r.y,U),i=t.localToLocal(i.x,i.y,U),l=t.localToLocal(l.x,l.y,U),s.bt(r.x,r.y,i.x,i.y,l.x,l.y),o=e.localToLocal(u.x,u.y,U),n=e.localToLocal(n.x,n.y,U),c.mt(o.x,o.y).lt(n.x,n.y),c.mt(o.x,o.y).lt(r.x,r.y);s.cp(),s.append(J.colorCommand),J._dashed&&s.append(J.borderDashedCommand),J.borderWidthCommand&&s.append(J.borderWidthCommand),J.borderColorCommand&&s.append(J.borderColorCommand)},J.drawShape(),C.type&&(J.color=C),ee.on("mousedown",function(t){var e,o,n,r;if(!J.lockControls&&(ee.loop(function(e){e!=t.target.parent&&(null==e.lastChildren&&(e.lastChildren=e.mouseChildren),null==e.lastMouse&&(e.lastMouse=e.mouseEnabled),e.noMouse())}),null==U.lastMouse&&(U.lastMouse=U.mouseEnabled),U.mouseEnabled=!1,m=!0,J.selectPoints&&(J.keyFocus=!0),f={x:t.target.x,y:t.target.y},t.target.rect1?((r=t.target).startX=r.x,r.startY=r.y,r.rect1.startX=r.rect1.x,r.rect1.startY=r.rect1.y,r.rect2.startX=r.rect2.x,r.rect2.startY=r.rect2.y):((n=t.target).startX=n.x,n.startY=n.y,e=(r=n.ball).index,o=A,zot(H[e][4])||(o=H[e][4]),"straight"==o&&(n=(o=n.other).x-r.x,r=o.y-r.y,o.stickLength=Math.sqrt(Math.pow(n,2)+Math.pow(r,2)))),J.selectPoints)){var i=J.selectionManager.currentSet;if(i&&i.selections&&0<i.selections.length)for(var l=0;l<i.selections.length;l++){var a=J.pointObjects[i.selections[l]];a[1].startX=a[1].x,a[1].startY=a[1].y,a[2].startX=a[2].x,a[2].startY=a[2].y,a[3].startX=a[3].x,a[3].startY=a[3].y}}}),J.selectPoints&&ee.tap({call:function(e){var t,o;e.target.rect1?(t=e.target,J.selectedBalls.toggle(t.parent.num)):((o=e.target).color="white",((t=o.ball).rect1==o?J.selectedRect1s:J.selectedRect2s).toggle(t.parent.num));for(var n=0;n<J.pointObjects.length;n++){var r=J.pointObjects[n];r[1].color=J.selectedBalls.isSelected(n)?M:J.circleColor,r[2].color=J.selectedRect1s.isSelected(n)?M:v(r[4]),r[3].color=J.selectedRect2s.isSelected(n)?M:v(r[4])}e.target.stage.update()},mobileUp:!0}),ee.on("pressmove",function(e){if(!J.lockControls)if(J.selectPoints){var t=oe();if(-1==t.indexOf(e.target))$(e.target),J.drawShape();else if(0<t.length){for(var o=e.target.x-e.target.startX,n=e.target.y-e.target.startY,r=0;r<t.length;r++){var i=t[r];i.x=i.startX+o,i.y=i.startY+n,$(i)}J.drawShape()}}else $(e.target),J.drawShape()}),ee.on("pressup",function(t){var e,o;J.lockControls||(ee.loop(function(e){e!=t.target.parent&&(null!=e.lastChildren&&(e.mouseChildren=e.lastChildren),null!=e.lastMouse&&(e.mouseEnabled=e.lastMouse),e.lastChildren=null,e.lastMouse=null)}),null!=U.lastMouse&&(U.mouseEnabled=U.lastMouse),U.lastMouse=null,m=!1,e=t.target.x!=f.x||t.target.y!=f.y,o=new createjs.Event("change"),t.target.rect1?(o.controlType="bezierPoint",function(e){if(J.selectPoints){var t=oe();if(t&&-1==t.indexOf(e))ne(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)ne(t[o]);else ne(e)}else ne(e)}(t.target)):o.controlType="bezierHandle",e&&J.dispatchEvent(o))}),J.changeControl=function(e,t,o,n,r,i,l,a,s){var c;if(c=zob(J.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return c;if(zot(e)){for(var u=0;u<H.length;u++)J.changeControl(u,t,o,n,r,i,l,a);return J}e=H[e];return"none"==(e[4]=t)?(zot(l)||(e[1].x=l),zot(a)||(e[1].y=a),e[2].x=e[1].x,e[2].y=e[1].y,e[3].x=e[1].x,e[3].y=e[1].y,e[1].parent.addChild(e[1])):(zot(l)||(e[1].x=l),zot(a)||(e[1].y=a),zot(o)||(e[2].x=o),zot(n)||(e[2].y=n),zot(r)||(e[3].x=r),zot(i)||(e[3].y=i),e[1].parent.addChildAt(e[1],0)),e[2].color=v(t),e[3].color=v(t),s&&(J.update(),J.stage&&J.stage.update()),J},J.transformPoints=function(e,t,o,n,r){return zot(r)&&(r=!0),J.points=Jo.transformPoints(J.points,e,t,o,n),r&&J.approximateBounds(),J},J.traverse=function(e,t,o,n,r){var i=Jo.copy(J.segmentRatios);i.unshift(0),zot(o)&&(o=t+1);var l,t=100*i[t],o=100*i[o];!r&&o<t?l=100-t+o:!r&&t<o?l=o-t:r&&o<t?l=-(t-o):r&&t<o&&(l=-(100-o+t));var a=new createjs.Event("traversed");return(a.obj=e).animate({ease:"linear",props:{path:J,startPercent:t,percent:l},time:n,call:function(){J.dispatchEvent(a)}}),J},J.reversePoints=function(e){return zot(e)&&(e=!0),(x=Jo.copy(J.points)).reverse(),e&&x.unshift(x.pop()),Jo.loop(x,function(e){var t=e[6];e[6]=e[4],e[4]=t;t=e[7];e[7]=e[5],e[5]=t}),J.points=x,J.update(),J},J.splitPoints=function(e){var t=Jo.copy(J.points);if(!(e<1||e>t.length-1)){var o=Jo.copy(t.slice(0,e+1)),t=Jo.copy(t.slice(e));Jo.trimPointEnds(o),Jo.trimPointEnds(t);e=J.clone();return J.points=o,J.update(),e.points=t,J.parent&&e.addTo(J.parent),e}},J.makeSquiggle=function(e){var t=Jo.copy(J.points);zot(e)&&(e=0),e=(e+1e3*t.length)%t.length;var o=Jo.copy(t.slice(e)),e=Jo.copy(t.slice(0,e+1)),t=o.concat(e);return Jo.trimPointEnds(t),new Jo.Squiggle({points:t,color:J.borderColor,thickness:J.borderWidth,showControls:J.controlsVisible,interactive:J.interactive,onTop:J.onTop,dashed:J.dashed,stickColor:J.stickColor,stickThickness:J.stickThickness})},J.splitBlob=function(o,n,e,t){var r,i,l,a;if(zot(o)&&(o=0),zot(n)&&(n=Math.ceil(J.points.length/2)),zot(e)&&(e=50),zot(t)&&(t=!0),"number"!=typeof o||"number"!=typeof n||n<(r=o)&&(o=n,n=r),zot(o.x)&&zot(n.x)||(i=J.segmentPoints),zot(o.x))p=o,l=J.pointCircles[o];else{var s=n;zot(n.x)&&(s=J.pointCircles[n].localToGlobal(0,0));var c=Jo.loop(e,function(e,t){t=Jo.getPointAtPercent(o.x,o.y,s.x,s.y,e/t*100);if(J.hitTestPoint(t.x,t.y))return t});if(!0===c)return;l=J.globalToLocal(c.x,c.y);c=Jo.closestPointAlongCurve(l,i,20,!1,!0)}if(zot(n.x))h=n,a=J.pointCircles[n];else{var u=o;zot(o.x)&&(u=J.pointCircles[o].localToGlobal(0,0));var d=Jo.loop(e,function(e,t){t=Jo.getPointAtPercent(u.x,u.y,n.x,n.y,e/t*100);if(J.hitTestPoint(t.x,t.y))return t},!0);if(!0===d)return;a=J.globalToLocal(d.x,d.y);d=Jo.closestPointAlongCurve(a,i,20,!1,!0)}zot(o.x)||(p=J.addPoint(c)),zot(n.x)||(h=J.addPoint(d)),!zot(o.x)&&zot(n.x)&&p<=h&&h++,!zot(n.x)&&zot(o.x)&&h<=p&&p++,!zot(o.x)&&!zot(n.x)&&h<=p&&p++;var d=J.makeSquiggle(p).loc(J),e=J.points.length,e=h<p?e-p+h:h-p,h=d.splitPoints(e).loc(J),p=d.makeBlob("free").loc(d),e=h.makeBlob("free").loc(h);return p.color=J.color,e.color=J.color,p.borderColor=J.borderColor,e.borderColor=J.borderColor,d.dispose(),h.dispose(),t&&J.dispose(),[p,e]},J.update=function(e){return e?J.points=J.pointsAdjusted:J.drawShape(),J.zimAnimateChanged=!0,J},J.move&&J.interactive&&U.drag({onTop:!1}),q=U.on("mousedown",function(e){K=e.target.stage,f={x:U.x,y:U.y},J.selectPoints&&(J.keyFocus=!0),J.onTop&&(e=J.parent.numChildren-1,"Keyboard"==J.parent.getChildAt(e).type&&e--,J.parent.setChildIndex(J,e))}),Q=U.on("pressmove",function(){ee.x=U.x,ee.y=U.y,o.x=U.x,o.y=U.y}),Z=U.on("pressup",function(){var e=U.x!=f.x||U.y!=f.y,t=U.localToLocal(J.regX,J.regY,J.parent);J.x=t.x,J.y=t.y,ee.x=ee.y=o.x=o.y=U.x=U.y=0,e&&((e=new createjs.Event("change")).controlType="move",J.dispatchEvent(e)),K.update()}),B||ie(!0),J.toggleEvent=J.on("mousedown",function(){J.allowToggle&&(N||(J.showControls(),J.dispatchEvent("controlsshow")))}),J.added(function(){K=J.stage,J.toggleStageEvent&&J.stage.off("stagemousedown",J.toggleStageEvent),J.toggleStageEvent=J.stage.on("stagemousedown",function(e){!m&&J.allowToggle&&J.stage&&N&&!J.hitTestPoint(e.stageX/Jo.scaX,e.stageY/Jo.scaY,!1)&&(J.hideControls(),J.dispatchEvent("controlshide"))})}),J.clickEvent=J.on("click",function(){J.ctrlKey&&setTimeout(function(){J.clone(!0).addTo(J.stage).mov(100),J.allowToggle&&(J.hideControls(),J.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",J.dispatchEvent(e),J.stage.update()},50)}),J.hideControls=function(){return J.toggled=!1,ee.visible=!1,o.visible=!1,N=!1,J.stage&&J.stage.update(),!J.allowToggle&&J.move&&ie(),J},N||J.hideControls(),J.showControls=function(){return J.toggled=!0,ee.visible=!0,o.visible=!0,N=!0,ee.x=U.x,ee.y=U.y,o.x=U.x,o.y=U.y,J.addChildAt(U,0),J.move&&!J.allowToggle&&re(),J.stage&&J.stage.update(),J},J.toggle=function(e){return!0!==e&&(!1===e||N)?J.hideControls():J.showControls(),J},J.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:J.parent?J.parent.getChildIndex(J):-1,x:J.x,y:J.y,points:J.getPoints(),color:J.color,borderColor:J.borderColor,borderWidth:J.borderWidth,move:J.move,allowToggle:J.allowToggle,controlsVisible:N};return e?JSON.stringify(t):t},J.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n,t=e.points;for(n in zot(t)||J.setPoints(t),delete e.points,this.num=t.length,e)J[n]=e[n];return J.parent&&J.parent.setChildIndex(J,o),J}},J.getPoints=function(e){zot(e)&&(e=!1);var t,o,n=J.points;return e&&(t||(t=J.pane=new Jo.Pane({displayClose:!1,container:J.stage,width:Math.min(500,J.stage.width-20),height:Math.min(500,J.stage.height-20),draggable:!0}),o=J.textArea=new Jo.TextArea(Math.min(400,J.stage.width-70),Math.min(400,J.stage.height-70)),t.add(o)),t.show(),o.text=JSON.stringify(n)),n},J.recordPoints=J.getPoints,!(J.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=H[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8],t[2].color=v(t[4]),t[3].color=v(t[4]));return J.update(),J})!==D&&Jo.styleTransforms(J,R),J.clone=function(e,t){var o=[],n=!1;Jo.loop(J.pointControls,function(e){e.scaleX+e.scaleY+e.regX+e.regY+e.rotation!=2&&(n=!0),o.push([e.scaleX,e.scaleY,e.regX,e.regY,e.rotation])});e=J.cloneProps(new Jo.Blob(t?J.colorCommand:e||!Jo.isPick(F[0])?J.color:F[0],t?J.borderColorCommand:e||!Jo.isPick(F[1])?J.borderColor:F[1],J.borderWidth,J.getPoints(),k,T,A,P,ee.visible,E,S,J.allowToggle,J.move,W,I,J.circleColor,J.circleBorderColor,J.stickColor,J.stickThickness,M,O,J.editPoints,j,L,D,J.group,_));return n&&(Jo.loop(e.pointControls,function(e,t){e.scaleX=o[t][0],e.scaleY=o[t][1],e.regX=o[t][2],e.regY=o[t][3],e.rotation=o[t][4]}),e.update()),J.linearGradientParams&&e.linearGradient.apply(e,J.linearGradientParams),J.radialGradientParams&&e.radialGradient.apply(e,J.radialGradientParams),e},J.shapeMousedownEvent=J.shape.on("mousedown",function(e){K=e.target.stage,J.editPoints&&(J.controlsVisible?(J.pressX=e.stageX/Jo.scaX,J.pressY=e.stageY/Jo.scaY):(J.pressX=null,J.pressY=null))}),J.addPointFactor=10,J.addMinDistance=15,J.shapePressupEvent=J.shape.on("pressup",function(e){var o,t,n,r,i,l;J.editPoints&&J.pressX&&Math.abs(J.pressX-e.stageX/Jo.scaX)<te&&Math.abs(J.pressY-e.stageY/Jo.scaY)<te&&(J.selectPoints&&(J.lastPoints=Jo.copy(J.points)),l=J.points,o=J.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY),t=Jo.closestPointAlongCurve(o,J.segmentPoints),"anywhere"==J.editPoints?(l.splice(t+1,0,[o.x,o.y,0,0,0,0,0,0]),J.points=l,J.changeControl({index:t+1,type:"mirror",update:!0})):(i=J.pointsAdjusted,e=J.getSegmentPoint(i[t],i[(t+1)%i.length]),i=Jo.distanceAlongCurve(e),e=Math.round(i/J.addPointFactor),i=J.interpolate(e,t,!1,l),n=1e4,Jo.loop(i,function(e,t){0==t||(e=Jo.dist(e,o))<n&&(n=e,r=t)}),n<J.addMinDistance&&(i=(l=J.segmentRatios)[t],l=0<t?l[t-1]:0,J.addPoint(100*(l+r/(e+1)*(i-l))))),J.lastindex=t+1,J.lastSelected=J.controls.getChildAt(J.lastindex),J.stage.update())}),J.controlsClickEvent=J.controls.on("click",function(e){J.lastSelected=e.target.parent,J.lastindex=J.controls.getChildIndex(e.target.parent),J.editPoints&&J.selectionManager.shiftKey&&w(e)}),J.controls.hold(w),N||J.hideControls(),J.dispatchEvent("update")}function y(e){z?(e.preventDefault(),b(e)):(z=!0,setTimeout(function(){z=!1},300))}function b(e){var t,o;J.lockControlType||(t=e.target,o=H[t.index][4]||A,Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=J.types[(J.types.indexOf(o)+(J.shiftKey?-1:1)+J.types.length)%J.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),H[t.index][4]=o,t.rect1.color=v(o),t.rect2.color=v(o),J.drawShape(),(o=new createjs.Event("change")).controlType="bezierSwitch",J.dispatchEvent(o),t.stage.update())}function v(e){var t={mirror:"#993399",free:"#ebcb35",none:"#50c4b7"};return t[e]||"#e472c4"}function w(e){var t;"Circle"==e.target.type&&(t=J.lastindex=J.controls.getChildIndex(e.target.parent),J.controls.numChildren<=2||(e=J.points,J.selectPoints&&(J.lastPoints=Jo.copy(e)),e.splice(t,1),J.points=e,J.stage.update(),J.lastSelected=J.lastindex=null))}}function oe(){var e=[],t=J.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=J.pointObjects[t.selections[o]];t==J.selectedBalls?e.push(n[1]):t==J.selectedRect1s?e.push(n[2]):t==J.selectedRect2s&&e.push(n[3])}return e}function ne(e){var t,o,n;J.selectPoints&&"Circle"==e.type&&(o=(t=e).mySet,n=t.rect1,e=t.rect2,n.x-=t.x,n.y-=t.y,e.x-=t.x,e.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0)}function re(){"always"!=J.move&&(h||(h=!0,U.drag({onTop:!1}),q=U.on("mousedown",q),Q=U.on("pressmove",Q),Z=U.on("pressup",Z)))}function ie(e){"always"!=J.move&&(e||h)&&(h=!1,U.noDrag(),U.off("mousedown",q),U.off("pressmove",Q),U.off("pressup",Z))}"string"==typeof(x=p(x))&&(t=new Jo.SVGContainer,(x=t.processPath(x))[0][0]==x[x.length-1][0]&&x[0][1]==x[x.length-1][1]&&(x[0][4]=x[x.length-1][4],x[0][5]=x[x.length-1][5],x.pop())),d&&"number"!=typeof x&&Jo.loop(x,function(e){"none"==(e[8]=d)&&(e[4]=e[5]=e[6]=e[7]=0)}),g(),J.selectionManager.on("keydown",function(e){if(J.selectPoints&&J.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=oe();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=J.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=J.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=J.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=J.selectionManager.shiftKey?10:1),$(n)}J.drawShape(),J.dispatchEvent("update"),J.stage&&J.stage.update()}}}),J.selectionManager.on("keyup",function(e){if(J.selectPoints&&J.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=oe();if(0<t.length)for(var o=0;o<t.length;o++)ne(t[o])}}),J.selectionManager.on("undo",function(){var e;J.selectPoints&&J.keyFocus&&J.lastPoints&&(e=Jo.copy(J.lastPoints),J.lastPoints=Jo.copy(J.points),J.points=e,J.stage&&J.stage.update())}),$=function(e){var t,o,n,r;J.lockControls||(e.rect1?(t=(o=e).x-o.startX,n=o.y-o.startY,o.rect1.x=o.rect1.startX+t,o.rect1.y=o.rect1.startY+n,o.rect2.x=o.rect2.startX+t,o.rect2.y=o.rect2.startY+n):(t=(r=e).other,n=(o=r.ball).index,e=A,zot(H[n][4])||(e=H[n][4]),"straight"!=e&&"mirror"!=e||(n=r.x-o.x,r=r.y-o.y,"mirror"==e?(t.x=o.x-n,t.y=o.y-r):(r=Math.atan2(r,n),n=-t.stickLength*Math.cos(r+Math.PI),r=-t.stickLength*Math.sin(r+Math.PI),t.x=o.x-n,t.y=o.y-r))))},Object.defineProperty(J,"move",{get:function(){return B},set:function(e){B!=e&&((B=e)?re:ie)()}}),Object.defineProperty(J,"interactive",{get:function(){return j},set:function(e){N=j=e,J.allowToggle=j,J.editPoints=j,J.lockControls=!j,J.selectPoints=j,J.move=j;e=J.points;J.points=e}}),Object.defineProperty(J,"allowToggle",{get:function(){return n},set:function(e){n!=e&&((n=e)?J.move&&re():!N&&J.move&&ie())}}),Object.defineProperty(J,"controlsVisible",{get:function(){return N},set:function(e){(N=e)?J.showControls():J.hideControls()}});var f=E;function m(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function z(e,t,o,n,r,i,l,a){var s=e.length-1,c=0,u=0;100==n&&"Squiggle"==J.type&&(n=99.99),n=(n+1e5)%100,Jo.loop(o,function(e,t){return n/100<e?(s=t,u=e,!0):void(c=e)});var d=J.segmentPoints[s],h=0<u?(n/100-c)/(u-c):0,p=Jo.pointAlongCurve(d,h,null,a),o=[p.x,p.y,0,0];if(!i){if(!l)return"none"!=r&&(a=m(d[0],d[1],h),i=m(d[1],d[2],h),l=m(d[2],d[3],h),d=m(a,i,h),h=m(i,l,h),o[4]=d.x-p.x,o[5]=d.y-p.y,o[6]=h.x-p.x,o[7]=h.y-p.y,a=J.localToLocal(a.x,a.y,t[s]),e[s][6]=a.x,e[s][7]=a.y,t=J.localToLocal(l.x,l.y,t[(s+1)%e.length]),e[(s+1)%e.length][4]=t.x,e[(s+1)%e.length][5]=t.y),r&&(o[8]=r),e.splice(s+1,0,o),s+1;J.interpolatedPoints.push({x:p.x,y:p.y,r:n/100})}}Object.defineProperty(J,"lockControls",{get:function(){return f},set:function(e){(f=e)?(J.controls.mouseChildren=!1,J.controls.mouseEnabled=!1):(J.controls.mouseChildren=!0,J.controls.mouseEnabled=!0)}}),J.lockControls=f,null!=WW.KEYFOCUS&&(Jo.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Jo.KEYFOCUS==J},set:function(){Jo.KEYFOCUS=J}}),J.selectPoints&&!Jo.KEYFOCUS&&function(){J.keyFocus=!0;var e=document.activeElement;e&&e.blur()}(),Object.defineProperty(J,"points",{get:function(){for(var e,t,o=[],n=0;n<H.length;n++)t=H[n],e=[Jo.decimals(t[0].x),Jo.decimals(t[0].y),Jo.decimals(t[1].x),Jo.decimals(t[1].y),Jo.decimals(t[2].x),Jo.decimals(t[2].y),Jo.decimals(t[3].x),Jo.decimals(t[3].y)],t[4]&&"straight"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){var t=J.x,o=J.y,n=J.visible,r=[],i=!1;Jo.loop(J.pointControls,function(e){e.scaleX+e.scaleY+e.regX+e.regY+e.rotation!=2&&(i=!0),r.push([e.scaleX,e.scaleY,e.regX,e.regY,e.rotation])}),J.dispose(!0),x=p(e),J.shape&&(J.shape.graphics.clear(),J.sticks.graphics.clear(),J.controls.noDrag(),J.removeAllChildren(),delete J.shape,delete J.sticks,delete J.controls),J.visible=!1,g(),J.lockControls=f,J.x=t,J.y=o,J.visible=n,i&&(Jo.loop(J.pointControls,function(e,t){e.scaleX=r[t][0],e.scaleY=r[t][1],e.regX=r[t][2],e.regY=r[t][3],e.rotation=r[t][4]}),J.update())}}),Object.defineProperty(J,"pointsAdjusted",{get:function(){var o,n,r=[],i=J.pointObjects;return Jo.loop(i.length,function(e){var t;n=i[e],o=H[e],n=0==n[0].rotation&&0==n[0].scaleX&&0==n[0].scaleY?[Jo.decimals(o[0].x),Jo.decimals(o[0].y),Jo.decimals(o[1].x),Jo.decimals(o[1].y),Jo.decimals(o[2].x),Jo.decimals(o[2].y),Jo.decimals(o[3].x),Jo.decimals(o[3].y)]:(t=n[0].localToLocal(n[2].x,n[2].y,n[0].parent),e=n[0].localToLocal(n[3].x,n[3].y,n[0].parent),[Jo.decimals(o[0].x),Jo.decimals(o[0].y),Jo.decimals(o[1].x),Jo.decimals(o[1].y),Jo.decimals(t.x-o[0].x),Jo.decimals(t.y-o[0].y),Jo.decimals(e.x-o[0].x),Jo.decimals(e.y-o[0].y)]),o[4]&&"mirror"!==o[4]&&n.push(o[4]),r.push(n)}),r},set:function(){zon&&zogy("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(J,"pointObjects",{get:function(){return H},set:function(){zon&&zogy("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(J,"pointControls",{get:function(){return G},set:function(){zon&&zogy("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(J,"pointCircles",{get:function(){return V},set:function(){zon&&zogy("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(J,"segmentPoints",{get:function(){var o=J.pointsAdjusted,n=[];return Jo.loop(o.length,function(e,t){e=J.getSegmentPoint(o[e],o[e<t-1?e+1:0]);n.push(e)}),n},set:function(){zon&&zogy("Blob() - segmentPoints is read only")}}),Object.defineProperty(J,"segmentRatios",{get:function(){var t=[],o=0;Jo.loop(J.segmentPoints,function(e){e=Jo.distanceAlongCurve(e);t.push(e),o+=e});var n=[],r=0;return Jo.loop(t,function(e){r+=e/o,n.push(r)}),n},set:function(){zon&&zogy("Blob() - segmentRatios is read only")}}),J.approximateBounds=function(e,t){zot(e)&&(e=80),e/=J.num;var o=J.interpolate(e,null,!0,null,!0),e=Jo.boundsAroundPoints(o);if(J.setBounds(e.x,e.y,e.width,e.height),t){if(!J.parent)return zon&&zogy("approximateBounds() - add to stage to first to see points"),J;J.hitPathPoints?J.hitPathPoints.removeAllChildren():J.hitPathPoints=(new Jo.Container).addTo(),J.hitPathPoints.top();for(var n=0;n<o.length;n++){var r=o[n],r=J.localToGlobal(r.x,r.y);new Jo.Circle(3).loc(r.x,r.y,J.hitPathPoints)}}return J},J.getPointAngle=function(e){var t,o=J.pointObjects[e][0],n=J.pointObjects[e][2],e=J.pointObjects[e][3],e=o==J.stage?(t=new Jo.Point(n.x,n.y),new Jo.Point(e.x,e.y)):(t=o.localToGlobal(n.x,n.y),o.localToGlobal(e.x,e.y));return Jo.angle(t.x,t.y,e.x,e.y)},J.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},e={x:t[0]+t[4],y:t[1]+t[5]},t={x:t[0],y:t[1]};return 0==ee.x&&0==ee.y||(o.x+=ee.x,n.x+=ee.x,e.x+=ee.x,t.x+=ee.x,o.y+=ee.y,n.y+=ee.y,e.y+=ee.y,t.y+=ee.y),[o,n,e,t]}},J.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=J.pointsAdjusted;if(2==J.num)return[[J.getSegmentPoint(t[0],t[1]),J.getSegmentPoint(t[1],t[0])],[0,1]];if(0==e)return[[J.getSegmentPoint(t[J.num-1],t[0]),J.getSegmentPoint(t[0],t[1]),J.getSegmentPoint(t[1],t[2])],[J.num-1,0,1]];if(e>=J.num-1)return[[J.getSegmentPoint(t[J.num-2],t[J.num-1]),J.getSegmentPoint(t[J.num-1],t[0]),J.getSegmentPoint(t[0],t[1])],[J.num-2,J.num-1,0]];var o=e+2>=J.num?0:e+2;return[[J.getSegmentPoint(t[e-1],t[e]),J.getSegmentPoint(t[e],t[e+1]),J.getSegmentPoint(t[e+1],t[o])],[e-1,e,e+1]]},J.getCurvePoint=function(o,e,t,n){zot(e)&&(e=J.segmentRatios),zot(t)&&(t=J.segmentPoints),zot(n)&&(n=!1);var r=e,i=t,e=Jo.loop(r,function(e,t){if(o<=e)return t}),t=0<e?r[e-1]:0,r=0<e?r[e]-r[e-1]:r[e],r=(o-t)/r,r=Jo.pointAlongCurve(i[e],r,n,!0);if(!zot(r)){n=J.localToGlobal(r.x,r.y);return n.angle=r.angle,n.z=e,zot(n)?void 0:n}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=J.points,n=J.segmentRatios,t=z(o,J.pointControls,n,e,t=t||d);return J.points=o,J.num=o.length,t},this.removePoint=function(e){if(!(zot(e)||e<0)){var t=Jo.copy(J.points);return t.splice(e,1),J.points=t,J.stage&&J.stage.update(),J}},this.addPoints=function(r,i,l,a,s,c,u){zot(c)&&(c=Jo.copy(J.points));var d,e=Jo.copy(J.segmentRatios),h=0;return s&&(J.interpolatedPoints=[]),a&&(d=e.length*r),Jo.loop(e,function(t,o){s&&z(c,J.pointControls,J.segmentRatios,100*h,i,!zot(l)&&o!=l,s,u);var e=a?Math.round(d*(t-h)):r,n=1/(e+1);Jo.loop(e,function(e){e=h+(t-h)*n*(e+1);z(c,J.pointControls,J.segmentRatios,100*e,i,!zot(l)&&o!=l,s,u),!s&&0<r&&(J.points=c)}),h=t}),s&&"Squiggle"==J.type&&z(c,J.pointControls,J.segmentRatios,100,i,null,s,u),J.stage&&J.stage.update(),J.num=c.length,J},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),J.addPoints(e,"none",t,o,!0,n,r),J.interpolatedPoints},c&&J.approximateBounds(),this.dispose=function(e,t,o){if(J.shape){if(Jo.gD(J),K&&J.toggleStageEvent&&K.off("stagemousedown",J.toggleStageEvent),J.controls.noDrag(),J.controls.removeAllEventListeners(),J.selectPoints&&J.selectionManager&&J.selectionManager.dispose(),J.selectedBalls=null,J.selectedRect1s=null,J.selectedRect2s=null,J.selectionManager=null,J.off("mousedown",J.toggleEvent),J.off("click",J.clickEvent),e){J.shape.dispose(),J.shape=null;for(var n=0;n<J.points.length;n++)J.pointObjects[n][0].removeAllEventListeners(),J.pointObjects[n][1].removeAllEventListeners(),J.pointObjects[n][2].removeAllEventListeners(),J.pointObjects[n][3].removeAllEventListeners();J.controls.removeFrom(J),J.sticks.dispose(),V=H=null}else J.removeAllEventListeners(),V=H=null,o||this.zimCustomShape_dispose(!0);return!0}}},Jo.extend(Jo.Blob,Jo.CustomShape,["clone","dispose"],"zimCustomShape",!1),zimBlob=Jo.Blob,Jo.Flare=function(P,a,E,S,e,B,W,t,I,M,o,n,r,i,l,s,c,u,O,j,L,D,_,R,Y,X,N,F,H,V,d,h,p){if(g=zob(Jo.Flare,arguments,"color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit",this))return g;z_d("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=h;var g=!1===d?{}:Jo.getStyle(this.type,this.group,p),G=this;zot(a)&&(a=null!=g.borderColor?g.borderColor:null),zot(E)&&(E=null!=g.borderWidth?g.borderWidth:null),a<0||E<0?a=E=null:null!=a&&null==E&&(E=1),zot(P)&&(P=null!=g.color?g.color:0<E?"rgba(0,0,0,0)":Jo.black),(zot(E)||0<E)&&(zot(a)&&zot(E)||zot(a)&&(a=Jo.black)),zot(S)&&(S=null!=g.crossAngle?g.crossAngle:0);var f,m,z=S;function y(d,h,p,g,f,e,m,o){G.removeAllChildren();var n,r,i=G.shape=(new Jo.Shape).addTo(G);G.colorCommand=i.c().f(P).command,P&&P.type&&G.specialColor(G.colorCommand,P,G),(zot(E)||0<E)&&(zot(a)&&zot(E)||(zot(a)&&(a=Jo.black),G.borderColorCommand=i.s(a).command,a&&a.type&&G.specialColor(G.borderColorCommand,a,G),G.borderWidthCommand=i.ss(E,j.caps,j.joints,j.miterLimit,j.ignoreScale).command,O&&(G.borderDashedCommand=i.sd([10,10],5).command))),i.mt(0,0),0<D&&(n=G.spineShape=(new Jo.Shape).addTo(G),G.spineColorCommand=n.c().f(L).command,L&&L.type&&G.specialColor(G.spineColorCommand,L,G),(zot(D)||0<D)&&(zot(_)&&zot(D)||(zot(_)&&(_=Jo.black),G.spineBorderColorCommand=n.s(_).command,_&&_.type&&G.specialColor(G.spineBorderColorCommand,_,G),G.spineBorderWidthCommand=n.ss(D,Y.caps,Y.joints,Y.miterLimit,Y.ignoreScale).command,R&&(G.spineBorderDashedCommand=n.sd([10,10],5).command)))),zot(X)||(r=G.closeShape=(new Jo.Shape).addTo(G),G.closeColorCommand=r.c().f(X).command,X&&X.type&&G.specialColor(G.closeColorCommand,X,G),(zot(N)||0<N)&&(zot(F)&&zot(N)||(zot(F)&&(F=Jo.black),G.closeBorderColorCommand=r.s(F).command,F&&F.type&&G.specialColor(G.closeBorderColorCommand,F,G),G.closeBorderWidthCommand=r.ss(N,V.caps,V.joints,V.miterLimit,V.ignoreScale).command,H&&(G.closeBorderDashedCommand=r.sd([10,10],5).command))),i.mt(0,0));var z,y,s=I,c=M,b=S,v=b-180,w=B,C=W,t=Math.max(d.length,h.length,p.length,g.length,f.length),x=v,u=[],k=[],T=[];G.points=[];var l=G.pinPoints=[];function A(e,t,o,n,r){var i=r-90,l=180-n-(90-i),r=Math.tan(i*Jo.RAD)*o,r=(e-t-r)/Math.sin(l*Jo.RAD)*Math.sin(n*Jo.RAD)+Math.sqrt(Math.pow(o,2)+Math.pow(r,2));return{x:r*Math.sin(i*Jo.RAD),y:r*Math.cos(i*Jo.RAD),t:r}}Jo.loop(t,function(e){var t=function(e){var t=h[e],o=d[e],n=p[e],r=g[e],i=f[e];m&&(u=m[e]);zot(t)&&(t=x,G.angles[e]=t);zot(o)&&(o=200,G.lengths[e]=o);zot(n)&&(n=0,G.anglesA[e]=n);zot(r)&&(r=0,G.anglesB[e]=r);zot(i)&&(i=0,G.anglesEnd[e]=i);m&&zot(u)&&(u=P,G.crossColors[e]=u);var l=180-(i+=90),a=Math.cos((x-t)*Jo.RAD),s=Math.sin((x-t)*Jo.RAD),c=new Jo.Point(0,0),e=new Jo.Point(o,0);{var u;u=zot(z)?new Jo.Point(Math.cos(b*Jo.RAD)*w,Math.sin(b*Jo.RAD)*w):new Jo.Point(z.x*a-z.y*s,z.x*s+z.y*a)}n=A(o,u.x,u.y,n,l),l=new Jo.Point(o-n.x,-n.y);a=zot(y)?new Jo.Point(Math.cos(v*Jo.RAD)*w,Math.sin(v*Jo.RAD)*C):new Jo.Point(y.x*a-y.y*s,y.x*s+y.y*a);r=A(o,a.x,a.y,r,i),i=new Jo.Point(o-r.x,r.y);return z=new Jo.Point(l.x-o,l.y),y=new Jo.Point(i.x-o,i.y),{a:x=t,A:u,B:l,C:i,D:a,E:e,F:c,tA:n.t,tB:r.t}}(e),o=Math.cos(t.a*Jo.RAD),n=Math.sin(t.a*Jo.RAD),r=new Jo.Point(s+t.A.x*o-t.A.y*n,c+t.A.x*n+t.A.y*o),i=new Jo.Point(s+t.B.x*o-t.B.y*n,c+t.B.x*n+t.B.y*o),l=new Jo.Point(s+t.C.x*o-t.C.y*n,c+t.C.x*n+t.C.y*o),a=new Jo.Point(s+t.D.x*o-t.D.y*n,c+t.D.x*n+t.D.y*o);u.push(r,i),k.unshift(l,a),T.push([r,i,l,a]);a=new Jo.Point(s+t.F.x*o-t.F.y*n,c+t.F.x*n+t.F.y*o),o=new Jo.Point(s+t.E.x*o-t.E.y*n,c+t.E.x*n+t.E.y*o);0==e&&G.pinPoints.push(a),G.pinPoints.push(o),s=o.x,c=o.y,w=t.tA,C=t.tB}),G.points=u.concat(k),e?(G.crossCommands=[],Jo.loop(T,function(e,t){i.mt(e[0].x,e[0].y),zot(m)||zot(m[t])||(i.f(m[t]),G.crossCommands[t]=i.f(m[t]).command,m[t]&&m[t].type&&G.specialColor(G.crossCommands[t],m[t],G),i.mt(e[0].x,e[0].y)),i.lt(e[1].x,e[1].y).lt(e[2].x,e[2].y).lt(e[3].x,e[3].y).cp()}),o&&i.mt(T[T.length-1][1].x,T[T.length-1][1].y).lt(T[T.length-1][2].x,T[T.length-1][2].y).lt(T[0][3].x,T[0][3].y).lt(T[0][0].x,T[0][0].y).cp()):(Jo.loop(u,function(e,t){0==t?i.mt(e.x,e.y):i.lt(e.x,e.y)}),o&&(i.lt(u[0].x,u[0].y),i.cp()),Jo.loop(k,function(e,t){0==t&&o?i.mt(e.x,e.y):i.lt(e.x,e.y)}),o&&i.lt(k[0].x,k[0].y),i.cp()),n&&(Jo.loop(l,function(e,t){0==t?n.mt(e.x,e.y):n.lt(e.x,e.y)}),o&&n.lt(l[0].x,l[0].y).cp()),zot(X)||(Jo.loop(k,function(e,t){0==t?r.mt(e.x,e.y):r.lt(e.x,e.y)}),o&&r.lt(k[0].x,k[0].y).cp())}S-=90,zot(e)&&(e=null!=g.thickness?g.thickness:null),zot(B)&&(B=null!=g.thicknessA?g.thicknessA:null),zot(W)&&(W=null!=g.thicknessB?g.thicknessB:null),zot(e)?zot(W)&&!zot(B)?W=B:zot(B)&&!zot(W)?B=W:W=B=10:zot(W)&&!zot(B)?W=e-B:zot(B)&&!zot(W)?B=e-W:W=B=e/2,G.thickness=B+W,zot(s)&&(s=null==g.cross||g.cross),zot(c)&&(c=null!=g.crossColors?g.crossColors:null),zot(c)||Array.isArray(c)||(c=[c]),zot(u)&&(u=null!=g.close&&g.close),zot(I)&&(I=null!=g.startX?g.startX:0),zot(M)&&(M=null!=g.startY?g.startY:0),zot(o)&&(o=null!=g.lengths?g.lengths:[200]),Array.isArray(o)||(o=[o]),zot(n)&&(n=null!=g.angles?g.angles:[0]),Array.isArray(n)||(n=[n]),zot(r)&&(r=null!=g.anglesA?g.anglesA:[10]),Array.isArray(r)||(r=[r]),zot(i)&&(i=null!=g.anglesB?g.anglesB:Jo.copy(r)),Array.isArray(i)||(i=[i]),zot(l)&&(l=null!=g.anglesEnd?g.anglesEnd:[0]),Array.isArray(l)||(l=[l]),zot(j)&&(j=null!=g.strokeObj?g.strokeObj:{miterLimit:2}),zot(_)&&(_=null!=g.spineBorderColor?g.spineBorderColor:null),zot(D)&&(D=null!=g.spineBorderWidth?g.spineBorderWidth:null),_<0||D<0?_=D=null:null!=_&&null==D&&(D=1),zot(L)&&(L=null!=g.spineColor?g.spineColor:0<D?"rgba(0,0,0,0)":Jo.black),zot(R)&&(R=null!=g.spineDashed?g.spineDashed:null),zot(Y)&&(Y=null!=g.spineStrokeObj?g.spineStrokeObj:{miterLimit:2}),(zot(D)||0<D)&&(zot(_)&&zot(D)||zot(_)&&(_=a||Jo.black)),zot(F)&&(F=null!=g.closeBorderColor?g.closeBorderColor:null),zot(N)&&(N=null!=g.closeBorderWidth?g.closeBorderWidth:null),F<0||N<0?F=N=null:null!=F&&null==N&&(N=1),zot(X)&&(X=null!=g.closeColor?g.closeColor:0<N?"rgba(0,0,0,0)":null),zot(H)&&(H=null!=g.closeDashed?g.closeDashed:null),zot(V)&&(V=null!=g.closeStrokeObj?g.closeStrokeObj:{miterLimit:2}),(zot(N)||0<N)&&(zot(F)&&zot(N)||zot(F)&&(F=a||Jo.black)),this.thicknessA=B,this.thicknessB=W,this.cross=s,this.close=u,this.lengths=o,this.angles=n,this.anglesA=r,this.anglesB=i,this.anglesEnd=l,this.crossColors=c,y(o,n,r,i,l,s,c,u),P.type&&(G.color=P),this.add=function(e,t,o,n,r,i,l,a){var s;return(s=zob(G.add,arguments,"lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close"))?s:(zot(i)||(G.cross=i),zot(a)||(G.close=a),zot(e)||(Array.isArray(e)||(e=[e]),zot(G.lengths)?G.lengths=e:G.lengths=G.lengths.concat(e)),zot(t)||(Array.isArray(t)||(t=[t]),zot(G.angles)?G.angles=t:G.angles=G.angles.concat(t)),zot(o)||(Array.isArray(o)||(o=[o]),zot(G.anglesA)?G.anglesA=o:G.anglesA=G.anglesA.concat(o)),zot(n)||(Array.isArray(n)||(n=[n]),zot(G.anglesB)?G.anglesB=n:G.anglesB=G.anglesB.concat(n)),zot(r)||(Array.isArray(r)||(r=[r]),zot(G.anglesEnd)?G.anglesEnd=r:G.anglesEnd=G.anglesEnd.concat(r)),zot(l)||(zot(G.crossColors)?zon&&zogy("Flare() - must set crossColor for original object parameters"):(Array.isArray(l)||(l=[l]),zot(G.crossColors)?G.crossColors=l:G.crossColors=G.crossColors.concat(l))),G.remake(),G)},this.remake=function(){return B=this.thicknessA,W=this.thicknessB,y(G.lengths,G.angles,G.anglesA,G.anglesB,G.anglesEnd,G.cross,G.crossColors,G.close),G},Object.defineProperty(G,"color",{get:function(){return P},set:function(e){zot(e)&&(e=Jo.black),(P=e)&&e.type?G.specialColor(G.colorCommand,e,G):G.colorCommand.style=e}}),this.setColorRange=function(e,t){return m=zot(t)?(f=G.color,e):(f=zot(e)?G.color:e,t),G};var b=0;Object.defineProperty(G,"colorRange",{get:function(){return b},set:function(e){b=e,zot(f)||zot(m)||(G.color=Jo.colorRange(f,m,e))}}),Object.defineProperty(G,"borderColor",{get:function(){return a},set:function(e){a=e,G.borderColorCommand?e&&e.type?G.specialColor(G.borderColorCommand,e,G):G.borderColorCommand.style=e:y()}}),Object.defineProperty(G,"borderWidth",{get:function(){return E},set:function(e){0<e||(e=0),E=e,G.borderWidthCommand&&0!=E?(G.borderWidthCommand.width=E,O&&(G.borderDashedCommand.segments=[20,10],G.borderDashedCommand.offset=5)):y()}}),Object.defineProperty(G,"spineColor",{get:function(){return L},set:function(e){zot(e)&&(e=Jo.black),L=e,G.spineColorCommand?e&&e.type?G.specialColor(G.spineColorCommand,e,G):G.spineColorCommand.style=e:y()}}),Object.defineProperty(G,"spineBorderColor",{get:function(){return _},set:function(e){_=e,G.spineBorderColorCommand?e&&e.type?G.specialColor(G.spineBorderColorCommand,e,G):G.spineBorderColorCommand.style=e:y()}}),Object.defineProperty(G,"spineBorderWidth",{get:function(){return D},set:function(e){0<e||(e=0),D=e,G.spineBorderWidthCommand&&0!=D?(G.spineBorderWidthCommand.width=D,R&&(G.spineBorderDashedCommand.segments=[20,10],G.spineBorderDashedCommand.offset=5)):y()}}),Object.defineProperty(G,"closeColor",{get:function(){return X},set:function(e){zot(e)&&(e=Jo.black),X=e,G.closeColorCommand?e&&e.type?G.specialColor(G.closeColorCommand,e,G):G.closeColorCommand.style=e:y()}}),Object.defineProperty(G,"closeBorderColor",{get:function(){return F},set:function(e){F=e,G.closeBorderColorCommand?e&&e.type?G.specialColor(G.closeBorderColorCommand,e,G):G.closeBorderColorCommand.style=e:y()}}),Object.defineProperty(G,"closeBorderWidth",{get:function(){return N},set:function(e){0<e||(e=0),N=e,G.closeBorderWidthCommand&&0!=N?(G.closeBorderWidthCommand.width=N,H&&(G.closeBorderDashedCommand.segments=[20,10],G.closeBorderDashedCommand.offset=5)):y()}}),Object.defineProperty(G,"pin",{get:function(){return t},set:function(e){0<e||(e=0),e>G.pinPoints.length-1&&(t=0),t=e;e=G.pinPoints[t];e&&(G.regX=e.x,G.regY=e.y)}});h=Jo.boundsAroundPoints(G.points);this.setBounds(h.x,h.y,h.width,h.height),zot(t)||(G.pin=t),(this.mouseChildren=!1)!==d&&Jo.styleTransforms(this,g),this.clone=function(){return G.cloneProps(new Jo.Flare(P,a,E,z,Jo.copy(e),Jo.copy(B),Jo.copy(W),t,I,M,Jo.copy(o),Jo.copy(n),Jo.copy(r),Jo.copy(i),Jo.copy(l),s,Jo.copy(c),u,O,j,L,D,_,R,Y,X,N,F,H,V,d,this.group,p))}},Jo.extend(Jo.Flare,Jo.Container,["clone"],"zimContainer",!1),Jo.MultiFlare=function(n,r,i,l,e,t,o){var a;if(a=zob(Jo.MultiFlare,arguments,"flares, pins, angles, endToEnd, style, group, inherit",this))return a;z_d("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=t;var t=!1===e?{}:Jo.getStyle(this.type,this.group,o),s=this;zot(n)&&(n=null!=t.flares?t.flares:[]),Array.isArray(n)||(n=[n]),zot(r)&&(r=null!=t.pins?t.pins:null),zot(i)&&(i=null!=t.angles?t.angles:null),zot(l)&&(l=null!=t.endToEnd&&t.endToEnd),s.flares=n,s.pins=r,s.angles=i,s.endToEnd=l,s.mouseChildren=!1,s.add=function(e,t){return zot(e)||(zot(t)&&(t=!0),Array.isArray(e)||(e=[e]),Jo.loop(e,function(e){t?s.flares.push(e.clone()):s.flares.push(e)}),s.remake(),s.stage&&s.stage.update()),s},s.remove=function(e){return zot(e)||(Array.isArray(e)||(e=[e]),Jo.loop(e,function(e){e=s.flares.indexOf(e);0<=e&&s.flares.splice(e,1)}),s.remake(),s.stage&&s.stage.update()),s},s.remake=function(){s.removeAllChildren(),Jo.loop(s.flares,function(e,t){var o;r&&!zot(r[t])&&(e.pin=r[t]),i&&!zot(i[t])&&(e.rotation=i[t]),e.addTo(s),s.flares.push(e),l&&0<t&&(t=(o=n[t-1]).pinPoints[o.pinPoints.length-1],o=o.localToLocal(t.x,t.y,s),t=e.pinPoints[0],t=e.localToLocal(t.x,t.y,s),e.mov(o.x-t.x,o.y-t.y))})},s.remake(),!1!==e&&Jo.styleTransforms(this,t),this.clone=function(){return s.cloneProps(new Jo.MultiFlare(Jo.copy(n,!0),Jo.copy(r),Jo.copy(i),l,e,this.group,o))}},Jo.extend(Jo.MultiFlare,Jo.Container,["clone"],"zimContainer",!1),Jo.FlareBox=function(o,n,e,t,r,i,l,a,s,c,u){var d;if(d=zob(Jo.FlareBox,arguments,"width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit",this))return d;z_d("53.8"),this.group=c;c=!1===s?{}:Jo.getStyle("FlareBox",this.group,u);zot(o)&&(o=null!=c.width?c.width:220),zot(n)&&(n=null!=c.height?c.height:80),this.zimContainer_constructor(o,n),this.type="FlareBox";var h=this;if(this.mouseChildren=!1,zot(t)&&(t=null!=c.borderColor?c.borderColor:null),zot(r)&&(r=null!=c.borderWidth?c.borderWidth:null),t<0||r<0?t=r=null:null!=t&&null==r&&(r=1),zot(e)&&(e=null!=c.color?c.color:0<r?"rgba(0,0,0,0)":Jo.black),(zot(r)||0<r)&&(zot(t)&&zot(r)||zot(t)&&(t=Jo.black)),zot(i)&&(i=null!=c.flares?c.flares:null),zot(l)&&(l=null!=c.corners?c.corners:null),zot(a)&&(a=null!=c.pins?c.pins:null),h.backing=new Jo.Rectangle(o,n,e,t,r).addTo(this),!zot(i)){if("MultiFlare"!=i.type){if(!Array.isArray(i)){if("Flare"!=i.type)return;i=[i]}i=new Jo.MultiFlare(i,a)}i.addTo(h),h.multiFlare=i,h.flares=h.multiFlare.flares,i.loop(function(e,t){a&&!zot(a[t])?e.pin=a[t]:zot(e.pin)&&(e.pin=0),l&&!zot(l[t])?e.corner=l[t]:zot(e.corner)&&(e.corner=0),1==e.corner?e.loc(o,0):2==e.corner?e.loc(o,n):3==e.corner?e.loc(0,n):e.loc(0,0),e.rot(90*(e.corner-e.pin))}),!1!==s&&Jo.styleTransforms(this,c),this.clone=function(){return h.cloneProps(new Jo.FlareBox(o,n,e,t,r,Jo.copy(i,!0),Jo.copy(l),Jo.copy(a),s,this.group,u))}}},Jo.extend(Jo.FlareBox,Jo.Container,["clone"],"zimContainer",!1),Jo.Label=function(e,i,t,o,n,r,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O){var j;if(j=zob(Jo.Label,arguments,"text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, bold, italic, variant, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, splitWords, style, group, inherit",this))return j;z_d("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=M;var L=!1===I?{}:Jo.getStyle(this.type,this.group,O);zot(e)&&(e=null!=L.text?L.text:"LABEL"),zot(i)&&(i=null!=L.size?L.size:36),zot(t)&&(t=null!=L.font?L.font:"arial"),zot(o)&&(o=null!=L.color?L.color:Jo.black),zot(c)&&(c=null!=L.bold&&L.bold),zot(u)&&(u=null!=L.italic&&L.italic);var D=function(){return arguments}(e,i,t,o,c,u);this.veeObj={text:D[0],size:D[1],font:D[2],color:D[3],bold:D[4],italic:D[5]},e=zik(e),T=zik(T),A=zik(A);var _=!1;""===e&&(e=" ",_=!0),i=Jo.Pick.choose(i);M=(t=(t=Jo.Pick.choose(t)).replace("+"," ")).split(".");0<M.length&&-1!=["ttf","otf","woff2","woff","fnt"].indexOf(M[1])&&(t=M[0]),o=Jo.Pick.choose(o),c=Jo.Pick.choose(c),u=Jo.Pick.choose(u),zot(n)&&(n=null!=L.rollColor?L.rollColor:null),!zot(r)&&"ignore"!=r||(r=null!=L.shadowColor&&"ignore"!=r?L.shadowColor:-1),!zot(l)&&"ignore"!=l||(l=null!=L.shadowBlur&&"ignore"!=l?L.shadowBlur:14),zot(a)&&(a=null!=L.align?L.align:"left"),zot(s)&&(s=null!=L.valign?L.valign:"top"),zot(f)&&zot(L.outlineColor)||!zot(m)||(m=null!=L.outlineWidth?L.outlineWidth:Math.round(.2*i)),zot(m)&&zot(L.outlineWidth)||!zot(f)||(f=null!=L.outlineColor?L.outlineColor:Jo.black),zot(m)&&(m=null!=L.outlineWidth?L.outlineWidth:0),!zot(z)&&"ignore"!=z||(z=null!=L.backgroundColor&&"ignore"!=z?L.backgroundColor:null),zot(y)&&(y=null!=L.backgroundBorderColor&&"ignore"!=y?L.backgroundBorderColor:null),zot(b)&&(b=null!=L.backgroundBorderWidth&&"ignore"!=b?L.backgroundBorderWidth:null),!zot(C)&&"ignore"!=C||(C=null!=L.padding&&"ignore"!=C?L.padding:10),zot(x)&&(x=null!=L.paddingH?L.paddingH:C),zot(k)&&(k=null!=L.paddingV?L.paddingV:C),zot(T)&&(T=null!=L.shiftH?L.shiftH:0),zot(A)&&(A=null!=L.shiftV?L.shiftV:0),zot(d)&&(d=null!=L.variant&&L.variant),zot(h)&&(h=null!=L.lineWidth?L.lineWidth:null),zot(p)&&(p=null!=L.lineHeight?L.lineHeight:null),!zot(g)&&"ignore"!=g||(g=null!=L.backing&&"ignore"!=g?L.backing.clone():null),zot(P)&&(P=null!=L.rollPersist&&L.rollPersist),null!=L.labelWidth&&(h=L.labelWidth),zot(E)||(h=E),"middle"==a&&(a="center"),zot(S)&&(S=null!=L.labelHeight?L.labelHeight:null),zot(B)&&(B=null!=L.maxSize?L.maxSize:null),i=B?Math.min(i,B):i,zot(W)&&(W=null!=L.splitWords&&L.splitWords);var R=WW.zdf&&WW.zdf.retina,Y=this;this.mouseChildren=!1,this.paddingV=k,this.paddingH=x,WW.DIR&&"rtl"==WW.DIR||!WW.DIR&&"rtl"==Jo.DIR?"start"==a?a="right":"end"==a&&(a="left"):"start"==a?a="left":"end"==a&&(a="right");var X=[];X[0]=u?"italic":"normal",X[1]=d?"small-caps":"normal",X[2]=c?"bold":"normal",X[3]=i+"px",X[4]=t;var N,F=X.join(" ");e=String(e);var H,V,G,U=!1,q=h,Q=S;function Z(e){e=new createjs.Text(e,F,o);return e.lineWidth=q,e.lineHeight=p,e}if(zot(g)&&zot(z)?(M=new createjs.Shape,Y.hitArea=M):(q&&(q-=2*x),Q&&(Q-=2*k)),N=Z(e),W&&1.2*i<q)for(var K=N.getMetrics(),J=0;K.width>q&&J<1e3;)J++,Jo.loop(K.lines,function(e,t){var o=Z(e=e.replace(/^[\s\t]+/,"")),o=o.getMeasuredWidth();if(q<o){e=function(e,t){var o=Math.ceil(q/e*t.length),n=t.substr(0,o),r=Z(n),i=r.getMeasuredWidth();if(q<i)for(;q<i;)o--,i=(r=Z(n=t.substr(0,o))).getMeasuredWidth();else if(i<q){for(;i<q;)o++,i=(r=Z(n=t.substr(0,o))).getMeasuredWidth();o--,n=t.substr(0,o)}return{endIndex:o,start:n,end:t.substr(o,t.length)}}(o,e);return K.lines[t]=e.start,K.lines.length>t+1?(e.end.trim(),K.lines[t+1]=e.end+" "+K.lines[t+1]):K.lines.push(e.end),K=(N=Z(K.lines.join(" "))).getMetrics(),!1}});function $(){Y.removeChild(Y.background),Y.background=new Jo.Rectangle(Y.getBounds().width+2*x,Y.getBounds().height+2*k,z,y,b,v,w,null,null,!1),u&&Y.background.ske(10),Jo.center(Y.background,Y,0),Y.setBounds(Y.background.x,Y.background.y,Y.background.width,Y.background.height)}function ee(){var e,t,o=N.getBounds(),n=o.y,r=o.height;q&&!Q&&(e=o.x,"right"==a?e=o.x-q+o.width:"center"==a&&(e=-q/2),N.setBounds(e,n,q,r),o=N.getBounds()),"baseline"==s?t=o.y:"top"==s?(N.y=i-i/6,t=0):"center"==s||"middle"==s?(t=-o.height/2,N.y=.3*i):t=-o.height,Y.setBounds(o.x,t,L.width?L.width-2*C:o.width,L.height?L.height-2*C:o.height),Y.hitArea&&Y.hitArea.graphics.c().f("black").r(Y.getBounds().x,Y.getBounds().y,Y.getBounds().width,Y.getBounds().height),"center"!=s&&"middle"!=s||(Jo.pos(N,null,0),Jo.mov(N,0,1)),S||(g?U&&te():zot(z)||$()),"baseline"==s||R||(N.y+=i/32),oe()}function te(){var e=g.boundsToGlobal(),e=Y.boundsToGlobal(e,!0);Y.setBounds(e.x,e.y,e.width,e.height)}function oe(){Jo.pos(N,"left"==a||"right"==a?g||Y.background?x:0:null,"top"==s||"baseline"==s||"bottom"==s?g||Y.background?k:0:null,"right"==a,"bottom"==s),N.x+=T,N.y+=A}function ne(){H&&(H.x=N.x,H.y=N.y,Y.addChildAt(H,Y.background||Y.backing?1:0))}(this.label=N).textAlign=a,N.textBaseline="alphabetic",0<m&&((H=this.outlineLabel=N.clone()).color=f,H.outline=m),-1!=r&&0<l&&(N.shadow=new createjs.Shadow(r,3,3,l)),this.addChild(N),ee(),zot(g)||("Pattern"==g.type?(Y.backing=new Jo.Container(Y.width+2*x,Y.height+2*k,null,null,!1).centerReg(null,null,!1),-1!=r&&0<l&&(new Jo.Rectangle(Y.width+2*x-2,Y.height+k-2,"#666",null,null,v,null,null,null,!1).center(Y.backing).shadow=new createjs.Shadow(r,3,3,l)),e=new Jo.Rectangle(Y.width+2*x,Y.height+2*k,z,null,null,v,null,null,null,!1).addTo(Y.backing),g.centerReg(e),g.setMask(e),Y.backing.pattern=g):Y.backing=g,Y.backing.center(Y,0),g=Y.backing,te(),U=!0),oe(),ne(),Object.defineProperty(Y,"text",{get:function(){return" "==N.text&&_?"":N.text},set:function(e){_=!1,""===e&&(e=" ",_=!0),N.text=String(e),N.setBounds(null),Y.setBounds(null),ee(),H&&(H.text=String(e)),zot(h)||zot(S)||(le(),H&&ne())}}),Object.defineProperty(Y,"size",{get:function(){return i},set:function(e){i=B?Math.min(e,B):e,X[3]=i+"px",this.label.font=X.join(" "),H&&(H.font=X.join(" ")),N.setBounds(null),Y.setBounds(null),ee(),ne()}}),Object.defineProperty(Y,"bold",{get:function(){return Boolean(this.label.font.match("bold"))},set:function(e){c=e,X[2]=e?"bold":"normal",this.label.font=X.join(" "),H&&(H.font=X.join(" "))}}),Object.defineProperty(Y,"italic",{get:function(){return Boolean(this.label.font.match("italic"))},set:function(e){u=e,X[0]=e?"italic":"normal",this.label.font=X.join(" "),H&&(H.font=X.join(" "))}}),Object.defineProperty(Y,"variant",{get:function(){return Boolean(this.label.font.match("small-caps"))},set:function(e){d=e,X[1]=e?"small-caps":"normal",this.label.font=X.join(" "),H&&(H.font=X.join(" "))}}),Object.defineProperty(Y,"font",{get:function(){return X[4]},set:function(e){zot(e)||(t=e,X[4]=e,this.label.font=X.join(" "),H&&(H.font=X.join(" ")))}}),Object.defineProperty(Y,"align",{get:function(){return a},set:function(e){zot(e)||(a=e,this.label.textAlign=a,H&&(H.textAlign=a),ee(),ne())}}),Object.defineProperty(Y,"valign",{get:function(){return s},set:function(e){zot(e)||(s=e,ee(),ne())}}),Object.defineProperty(Y,"color",{get:function(){return o},set:function(e){n==o&&(n=e),o=e,N.color=o,Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update()}}),Object.defineProperty(Y,"colorOnly",{get:function(){return o},set:function(e){o=e,N.color=o,Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update()}}),this.setColorRange=function(e,t){return G=zot(t)?(V=Y.color,e):(V=zot(e)?Y.color:e,t),Y};var re=0;function ie(){Y.mouseoverEvent=Y.on("mouseover",function(){Y.showRollColor&&Y.showRollColor()}),Y.mouseoutEvent=Y.on("mouseout",function(){Y.rollPersist||Y.showRollColor(!1)}),Y.pressupEvent=Y.on("pressup",function(){Y.rollPersist&&Y.showRollColor(!1)})}function le(){Y.size=B||200;for(var e=0;p<Q/2&&(Y.height>Q||Y.width>q)&&(e++,Y.size=Y.size/2,!(50<e)););for(e=0;Y.height<=Q&&Y.width<=q&&(e++,Y.size=Math.ceil(Y.size+1),!(50<e)););Y.size=Y.size-1,ne(),N.setBounds(null);var t=N.getBounds(),o=t.y,n=t.height;Q&&("bottom"==s?o=o-Q+n:"center"!=s&&"middle"!=s||(o=(o+o-Q+n)/2),n=Q),N.setBounds(t.x,o,t.width,n),Y.setBounds(null),t=Y.getBounds(),Y.setBounds(t.x,t.y,t.width,t.height),g?U&&te():zot(z)||$()}Object.defineProperty(Y,"colorRange",{get:function(){return re},set:function(e){re=e,zot(V)||zot(G)||(Y.color=Jo.colorRange(V,G,e))}}),Object.defineProperty(Y,"backgroundColor",{get:function(){return z},set:function(e){z=e,Y.background?Y.background.color=e:Y.backing?Y.backing.color=e:$(),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update()}}),Object.defineProperty(Y,"outlineColor",{get:function(){return f},set:function(e){f=e,H&&(H.color=f),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update()}}),Object.defineProperty(Y,"rollColor",{get:function(){return n},set:function(e){!Y.mouseoverEvent&&e&&ie(),null==e&&Y.mouseoverEvent&&(Y.off("mouseover",Y.mouseoverEvent),Y.off("mouseout",Y.mouseoutEvent),Y.off("pressup",Y.pressupEvent)),n=e}}),this._enabled=!0,Object.defineProperty(Y,"enabled",{get:function(){return Y._enabled},set:function(e){zt(Y,e),N.color=o,Y.mouseChildren=!1,Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update()}}),this.showRollColor=function(e){return zot(e)&&(e=!0),N.color=e?n:o,Y.stage&&Y.stage.update(),Y},n&&ie(),Object.defineProperty(Y,"labelWidth",{get:function(){return h},set:function(e){0<e&&(q=h=e,zot(g)&&zot(z)||q&&(q-=2*x),Y.label.lineWidth=q,H&&(H.lineWidth=q),N.setBounds(null),Y.setBounds(null),ee(),S&&le(),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update())}}),Object.defineProperty(Y,"labelHeight",{get:function(){return S},set:function(e){0<e&&(Q=S=e,zot(g)&&zot(z)||Q&&(Q-=2*k),h&&le(),Y.setBounds(null),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update())}}),zot(h)||zot(S)||le(),!1!==I&&Jo.styleTransforms(this,L),this.clone=function(e){return Y.cloneProps(new Jo.Label(e||!Jo.isPick(D[0])?Y.text:D[0],e||!Jo.isPick(D[1])?i:D[1],e||!Jo.isPick(D[2])?t:D[2],e||!Jo.isPick(D[3])?o:D[3],n,r,l,a,s,e||!Jo.isPick(D[4])?c:D[4],e||!Jo.isPick(D[5])?u:D[5],d,h,p,zot(g)?null:g.clone(e),f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,this.group,O))}},Jo.extend(Jo.Label,Jo.Container,"clone","zimContainer"),Jo.LabelOnPath=function(o,i,l,a,e,t,n,r,s,c,u,d){var h;if(h=zob(Jo.LabelOnPath,arguments,"label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, rtl, style, group, inherit",this))return h;z_d("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=u;u=!1===c?{}:Jo.getStyle(this.type,this.group,d);zot(o)&&(o=null!=u.label?u.label:new Jo.Label("Label on Path")),zot(i)&&(i=null!=u.path?u.path:new Jo.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),zot(l)&&(l=null!=u.percentAngle?u.percentAngle:100),zot(a)&&(a=null!=u.percents?u.percents:null),zot(e)&&(e=null==u.showPath||u.showPath),zot(t)&&(t=null==u.allowToggle||u.allowToggle),zot(n)&&(n=null==u.interactive||u.interactive),zot(r)&&(r=null!=u.onTop&&u.onTop),zot(s)&&(s=null!=u.rtl?u.rtl:"rtl"==WW.DIR||"rtl"==Jo.DIR),s&&i.reversePoints();var p=o.color;i.addTo(this);var g=this;this.path=i,this.allowToggle=t,i.interactive=n,"string"==typeof o&&(o=new Jo.Label(o));var f=i.alpha;e||i.alp(0),i.onTop=r;var m=this.letters=(new Jo.Container).addTo(this);if(!a){a=[];for(var z=0;z<o.text.length;z++)a.push(Jo.decimals(1/(o.text.length-("Blob"==i.type?0:1))*100*z))}function y(){for(var e=m.numChildren-1;0<=e;e--)m.getChildAt(e).dispose();for(g.numLetters=o.text.length,e=0;e<g.numLetters;e++){var t=o.clone();t.text=o.text[e],t.centerReg(m).reg(null,t.height),""!=t.text&&" "!=t.text&&t.expand(0),g.allowToggle&&t.cur("pointer"),t.on("mousedown",function(){g.allowToggle&&g.toggle()})}g.resize()}this.percents=a,this.setProps=function(e){return Jo.setProps(this.letters,e),this},this.resize=function(){for(var e=i.segmentRatios,t=i.segmentPoints,o=0;o<this.numLetters;o++){var n,r=i.getCurvePoint(a[o]/100,e,t,!0);r&&((n=this.globalToLocal(r.x,r.y))&&(m.getChildAt(o).loc(n).rot((180<r.angle?r.angle-360:r.angle)*l/100),s&&(m.getChildAt(o).rotation+=180)))}return this},y(),this.showPath=function(e){return this.toggle(!0),i.toggle(e),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(g,"text",{get:function(){return o.text},set:function(e){o.text=e,a=[];for(var t=0;t<o.text.length;t++)a.push(Jo.decimals(1/(o.text.length-("Blob"==i.type?0:1))*100*t));y()}}),Object.defineProperty(this,"color",{get:function(){return p},set:function(e){p=e;for(var t=0;t<g.letters.numChildren;t++)g.letters.getChildAt(t).color=p;g.stage&&g.stage.update()}}),Object.defineProperty(g,"interactive",{get:function(){return n},set:function(e){n=e,i.interactive=e,this.ticker&&Jo.Ticker.remove(this.ticker),n&&(this.ticker=Jo.Ticker.add(function(){g.resize()}))}}),this.interactive&&(this.ticker=Jo.Ticker.add(function(){g.resize()}));var b=g.toggled=e;this.toggle=function(e){if(this.allowToggle)return(b=zot(e)?!b:!!e)?(i.alp(f),this.interactive&&(i.showControls(),m.mouseEnabled=!1,m.mouseChildren=!1,m.cur("default"),this.controlHideEvent&&i.off("controlshide",this.controlHideEvent),this.controlHideEvent=i.on("controlshide",function(){m.mouseEnabled=!0,m.mouseChildren=!0,m.cur("pointer"),f=i.alpha,i.alp(0),b=!1,g.toggled=b,g.stage&&g.stage.update()},null,!0))):(f=i.alpha,i.alp(0),m.mouseEnabled=!0,m.mouseChildren=!0,m.cur("pointer")),g.toggled=b,g.stage&&g.stage.update(),g},e&&g.toggle(!0),!1!==c&&Jo.styleTransforms(this,u),this.clone=function(){return g.cloneProps(new Jo.LabelOnPath(g.label.clone(),g.path.clone(),l,Jo.copy(a),e,t,n,r,s,c,this.group,d))},this.dispose=function(e,t,o){return this.ticker&&Jo.Ticker.remove(this.ticker),o||this.zimContainer_dispose(!0),!0}},Jo.extend(Jo.LabelOnPath,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.LabelOnArc=function(n,e,t,o,r,i,l,a,s,c,u,d,h,p,g,f,m,z){if(y=zob(Jo.LabelOnArc,arguments,"label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, radiusSpread, rtl, style, group, inherit",this))return y;z_d("54.55"),this.group=m;var y=!1===f?{}:Jo.getStyle("LabelOnArc",this.group,z);zot(e)&&(e=null!=y.size?y.size:30),zot(n)&&(n=null!=y.label?y.label:new Jo.Label("Label on Arc",e)),zot(t)&&(t=null!=y.font?y.font:"verdana"),zot(o)&&(o=null!=y.color?y.color:Jo.white),zot(r)&&(r=null!=y.radius?y.radius:100),zot(i)&&(i=null!=y.flip&&y.flip),zot(l)&&(l=null!=y.spacing?y.spacing:0),zot(a)&&(a=null!=y.letterSpacing?y.letterSpacing:5),zot(s)&&(s=null!=y.angles?y.angles:null);var b=!zot(s),v=Jo.copy(s);zot(c)&&(c=null!=y.showCircle&&y.showCircle),zot(u)&&(u=null!=y.arcColor?y.arcColor:null),zot(d)&&(d=null!=y.arcBorderColor?y.arcBorderColor:null),zot(h)&&(h=null!=y.arcBorderWidth?y.arcBorderWidth:null),zot(p)&&(p=null!=y.radiusSpread&&y.radiusSpread),zot(g)&&(g=null!=y.rtl?y.rtl:"rtl"==WW.DIR||"rtl"==Jo.DIR);m=this.outerRadius=r+l+n.height;this.innerRadius=r+l,this.zimContainer_constructor(-m,-m,2*m,2*m,!1),this.type="LabelOnArc";var w,C,x,k,T,A,P=this;function E(){var e,t;for(P.disposeAllChildren(),i&&(e=n.text.split("").reverse().join(""),n.text=e),w=P.letters=new Jo.Container(P.width,P.height).centerReg(P),P.numLetters=n.text.length,P.letterHeight=n.height,C=P.labels=[],t=0;t<P.numLetters;t++){var o=n.clone();C.push(o),o.text=n.text[t],o.letterHolder=new Jo.Container(o.width,o.height),o.centerReg(o.letterHolder).rot(i?180:0)}if(g&&C.reverse(),k=P.circle=new Jo.Circle(r),c&&k.addTo(P),x=P.arc=(new Jo.Shape).addTo(P),S(),s){for(t=T=0;t<s.length;t++)T+=s[t];T+=s[s.length-1]/2}B()}function S(){A=[T=0];for(var e=0;e<P.numLetters;e++){var t=C[e],o=180*Math.atan((t.width+a)/2/(r+l))/Math.PI*2;A.push(o),T+=o,t.letterHolder.centerReg(w).reg(null,r+l+t.height+(i?.13*t.height:0))}P.circle.radius=r,(u||d||h)&&(0<h&&zot(d)?d=Jo.black:zot(h)&&!zot(d)&&(h=2),x.graphics.c().f(null).s(d).ss(h).arc(0,0,r,(P.startAngle-90)*Math.PI/180,(P.startAngle-90+T)*Math.PI/180))}function B(){if(!b)for(s=[],t=0;t<A.length-1;t++)s[t]=Math.round((A[t]+A[t+1])/2*100)/100;P.angles=s,P.startAngle=-T/2;for(var e=P.startAngle,t=0;t<w.numChildren;t++)e=w.getChildAt(t).rotation=e+s[t]}"Label"!=n.type&&(n=new Jo.Label(n,e,t,o)),n.text,E(),this.setProps=function(e){return Jo.setProps(this.labels,e),this},Object.defineProperty(this,"radius",{get:function(){return r},set:function(e){r=e,S(),b||p||B()}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(e){o=e;for(var t=0;t<P.labels.length;t++)P.labels[t].color=o;P.stage&&P.stage.update()}}),Object.defineProperty(P,"text",{get:function(){return n.text},set:function(e){n.text=e,s=v?Jo.copy(v):null,E()}}),!1!==f&&Jo.styleTransforms(this,y),this.clone=function(){return P.cloneProps(new Jo.LabelOnArc(n,e,t,o,r,i,l,a,s,c,u,d,h,p,g,f,this.group,z))}},Jo.extend(Jo.LabelOnArc,Jo.Container,"clone","zimContainer",!1),Jo.LabelLetters=function(G,U,q,Q,Z,K,J,$,ee,te,oe,ne,re,e,t,o){var n;if(n=zob(Jo.LabelLetters,arguments,"label, align, valign, letterSpacing, letterSpacings, lineSpacing, lineSpacings, lineHeight, lineAlign, lineValign, cache, rtl, lineWidth, style, group, inherit",this))return n;z_d("54.57"),this.group=t;t=!1===e?{}:Jo.getStyle("LabelLetters",this.group,o);zot(G)&&(G=null!=t.label?t.label:new Jo.Label("Label Letters")),zot(U)&&(U=null!=t.align?t.align:"center"),zot(q)&&(q=null!=t.valign?t.valign:"center"),zot(Q)&&(Q=null!=t.letterSpacing?t.letterSpacing:5),zot(Z)&&(Z=null!=t.letterSpacings?t.letterSpacings:null),zot($)&&($=null!=t.lineHeight?t.lineHeight:null),zot(K)&&(K=null!=t.lineSpacing?t.lineSpacing:5),zot(J)&&(J=null!=t.lineSpacings?t.lineSpacings:null),zot(ne)&&(ne=null!=t.rtl&&t.rtl),zot(ee)&&(ee=null!=t.lineAlign?t.lineAlign:ne?"right":"left"),zot(te)&&(te=null!=t.lineValign?t.lineValign:"bottom"),zot(re)&&(re=null!=t.lineWidth?t.lineWidth:"bottom"),zot(oe)&&(oe=null!=t.cache&&t.cache),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var ie=this;function r(){ie.disposeAllChildren();var t,e,o=ie.letterData=[];function n(o){var n,i=[];ne&&(O=-1,n=(o=(o=(o=(o=(o=o.replace(/[\u0591-\u07FF]+/gi,function(e){return e.split("").reverse().join("")})).replace(/([^\u0591-\u07FF ])([\u0591-\u07FF])/gi,"$1-!!-$2")).replace(/([\u0591-\u07FF])([^\u0591-\u07FF ])/gi,"$1-!!-$2")).replace(/([^\u0591-\u07FF]) ([\u0591-\u07FF])/gi,"$1-!!- -!!-$2")).replace(/([\u0591-\u07FF]) ([^\u0591-\u07FF])/gi,"$1-!!- -!!-$2")).split(/-!!-/g),Jo.loop(n,function(e,t){e.match(/[\u0591-\u07FF]/i)&&(n[t]=e.split(" ").reverse().join(" "))}),o=n.join("")),o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/\n|\r/g,"<br>")).replace(/<strong>|<strong \/>|<strong\/>/gi,"<b>")).replace(/<\/strong>/gi,"</b>")).replace(/<em>|<em \/>|<em\/>/gi,"<i>")).replace(/<\/em>/gi,"</i>")).replace(/\\n|\\r/g,"<br>")).replace(/<br>|<br \/>|<br\/>(<\/br>)?/gi,"<br>")).replace(/<b/gi,"<b")).replace(/<i/gi,"<i")).replace(/<u/gi,"<u")).replace(/<br/gi,"<br")).replace(/<a/gi,"<a")).replace(/<font/gi,"<font");var r,l=[/<(a|i|u|f|br|\/a|\/i|\/u|\/f|\/b)[^>]*>/g,/<(a|i|u|f|br|\/a|\/i|\/u|\/f|b)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|\/a)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|a)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|\/i)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|i)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|\/u)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|u)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|f)[^>]*>/g];Jo.loop(["b","a","i","u","font"],function(e,t){r=o.replace(l[2*t],""),a("font"==e?r.split("<font "):"a"==e?r.split("<a "):r.split("<"+e+">"),e,0),a((r=o.replace(l[2*t+1],"")).split("</"+e+">"),e,1)});var e=(r=(r=o.replace(/<br>/gi,"@^#")).replace(/<(b|a|i|u|f|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,"")).split("@^#");function a(e,o,n){var t,r;1<e.length&&("font"!=o&&"a"!=o||0!=n?(e.pop(),t=0,Jo.loop(e,function(e){t+=e.length;e=i[t];e||(i[t]=[]),(e=i[t])[n]?e[n].push(o):e[n]=[o]})):(r=e[0].length,Jo.loop(e,function(e,t){0!=t&&((t=i[r])||(i[r]=[]),t=i[r],e=e.split(">"),t[n]?t[n].push(o+" "+e[0]):t[n]=[o+" "+e[0]],r+=e[1].length)})))}return t=e.join("\n"),r=e.join(""),a(e,"br",0),{text:r,data:i,original:t}}"Label"!=G.type?(o=(e=n(G)).data,G=new Jo.Label(e.text)):(o=(e=n(G.text)).data,G.text=e.text),ie._text=e.original,ie._color=G.color,WW.DIR&&"rtl"==WW.DIR||!WW.DIR&&"rtl"==Jo.DIR?"start"==ee?ee="right":"end"==ee&&(ee="left"):"start"==ee?ee="left":"end"==ee&&(ee="right"),ie.numLetters=G.text.length;var a=!zot(Z);if(Z&&!Array.isArray(Z)&&(Z=null),Z)for(L=0;L<ie.numLetters;L++)zot(Z[L])&&(Z[L]=Q);else for(Z=[],L=0;L<ie.numLetters;L++)Z.push(Q);if(ie.letterSpacings=Z,J&&!Array.isArray(J)&&(J=null),J)for(L=0;L<ie.numLetters-1;L++)zot(J[L])&&(J[L]=K);else for(J=[],L=0;L<ie.numLetters-1;L++)J.push(K);ie.lineSpacings=J,ie.labels=[],ie.lines=[[]];var s=[],c=[],u=[0],d=0,h=0,p=0,r=0,g=0,i=o,l=!1,f=!1,m=!1,z=!1,y=!1,b=!1,v=!1,w=!1,C=!1,x=!1,k=!1,T=!1;for(ie.rolls=[[]],L=0;L<ie.numLetters;L++){z=!1;i[L]&&(i[L][1]&&(0<=i[L][1].indexOf("b")&&(l=!1),0<=i[L][1].indexOf("i")&&(f=!1),0<=i[L][1].indexOf("u")&&(m=!1),Jo.loop(i[L][1],function(e){return e.match(/^font/i)?(k=y=!1,T&&ie.rolls.push([]),void(v=w=b=T=!1)):void(e.match(/^a/i)&&(x=C=!1))})),i[L][0]&&(0<=i[L][0].indexOf("b")&&(l=!0),0<=i[L][0].indexOf("i")&&(f=!0),0<=i[L][0].indexOf("u")&&(m=!0),z=0,Jo.loop(i[L][0],function(e){"br"==e&&z++}),Jo.loop(i[L][0],function(e){var t,o;return e.match(/^font/i)?((t=e.match(/ color\s?=\s?(\S*)/i))&&(y=t[1],0<=(o=Jo.colors.indexOf(y))&&(y=Jo.colorsHex[o]),y=y.replace(/'/g,"")),(t=e.match(/size\s?=\s?(\S*)/i))&&(b=t[1]),(t=e.match(/backgroundColor\s?=\s?(\S*)/i))&&(k=t[1],0<=(o=Jo.colors.indexOf(k))&&(k=Jo.colorsHex[o]),k=k.replace(/'/g,"")),(t=e.match(/rollBackgroundColor\s?=\s?(\S*)/i))&&(T=t[1],0<=(o=Jo.colors.indexOf(T))&&(T=Jo.colorsHex[o]),T=T.replace(/'/g,"")),(t=e.match(/group\s?=\s?(\S*)/i))&&(v=t[1]),void((t=e.match(/family\s?=\s?(.*)/i))&&(w=(w=t[1]).split(/\ssize\s?=|\scolor\s?=|\sgroup\s?=/i)[0]))):void(e.match(/^a/i)&&((t=e.match(/href\s?=\s?(\S*)/i))&&(C=t[1]),(t=e.match(/target\s?=\s?(\S*)/i))&&(x=t[1])))}))),v?F=new Jo.Label({text:G.text[L],group:v}):(F=G.clone()).text=G.text[L],ie.labels.push(F),l&&(F.bold=!0),f&&(F.italic=!0),y&&(F.color=y),k&&(F.backgroundColor=k);var A=a||zot(F.backgroundColor)?Z[L]:-.5;T&&(F.rollIndex=ie.rolls.length-1,F.zrbc=T,F.zobc=F.backgroundColor,ie.rolls[F.rollIndex].push(F),F.expand(0),F.on("mouseover",le),F.on("mouseout",ae)),C&&(F.expand(A,0),F.zurl=C,F.ztar=x,F.cur(),F.on("click",function(e){var t=e.currentTarget;ae(e),t.ztar||(t.ztar="_self"),zgo(t.zurl,t.ztar)})),w&&(F.font=w),b&&(F.size=b),z&&(d+=(zot($)?p:$)+J[r],u.push(d),c.push(zot($)?p:$),s.push(h),g=Math.max(g,h)),z&&(1<z&&Jo.loop(z-1,function(){ie.lines.push([]),d+=(zot($)?p:$)+J[r],u.push(d),c.push(zot($)?p:$),s.push(0),r++}),h=p=0,ie.lines.push([]),r++),h+=F.width+A,p=Math.max(p,F.height),L==ie.numLetters-1&&(s.push(h),c.push(p),g=Math.max(g,h)),ie.lines[r].push(F),m&&(F.underline=new Jo.Line(F.width+A+1,1,F.color).center(F,ie).mov(0,F.height/2))}function P(e){for(var t=0,o=0;o<ie.lines.length;o++){var n,r,i=ie.lines[o];for(h=s[o],p=c[o],d=u[o],n="left"==ee||0<re&&!e?0:"right"==ee?g-h:(g-h)/2,r=d,L=0;L<i.length;L++){t++,oe&&F.cache(),(F=i[L]).regX="left"==U?0:"right"==U?F.width:F.width/2,F.regY="top"==q?0:"bottom"==q?F.height:F.height/2;var l=r+("top"==q?0:"bottom"==q?F.height:F.height/2);"center"==te||"middle"==te?l+=(c[o]-F.height)/2:"bottom"==te&&(l+=c[o]-F.height),A=a||zot(F.backgroundColor)?Z[t-1]:-.5,n="left"==U?(F.loc(n,l,ie),F.x+F.width+A):"right"==U?(F.loc(n+F.width,l,ie),F.x+A):(F.loc(n+F.width/2,l,ie),F.x+F.width/2+A)}}}if(P(),0<re){for(var E,S=[],B=[],W=0,I=0;I<ie.lines.length;I++){var M=ie.lines[I],O=0,j=0;S[W]=[],B[W]=[],E=null;for(var L=0;L<M.length;L++){if((F=M[L]).mov(-j),S[W].push(F),B[W].push(F.text),F.x+F.width>re)if(" "==F.text)S[W].pop(),B[W].pop(),W++,j+=F.x+Q,F.dispose(),S[W]=[],B[W]=[],E=null,O=-1;else if(0<E){var D=S[W].splice(E),_=B[W].splice(E);W++;var R=D.shift();_.shift();for(var Y=0;Y<D.length;Y++)D[Y].mov(-R.x-Q);j+=R.x+Q,R.dispose(),S[W]=D,B[W]=_,E=null,O=S[W].length-1}" "==F.text&&(E=O),O++}W++}ie.lines=S,s=[],c=[],u=[],g=re;for(var X=0,N=0,I=0;I<ie.lines.length;I++){var F,H=0,V=0,M=ie.lines[I];for(L=0;L<M.length;L++)V+=(F=M[L]).width+Q,F.height>H&&(H=F.height);0==M.length&&(H=N),s[I]=V-Q,c[I]=H,u[I]=X,X+=H+K,N=H,V=0}P(!0)}o=ie.getBounds();o||ie.setBounds(0,0,0,0),0<re&&ie.setBounds(0,0,re,o.height),o=ie.getBounds(),ie.regX=o.x,ie.regY=o.y}function le(e){var t=e.currentTarget,e=ie.rolls[t.rollIndex];Jo.loop(e,function(e){e.backgroundColor=t.zrbc}),t.stage&&t.stage.update()}function ae(e){var t=e.currentTarget,e=ie.rolls[t.rollIndex];Jo.loop(e,function(e){e.backgroundColor=t.zobc}),t.stage&&t.stage.update()}r(),this.setProps=function(e){return Jo.setProps(this.labels,e),this},Object.defineProperty(this,"text",{get:function(){return this._text},set:function(e){G=e,r()}}),Object.defineProperty(this,"color",{get:function(){return this._color},set:function(e){this._color=e;for(var t=0;t<ie.numChildren;t++)ie.getChildAt(t).color=this._color;ie.stage&&ie.stage.update()}}),Object.defineProperty(this,"lineWidth",{get:function(){return re},set:function(e){re=e,r()}}),!(this.dispose=function(){Jo.gD(this),Jo.loop(ie.labels,function(e){e.removeFrom(),e.dispose()}),ie.removeFrom()})!==e&&Jo.styleTransforms(this,t),this.clone=function(){return ie.cloneProps(new Jo.LabelLetters(G,U,q,Q,Z,K,J,$,ee,te,oe,ne,re,e,this.group,o))}},Jo.extend(Jo.LabelLetters,Jo.Container,"clone","zimContainer",!1),Jo.LabelWords=function(e,t,r,i,l,a,s,c,u,o,n,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W){if(M=zob(Jo.LabelWords,arguments,"label, width, size, font, color, backgroundColor, itemCache, itemRegX, itemRegY, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, minStretchFirst, style, group, inherit",this))return M;z_d("54.575"),this.group=B;var I=!1===S?{}:Jo.getStyle("LabelWords",this.group,W),M=!zot(e)&&"Label"==e.type;zot(e)&&(e=null!=I.label?I.label:new Jo.Label("Will this wind be so mighty as to lay low the mountains of the Earth?")),zot(t)&&(t=null!=I.width?I.width:M?e.width:500),zot(c)&&(c=null!=I.itemRegX?I.itemRegX:"center"),zot(u)&&(u=null!=I.itemRegY?I.itemRegY:"center"),zot(r)&&(r=null!=I.size?I.size:M?e.size:36),zot(i)&&(i=null!=I.font?I.font:M?e.font:"arial"),zot(l)&&(l=null!=I.color?I.color:M?e.color:"black"),zot(a)&&(a=null!=I.backgroundColor?I.backgroundColor:M?e.backgroundColor:null),zot(s)&&(s=null!=I.itemCache&&I.itemCache),zot(o)&&(o=null!=I.spacingH?I.spacingH:r/2),zot(n)&&(n=null!=I.spacingV?I.spacingV:r/2);var O=this;function j(o){var e="Label"==o.type?o.text:o,e=(O._text=e).split(" ").filter(Boolean),n=O.labels=[];Jo.loop(e,function(e){var t="Label"==o.type?o.clone():new Jo.Label;t.text=e,t.size=zik(r),t.font=zik(i),t.color=zik(l),zot(a)||(t.backgroundColor=zik(a)),t.reg(zik(c),zik(u)),s&&t.cache(),n.push(t)})}j(e),this.zimWrapper_constructor(O.labels,t,o,n,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W),Object.defineProperty(this,"text",{get:function(){return this._text},set:function(e){O.remove(),j(e),O.add(O.labels)}}),!1!==S&&Jo.styleTransforms(this,I),this.clone=function(){return O.cloneProps(new Jo.LabelWords(e,t,r,i,l,a,s,c,u,o,n,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,this.group,W))}},Jo.Emoji=function(t,e,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m){var z;if(z=zob(Jo.Emoji,arguments,"code, size, monochrome, italic, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backing, padding, paddingH, paddingV, shiftH, shiftV, style, group, inherit",this))return z;z_d("54.58"),this.group=f;f=!1===g?{}:Jo.getStyle("Emoji",this.group,m);zot(t)&&(t=null!=f.code?f.code:"🙂"),zot(e)&&(e=null!=f.size?f.size:30),zot(o)&&(o=null!=f.monochrome&&f.monochrome),zot(n)&&(n=null!=f.italic&&f.italic),!zot(r)&&"ignore"!=r||(r=null!=f.backgroundColor&&"ignore"!=r?f.backgroundColor:null),zot(i)&&(i=null!=f.backgroundBorderColor&&"ignore"!=i?f.backgroundBorderColor:null),zot(l)&&(l=null!=f.backgroundBorderWidth&&"ignore"!=l?f.backgroundBorderWidth:null),!zot(c)&&"ignore"!=c||(c=null!=f.padding&&"ignore"!=c?f.padding:10),zot(u)&&(u=null!=f.paddingH?f.paddingH:c),zot(d)&&(d=null!=f.paddingV?f.paddingV:c),zot(h)&&(h=null!=f.shiftH?f.shiftH:0),zot(p)&&(p=null!=f.shiftV?f.shiftV:0);var y=function(){return arguments}(t,e);this.veeObj={code:y[0],size:y[1]},t=Jo.Pick.choose(t),e=Jo.Pick.choose(e),"U+"==t.substring(0,2)&&(t=Jo.unicodeToUTF(t)),this.zimLabel_constructor(t,e,null,null,null,null,null,null,null,null,n,null,null,null,s,null,null,r,null,null,a,null,c,u,d,h,p),this.type="Emoji",this.code=t,this.size=e;var b=this,e=this.getBounds();this.bounds=this.setBounds(e.x+3,e.y-5+1,e.width-6,e.height+5),o&&(this.saturation=-100);var v=o;Object.defineProperty(b,"monochrome",{get:function(){return v},set:function(e){e!=v&&(v=e)&&(this.saturation=e?-100:0)}}),!(this.cache=function(e,t,o,n){return zot(e)?(t=this.getBounds(),this.zimLabel_cache(t.x-20,t.y-20,t.width+40,t.height+40)):this.zimLabel_cache(e,t,o,n),b.z_bc=b.canvas=b.cacheCanvas,this})!==g&&Jo.styleTransforms(this,f),this.clone=function(e){return b.cloneProps(new Jo.Emoji(e||!Jo.isPick(y[0])?t:y[0],e||!Jo.isPick(y[1])?b.size:y[1],o,n,r,i,l,a,s,c,u,d,h,p,g,b.group,m))}},Jo.extend(Jo.Emoji,Jo.Label,["clone","cache"],"zimLabel",!1),Jo.Button=function(n,r,t,i,l,o,a,s,c,u,e,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,F,H,V,G,U,q,Q,Z,K,J,$,ee,te,oe,ne,re,ie,le,ae,se,ce,ue,de,he,pe){if(fe=zob(Jo.Button,arguments,"width, height, label, backgroundColor, rollBackgroundColor, downBackgroundColor, color, rollColor, downColor, borderColor, borderWidth, rollBorderColor, downBorderColor, backing, rollBacking, downBacking, icon, rollIcon, downIcon, corner, dashed, shadowColor, shadowBlur, gradient, gloss, align, valign, indent, indentH, indentV, hitPadding, autoPadding, autoPaddingH, autoPaddingV, rollPersist, toggle, toggleBackgroundColor, rollToggleBackgroundColor, downToggleBackgroundColor, toggleColor, rollToggleColor, downToggleColor, toggleBacking, rollToggleBacking, downToggleBacking, toggleIcon, rollToggleIcon, downToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, downWaitBackgroundColor, waitColor, rollWaitColor, downWaitColor, waitBacking, rollWaitBacking, downWaitBacking, waitIcon, rollWaitIcon, downWaitIcon, waitModal, waitEnabled, style, group, inherit",this))return fe;z_d("55"),this.group=he;var ge=!1===de?{}:Jo.getStyle("Button",he,pe);zot(n)&&(n=null!=ge.width?ge.width:200),zot(r)&&(r=null!=ge.height?ge.height:60),zot(WW.M)&&(WW.M=Jo.mobile());var fe=a,he=s;zot(a)&&(a=null!=ge.color?ge.color:Jo.white),zot(s)&&(s=null!=ge.rollColor?ge.rollColor:Jo.white),zot(W)&&(W=null!=ge.autoPadding?ge.autoPadding:20),zot(I)&&(I=null!=ge.autoPaddingH?ge.autoPaddingH:W),zot(M)&&(M=null!=ge.autoPaddingV?ge.autoPaddingV:W),zot(T)&&(T=null!=ge.align?ge.align:"center"),zot(A)&&(A=null!=ge.valign?ge.valign:"center"),zot(t)&&(t=zot(m)&&zot(p)?null!=ge.label?ge.label:"PRESS":""),"string"==typeof t||"number"==typeof t?t=new Jo.Label({text:t,size:null!=ge.size?ge.size:36,font:null!=ge.font?ge.font:"arial",color:null!=ge.color&&null==fe?ge.color:a,rollColor:ge.rollColor&&null==he!=null?ge.rollColor:s,align:T,valign:A,rollPersist:null!=ge.rollPersist&&ge.rollPersist,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftV:null!=ge.shiftV?ge.shiftV:0,shiftH:null!=ge.shiftH?ge.shiftH:0,style:!1,group:this.group}):(zot(fe)||(t.color=fe),a=t.color,!zot(t.rollColor)&&zot(he)||(t.rollColor=s),s=t.rollColor),zot(c)&&(c=null!=ge.downColor?ge.downColor:s),"auto"==n&&(n=t.width+2*I),"auto"==r&&(r=t.height+2*M),this.zimContainer_constructor(n,r,null,null,!1),this.type="Button",zot(i)&&(i=null!=ge.backgroundColor?ge.backgroundColor:Jo.purple),zot(l)&&(l=null!=ge.rollBackgroundColor?ge.rollBackgroundColor:i.lighten?i.lighten(.2):i),zot(o)&&(o=null!=ge.downBackgroundColor?ge.downBackgroundColor:l);var me=function(){return arguments}(i,l,o,a,s,c);this.veeObj={backgroundColor:me[0],rollBackgroundColor:me[1],downBackgroundColor:me[2],color:me[3],rollColor:me[4],downColor:me[5]},i=zik(i),l=zik(l),o=zik(o),a=zik(a),s=zik(s),c=zik(c);var he=zot(WW.TIME)?zot(Jo.TIME)?"seconds":Jo.TIME:WW.TIME,ze=u,ye=e;zot(u)&&(u=null!=ge.borderColor?ge.borderColor:null),zot(e)&&(e=null!=ge.borderWidth?ge.borderWidth:null),u<0||e<0?u=e=null:null!=u&&null==e&&(e=1),zot(d)&&(d=null!=ge.rollBorderColor?ge.rollBorderColor:u),zot(h)&&(h=null!=ge.downBorderColor?ge.downBorderColor:d),zot(b)&&(b=null!=ge.corner?ge.corner:10),zot(w)&&(w=null!=ge.shadowColor?ge.shadowColor:"rgba(0,0,0,.3)"),zot(C)&&(C=null!=ge.shadowBlur?ge.shadowBlur:14),zot(B)&&(B=null!=ge.hitPadding?ge.hitPadding:0),zot(P)&&(P=null!=ge.indent?ge.indent:10),zot(E)&&(E=null!=ge.indentH?ge.indentH:P),zot(S)&&(S=null!=ge.indentV?ge.indentV:P),zot(x)&&(x=null!=ge.gradient?ge.gradient:0),zot(k)&&(k=null!=ge.gloss?ge.gloss:0);var be=(!zot(j)||!zot(N)||!zot(F)||!zot(H)||!zot(V)||!zot(G)||!zot(U))&&zot(Q)&&zot(ne)&&zot(re);be&&zot(q)&&(q=WW.M?"mousedown":"click"),zot(O)&&(O=null!=ge.rollPersist&&ge.rollPersist),this.rollPersist=O,zot(v)&&(v=null!=ge.dashed&&ge.dashed),zot(j)&&(j=null!=ge.toggle?ge.toggle:null),zot(j)||"Label"!=j.type||zon&&zogy("Button() - do not pass Label to toggle parameter - just pass a String"),zot(L)&&(L=null!=ge.toggleBackgroundColor?ge.toggleBackgroundColor:i),zot(D)&&(D=null!=ge.rollToggleBackgroundColor?ge.rollToggleBackgroundColor:l),zot(_)&&(_=null!=ge.downToggleBackgroundColor?ge.downToggleBackgroundColor:D),zot(R)&&(R=null!=ge.toggleColor?ge.toggleColor:t.color),zot(Y)&&(Y=null!=ge.rollToggleColor?ge.rollToggleColor:t.rollColor),zot(X)&&(X=null!=ge.downToggleColor?ge.downToggleColor:t.rollToggleColor),zot(Q)&&(Q=null!=ge.wait?ge.wait:null),zot(Z)&&(Z=null!=ge.waitTime?ge.waitTime:"seconds"==he||"s"==he?5:5e3),zot(K)&&(K=null!=ge.waitBackgroundColor?ge.waitBackgroundColor:i),zot(J)&&(J=null!=ge.rollWaitBackgroundColor?ge.rollWaitBackgroundColor:l),zot($)&&($=null!=ge.downWaitBackgroundColor?ge.downWaitBackgroundColor:l),zot(ee)&&(ee=null!=ge.waitColor?ge.waitColor:t.color),zot(te)&&(te=null!=ge.rollWaitColor?ge.rollWaitColor:t.rollColor),zot(oe)&&(oe=null!=ge.downWaitColor?ge.downWaitColor:te);var ve=this;this.mouseChildren=!1,this.cur("pointer"),ve.focus=!1,ve.rolled=!1,he=$o(Z),zot(p)&&(p=null!=ge.backing?ge.backing.clone():null),zot(p)?ve.backing=new Jo.Rectangle(n,r,i,null,null,b,v,null,null,!1).centerReg(null,null,!1):ve.backing=p,ve.rollBacking=zot(g)?null!=ge.rollBacking?ge.rollBacking.clone():null:g,ve.downBacking=zot(f)?null!=ge.downBacking?ge.downBacking.clone():null:f,ve.waitBacking=zot(ne)?null!=ge.waitBacking?ge.waitBacking.clone():null:ne,ve.rollWaitBacking=zot(re)?null!=ge.rollWaitBacking?ge.rollWaitBacking.clone():null:re,ve.downWaitBacking=zot(ie)?null!=ge.downWaitBacking?ge.downWaitBacking.clone():null:ie,ve.toggleBacking=zot(N)?null!=ge.toggleBacking?ge.toggleBacking.clone():null:N,ve.rollToggleBacking=zot(F)?null!=ge.rollToggleBacking?ge.rollToggleBacking.clone():null:F,ve.downToggleBacking=zot(H)?null!=ge.downToggleBacking?ge.downToggleBacking.clone():null:H;for(var we,Ce,xe=["backing","rollBacking","downBacking","toggleBacking","rollToggleBacking","downToggleBacking","waitBacking","rollWaitBacking","downWaitBacking"],ke=0;ke<xe.length;ke++)we=xe[ke],(Ce=ve[we])&&("Pattern"==Ce.type?Ce=Te(we,Ce):-1!=w&&0<C&&(Ce.shadow=new createjs.Shadow(w,3,3,C)),Ce.x=n/2,Ce.y=r/2);function Te(e,t){ve[e]=new Jo.Container(n,r,null,null,!1).centerReg(null,null,!1),-1!=w&&0<C&&(new Jo.Rectangle(n-2,r-2,"#666",null,null,b,null,null,null,!1).center(ve[e]).shadow=new createjs.Shadow(w,3,3,C));var o=ve[e].mask=new Jo.Rectangle(n,r,0<=e.indexOf("roll")?l:i,null,null,b,null,null,null,!1).addTo(ve[e]);return t.centerReg(o),t.setMask(o.shape),ve[e].pattern=t,ve[e]}ve.addChild(ve.backing),e&&(ve.border=new Jo.Rectangle(n,r,"rgba(0,0,0,0)",u,e,b,v,null,null,!1),ve.addChild(ve.border)),ve.icon=zot(m)?null!=ge.icon?ge.icon.clone():null:m,ve.rollIcon=zot(z)?null!=ge.rollIcon?ge.rollIcon.clone():null:z,ve.downIcon=zot(y)?null!=ge.downIcon?ge.downIcon.clone():null:y,ve.waitIcon=zot(le)?null!=ge.waitIcon?ge.waitIcon.clone():null:le,ve.rollWaitIcon=zot(ae)?null!=ge.rollWaitIcon?ge.rollWaitIcon.clone():null:ae,ve.downWaitIcon=zot(se)?null!=ge.downWaitIcon?ge.downWaitIcon.clone():null:se,ve.toggleIcon=zot(V)?null!=ge.toggleIcon?ge.toggleIcon.clone():null:V,ve.rollToggleIcon=zot(G)?null!=ge.rollToggleIcon?ge.rollToggleIcon.clone():null:G,ve.downToggleIcon=zot(U)?null!=ge.downToggleIcon?ge.downToggleIcon.clone():null:U;var Ae,Pe,Ee,Se=["icon","rollIcon","downIcon","toggleIcon","rollToggleIcon","downToggleIcon","waitIcon","rollWaitIcon","downWaitIcon"];for(ke=0;ke<Se.length;ke++){var Be=Se[ke],Be=ve[Be];Be&&(Be.x=n/2,Be.y=r/2)}function We(){(Ee=new createjs.Shape).graphics.f("#000").r(-B,-B,n+2*B,r+2*B),ve.hitArea=Pe=Ee}ve.icon&&ve.addChild(ve.icon),Array.isArray(b)||(b=[b,b,b,b]),0<x&&((Ae=new createjs.Shape).graphics.lf(["rgba(255,255,255,"+x+")","rgba(0,0,0,"+x+")"],[0,1],0,0,0,r-e),Ae.graphics.rc(e/2,e/2,n-e,r-e,b[0],b[1],b[2],b[3]),this.addChild(Ae)),0<k&&((Ae=new createjs.Shape).graphics.f("rgba(255,255,255,"+k+")"),Ae.graphics.rc(e/2,e/2,n-e,(r-e)/2,b[0],b[1],0,0),Ae.graphics.f("rgba(0,0,0,"+k+")"),Ae.graphics.rc(e/2,r/2,n-e,(r-e)/2,0,0,b[2],b[3]),this.addChild(Ae)),0<B&&We(),this.addChild(t),t.center(this),t.y+=1,this.label=t,Jo.pos(t,"left"==T||"right"==T?E:null,"top"==A||"bottom"==A?S:null,"right"==T,"bottom"==A);var Ie,Me,Oe,je=t.color;function Le(){ve.toggled?(zot(j)||(ve.label.text=!0===j?Ie:j),zot(R)||(ve.label.colorOnly=je=R),zot(Y)||(ve.label.rollColor=Y),ve.rolled?(ve.rollToggleBacking?qe("rollToggleBacking"):ve.toggleBacking&&qe("toggleBacking"),ve.rollToggleIcon?qe("rollToggleIcon"):ve.toggleIcon&&qe("toggleIcon"),zot(p)&&zot(ve.rollToggleBacking)&&(ve.backing.color=D)):(ve.toggleBacking&&qe("toggleBacking"),ve.toggleIcon&&qe("toggleIcon"),zot(p)&&(ve.backing.color=L))):(ve.label.colorOnly=je=Me,ve.label.rollColor=Oe,ve.rolled&&ve.label.showRollColor(!0),ve.label.text=Ie,De()),ve.stage&&ve.stage.update()}function De(){ve.pressed?(zot(p)&&ve.backing&&!ve.downBacking&&(ve.backing.color=o),ve.downBacking?qe("downBacking"):ve.rollBacking?qe("rollBacking"):ve.backing&&qe("backing"),ve.downIcon?qe("downIcon"):ve.rollIcon?qe("rollIcon"):ve.icon?qe("icon"):qe("icon",null)):ve.rolled?(zot(p)&&ve.backing&&!ve.rollBacking&&(ve.backing.color=l),ve.rollBacking?qe("rollBacking"):ve.backing&&qe("backing"),ve.rollIcon?qe("rollIcon"):ve.icon?qe("icon"):qe("icon",null)):(zot(p)&&ve.backing&&(ve.backing.color=i),ve.backing&&qe("backing"),ve.icon,qe("icon"))}this.toggled=!1,be&&(Ie=t.text,Me=t.color,Oe=t.rollColor,t.rollColor,this.on(q,function(){ve.toggled=!ve.toggled,Le()}));var _e,Re,Ye,Xe,Ne=!(this.toggle=function(e){return be?(zot(e)?ve.toggled=!ve.toggled:ve.toggled=e,Le()):zon&&zogy("Button() - can't toggle with wait parameters provided"),ve}),Fe=ve.waiting=!1,He=ve.label.color,Ve=ve.label.rollColor,Ge=this.on("mousedown",function(){Ne=!0,Ue()});function Ue(){zot(Q)&&zot(ne)&&zot(re)||ve.waiting||(Fe=!0,zot(ue)&&(ue=!0),ce&&(Xe=ve.stage.on("stagemousedown",function(e){ve.hitTestPoint(e.stageX/Jo.scaX,e.stageY/Jo.scaY)||ve.clearWait()},null,!0)),setTimeout(function(){ve.waiting=!0},50),Re=t.text,zot(ee)||(ve.label.colorOnly=je=ee),zot(te)||(ve.label.rollColor=te),Ye=ve.enabled,!ue&&ve.enabled&&(ve.enabled=!1),zot(Q)||(ve.label.text=Q),ve.rolled?(zot(p)&&!ve.rollWaitBacking&&(ve.backing.color=J),ve.rollWaitBacking?qe("rollWaitBacking"):ve.waitBacking&&qe("waitBacking"),ve.rollWaitIcon?qe("rollWaitIcon"):ve.waitIcon&&qe("waitIcon")):(zot(p)&&!ve.waitBacking&&(ve.backing.color=K),ve.waitBacking&&qe("waitBacking"),ve.waitIcon&&qe("waitIcon")),_e&&_e.clear(),_e=Jo.timeout(Z,function(){ve.enabled||(ve.enabled=Ye),ve.clearWait(),ve.dispatchEvent("waited")}),ve.stage&&ve.stage.update())}function qe(e,t){var o;if(0<=e.indexOf("con")){for(o=0;o<Se.length;o++){var n=Se[o],n=ve[n];ve.removeChild(n)}ve[e]&&ve.addChildAt(ve[e],1)}else if(ve[e]||t){for(o=0;o<xe.length;o++){var r=xe[o],r=ve[r];ve.removeChild(r)}ve[e]&&ve.addChildAt(ve[e],0)}}this.wait=Ue,this.clearWait=function(){return _e&&(Xe&&ve.stage.off("stagemousedown",Xe),_e.clear(),ve.label.text=Re,De(),ve.label.colorOnly=je=He,ve.label.rollColor=Ve,setTimeout(function(){ve.waiting=!1},55),Fe=!1,ve.stage&&ve.stage.update()),ve};var Qe=!(this.removeWait=function(){return ve.clearWait(),Q=null,ve.waitBacking=null,ve.rollWaitBacking=null,ve.off("mousedown",Ge),ve});function Ze(){ve.rolled=!0,Qe=!0,Fe?(ve.pressed&&ve.downWaitBacking?qe("downWaitBacking"):ve.pressed&&ve.downBacking?qe("downBacking"):ve.rollWaitBacking?qe("rollWaitBacking"):ve.waitBacking?qe("waitBacking"):ve.rollBacking?qe("rollBacking"):qe("backing"),ve.pressed&&ve.downWaitIcon?qe("downWaitIcon"):ve.rollWaitIcon?qe("rollWaitIcon"):ve.waitIcon?qe("waitIcon"):ve.rollIcon?qe("rollIcon"):qe("icon",!0)):be&&ve.toggled?(ve.pressed&&ve.downToggleBacking?qe("downToggleBacking"):ve.pressed&&ve.downBacking?qe("downBacking"):ve.rollToggleBacking?qe("rollToggleBacking"):ve.toggleBacking?qe("toggleBacking"):ve.rollBacking?qe("rollBacking"):qe("backing"),ve.pressed&&ve.downToggleIcon?qe("downToggleIcon"):ve.rollToggleIcon?qe("rollToggleIcon"):ve.toggleIcon?qe("toggleIcon"):ve.rollIcon?qe("rollIcon"):qe("icon",!0)):(ve.pressed&&ve.downBacking?qe("downBacking"):ve.rollBacking?qe("rollBacking"):qe("backing"),ve.pressed&&ve.downIcon?qe("downIcon"):ve.rollIcon?qe("rollIcon"):qe("icon",!0)),ve.pressed?zot(p)&&ve.backing?Fe?ve.backing.color=J:ve.toggled?ve.backing.color=D:ve.backing.color=o:p&&!zot(p.mask)&&ve.backing&&(ve.backing.mask.color=o):zot(p)&&ve.backing?(ve.backing.color=l,Fe?ve.backing.color=J:ve.toggled?ve.backing.color=D:ve.backing.color=l):p&&!zot(p.mask)&&ve.backing&&(ve.backing.mask.color=l),ve.border&&(ve.border.borderColor=ve.pressed?h:d),ve.pressed?ve.label.colorOnly=c:ve.label.showRollColor?ve.label.showRollColor():ve.label.colorOnly=je,ve.stage&&ve.stage.update()}this.on("mouseover",function(e){ve.stage&&ve.stage.frame.leftMouseDown&&!Ke||Ze()});var Ke=!1;function Je(){Qe=!1,ve.rollPersist&&Ne||$e()}function $e(){ve.rolled=!1,Fe||ve.waiting?(zot(p)&&ve.backing&&zot(ve.waitBacking)&&(ve.backing.color=zot(K)?i:K),ve.waitBacking?qe("waitBacking"):ve.backing&&qe("backing"),ve.waitIcon?qe("waitIcon"):ve.icon?qe("icon"):qe("icon",null)):ve.toggled&&be?(zot(p)&&ve.backing&&zot(ve.toggleBacking)&&(ve.backing.color=L),ve.toggleBacking?qe("toggleBacking"):ve.backing&&qe("backing"),ve.toggleIcon?qe("toggleIcon"):ve.icon?qe("icon"):qe("icon",null)):(zot(p)&&ve.backing?ve.backing.color=i:p&&!zot(p.mask)&&ve.backing&&(ve.backing.mask.color=i),ve.backing&&qe("backing"),ve.icon?qe("icon"):qe("icon",null)),ve.border&&(ve.border.borderColor=u),ve.label.colorOnly=je,ve.label.showRollColor&&ve.label.showRollColor(!1),ve.stage&&ve.stage.update()}function et(e,t){return zot(e)||(ve.contains(ve[e])&&(ve.removeChild(ve[e]),t&&ve.addChildAt(t,0<=e.indexOf("con")?ve.numChildren-1:0),ve.stage&&ve.stage.update()),t?(zot(p)&&"backing"==e&&(p=t),"Pattern"==t.type&&(t=Te(e,t)),ve[e]=t,ve[e].x=n/2,ve[e].y=r/2):ve[e]=null,De()),ve}this.on("mousedown",function(){ve.pressed=Ke=!0,Ze(),ve.rolled}),this.on("pressup",function(e){ve.pressed=Ke=Ne=!1,Qe?Ze():ve.rollPersist&&$e(),!e.nativeEvent||"touchend"!=e.nativeEvent.type&&"touchcancel"!=e.nativeEvent||Je()}),this.on("pressmove",function(){var e=ve.stage?ve.stage.frame:WW.zdf,e=ve.hitTestPoint(e.mouseX,e.mouseY);Ke&&!e?(Je(),Ke=!1):!Ke&&e&&(Ze(),Ke=!0)}),this.on("mouseout",Je),ve.removeRoll=$e,ve.rollBacking&&ve.rollBacking.removeFrom(),Object.defineProperty(ve,"text",{get:function(){return" "==t.text?"":t.text},set:function(e){t.text=e,Ie=Ie&&e,t.center(this),t.y+=1,Jo.pos(t,"left"==T||"right"==T?E:null,"top"==A||"bottom"==A?S:null,"right"==T,"bottom"==A)}}),Object.defineProperty(ve,"color",{get:function(){return a},set:function(e){a=e,Me=Me&&a,ve.label&&!zot(ve.label.color)&&(ve.label.color=je=a),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!ve.stage||ve.stage.update()}}),Object.defineProperty(ve,"rollColor",{get:function(){return s},set:function(e){s=e,Oe=Oe&&s,ve.label&&(ve.label.rollColor=s)}}),Object.defineProperty(ve,"downColor",{get:function(){return c},set:function(e){c=e,ve.label&&(ve.label.colorOnly=c)}}),Object.defineProperty(ve,"backgroundColor",{get:function(){return i},set:function(e){i=e,ve.backing.color?ve.backing.color=i:ve.backing.mask&&(ve.backing.mask.color=i),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!ve.stage||ve.stage.update()}}),Object.defineProperty(ve,"rollBackgroundColor",{get:function(){return l},set:function(e){l=e,ve.rollBacking&&ve.rollBacking.color?ve.rollBacking.color=l:ve.rollBacking&&ve.rollBacking.mask&&(ve.rollBacking.mask.color=l)}}),Object.defineProperty(ve,"toggleBackgroundColor",{get:function(){return L},set:function(e){L=e,ve.toggleBacking&&ve.toggleBacking.color?ve.toggleBacking.color=L:ve.toggleBacking&&ve.toggleBacking.mask&&(ve.toggleBacking.mask.color=L)}}),Object.defineProperty(ve,"rollToggleBackgroundColor",{get:function(){return D},set:function(e){D=e,ve.rollToggleBacking&&ve.rollToggleBacking.color?ve.rollToggleBacking.color=D:ve.rollToggleBacking&&ve.rollToggleBacking.mask&&(ve.rollToggleBacking.mask.color=D)}}),Object.defineProperty(ve,"downBackgroundColor",{get:function(){return o},set:function(e){o=e,ve.downBacking&&ve.downBacking.color?ve.downBacking.color=o:ve.downBacking&&ve.downBacking.mask&&(ve.downBacking.mask.color=o)}}),Object.defineProperty(ve,"borderColor",{get:function(){return u},set:function(e){u=e,ve.rolled||(ve.backing&&ve.backing.borderColor&&(ve.backing.borderColor=e),ve.border&&(ve.border.borderColor=e))}}),Object.defineProperty(ve,"rollBorderColor",{get:function(){return d},set:function(e){d=e,ve.rolled&&(ve.backing&&ve.backing.borderColor&&(ve.backing.borderColor=e),ve.border&&(ve.border.borderColor=e))}}),Object.defineProperty(ve,"hitPadding",{get:function(){return B},set:function(e){0==(B=e)?Pe&&(this.hitArea=null):We()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(ve,"enabled",{get:function(){return ve._enabled},set:function(e){ve._enabled&&(ve.startMouseChildren=ve.mouseChildren),e?(zt(ve,e),ve.mouseChildren=ve.startMouseChildren):($e(),zt(ve,e));e=t.color;t.color=je=e,Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!ve.stage||ve.stage.update()}}),this.setBacking=function(e,t){return et(e,t),ve},!(this.setIcon=function(e,t){return et(e,t),ve})!==de&&Jo.styleTransforms(this,ge),this.clone=function(e){e=new Jo.Button(n,r,t.clone(),e||!Jo.isPick(me[0])?i:me[0],e||!Jo.isPick(me[1])?l:me[1],e||!Jo.isPick(me[2])?o:me[2],e||!Jo.isPick(me[3])?a:me[3],e||!Jo.isPick(me[4])?s:me[4],e||!Jo.isPick(me[5])?c:me[5],ze,ye,d,h,zot(p)?null:ve.backing.clone(),zot(g)?null:ve.rollBacking.clone(),zot(f)?null:ve.downBacking.clone(),zot(m)?null:m.clone(),zot(z)?null:z.clone(),zot(y)?null:y.clone(),b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,zot(N)?null:N.clone(),zot(F)?null:F.clone(),zot(H)?null:H.clone(),zot(V)?null:V.clone(),zot(G)?null:G.clone(),zot(U)?null:U.clone(),q,Q,Z,K,J,$,ee,te,oe,zot(ne)?null:ne.clone(),zot(re)?null:re.clone(),zot(ie)?null:ie.clone(),zot(le)?null:le.clone(),zot(ae)?null:ae.clone(),zot(se)?null:se.clone(),ce,ue,de,this.group,pe);return ve.cloneProps(e)},this.doDispose=function(e,t,o){return ve.icon&&ve.icon.dispose(),ve.rollIcon&&ve.rollIcon.dispose(),ve.downIcon&&ve.downIcon.dispose(),ve.waitIcon&&ve.waitIcon.dispose(),ve.rollWaitIcon&&ve.rollWaitIcon.dispose(),ve.downWaitIcon&&ve.downWaitIcon.dispose(),ve.toggleIcon&&ve.toggleIcon.dispose(),ve.rollToggleIcon&&ve.rollToggleIcon.dispose(),ve.downToggleIcon&&ve.downToggleIcon.dispose(),ve.icon=ve.rollIcon=ve.downIcon=ve.waitIcon=ve.rollWaitIcon=ve.downWaitIcon=ve.toggleIcon=ve.rollToggleIcon=ve.downToggleIcon=null,o||this.zimContainer_dispose(!0),!0}},Jo.extend(Jo.Button,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Button.prototype.dispose=function(e){return this.doDispose(null,null,e)},Jo.CheckBox=function(t,o,n,r,i,l,a,s,c,u,d,h,p,g,e,f){if(v=zob(Jo.CheckBox,arguments,"size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, rtl, style, group, inherit",this))return v;z_d("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=e;var m=!1===g?{}:Jo.getStyle(this.type,this.group,f);zot(t)&&(t=null!=m.size?m.size:60),zot(o)&&(o=null!=m.label?m.label:null),zot(n)&&(n=null!=m.startChecked&&m.startChecked),zot(r)&&(r=null!=m.color?m.color:Jo.darker),zot(i)&&(i=null!=m.backgroundColor?m.backgroundColor:Jo.white.toAlpha(.8)),zot(l)&&(l=null!=m.borderColor?m.borderColor:Jo.darker),zot(a)&&(a=null!=m.borderWidth?m.borderWidth:t/10),l<0||a<0?l=a=null:null!=l&&null==a&&(a=t/10),zot(s)&&(s=null!=m.corner?m.corner:0),zot(c)&&(c=null!=m.margin?m.margin:t/5),"box"!=u&&"square"!=u&&"x"!=u&&(u=null!=m.indicatorType?m.indicatorType:"check"),zot(d)&&(d=null!=m.indicatorColor?m.indicatorColor:0<a?l:Jo.black),this.setBounds(-c,-c,t+2*c,t+2*c),zot(h)&&(h=null!=m.tap&&m.tap),zot(p)&&(p=null!=m.rtl?m.rtl:"rtl"==WW.DIR);var z=this;this.cur("pointer");var y=function(){return arguments}(o,n);this.veeObj={label:y[0],startChecked:y[1]},o=Jo.Pick.choose(o);var b=n=Jo.Pick.choose(n);"string"!=typeof o&&"number"!=typeof o||(o=new Jo.Label({text:o,size:5*t/6,color:r,valign:"center",align:p?"right":"left",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:g,group:this.group}));var v=this.box=new Jo.Rectangle(t,t,i,null,null,s),e=this.box2=new Jo.Rectangle(5*t/7,5*t/7,"rgba(0,0,0,0)",l,a,s);e.x=t/7,e.y=t/7,this.addChild(v,e);v=t;o&&(o.center(z),this.label=o,p?(o.x=-c,this.setBounds(-o.width-2*c,-c,t+3*c+o.getBounds().width,Math.max(t+2*c,o.getBounds().height)),v=t+o.width+c,this.regX=t):(o.x=z.getBounds().width,this.setBounds(-c,-c,t+4*c+o.getBounds().width,Math.max(t+2*c,o.getBounds().height)),v=o.x+o.width));e=new Jo.Shape({style:!1});e.graphics.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,v+2*c,this.getBounds().height),this.hitArea=e;var w=new Jo.Shape({style:!1}),C=w.graphics;"check"==u?C.f(d).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==u||"square"==u?C.f(d).dr(-35,-35,70,70):C.f(d).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");w.setBounds(-47.5,-47.5,95,95);var x=t/161;function k(){b=!b,z.setChecked(b),z.dispatchEvent("change")}w.scaleX=w.scaleY=x,w.alpha=.9,w.x=t/2,w.y=t/2,b&&this.addChild(w),h?this.tap(k):this.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",k),Object.defineProperty(z,"checked",{get:function(){return b},set:function(e){z.setChecked(e)}}),this.toggle=function(e){zot(e)&&(e=!b),z.setChecked(e)},Object.defineProperty(z,"toggled",{get:function(){return b},set:function(e){z.setChecked(e)}}),Object.defineProperty(z,"text",{get:function(){return o?o.text:null},set:function(e){o&&(o.text=e,Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!z.stage||z.stage.update())}}),Object.defineProperty(w,"indicatorColor",{get:function(){return d},set:function(e){b&&z.removeChild(w),w=new createjs.Shape,C=w.graphics,d=e,C.f(d).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),w.scaleX=w.scaleY=x,w.alpha=.9,w.x=t/2,w.y=t/2,b&&z.addChild(w),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!z.stage||z.stage.update()}}),Object.defineProperty(z,"indicator",{get:function(){return w},set:function(){zogy("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(z,"enabled",{get:function(){return z._enabled},set:function(e){zt(z,e)}}),!(this.setChecked=function(e){return zot(e)&&(e=!0),(b=e)?z.addChild(w):z.removeChild(w),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!z.stage||z.stage.update(),z})!==g&&Jo.styleTransforms(this,m),this.clone=function(e){return z.cloneProps(new Jo.CheckBox(t,e||!Jo.isPick(y[0])?o?o.clone():null:y[0],e||!Jo.isPick(y[1])?n:y[1],r,i,l,a,s,c,u,d,h,p,g,this.group,f))}},Jo.extend(Jo.CheckBox,Jo.Container,"clone","zimContainer",!1),Jo.RadioButtons=function(l,i,a,s,c,u,d,h,p,o,g,f,m,n,z,e,r){var t;if(t=zob(Jo.RadioButtons,arguments,"size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, index, rtl, selectedIndex, style, group, inherit",this))return t;z_d("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=e;var y=!1===z?{}:Jo.getStyle(this.type,this.group,r);zot(l)&&(l=null!=y.size?y.size:60),l=Math.max(5,l),zot(i)&&(i=null!=y.buttons?y.buttons:["A","B","C"]),zot(a)&&(a=null==y.vertical||y.vertical),zot(s)&&(s=null!=y.color?y.color:Jo.darker),zot(c)&&(c=null!=y.backgroundColor?y.backgroundColor:"rgba(255,255,255,.8)"),zot(u)&&(u=null!=y.borderColor?y.borderColor:Jo.darker),zot(d)&&(d=null!=y.borderWidth?y.borderWidth:l/9),u<0||d<0?u=d=null:null!=u&&null==d&&(d=l/10),zot(h)&&(h=a?null!=y.spacing?y.spacing:.2*l:null!=y.spacing?y.spacing:l),zot(p)&&(p=null!=y.margin?y.margin:l/5),zot(o)&&(o=null==y.always||y.always),zot(g)&&(g=null!=y.indicatorColor?y.indicatorColor:0<d?u:Jo.black),zot(m)&&(m=null!=y.rtl?y.rtl:"rtl"==WW.DIR);var b=this;this.cur("pointer"),this.labels=[],this.indicators=[];var v,w=0;if("string"==typeof i){var C=i;i=[];for(var x=0;x<C.length;x++)i.push({label:C[x]})}var k=new Jo.Container({style:!1});function T(e){e=k.getChildIndex(e.target);o&&b.index==e||(b.setSelected(e),b.dispatchEvent("change"))}this.addChild(k),function(){var e,t,o=!1;for(t=i.length-1;0<=t;t--)(e=i[t]).selected&&!0===e.selected&&(f=o?(e.selected="false",null):(o=!0,b.id=e.id,t));k.removeAllChildren(),b.buttons=[];var n,r=0;for(t=0;t<i.length;t++)"string"!=typeof(e=i[t])&&"number"!=typeof e||(n={selected:!1,label:new Jo.Label({text:e,size:5*l/6,color:null!=y.color?y.color:s,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:z,group:b.group})},e=n),(e.label&&"string"==typeof e.label||"number"==typeof e.label)&&(e.label=new Jo.Label({text:e.label,size:null!=y.size?y.size:5*l/6,color:null!=y.color?y.color:s,valign:"center",style:z})),b.labels.push(e.label),e.index=t,i[t]=e,(n=function(e,t){var o=new Jo.Container({style:!1});b.buttons.push(o),o.mouseChildren=!1,o.setBounds(-p,-p,l+2*p,l+2*p);var n=new Jo.Shape({style:!1}),r=n.graphics;r.f(c).dc(l/2,l/2,l/1.85),r.s(u).ss(d).dc(l/2,l/2,l/2-l/2/5),o.addChild(n);var i=o.check=new Jo.Circle(l/5.2,g,null,null,null,null,null,null,null,!1);b.indicators.push(i),i.mouseEnabled=!1,i.alpha=.95,i.regX=i.regY=-l/2;n=l;t&&(0==w&&(w=t.width),o.addChild(t),t.y=l/2,o.text=t.text,n=m?(t.x=-t.width-p,o.setBounds(-t.width-p,-p,l+2*p+t.getBounds().width,Math.max(l+2*p,t.getBounds().height)),t.width+p+l):(t.x=o.getBounds().width,o.setBounds(-p,-p,l+2*p+t.getBounds().width,Math.max(l+2*p,t.getBounds().height)),t.x+t.width));e&&(o.addChild(i),b.label=t,b.label&&(b.text=t.text));t=new Jo.Shape({style:!1});return(r=t.graphics).f("rgba(0,0,0,.01)").r(o.getBounds().x,o.getBounds().y,n+2*p,o.getBounds().height),o.hitArea=t,o}(e.selected,e.label)).type="RadioButton",(n.obj=e).selected&&(v=n.obj),k.addChild(n),a?(n.y=r,r+=n.getBounds().height+h):(n.x=r,r+=n.getBounds().width+h)}();for(var A=0;A<k.numChildren;A++)k.getChildAt(A).on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",T);this.getBounds()||this.setBounds(0,0,l,l),m?(this.setBounds(2*-p-w,-p,this.getBounds().width+2*p,this.getBounds().height),this.regX=a?l+p:this.getBounds().width-w-3*p):this.setBounds(-p,-p,this.getBounds().width+2*p,this.getBounds().height),this.setSelected=function(e){if(zot(e)&&(e=-1),-1==e||k.getChildAt(e)){for(var t,o,n=0;n<k.numChildren;n++)(t=k.getChildAt(n)).removeChild(t.check);return 0<=e&&(t=k.getChildAt(e),o=-2,v&&(o=v.index),v=t.obj),-1==e||o==v.index?(v=null,b.id=null,b.label=null,b.text=""):(t.addChild(t.check),b.id=v.id,b.label=v.label,b.label&&(b.text=b.label.text)),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!b.stage||b.stage.update(),b}},Object.defineProperty(b,"selected",{get:function(){return v},set:function(){zogy("ZIM RadioButton - selected is read only")}}),Object.defineProperty(b,"index",{get:function(){return v?v.index:-1},set:function(e){b.index!=e&&b.setSelected(e)}}),Object.defineProperty(b,"selectedIndex",{get:function(){return b.index},set:function(e){b.index=e}}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(e){zt(b,e)}}),zot(n)&&zot(y.selectedIndex)||!zot(f)||!zot(y.index)||(f=zot(n)?y.selectedIndex:n),zot(f)&&(f=null!=y.index?y.index:0),b.index=f,!1!==z&&Jo.styleTransforms(this,y),this.clone=function(){for(var e=Jo.copy(i),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return b.cloneProps(new Jo.RadioButtons(l,e,a,s,c,u,d,h,p,o,g,f,m,n,z,this.group,r))}},Jo.extend(Jo.RadioButtons,Jo.Container,"clone","zimContainer",!1),Jo.Toggle=function(o,n,e,t,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w){if(C=zob(Jo.Toggle,arguments,"width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",this))return C;z_d("57.5"),this.group=v;var C=!1===b?{}:Jo.getStyle("Toggle",this.group,w);zot(o)&&(o=null!=C.width?C.width:80),zot(n)&&(n=null!=C.height?C.height:50),this.zimContainer_constructor(o,n,null,null,!1),this.type="Toggle",zot(r)&&(r=null!=C.backgroundColor?C.backgroundColor:Jo.purple),zot(i)&&(i=null!=C.margin?C.margin:10),zot(l)&&(l=null!=C.indicatorType?C.indicatorType:"circle"),zot(a)&&(a=null!=C.indicatorColor?C.indicatorColor:Jo.white),zot(c)&&(c=null!=C.toggleBackgroundColor?C.toggleBackgroundColor:r.lighten?r.lighten(.3):r),zot(u)&&(u=null!=C.color?C.color:Jo.darker),zot(d)&&(d=null!=C.borderColor?C.borderColor:null),zot(h)&&(h=null!=C.borderWidth?C.borderWidth:null),d<0||h<0?d=h=null:null!=d&&null==h&&(h=1),zot(p)&&(p=null!=C.corner?C.corner:"circle"!=l?0:25),zot(g)&&(g=null!=C.indicatorCorner?C.indicatorCorner:0),zot(f)&&(f=null!=C.shadowColor?C.shadowColor:"rgba(0,0,0,.3)"),zot(m)&&(m=null!=C.shadowBlur?C.shadowBlur:14),zot(t)&&(t=null!=C.startToggled&&C.startToggled);v=$o(z);zot(z)&&(z=null!=C.time?C.time:"s"==v?.1:100),zot(e)&&(e=null!=C.label?C.label:null),zot(y)&&(y=null!=C.labelLeft?C.labelLeft:null);var x=this;x.cur("pointer"),"string"!=typeof e&&"number"!=typeof e||(e=this.label=new Jo.Label({text:e,size:C.size||5*n/6,color:u,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),"string"!=typeof y&&"number"!=typeof y||(y=this.labelLeft=new Jo.Label({text:y,size:C.size||5*n/6,color:u,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new Jo.Rectangle(o,n,r,d,h,p).addTo(this),this.indicator="rectangle"==l||"square"==l?new Jo.Rectangle(.65*n,.65*n,a,null,null,g).center(this.background).pos(.2*n,null,t):new Jo.Circle(.35*n,a).center(this.background).pos(.175*n,null,t);var k=t;function T(e){var t,o=x.indicator.x,e=!0===e?0:z;"rectangle"==l||"square"==l?x.indicator.pos(.2*n,null,k):x.indicator.pos(.175*n,null,k),0<z&&x.indicator.animate({props:{x:o},from:!0,time:e}),x.background.color=k?c:r,x.text=k?x.label?x.label.text:"on":x.labelLeft?x.labelLeft.text:"off",x.zimAccessibility&&(t="Toggle set to "+(k?x.label?x.label.text+".":"on.":x.labelLeft?x.labelLeft.text+".":"off."),setTimeout(function(){x.zimAccessibility.talk(t)},50))}x.background.color=k?c:r,-1!=f&&0<m&&(this.background.shadow=new createjs.Shadow(f,3,3,m)),e&&(this.addChild(e),e.x=o+2+i+h,e.y=n/2,this.label=e,this.setBounds(-i,-i,o+3*i+h+e.getBounds().width,Math.max(n+2*i,e.getBounds().height))),y&&(this.addChild(y),y.x=0,x.background.x+=y.width+3+i+h,x.label.x+=y.width+3+i+h,y.y=n/2,this.labelLeft=y,this.setBounds(-i,-i,x.getBounds().width+y.width+3+i+h,x.getBounds().height)),this.expand(Jo.mobile()?20:10),this.tap(function(e){if(y){var t=x.localToGlobal(y.width+3+i+h+o/2,0);if(e.stageX/Jo.scaX<t.x-o/2&&!k||e.stageX/Jo.scaX>=t.x+o/2&&k)return}k=!k,T(),x.dispatchEvent("change")},Jo.mobile()?20:10),new Jo.Swipe(this,20,"s"==v?.2:200).on("swipe",function(e){0!=e.swipeX&&(1==e.swipeX&&k||-1==e.swipeX&&!k||(k=!k,T(),x.dispatchEvent("change")))}),Object.defineProperty(x,"textLeft",{get:function(){return y?y.text:null},set:function(e){y&&(y.text=e,Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!x.stage||x.stage.update())}}),x.toggle=function(e,t){var o=k;return zot(e)&&(e=!0),o!=(k=e)&&T(t),x},x.text=k?x.label?x.label.text:"on":x.labelLeft?x.labelLeft.text:"off",Object.defineProperty(x,"toggled",{get:function(){return k},set:function(e){x.toggle(e)}}),this._enabled=!0,Object.defineProperty(x,"enabled",{get:function(){return x._enabled},set:function(e){zt(x,e)}}),!1!==b&&Jo.styleTransforms(this,C),this.clone=function(){return x.cloneProps(new Jo.Toggle(o,n,e?e.clone():"",t,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y?y.clone():"",b,this.group,w))}},Jo.extend(Jo.Toggle,Jo.Container,"clone","zimContainer",!1),Jo.Tip=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,F,H){if(G=zob(Jo.Tip,arguments,"text, tipAlign, tipValign, margin, marginH, marginV, outside, target, delay, time, mouseClose, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingH, paddingV, shiftH, shiftV, rollPersist, labelWidth, labelHeight, maxSize, bold, italic, variant, splitWords, style, group, inherit",this))return G;z_d("57.6"),this.group=F;var V=!1===N?{}:Jo.getStyle("Tip",this.group,H);zot(e)&&(e=null!=V.text?V.text:"Here's a tip!"),zot(n)&&(n=null!=V.margin?V.margin:40),zot(r)&&(r=null!=V.marginH?V.marginH:n),zot(i)&&(i=null!=V.marginV?V.marginV:n),zot(t)&&(t=null!=V.tipAlign?V.tipAlign:"right"),zot(o)&&(o=null!=V.tipValign?V.tipValign:"bottom"),zot(l)&&(l=null!=V.outside&&V.outside),zot(k)&&(k=null!=V.backgroundColor?V.backgroundColor:Jo.blue),zot(p)&&(p=null!=V.color?V.color:Jo.white),zot(P)&&(P=null!=V.corner?V.corner:25),zot(E)&&(E=null!=V.backgroundDashed?V.backgroundDashed:null),zot(S)&&(S=null!=V.padding?V.padding:10),zot(B)&&(B=null!=V.paddingH?V.paddingH:S),zot(W)&&(W=null!=V.paddingV?V.paddingV:S),!zot(f)&&"ignore"!=f||(f=null!=V.shadowColor&&"ignore"!=f?V.shadowColor:"rgba(0,0,0,.3)"),!zot(m)&&"ignore"!=m||(m=null!=V.shadowBlur&&"ignore"!=m?V.shadowBlur:1),zot(s)&&(s=null!=V.delay?V.delay:0);var G=$o(c);zot(c)&&(c=null!=V.time?V.time:"s"==G?2:2e3),zot(u)&&(u=null==V.mouseClose||V.mouseClose),this.zimLabel_constructor(e,d,h,p,g,null,null,z,y,_,R,Y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,X,N,F,Jo.copy(V)),this.type="Tip",l&&(r=-r,i=-i);var U=this;U.tipAlign=t,U.tipValign=o,this.background.sha(f,3,5,m),this.show=function(e,o){$o(o);if(zot(e)&&(e=s),zot(o)&&(o=c),zot(a)){if(!WW.zdf)return U;a=WW.zdf.stage}else{if(!a.getBounds)return zogy("zim Tip(): Please pass in a reference to a container with bounds set as parameter to Tip"),U;if(zot(a.stage))return zogy("zim display - Waiter(): The container must have a stage property"),U}function t(){var e=a.boundsToGlobal?a.boundsToGlobal():a.getBounds(),t=new Jo.Container(e.x,e.y,e.width,e.height);t.zimTemp=!0,t.loc(0,0,a.stage),U.pos(r,i,U.tipAlign,U.tipValign,t),l&&("right"==U.tipAlign?U.x+=U.width:"left"==U.tipAlign&&(U.x-=U.width),"bottom"==U.tipValign?U.y+=U.height:"top"==U.tipValign&&(U.y-=U.height)),U.addTo(t.stage),t.zimTemp&&t.removeFrom&&(t.removeFrom(),t=null),t=U.stage,U.timeoutID&&U.timeoutID.clear(),U.timeoutID=Jo.timeout(o,function(){U.hide(),t.stage.update()}),u&&(U.upID&&t.stage.off("stagemouseup",U.upID),U.upID=t.stage.on("stagemouseup",function(){U.hide(),t.stage&&t.stage.update()})),t.stage&&t.stage.update()}return 0<e?U.showID=Jo.timeout(e,t):t(),U},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&a.stage&&a.stage.off("stagemouseup",this.upID),U},this.clear=function(){U.showID&&U.showID.clear(),U.hide()},!(this.dispose=function(e,t,o){U.upID&&U.stage&&U.stage.off("stagemouseup",U.upID),o||this.zimLabel_dispose(!0)})!==N&&Jo.styleTransforms(this,V),this.clone=function(){return U.cloneProps(new Jo.Tip(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,X,N,this.group,H))}},Jo.extend(Jo.Tip,Jo.Label,["dispose","clone"],"zimLabel",!1),Jo.Pane=function(n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,e,v,w,C,x,k,T,A,P,E,S,B,t,W){if(n&&!n.header&&!n.message&&!n.display&&!n.buttons&&(M=zob(Jo.Pane,arguments,"content, backgroundColor, color, width, height, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, autoPadding, autoPaddingH, autoPaddingV, keyboardAccess, style, group, inherit",this)))return M;z_d("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var o="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(zot(e)){if(!WW.zdf)return void zogy(o);e=WW.zdf.stage}else{if(!e.getBounds)return void zogy(o);if(zot(e.getStage))return void zogy("zim display - Pane(): The container must have a stage property")}this.group=t;var I=!1===B?{}:Jo.getStyle(this.type,this.group,W);zot(l)&&(l=null!=I.width?I.width:"auto"),zot(a)&&(a=null!=I.height?I.height:"auto"),zot(n)&&(n=null!=I.content?I.content:" "),"string"!=typeof n&&"number"!=typeof n||(n=new Jo.Label({text:n,size:null!=I.size?I.size:40,align:null!=I.align?I.align:"center",valign:null!=I.valign?I.valign:"center",color:null!=I.color?I.color:i,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).noMouse());var M=this.content=n;zot(r)&&(r=null!=I.backgroundColor?I.backgroundColor:Jo.white),zot(s)&&(s=null!=I.draggable&&I.draggable),zot(c)&&(c=null==I.resets||I.resets),zot(u)&&(u=null==I.modal||I.modal),zot(d)&&(d=null!=I.corner?I.corner:20),zot(v)&&(v=null!=I.titleBar?I.titleBar:null),zot(w)&&(w=null!=I.titleBarColor?I.titleBarColor:null),zot(C)&&(C=null!=I.titleBarBackgroundColor?I.titleBarBackgroundColor:null),zot(x)&&(x=null!=I.titleBarHeight?I.titleBarHeight:null),zot(h)&&(h=null!=I.backdropColor?I.backdropColor:"rgba(0,0,0,.2)"),zot(p)&&(p=null!=I.shadowColor?I.shadowColor:"rgba(0,0,0,.3)"),zot(g)&&(g=null!=I.shadowBlur?I.shadowBlur:20),zot(f)&&(f=null==I.center||I.center),zot(m)&&(m=null==I.displayClose||I.displayClose),s&&(m=!1),zot(z)&&(z=null==I.backdropClose||I.backdropClose),zot(b)&&(b=null!=I.fadeTime?I.fadeTime:0),zot(k)&&(k=null!=I.close&&I.close),zot(T)&&(T=null!=I.closeColor?I.closeColor:Jo.grey),zot(A)&&(A=null!=I.autoPadding?I.autoPadding:70),zot(P)&&(P=null!=I.autoPaddingH?I.autoPaddingH:A),zot(E)&&(E=null!=I.autoPaddingV?I.autoPaddingV:A),zot(S)&&(S=null!=I.keyboardAccess&&I.keyboardAccess);o=this.backdrop=new Jo.Shape({style:!1}),t=o.graphics;t.f(h),t.drawRect(-5e3,-5e3,1e4,1e4);var O,j=this;this.add=function(e,t,o,n){var r;return(r=zob(j.add,arguments,"obj, index, center, replace",j))?r:(zot(o)&&(o=!0),zot(n)&&(n=!0),"string"==typeof e&&(e=new Label(e,null,null,i).noMouse()),n&&j.contentContainer.removeAllChildren(),o?e.center(j.contentContainer,t):e.addTo(j.contentContainer,t),j)},M&&(O=Jo.makeContent(M,l,Jo.dark),(L=["header","message","text","display","buttons","config"]).forEach(function(e){O[e]&&(j[e]=O[e])}),j.label=j.message,"auto"==l&&(l=O.width+2*P),"auto"==a&&(a=O.height+2*E));n=j.contentContainer=new Jo.Container(l,a);O&&j.add(O,null,!0),this.setBounds(-l/2,-a/2,l,a);var L=["header","message","text","display","buttons","config"];n&&L.forEach(function(e){n[e]&&(j[e]=n[e])}),j.label=j.message,j.container=e,o.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",z?F:function(e){e.stopImmediatePropagation()});var D,_,R,Y,X,N=new Jo.Dictionary(!0);function F(e){j.dispatchEvent("closing"),setTimeout(function(){H(),j.dispatchEvent("close")},10),e.stopImmediatePropagation()}function H(){function e(){j.container.removeChild(j),j.closeCall&&j.closeCall(j.closeParams),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||j.container.stage.update(),c&&(isNaN(j.resetX)||(j.x=j.resetX),isNaN(j.resetY)||(j.y=j.resetY))}0<b?j.animate({obj:{alpha:0},time:b,call:function(){e(),j.dispatchEvent("fadedout")}}):e()}o.on("mousedown",function(e){e.stopImmediatePropagation()}),this.addChild(o),u||o.noMouse(),zot(y)?D=this.backing=new Jo.Rectangle({width:l,height:a,color:r,corner:d,style:!1}):"Pattern"==y.type?(Y=y,D=new Jo.Rectangle(l,a,r,null,null,d,null,null,null,!1),Y.centerReg(D),Y.setMask(D.shape)):D=y,j.display=j.backing=D,m&&(D.cur("pointer"),D.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",F)),-1!=p&&0<g&&(D.shadow=new createjs.Shadow(p,8,8,g)),D.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,s&&(D.cur("pointer"),D.on("mousedown",function(e){isNaN(j.resetX)&&(j.resetX=j.x),isNaN(j.resetY)&&(j.resetY=j.y),_=e.stageX/Jo.scaX-j.x,R=e.stageY/Jo.scaY-j.y,D.cur("pointer")}),D.on("pressmove",function(e){var t,o,e=(t=e.stageX/Jo.scaX-_,e=e.stageY/Jo.scaY-R,t=Math.max(l/2,Math.min(j.container.getBounds().width-l/2,t)),e=Math.max(a/2,Math.min(j.container.getBounds().height-a/2,e)),{x:t,y:e});j.x=e.x,j.y=e.y;for(var n=0;n<j.numChildren;n++)"TextArea"!=(o=j.getChildAt(n)).type&&"Loader"!=o.type&&"Tag"!=o.type||o.resize();j.stage.update()}),this.on("pressup",function(){D.cur("pointer"),j.stage&&j.stage.update()})),D.centerReg(this),n&&n.center(this),zot(v)||("string"==typeof v&&(v=new Jo.Label(v,null,null,w)),Y=j.titleBarLabel=v,zot(x)&&(x=1.5*Y.height),zot(w)&&(w=Jo.black),zot(C)&&(C="rgba(0,0,0,.2)"),j.titleBar=v=new Jo.Container(l,x,null,null,!1).centerReg(j).mov(0,-a/2+x/2),v.mouseEnabled=!1,v.mouseChildren=!1,j.titleBar.backing=new Jo.Rectangle(l,x,C,null,null,[.95*d,.95*d,0,0],null,null,null,!1).addTo(v),Y.center(v).pos({x:Math.max(d/2,10),reg:!0})),k&&((k=j.close=new Jo.Shape(-40,-40,80,80,null,!1)).graphics.f(T).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),(v?k.addTo(j).scaleTo(v,null,50).mov(l/2-Math.max(d/2,10)-k.width/2,-a/2+x/2):k.addTo(j).sca(.3).mov(l/2-k.width-3,-a/2+k.height)).expand(40),k.cur("pointer"),k.expand(),k.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",F)),Object.defineProperty(j,"text",{get:function(){return j.message?" "==j.message.text?"":j.message.text:j.content.text?" "==j.content.text?"":j.content.text:void 0},set:function(e){j.message?j.message.text=e:j.content.text&&(j.content.text=e)}}),this._enabled=!0,Object.defineProperty(j,"enabled",{get:function(){return j._enabled},set:function(e){zt(j,e)}}),this.hide=function(e,t){return zot(e)||(j.closeParams=e),H(),t&&(j.dispatchEvent("close"),j.dispatchEvent("change")),j},this.on("removed",function(){var e,t;j.toggled=!1;var o=j.content||j.contentContainer||j;"Container"!=o.type&&(o=j.contentContainer||j);for(t=0;t<o.numChildren;t++){var n;"TextArea"!=(e=o.getChildAt(t)).type&&"Loader"!=e.type&&"Tag"!=e.type||(n={obj:e,depth:o.getChildIndex(e)},N.add(e,n))}for(t=o.numChildren-1;0<=t;t--)"TextArea"!=(e=o.getChildAt(t)).type&&"Loader"!=e.type&&"Tag"!=e.type||o.removeChild(e);Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||j.container.stage.update();c&&(isNaN(j.resetX)||(j.x=j.resetX),isNaN(j.resetY)||(j.y=j.resetY));{var r;j.zimAccessibility&&((r=j.zimAccessibility).resize(j),(X||j.zimTabTag.nextSibling).focus(),setTimeout(function(){r.talk("Pane has been closed.")},50))}}),this.show=function(e,t){return zot(e)||(j.closeCall=e),zot(t)||(j.closeParams=t),f&&isNaN(j.resetX)&&(j.x=j.container.getBounds().width/2,j.y=j.container.getBounds().height/2),j.container.addChild(j),0<b?(j.alpha=0,j.animate({props:{alpha:1},time:b,call:function(){j.dispatchEvent("fadedin")}})):setTimeout(function(){j.container.stage&&j.container.stage.update()},10),S&&j.stage&&j.stage.frame&&WW.parent&&WW.location!==WW.parent.location&&(j.stage.frame.keyboardMessage(null,null,""),j.stage.frame.on("keyboardactive",function(){j.hide()},null,!0)),j},this.on("added",function(){var e=j.content||j.contentContainer||j;"Container"!=e.type&&(e=j.contentContainer||j);for(var t=0;t<N.length;t++)e.addChildAt(N.values[t].obj,N.values[t].depth);{var o;j.zimAccessibility&&(o=j.zimAccessibility,setTimeout(function(){o.activatedObject&&(X=o.activatedObject.zimTabTag)},50),o.resize(j),o.tabIndex=j.zimTabIndex)}j.toggled=!0}),!(this.toggle=function(e){return!0!==e&&(!1===e||j.container.contains(j))?j.hide():j.show(),j})!==B&&Jo.styleTransforms(this,I),this.clone=function(){var e=j.contentContainer.x,t=j.contentContainer.y,o=j.cloneProps(new Jo.Pane(Jo.copy(n),r,i,l,a,s,c,u,d,h,p,g,f,m,z,zot(y)?null:y.clone(),b,j.container,v,w,C,x,k,T,A,P,E,S,B,this.group,W));return o.contentContainer.x=e,o.contentContainer.y=t,o}},Jo.extend(Jo.Pane,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Panel=function(t,e,o,n,l,a,r,s,c,i,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A){if(M=zob(Jo.Panel,arguments,"width, height, content, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, close, closeColor, next, nextColor, extraButton, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",this))return M;z_d("57.7"),this.group=T;var P=!1===k?{}:Jo.getStyle("Panel",this.group,A);zot(t)&&(t=null!=P.width?P.width:250),zot(e)&&(e=null!=P.height?P.height:300),this.zimContainer_constructor(t,e,null,null,!1),this.type="Panel",zot(o)&&(o=null!=P.content?P.content:null);var E=this.content=o;zot(n)&&(n=null!=P.titleBar?P.titleBar:"PANEL"),zot(l)&&(l=null!=P.titleBarColor?P.titleBarColor:Jo.white),zot(a)&&(a=null!=P.titleBarBackgroundColor?P.titleBarBackgroundColor:Jo.grey),zot(r)&&(r=null!=P.titleBarHeight?P.titleBarHeight:30),zot(s)&&(s=null!=P.backgroundColor?P.backgroundColor:Jo.lighter),zot(c)&&(c=null!=P.borderColor?P.borderColor:Jo.pewter),zot(i)&&(i=null!=P.borderWidth?P.borderWidth:null),c<0||i<0?c=i=null:null!=c&&null==i&&(i=1),zot(u)&&(u=null!=P.corner?P.corner:5),zot(b)&&(b=null!=P.align?P.align:"left"),zot(v)&&(v=null!=P.shadowColor?P.shadowColor:"rgba(0,0,0,.3)"),zot(w)&&(w=null!=P.shadowBlur?P.shadowBlur:14),zot(C)&&(C=null!=P.draggable&&P.draggable),zot(x)&&(x=null!=P.boundary?P.boundary:null),zot(d)&&(d=null!=P.close&&P.close),zot(h)&&(h=null!=P.closeColor?P.closeColor:zot(l)?Jo.grey:l),zot(p)&&(p=null!=P.next?P.next:Jo.vee(n)),zot(g)&&(g=null!=P.nextColor?P.nextColor:zot(l)?Jo.grey:l),Array.isArray(u)||(u=[u,u,u,u]),zot(m)&&(m=null!=P.collapse&&P.collapse),zot(z)&&(z=null!=P.collapseColor?P.collapseColor:zot(l)?Jo.grey:l),zot(y)&&(y=null!=P.collapsed&&P.collapsed);var S=this,B=this.background=new Jo.Rectangle(t,e,s,c,i,u).addTo(this);-1!=v&&0<w&&(this.background.shadow=new createjs.Shadow(v,3,3,w));var W=n,I=Jo.Pick.choose(W),M=Jo.Pick.choose(l),T=Jo.Pick.choose(a),O=new Jo.Dictionary(!0),o=S.contentContainer=new Jo.Container(t,e-r).addTo(S).mov(0,r);"string"==typeof I&&(I=new Jo.Label({text:I,color:M,size:null!=P.size?P.size:20,bold:null!=P.bold&&P.bold,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var j=S.titleBarLabel=I;zot(T)&&(T="rgba(0,0,0,.2)"),S.titleBar=n=new Jo.Container(t,r,null,null,!1).loc(0,-i/2,S);var L,D,_,R,Y,X=S.titleBar.backing=new Jo.Rectangle(t+i,r,T,null,null,[.95*u[0],.95*u[1],0,0],!0,null,null,!1).center(n);function N(){"right"==b?j.center(n).pos(Math.max(u[0]/2,10),null,!0):"center"==b||"middle"==b?j.center(n):j.center(n).loc(Math.max(u[0]/2,10)),j.mov(0,2)}function F(){var e,t,o,n=S.content||S.contentContainer||S;for("Container"!=n.type&&(n=S.contentContainer||S),e=0;e<n.numChildren;e++)"TextArea"!=(o=n.getChildAt(e)).type&&"Loader"!=o.type&&"Tag"!=o.type||(t={obj:o,depth:n.getChildIndex(o)},O.add(o,t));for(e=n.numChildren-1;0<=e;e--)"TextArea"!=(o=n.getChildAt(e)).type&&"Loader"!=o.type&&"Tag"!=o.type||n.removeChild(o)}function H(){var e=S.content||S.contentContainer||S;"Container"!=e.type&&(e=S.contentContainer||S);for(var t=0;t<O.length;t++)e.addChildAt(O.values[t].obj,O.values[t].depth)}n&&N(),S.label=I,S.text=I.text,d&&((L=S.closeIcon=new Jo.Shape(-40,-40,80,80,null,!1)).graphics.f(h).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),n?(L.centerReg(n).scaleTo(n,null,50),L.pos(Math.max(u[1]/2,15),null,!0)):L.addTo(S).sca(.3).mov(t/2-L.width-3,-e/2+d.height),L.expand(40),L.cur("pointer"),L.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(e){var t=S.stage;S.removeFrom(),S.dispatchEvent("close"),t.update(),e.stopImmediatePropagation()})),this.add=function(e,t,o,n){var r;return(r=zob(S.add,arguments,"obj, index, center, replace",S))?r:(n&&S.contentContainer.removeAllChildren(),o?e.center(S.contentContainer,t):e.addTo(S.contentContainer,t),S)},E&&(D=Jo.makeContent(E,t),["header","message","text","display","buttons","config"].forEach(function(e){D[e]&&(S[e]=D[e])}),S.label=S.message,S.add(D,null,!0)),this.nextPanel=function(e,t){var o=zot(e)||zot(W.array)?Jo.Pick.choose(W):W.array[e],n=zot(e)||zot(l.array)?Jo.Pick.choose(l):l.array[e],r=zot(e)||zot(a.array)?Jo.Pick.choose(a):a.array[e],i=zot(e)||zot(s.array)?Jo.Pick.choose(s):s.array[e],e=zot(e)||zot(c.array)?Jo.Pick.choose(c):c.array[e];"string"==typeof o&&(o=new Jo.Label({text:o,color:n,size:null!=P.size?P.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),S.label=o,S.text=o.text,j.removeFrom(),j=S.titleBarLabel=o,N(),X.color=r,S.background.color=i,S.background.borderColor=e,t&&S.dispatchEvent("change"),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!S.stage||S.stage.update()},C&&(n.cur("pointer"),n.on("mousedown",function(){var e;S.drag({rect:x,currentTarget:!0});var t,o,n=S.content||S.contentContainer||S;for("Container"!=n.type&&(n=S.contentContainer||S),e=0;e<n.numChildren;e++)"TextArea"!=(o=n.getChildAt(e)).type&&"Loader"!=o.type&&"Tag"!=o.type||(t={obj:o,depth:n.getChildIndex(o)},O.add(o,t))}),n.on("pressmove",function(){loop(O,function(e){e.resize&&e.resize()})}),n.on("pressup",function(){S.noDrag(!1)})),0<p&&((_=S.nextIcon=new Jo.Shape(-20,-20,40,40,null,!1)).graphics.f(l).p("AiJieIETCeIkTCfg"),_.centerReg(n).scaleTo(n,null,70).alp(.8).hov(1).expand(),_.pos(Math.max(u[1]/2,15),null,!0),L&&_.mov(-L.width-8),_.cur("pointer"),_.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){S.nextPanel(),S.dispatchEvent("change")})),zot(f)||((f=S.extraButton=new Jo.Button({label:"R",width:50,height:50,corner:5,group:"PanelExtra"}).scaleTo(n,null,70).centerReg(n).expand()).pos(Math.max(u[1]/2,15),null,!0),L&&f.mov(-L.width-8),_&&f.mov(-_.width-8)),m&&(Y=y,S.collapse=function(e){if(zot(e)&&(e=!0),e==Y)return S;e?(R.rot(180),B.visible=!1,o.visible=!1,Y=!0,F(),S.dispatchEvent("collapse")):(R.rot(0),B.visible=!0,o.visible=!0,Y=!1,H(),S.dispatchEvent("expand")),S.stage&&S.stage.update()},S.titleBar.tap(function(){S.collapsed=!S.collapsed},null,null,null,!0,null,null,null,null,!1,!0),zot(z)&&(z=Jo.grey),(R=S.collapseIcon=new Jo.Triangle(90,90,90,Jo.faint,z,16)).centerReg(S).scaleTo(n,null,41).pos({x:t-Math.max(u[1]/2,15)-R.width/2-4,y:r/2,reg:!0}).expand(40),f&&R.mov(-f.width-8),L&&R.mov(-L.width-8),_&&R.mov(-_.width-8),R.cur("pointer"),R.expand(),Y=!1,R.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){Y?S.collapse(!1):S.collapse(!0)})),this.on("removed",F),this.on("added",H),S.overlay=new Jo.Rectangle(t,e,null,null,null,u).alp(.3),Object.defineProperty(S,"panelHeight",{get:function(){return S.background.height},set:function(e){B.removeFrom(),B=this.background=new Jo.Rectangle(t,e,s,c,i,u).addTo(this).bot(),-1!=v&&0<w&&(this.background.shadow=new createjs.Shadow(v,3,3,w)),S.setBounds(t,e),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!S.stage||S.stage.update()}}),Object.defineProperty(S,"collapsed",{get:function(){return Y},set:function(e){S.collapse&&S.collapse(e)}}),this._enabled=!0,Object.defineProperty(S,"enabled",{get:function(){return S._enabled},set:function(e){zt(S,e),e?S.overlay.removeFrom():S.overlay.addTo(S),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!S.stage||S.stage.update()}}),y&&(y=!1,S.collapsed=!0),!1!==k&&Jo.styleTransforms(this,P),this.clone=function(){return S.cloneProps(new Jo.Toggle(t,e,n?n.clone():"",l,a,r,s,c,i,u,d,h,p,g,f,m,z,S.collapsed,b,v,w,C,x,k,this.group,A))},this.doDispose=function(e,t,o){return m&&this.titleBar.noTap(),o||this.zimContainer_dispose(!0),!0}},Jo.extend(Jo.Panel,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Panel.prototype.dispose=function(e){return this.doDispose(null,null,e)},Jo.Window=function(a,s,c,o,t,u,n,d,h,p,g,e,r,i,f,m,l,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,F,H,V,G,U,q,Q){if(Z=zob(Jo.Window,arguments,"width, height, content, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideFactor, slideSnap, slideSnapDamp, interactive, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, collapse, collapseColor, collapsed, optimize, resizeBoundary, resizeVisible, continuous, style, group, inherit",this))return Z;z_d("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=q;var Z=!1===U?{}:Jo.getStyle(this.type,this.group,Q);zot(a)&&(a=null!=Z.width?Z.width:300),zot(s)&&(s=null!=Z.height?Z.height:200),zot(o)&&(o=null!=Z.backgroundColor?Z.backgroundColor:Jo.dark);var K=t,J=u;zot(t)&&(t=null!=Z.borderColor?Z.borderColor:Jo.silver),zot(u)&&(u=null!=Z.borderWidth?Z.borderWidth:1),zot(n)&&(n=null!=Z.padding?Z.padding:0),zot(d)&&(d=null!=Z.corner?Z.corner:0),zot(h)&&(h=null==Z.swipe||Z.swipe),zot(p)&&(p=null==Z.scrollBarActive||Z.scrollBarActive),zot(g)&&(g=null!=Z.scrollBarDrag&&Z.scrollBarDrag),zot(e)&&(e=null!=Z.scrollBarColor?Z.scrollBarColor:t),zot(r)&&(r=null!=Z.scrollBarAlpha?Z.scrollBarAlpha:.3),zot(i)&&(i=null==Z.scrollBarFade||Z.scrollBarFade),zot(f)&&(f=null==Z.scrollBarH||Z.scrollBarH),zot(m)&&(m=null==Z.scrollBarV||Z.scrollBarV),g&&(i=null!=Z.scrollBarFade&&Z.scrollBarFade),zot(l)&&(l=null==Z.slide||Z.slide),zot(z)&&(z=null!=Z.slideFactor?Z.slideFactor:.9),!m&&zot(y)&&null==Z.slideSnap&&(y=!1),zot(y)&&(y=null!=Z.slideSnap?Z.slideSnap:"vertical"),zot(v)&&(v=null==Z.interactive||Z.interactive),zot(w)&&(w=null!=Z.shadowColor?Z.shadowColor:"rgba(0,0,0,.3)"),zot(C)&&(C=null!=Z.shadowBlur?Z.shadowBlur:20),zot(k)&&(k=null!=Z.paddingV?Z.paddingV:n),zot(x)&&(x=null!=Z.paddingH?Z.paddingH:n),zot(T)&&(T=null==Z.scrollWheel||Z.scrollWheel),zot(A)&&(A=null!=Z.damp?Z.damp:null),zot(P)&&(P=null!=Z.titleBar?Z.titleBar:null),zot(E)&&(E=null!=Z.titleBarColor?Z.titleBarColor:null),zot(S)&&(S=null!=Z.titleBarBackgroundColor?Z.titleBarBackgroundColor:null),zot(B)&&(B=null!=Z.titleBarHeight?Z.titleBarHeight:null),zot(W)&&(W=null!=Z.draggable?Z.draggable:null),zot(I)&&(I=null!=Z.boundary?Z.boundary:null),zot(M)&&(M=null!=Z.onTop?Z.onTop:null),zot(O)&&(O=null!=Z.close?Z.close:null),zot(j)&&(j=null!=Z.closeColor?Z.closeColor:null),zot(L)&&(L=null!=Z.cancelCurrentDrag&&Z.cancelCurrentDrag),zot(D)&&(D=null!=Z.fullSize?Z.fullSize:null),zot(_)&&(_=null!=Z.fullSizeColor?Z.fullSizeColor:null),zot(R)&&(R=null!=Z.resizeHandle?Z.resizeHandle:null),zot(Y)&&(Y=null!=Z.collapse&&Z.collapse),zot(X)&&(X=null!=Z.collapseColor?Z.collapseColor:null),zot(N)&&(N=null!=Z.collapsed&&Z.collapsed),zot(F)&&(F=null==Z.optimize||Z.optimize),zot(H)&&(H=null!=Z.resizeBoundary?Z.resizeBoundary:null),zot(V)&&(V=null!=Z.resizeVisible&&Z.resizeVisible),zot(G)&&(G=null!=Z.continuous&&Z.continuous),"horizontal"!=G&&"vertical"!=G&&(G=!1),this.continuous=G,!1===P&&(P=null),zot(P)||(zot(B)&&(B=30),s-=B);var $=this;$.optimize=F,this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var ee=this.backing=new Jo.Shape({style:!1});this.addChild(ee);var te=new Jo.Dictionary(!0),oe=new createjs.Shape;oe.type="WindowBacking";var ne,re,ie,le,ae=oe.graphics;this.addChild(oe),c&&(ne=$.content=c),c=this.contentContainer=new Jo.Container({style:!1}),this.addChild(c),c.mask=oe,v||(ie=new createjs.Shape),0<u&&(le=new createjs.Shape,this.addChild(le));var se=P?0:d,ce=0;function ue(){$.setBounds(0,0,a,s),ee.graphics.c().f(o).rc(0,0,a,s,se,se,d,d),-1!=w&&0<C&&(ee.shadow=new createjs.Shadow(w,4,4,C)),0<u&&(d?le.graphics.c().s(t).ss(u,"square","miter").rc(0,0,a,s,se,se,d,d):le.graphics.c().s(t).ss(u,"square","miter").dr(0,0,a,s)),zot(Ae)||(Ae.widthOnly=$.width+u,Te.widthOnly=$.width+u-1,$.setBounds(0,-B,$.width,s+B)),Pe&&(P?(Pe.pos({x:a-Math.max(d/2,10)-Pe.width/2,y:B/2,reg:!0}),Te.widthOnly=Pe.x-15,ce=$.width-Te.width):Pe.pos(Math.max(d/2,10)/2,Pe.height/2,!0,!1,$)),Oe&&(Oe.pos({x:a-Math.max(d/2,10)-Oe.width/2,y:B/2,reg:!0}),Pe&&Oe.mov(-Pe.width-10),P&&(Te.widthOnly=Oe.x-15),ce=$.width-Te.width),De&&(De.pos({x:a-Math.max(d/2,10)-De.width/2,y:B/2,reg:!0}),Pe&&De.mov(-Pe.width-10),Oe&&De.mov(-Oe.width-10),P&&(Te.widthOnly=De.x-15),ce=$.width-Te.width)}ue();var de,he,pe,ge,fe,me,ze,ye,be,ve,we,Ce,xe,ke=this.scrollBar={};ke.color=e,ke.size=6,ke.minSize=2*ke.size,ke.spacing=3.5+u/2,ke.margin=0,ke.corner=ke.size/2,ke.showTime=.5,ke.fadeTime=3,ke.speed=.5,p&&(de=ke.horizontal=new Jo.Shape({style:!1}),he=de.graphics,de.alpha=r,this.addChild(de),g&&de.drag({localBoundary:!0}),pe=ke.vertical=new Jo.Shape({style:!1}),ge=pe.graphics,pe.alpha=r,this.addChild(pe),g&&pe.drag({localBoundary:!0}));var Te,Ae,Pe,Ee,Se,Be,We,Ie,Me,Oe,je,Le,De,_e,Re,Ye,Xe=!1;function Ne(){var e,t,o,n=$.content||$.contentContainer||$;for("Container"!=n.type&&(n=$.contentContainer||$),e=0;e<n.numChildren;e++)"TextArea"!=(o=n.getChildAt(e)).type&&"Loader"!=o.type&&"Tag"!=o.type||(t={obj:o,depth:n.getChildIndex(o)},te.add(o,t));for(e=n.numChildren-1;0<=e;e--)"TextArea"!=(o=n.getChildAt(e)).type&&"Loader"!=o.type&&"Tag"!=o.type||n.removeChild(o)}function Fe(){var e=$.content||$.contentContainer||$;"Container"!=e.type&&(e=$.contentContainer||$);for(var t=0;t<te.length;t++)e.addChildAt(te.values[t].obj,te.values[t].depth)}function He(e){$.resizeHandle.loc(0,0,_e).top().mov(-_e.x+$.width,-_e.y+$.height-($.titleBar?$.titleBar.height:0))}function Ve(e){"right"==e.align?(e.x=x,e.resize($.width-(ye?ke.size+2*ke.spacing:x)-2*x)):("center"==e.align||e.align,e.resize($.width-(ye?ke.size+2*ke.spacing:0)-2*x)),e.alpha=e.wrapperLastAlpha}function Ge(e){G||(zot(re)&&(re=$.stage||WW.zdf.stage),zot(e)&&(e=!0),e?Jo.dragBoundary(c,new createjs.Rectangle(0,0,ze?-$.scrollXMax:0,ye?-$.scrollYMax:0)):Jo.dragBoundary(c,new createjs.Rectangle(-1e3,-1e3,re.width+2e3,re.height+2e3)))}this.update=function(){p&&(he.clear(),ge.clear()),be=p?ke.size+2*ke.spacing:0,ve=c.getBounds()?c.getBounds().width:0,we=c.getBounds()?c.getBounds().height:0,ze=f&&a-x<ve&&(p||!0===h||"auto"==h||"horizontal"==h),ye=m&&s-k<we&&(p||!0===h||"auto"==h||"vertical"==h),$.scrollXMax=ve+2*x-a+(ye?be+ke.margin:0),$.scrollYMax=we+2*k-s+(ze?be+ke.margin:0),ae.clear();var e=u/2,t=u/2,o=a-(ye&&p?ke.size+2*ke.spacing:0)-(ye?0:u),n=s-(ze&&p?ke.size+2*ke.spacing:0)-(ze?0:u),r=d*(.1+d/100);ae.f("rgba(0,0,0,0)").rc(e,t,o,n,ze&&p&&!P?r:se,ye&&p&&!P?r:se,ye&&p?r:Math.max(r,d-u/2),ze&&p?r:Math.max(r,d-u/2)),oe.setBounds($.getBounds().x,$.getBounds().y,$.getBounds().width,$.getBounds().height),Jo.expand(oe,0),v||(ie.graphics.c().f("red").dr(e,t,o,n),c.hitArea=ie);var i,l,e=Math.max(d,Math.min(ke.corner,ke.spacing)),t=e+u/2,o=e+(ye?be:0)+u/2,n=(P?ke.spacing:e)+u/2,e=e+(ze?be:0)+u/2;ze&&p&&(i=Math.max(ke.minSize,(a-t-o)*(a-t-o)/(ve+x+ke.margin)),he.f(ke.color).rr(0,0,i,ke.size,ke.corner),de.x=t,de.y=s-ke.size-ke.spacing,fe=new Jo.Proportion(-$.scrollXMax,0,t,a-i-o,-1),g&&(de.setBounds(0,0,i,ke.size),l=new createjs.Rectangle(t,de.y,a-i-t-o,0),de.dragBoundary(l),de.proportion=new Jo.Proportion(l.x,l.x+l.width,0,-$.scrollXMax),de.off("pressmove",Ce),Ce=de.on("pressmove",function(){$.dispatchEvent("scrolling"),ie&&(ie.x=-c.x,ie.y=-c.y),c.x=de.proportion.convert(de.x),A||(ht=$.scrollX),Ze()}))),ye&&p&&(i=Math.max(ke.minSize,(s-n-e)*(s-n-e)/(we+k+ke.margin)),ge.f(ke.color).rr(0,0,ke.size,i,ke.corner),pe.x=a-ke.size-ke.spacing,pe.y=n,me=new Jo.Proportion(-$.scrollYMax,0,n,s-i-e,-1),g&&(pe.setBounds(0,0,ke.size,i),l=new createjs.Rectangle(pe.x,n,0,s-i-n-e),pe.dragBoundary(l),pe.proportion=new Jo.Proportion(l.y,l.y+l.height,0,-$.scrollYMax),pe.off("pressmove",xe),xe=pe.on("pressmove",function(){A&&(Xe=!0),$.dispatchEvent("scrolling"),ie&&(ie.x=-c.x,ie.y=-c.y),dt=A?pe.proportion.convert(pe.y):(c.y=pe.proportion.convert(pe.y),$.scrollY),Ze()}))),Ke(),clearTimeout($.d2Timeout),$.d2Timeout=setTimeout(function(){try{c&&de&&de.proportion&&(c.x=de.proportion.convert(de.x)),c&&pe&&pe.proportion&&(c.y=pe.proportion.convert(pe.y))}catch(e){clearTimeout($.d2Timeout),$.d2Timeout=setTimeout(function(){try{c&&de&&de.proportion&&(c.x=de.proportion.convert(de.x)),c&&pe&&pe.proportion&&(c.y=pe.proportion.convert(pe.y))}catch(e){}},50)}},50),clearTimeout($.dTimeout),$.dTimeout=setTimeout(function(){Ge()},300),Ge(),Ze()},this.doResize=function(e,t){zot(e)&&(e=a),zot(t)&&(t=s);var o=Math.max(20,2*d);P&&(o=Math.max(ce,o)),e<o&&(e=o),t<20&&(t=20),a=e,s=t,ue();for(var n=0;n<c.numChildren;n++){var r=c.getChildAt(n);"Wrapper"==r.type&&Ve(r)}return R&&He(),$.update(),dt=c.y,A&&pt.immediate(dt),$.dispatchEvent("resize"),$},zot(P)||(zot(W)&&(W=!0),"string"==typeof P&&(P=new Jo.Label({text:P,color:E,size:null!=Z.size?Z.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),(e=$.titleBarLabel=P).noMouse(),zot(S)&&(S="rgba(0,0,0,.2)"),$.titleBar=P=new Jo.Container(a,B,null,null,!1).centerReg($).mov(0,-s/2-B/2),Te=new Jo.Rectangle(P.width-1,P.height,red).alp(0).addTo(P),Ae=$.titleBar.backing=new Jo.Rectangle(a+u,B,S,null,null,[.95*d,.95*d,0,0],!0,null,!1,!1).center(P),e.center(P).pos({x:Math.max(d/2,Math.max(10,n)),reg:!0}),$.regX=0,$.regY=-B,$.setBounds(0,-B,a,s+B),W?(P.cur("pointer"),P.on("mousedown",function(){$.drag({rect:I,currentTarget:!0,onTop:M})}),P.on("pressup",function(){$.noDrag(!1)})):P.on("mousedown",function(){})),O&&(zot(j)&&(j=Jo.grey),(Pe=$.closeIcon=new Jo.Shape(-40,-40,80,80,null,!1)).graphics.f(j).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),(P?Pe.centerReg($).scaleTo(P,null,50).pos({x:a-Math.max(d/2,10)-Pe.width/2,y:B/2,reg:!0}):Pe.sca(.3).pos(Math.max(d/2,10)/2,Pe.height/2,!0,!1,$)).expand(40),Pe.cur("pointer"),Pe.expand(),Pe.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){var e=$.stage;$.removeFrom(),$.dispatchEvent("close"),e&&e.update()})),zot(P)||(D&&($.fullSize=function(e){if(zot(e)&&(e=!0),e==Se||!$.parent)return $;e?(Be=$.width,We=$.height,Ie=$.x,Me=$.y,$.resize($.parent.width,$.parent.height),$.x=0,$.y=0,Se=!0,je.alpha=1,Oe.getChildAt(0).alpha=.01,$.dispatchEvent("fullsize")):($.resize(Be,We-P.height),$.x=Ie,$.y=Me,Se=!1,je.alpha=0,Oe.getChildAt(0).alpha=1,$.dispatchEvent("originalsize")),$.stage&&$.stage.update()},zot(_)&&(_=Jo.grey),Oe=$.fullSizeIcon=new Jo.Rectangle(80,80,Jo.faint,_,16),je=(new Jo.Shape).s(_).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo(Oe).mov(40,40).alp(0),Oe.centerReg($).scaleTo(P,null,42).pos({x:a-Math.max(d/2,10)-Oe.width/2,y:B/2,reg:!0}).expand(40),Pe&&Oe.mov(-Pe.width-10),Oe.cur("pointer"),Oe.expand(),Se=!1,Be=a,We=s,Ie=$.x,Me=$.y,Oe.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){Se?$.fullSize(!1):$.fullSize(!0)})),Le=Jo.copy($.getBounds(),!0),Y&&(Ee=N,$.collapse=function(e){if(zot(e)&&(e=!0),e==Ee)return $;e?(De.rot(180),$.backing.visible=!1,$.contentContainer.visible=!1,oe.visible=!1,de&&(de.visible=!1),de&&(pe.visible=!1),le&&(le.visible=!1),Ee=!0,Ae.sha(w,5,5,C),R&&($.resizeHandle.visible=!1),$.setBounds(Le.x,Le.y,Le.width,P.height),Ne(),$.dispatchEvent("collapse")):(De.rot(0),$.backing.visible=!0,$.contentContainer.visible=!0,oe.visible=!0,de&&(de.visible=!0),de&&(pe.visible=!0),le&&(le.visible=!0),Ee=!1,Ae.sha(null),R&&($.resizeHandle.visible=!0),$.setBounds(Le.x,Le.y,Le.width,Le.height),Fe(),$.dispatchEvent("expand")),$.stage&&$.stage.update()},zot(X)&&(X=Jo.grey),(De=$.collapseIcon=new Jo.Triangle(90,90,90,Jo.faint,X,16)).centerReg($).scaleTo(P,null,42).pos({x:a-Math.max(d/2,10)-De.width/2,y:B/2,reg:!0}).expand(40),Pe&&De.mov(-Pe.width-10),Oe&&De.mov(-Oe.width-10),De.cur("pointer"),De.expand(),Ee=!1,Be=a,We=s,Ie=$.x,Me=$.y,De.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){Ee?$.collapse(!1):$.collapse(!0)}))),this.on("removed",Ne),this.on("added",Fe),R&&(_e=(new Container).loc(0,0,$).mov($.width,$.height-($.titleBar?$.titleBar.height:0)),(Re=$.resizeHandle=new Jo.Rectangle(25,25,Jo.grey,Jo.white).alp(V?.5:.01).centerReg().rot(45).loc(0,0,_e).drag({boundary:H,localBoundary:!0})).on("mouseover",function(){Re.alp(.5),Re.stage&&Re.stage.update()}),Re.on("mousedown",function(){Re.pressing=!0}),Re.on("mouseout",function(){Re.pressing||(V||Re.alp(.01),Re.stage&&Re.stage.update())}),Re.on("pressmove",function(){$.resize(Math.max(50,_e.x+Re.x),Math.max(50,_e.y+Re.y))}),Re.on("pressup",function(){Re.pressing=!1,V||Re.alp(.01),He(),Re.stage&&Re.stage.update()}),$.titleBar&&$.titleBar.on("pressup",He)),ue(),this.add=function(e,t,o,n){var r;if(r=zob($.add,arguments,"obj, index, center, replace",$))return r;var i=e;if(i.getBounds())return mt(i),zot(t)&&(t=c.numChildren),n&&(t=0,$.removeAll()),o?(i.center($).addTo(c,t).mov(0,B?B/2:0),c.height>$.height-(B||0)&&i.loc(null,0),c.width>$.width&&i.loc(0)):i.addTo(c,t),"Wrapper"==i.type&&(pe.alpha=0,f=!1,i.wrapperLastAlpha=i.alpha,i.alpha=0,this.added(function(){Ve(i),$.resize(),de.alpha=1,pe.alpha=1})),0==i.x&&(i.x=x),0==i.y&&(i.y=k),$.update(),$;zogy("Window.add() - please add content with bounds set")},ne&&(Ye=Jo.makeContent(ne,a),["header","message","text","display","buttons","config"].forEach(function(e){Ye[e]&&($[e]=Ye[e])}),$.label=$.message,$.add(Ye,0,!0)),this.remove=function(e){return c.removeChild(e),$.update(),$};var Ue,qe=!(this.removeAll=function(){return c.removeAllChildren(),$.update(),$});function Qe(){dt=c.y,A&&pt.immediate(dt),p?Ke():$.dispatchEvent("scrolling")}function Ze(){$.optimize&&(re=$.stage,c.loop(function(e){e.hitTestBounds&&e.stage&&"Wrapper"!=e.type&&"List"!=e.type&&(e.hitTestBounds($,300)?(e.visible=!0,e.loop&&e.loop(function(e){e.hitTestBounds&&(e.hitTestBounds($,300)?e.visible=!0:e.visible=!1)})):e.visible=!1)}))}function Ke(){Ze(),$.dispatchEvent("scrolling"),ie&&(ie.x=-c.x,ie.y=-c.y),ze&&p&&(de.x=fe.convert(c.x)),ye&&p&&(pe.y=me.convert(c.y))}function Je(e){zot(e)&&(e=100),mt($),h&&setTimeout(function(){c&&(Jo.drag({singleTouch:!0,obj:c,currentTarget:!0,axis:G,localBoundary:!0,slide:l,slideFactor:z,slideSnap:!((!f||!0!==h&&"auto"!=h&&"horizontal"!=h)&&(!m||!0!==h&&"auto"!=h&&"vertical"!=h))&&y}),c.removeAllEventListeners("slidestart"),c.on("slidestart",function(){$.dispatchEvent("slidestart")}),c.removeAllEventListeners("slidestop"),!p&&F&&($.zDE&&c.off($.zDE),$.zDE=c.on("mousedown",function(){$.zTI&&Jo.Ticker.remove(Ze)}),$.zME&&c.off($.zME),$.zME=c.on("pressmove",Ze),$.zSTA&&c.off($.zSTA),$.zSTA=c.on("slidestart",function(){$.zTI=Jo.Ticker.add(Ze)}),$.zSTO&&c.off($.zSTO),$.zSTO=c.on("slidestop",function(e){$.zTI&&Jo.Ticker.remove($.zTI)})),c.on("slidestop",function(e){l&&$e(),$.dispatchEvent("slidestop")}),c.getBounds()&&0<c.getBounds().width&&Ge())},e)}function $e(){Jo.Ticker.remove(Qe),qe=!1,ze&&i&&p&&Jo.animate(de,{alpha:0},ke.fadeTime),ye&&i&&p&&Jo.animate(pe,{alpha:0},ke.fadeTime)}h&&c.on("mousedown",function(){qe||Jo.Ticker.add(Qe,c.stage),qe=!0,ze&&p&&i&&Jo.animate(de,{alpha:r},ke.showTime),ye&&p&&i&&Jo.animate(pe,{alpha:r},ke.showTime)}),this.on("added",function(){Je(50)},null,!0),this.cancelCurrentDrag=function(){$.contentContainer&&$.contentContainer.noDrag(!1),setTimeout(function(){c&&(Jo.drag({obj:c,currentTarget:!0,localBoundary:!0,slide:l,slideFactor:z,slideSnap:!((!f||!0!==h&&"auto"!=h&&"horizontal"!=h)&&(!m||!0!==h&&"auto"!=h&&"vertical"!=h))&&y}),c.getBounds()&&0<c.getBounds().width&&Ge())},300)},this.added(function(e){Ue=(re=e).on("stagemousemove",function(e){re&&re.frame&&($.windowMouseX=re.frame.mouseX,$.windowMouseY=re.frame.mouseY)})}),l?c.on("slidestop",$e):c.on("mousedown",function(){c.stage.on("stagemouseup",$e,null,!0)}),L&&($.blurEvent=function(){$.cancelCurrentDrag(),$e()},document.WW.addEventListener("blur",$.blurEvent));var et,tt,ot,nt=!1,rt=0,it=0,lt=0,at=0,st=300,ct=2;function ut(){if(!c.stage)return nt||($.dispatchEvent("hoverout"),nt=!0),void Jo.Ticker.remove(ut);Math.abs(rt-$.windowMouseX)>ct||Math.abs(it-$.windowMouseY)>ct?(nt||($.dispatchEvent("hoverout"),nt=!0),et=Date.now(),rt=$.windowMouseX,it=$.windowMouseY):Date.now()-et>st&&((Math.abs(lt-$.windowMouseX)>ct||Math.abs(at-$.windowMouseY)>ct)&&($.contentMouse=c.globalToLocal($.windowMouseX,$.windowMouseY),$.dispatchEvent("hoverover"),lt=$.windowMouseX,at=$.windowMouseY,nt=!1),et=Date.now())}v&&(c.on("mousedown",function(e){re=e.target.stage,tt=e.stageX/Jo.scaX,ot=Date.now()}),c.on("click",function(e){Date.now()-ot<600&&Math.abs(e.stageX/Jo.scaX-tt)<5&&($.contentMouse=c.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY),$.dispatchEvent("select"))}),c.on("mouseover",function(){et=Date.now(),Jo.Ticker.add(ut,c.stage)}),c.on("mouseout",function(){nt||($.dispatchEvent("hoverout"),nt=!0),Jo.Ticker.remove(ut)}));var dt=$.scrollY,ht=$.scrollX;$.scrollWindow=function(e){var t,o;$.stage&&$.hitTestPoint($.windowMouseX,$.windowMouseY)&&$.contains($.stage.getObjectUnderPoint($.windowMouseX*Jo.scaX,$.windowMouseY*Jo.scaY))&&(zot(e)&&(e=event),o=$.stage&&$.stage.frame.shiftKey?e.deltaX:e.deltaY,e=$.stage&&$.stage.frame.shiftKey?e.deltaY:e.deltaX,ye&&null!=o&&(t=o*-$.scrollBar.speed,dt+=t,dt=Math.max(-$.scrollYMax,Math.min(0,dt)),A||($.scrollY=dt)),ze&&null!=e&&(t=e*-$.scrollBar.speed,ht+=t,ht=Math.max(-$.scrollXMax,Math.min(0,ht)),$.scrollX=ht),(ze||ye)&&(Xe=!1,A||c.stage.update())),F&&Ze()},T&&(WW.addEventListener("mousewheel",$.scrollWindow),WW.addEventListener("wheel",$.scrollWindow),WW.addEventListener("DOMMouseScroll",$.scrollWindow));var pt,gt,ft=!1;function mt(e){A&&!ft&&e.stage&&(ft=!0,pt=new Jo.Damp($.scrollY,A),$.dampTicker=Jo.Ticker.add(function(){qe||(null==$.scrollY||null==dt||$.scrollY==dt||Math.round($.scrollY)!=Math.round(dt)?(zot(dt)||(c.y=pt.convert(dt)),Xe||Ke()):Xe=!1)},e.stage))}this._enabled=!0,setTimeout(function(){gt=$.readOnly},50),Object.defineProperty($,"enabled",{get:function(){return $._enabled},set:function(e){e?Je():(clearTimeout($.dTimeout),Jo.noDrag(c)),$.blinker&&(e?($.readOnly=gt,$.readOnly||$.blinker.vis(!0),$.selection.vis(!0)):($.blinker.vis(!1),$.selection.vis(!1),gt=$.readOnly,$.readOnly=!0)),zt($,e)}}),this._scrollEnabled=!0,Object.defineProperty($,"scrollEnabled",{get:function(){return $._scrollEnabled},set:function(e){e?(Je(),g&&(Ce&&(de.mouseEnabled=!0),xe&&(pe.mouseEnabled=!0)),WW.addEventListener("mousewheel",$.scrollWindow),WW.addEventListener("wheel",$.scrollWindow),WW.addEventListener("DOMMouseScroll",$.scrollWindow)):(clearTimeout($.dTimeout),Jo.noDrag(c),g&&(Ce&&(de.mouseEnabled=!1),xe&&(pe.mouseEnabled=!1)),WW.removeEventListener("mousewheel",$.scrollWindow),WW.removeEventListener("wheel",$.scrollWindow),WW.removeEventListener("DOMMouseScroll",$.scrollWindow)),$._scrollEnabled=e}}),Object.defineProperty($,"scrollX",{get:function(){return c.x},set:function(e){c.x=e,clearTimeout($.d2Timeout),c.zimDragImmediate&&c.zimDragImmediate(c.x,c.y),Ke()}}),Object.defineProperty($,"scrollY",{get:function(){return c.y},set:function(e){c.y=e,c.y=dt=e,A&&pt.immediate(dt),clearTimeout($.d2Timeout),c.zimDragImmediate&&c.zimDragImmediate(c.x,c.y),Ke()}}),Object.defineProperty($,"backgroundColor",{get:function(){return o},set:function(e){o=e,ue()}}),Object.defineProperty($,"borderColor",{get:function(){return t},set:function(e){t=e,ue()}}),Object.defineProperty($,"borderWidth",{get:function(){return u},set:function(e){u=e,ue()}}),Object.defineProperty($,"fullSized",{get:function(){return Se},set:function(e){$.fullSize&&$.fullSize(e)}}),Object.defineProperty($,"collapsed",{get:function(){return Ee},set:function(e){$.collapse&&$.collapse(e)}}),N&&(Ee=!1,$.collapsed=!0),$.titleBar&&$.titleBar.tap(function(){$.collapsed=!$.collapsed},null,null,null,!0,null,null,null,null,!1,!0),!1!==U&&Jo.styleTransforms(this,Z),this.clone=function(e){zot(e)&&(e=!0);var t=$.cloneProps(new Jo.Window(a,s,null,o,K,J,n,d,h,p,g,ke.color,r,i,f,m,l,z,y,b,v,w,C,x,k,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,F,H,V,G,U,q,Q));return e&&($.contentContainer.cloneChildren(t.contentContainer),t.update()),t},this.doDispose=function(e,t,o){return T&&(WW.removeEventListener("mousewheel",$.scrollWindow),WW.removeEventListener("wheel",$.scrollWindow),WW.removeEventListener("DOMMouseScroll",$.scrollWindow)),c&&($.zDE&&c.off($.zDE),$.zME&&c.off($.zME),$.zSTA&&c.off($.zSTA),$.zSTO&&c.off($.zSTO),$.zTI&&Jo.Ticker.remove($.zTI)),$.titleBar&&$.titleBar.removeAllEventListeners(),Ue&&re&&re.off("stagemousemove",Ue),$.resizeHandle&&$.resizeHandle.removeAllEventListeners(),$.blurEvent&&WW.removeEventListener("blur",$.blurEvent),Jo.Ticker.remove(ut),zot(Qe)||Jo.Ticker.remove(Qe),o||this.zimContainer_dispose(!0),!(c=$.contentContainer=null)}},Jo.extend(Jo.Window,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Window.prototype.dispose=function(e){return this.doDispose(null,null,e)},Jo.Window.prototype.resize=function(e,t){return this.doResize(e,t)},zimWindow=Jo.Window,Jo.Page=function(o,n,r,i,l,a,s,c,u,d,h){if(t=zob(Jo.Page,arguments,"width, height, color, color2, angle, pattern, scalePattern, cache, style, group, inherit",this))return t;z_d("58.3"),this.group=d;var e=!1===u?{}:Jo.getStyle("Page",this.group,h);zot(o)&&(o=(null!=e.width?e:WW.zdf).width),zot(n)&&(n=(null!=e.height?e:WW.zdf).height),this.zimContainer_constructor(0,0,o,n,!1),this.type="Page";var p=this;zot(l)&&(l=null!=e.angle?e.angle:90),zot(r)&&(r=null!=e.color?e.color:Jo.light),zot(i)&&(i=null!=e.color2?e.color2:null),zot(a)&&(a=null!=e.pattern?e.pattern:null),zot(s)&&(s=null!=e.scalePattern?e.scalePattern:"fill"),zot(c)&&(c=null!=e.cache&&e.cache),r=zik(r),zot(i=zik(i))||(r=new Jo.GradientColor([r,i],[0,1],l),i=null);var t=this.backing=new Jo.Rectangle({width:o,height:n,color:r,scaleDimensions:!1,style:!1}).addTo(this);!zot(c)||zot(i)&&zot(a)||(c=!0),c&&t.cache(),zot(a)||(this.pattern=a.addTo(this),s&&a.scaleTo(this,100,100,s).center(this),c&&a.cache()),Object.defineProperty(p,"color",{get:function(){return r},set:function(e){zot(e)&&(e=Jo.black),r=zik(e),p.backing.color=r}}),!1!==u&&Jo.styleTransforms(this,e),this.clone=function(e){zot(e)&&(e=!1),r.type&&(i=null);var t=p.cloneProps(new Jo.Page(o,n,r,i,l,a,s,c,u,d,h));return e&&p.cloneChildren(t),t}},Jo.extend(Jo.Page,Jo.Container,["clone"],"zimContainer",!1),Jo.Central=function(e,t,o,n,r){z_d("58.4"),this.group=n;r=!1===o?{}:Jo.getStyle("Central",this.group,r);zot(e)&&(e=null!=r.width?r.width:1024),zot(t)&&(t=null!=r.height?r.height:768),this.zimContainer_constructor(-e/2,-t/2,e,t);var i=this,l=zimDefaultFrame;i.resizeEvent=l.on("resize",function(){i.scale=l.height/t,i.parent&&i.centerReg(i.parent)}),i.added(function(){i.parent&&i.centerReg(i.parent)}),!(i.dispose=function(e,t,o){return l.off("resize",i.resizeEvent),i.zimContainer_dispose(e,t,o)})!==o&&Jo.styleTransforms(this,r)},Jo.extend(Jo.Central,Jo.Container,["dispose"],"zimContainer",!1),Jo.Layer=function(e,t,n,a,s,c,o,r,u,d,i,l,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S){var B;if(B=zob(Jo.Layer,arguments,"width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, onTop, style, group, inherit",this))return B;z_d("58.5"),this.group=E;var W=!1===P?{}:Jo.getStyle("Layer",this.group,S);zot(e)&&(e=null!=W.width?W.width:500),zot(t)&&(t=null!=W.height?W.height:500),this.zimContainer_constructor(0,0,e,t,!1),this.type="Layer";var I=this;I.distX=40,I.distY=0,zot(n)&&(n=null!=W.titleBar?W.titleBar:"LAYER");var M=n,O=n,j=!0;zot(s)&&(s=null!=W.backgroundColor?W.backgroundColor:Jo.lighter),zot(c)&&(c=null!=W.rollBackgroundColor?W.rollBackgroundColor:Jo.white),zot(o)&&(o=null!=W.selectedBackgroundColor?W.selectedBackgroundColor:Jo.granite),zot(u)&&(u=null!=W.color?W.color:Jo.granite),zot(d)&&(d=null!=W.rollColor?W.rollColor:Jo.granite),zot(i)&&(i=null!=W.selectedColor?W.selectedColor:Jo.moon),zot(h)&&(h=null!=W.borderWidth?W.borderWidth:1),zot(p)&&(p=null!=W.borderColor?W.borderColor:s),(p<0||h<0)&&(p=h=null),zot(g)&&(g=null==W.dashed||W.dashed),zot(f)&&(f=null!=W.titleBar?W.titleBar:null),zot(m)&&(m=null!=W.titleBarWidth?W.titleBarWidth:100);var L,D=m;if(zot(z)&&(z=null!=W.titleBarHeight?W.titleBarHeight:40),zot(y)&&(y=null!=W.titleBarX?W.titleBarX:null),zot(b)&&(b=null!=W.titleBarY?W.titleBarY:null),zot(v)&&(v=null==W.titleBarDraggable||W.titleBarDraggable),zot(w)&&(w=null==W.close||W.close),zot(C)&&(C=null!=W.closeColor?W.closeColor:o),zot(x)&&(x=null!=W.closeBackgroundColor?W.closeBackgroundColor:o),zot(k)&&(k=null!=W.closeIndicatorColor?W.closeIndicatorColor:i),zot(T)&&(T=null==W.anchor||W.anchor),zot(A)&&(A=null==W.onTop||W.onTop),v||(T=!1),I.anchor=T,w&&(m+=30),f=Jo.merge({borderColor:o},f,{onTop:A,events:!0,visible:!1,ghostColor:p,ghostWidth:h,ghostDashed:g,ghostHidden:!0}),zot(a)&&(a=null!=W.titleBarContainer?W.titleBarContainer:null),zot(a)){if(!WW.zdf)return void zogy("zim Layer(): Please pass in a reference to a container with bounds set.");a=WW.zdf.stage}I.active=!1,I.turnOff=function(){I.active=!1,w&&(I.checkBox.visible=!1),I.transformControls.remove(),I.mouseChildren=!0,I.button.backgroundColor=s,I.button.rollBackgroundColor=c,I.button.color=u,I.button.rollColor=u,I.transformControls.allowToggleOff(),I.resizeChildren&&I.resizeChildren()},I.turnOn=function(){I.active=!0,w&&(I.checkBox.visible=!0,I.checkBox.checked=!0),I.button.backgroundColor=o,I.button.rollBackgroundColor=o,I.button.color=i,I.button.rollColor=i,I.mouseChildren=!1,I.transformControls.add(),I.transformControls.allowToggleOn()},I.titleBarPos=function(e,t){if(I.titleBar)return I.titleBar.pos?(I.titleBar.pos(e,t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),L.update()):(I.distX=e,I.distY=t),j=!1,I};var _=I.visible;I.visible=!1;E=$o();this.added(function(l){L=l,I.transform(f),0<=h&&I.transformControls.hideGhost(),setTimeout(function(){I.visible=_,0<=h&&setTimeout(function(){I.transformControls.showGhost(),I.stage&&I.stage.update()},200),L=l;var e,t,r=I.titleBar=new Jo.Container(m,z).reg(0,z).loc(I,null,a).mov(I.distX,I.distY);function o(e){var t,o,n;j&&v&&(t=a.localToLocal(r.x-I.distX,r.y-I.distY,I.parent),o=I.localToLocal(I.regX,I.regY,I.parent),n=I.localToLocal(0,0,I.parent),I.x=t.x+(o.x-n.x),I.y=t.y+(o.y-n.y),I.transformControls.resize(e),i(I),I.stage&&I.stage.update())}function i(e){e.loop(function(e){"Layer"==e.type&&(I.titleBarDraggable&&e.move(),e.transformControls.ghost&&e.transformControls.resize(),i(e))})}function n(){return 0==r.x||(r.y==r.height||(r.x==a.width-r.width||r.y==a.height))}v&&r.drag({all:!0,boundary:new Jo.Boundary(0,z,a.width-m,a.height-z),localBoundary:!0}),40==I.distX&&0==I.distY||r.pos(I.distX,I.distY),w&&(I.checkBox=new Jo.CheckBox({borderColor:C,backgroundColor:x,indicatorColor:k,size:20,startChecked:!0}).center(r).pos(0,null,!0).change(function(){I.turnOff(),I.dispatchEvent("transformhide")}),I.checkBox.visible=!1),r.mouseChildren=!0,(r.layer=I).resetTitleBar=function(){I.distX=40,I.distY=0,j=!0,I.move(!0),I.stage&&I.stage.update()},"string"!=typeof O&&"number"!=typeof O||(O=new Jo.Label({text:O,color:u,rollColor:d,size:null!=W.size?W.size:18,group:this.group})),I.label=O,I.label.center(r),I.button=new Jo.Button({shadowBlur:-1,width:D,height:z-1,label:I.label,color:u,rollColor:d,backgroundColor:s,rollBackgroundColor:c,corner:null!=W.corner?W.corner:0,inherit:Jo.copy(W)}).addTo(r),I.button.on("mousedown",function(){a.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()}),I.active||(I.turnOn(),I.dispatchEvent("transformshow")),r.top()}),I.button.on("pressmove",function(){o()}),I.button.on("pressup",function(){o(!0);var e=I.localToLocal(0,0,a);I.distX=r.x-e.x,I.distY=r.y-e.y,r.top(),!n()&&v&&(e=I.localToGlobal(0,0),I.button.hitTestPoint(e.x,e.y)&&I.resetTitleBar())}),I.button.tap(function(){v&&I.resetTitleBar()},null,null,null,!0),I.turnOff(),I.on("transformed",function(e){"move"!=e.transformType&&"size"!=e.transformType&&"stretch"!=e.transformType&&"rotate"!=e.transformType||(v&&I.move(),i(I))}),I.move=function(e){!e&&!j&&I.anchor&&n()||(r.loc(I.localToLocal(0,0,a)).mov(I.distX,I.distY),r.x<0&&(j=!1,r.x=0),r.y<r.height&&(j=!1,r.y=r.height),r.x>a.width-r.width&&(j=!1,r.x=a.width-r.width),r.y>a.height&&(j=!1,r.y=a.height),I.anchor||(j=!0))},I.on("transformhide",function(){I.turnOff(),a.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})}),I.resizeChildren=function(e){I.transformControls.resize(e),I.loop(function(e){e.transformControls&&(e.transformControls.visible&&e.transformControls.hide(),"Layer"==e.type&&e.resizeChildren?e.resizeChildren():e.transformControls&&e.transformControls.resize())})},I.resize=function(e){return I.move(),I.resizeChildren(e),I},I.toggled=!1,I.toggle=function(e){return zot(e)?I.toggled=!I.toggled:I.toggled=e,I.toggled?(a.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()}),I.turnOn(),I.dispatchEvent("transformshow")):(r.top(),I.turnOff(),a.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()}),I.dispatchEvent("transformhide")),I.stage&&I.stage.update(),I},Object.defineProperty(I,"titleBarDraggable",{get:function(){return v},set:function(e){(v=e)?r.drag({all:!0,boundary:Jo.Boundary(0,40,a.width-m,a.height-z),localBoundary:!0}):r.noDrag(!1)}}),I.stageUpEvent=L.on("stagemouseup",function(){I.transformControls.visible&&r.top()}),zot(y)&&zot(b)||(j=!1,e=zot(y)?r.x:y,t=zot(b)?r.y-z:b,I.titleBarStartX=y,I.titleBarStartY=b,I.titleBarPos(e,t),t=I.parent.localToLocal(I.x,I.y,a),I.distX=r.x-t.x,I.distY=r.y-t.y)},50)},"s"==E?.05:50),!1!==P&&Jo.styleTransforms(this,W),this.clone=function(){return I.cloneProps(new Jo.Layer(e,t,M,a,s,c,o,r,u,d,i,l,h,p,g,f,D,z,y,b,v,w,C,x,k,T,A,P,this.group,S))},this.dispose=function(e,t,o){return I.stageUpEvent&&L.off("stagemouseup",I.stageUpEvent),a&&a.loop(function(e){e.layer=null}),I.transformControls&&I.transformControls.dispose(),I.transformControls=null,o||this.zimContainer_dispose(!0),I.titleBar&&(I.titleBar.layer=null,I.titleBar.dispose()),I.checkBox=I.button=null,!(n=I.titleBar=f=null)}},Jo.extend(Jo.Layer,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Waiter=function(l,a,e,t,o,n,r,s,i,c,u){if(m=zob(Jo.Waiter,arguments,"container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",this))return m;z_d("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=c;var d=!1===i?{}:Jo.getStyle(this.type,this.group,u),h=$o(a);zot(a)&&(a=null!=d.speed?d.speed:"s"==h?.6:600),zot(e)&&(e=null!=d.foregroundColor?d.foregroundColor:Jo.white),zot(t)&&(t=null!=d.backgroundColor?d.backgroundColor:"orange"),zot(o)&&(o=null!=d.corner?d.corner:16),zot(n)&&(n=null!=d.shadowColor?d.shadowColor:"rgba(0,0,0,.3)"),zot(r)&&(r=null!=d.shadowBlur?d.shadowBlur:14),zot(s)&&(s=null!=d.fadeTime?d.fadeTime:0);this.setBounds(-52,-20,104,40);var p,g=this,f=this.display=new Jo.Shape({style:!1});this.addChild(f),f.setBounds(0,0,104,40),f.regX=52,f.regY=20;var m=f.graphics;m.f(t);c=o;Array.isArray(c)||(c=[o,o,o,o]),m.rc(0,0,104,40,c[0],c[1],c[2],c[3]),-1!=n&&0<r&&(f.shadow=new createjs.Shadow(n,3,3,r)),f.on("click",function(e){e.stopImmediatePropagation()});var z,y=new Jo.Container({style:!1});this.addChild(y);for(var b,v=0;v<3;v++)(z=new createjs.Shape).graphics.f(e).dc(0,0,12),z.x=32*(v-1),y.addChild(z),z.cache(-12,-12,24,24),z.alpha=0;this.hide=function(){function e(){var e;g.parent&&g.parent.removeChild(g),(p=g.stage)&&p.update(),g.zimAccessibility&&((e=g.zimAccessibility).resize(g),(b||g.zimTabTag.nextSibling).focus(),setTimeout(function(){e.talk("Waiter has finished.")},50))}return 0<s?g.animate({obj:{alpha:0},time:s,call:e}):e(),g.toggled=!1,g};var w=[];this.show=function(){var e,t="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(zot(l)){if(!WW.zdf)return void zogy(t);l=WW.zdf.stage}else{if(!l.getBounds)return void zogy(t);if(zot(l.stage))return void zogy("zim display - Waiter(): The container must have a stage property")}for(var o,n=0,r=a*("s"==h?1e3:1),i=0;i<y.numChildren;i++)y&&w.push(setTimeout(function(){e=y.getChildAt(n),createjs.Tween.get(e,{loop:!0}).to({alpha:1},r/3/2).wait(r/3).to({alpha:0},r/3).wait(r-r/3-r/3/2),n++},i*r/3));return g.ticker=createjs.Ticker.on("tick",function(){l.stage.update()}),g.x=l.getBounds().width/2,g.y=l.getBounds().height/2,l.addChild(g),0<s&&(g.alpha=0,g.animate({alpha:1},s)),g.zimAccessibility&&(o=g.zimAccessibility,setTimeout(function(){o.activatedObject&&(b=o.activatedObject.zimTabTag)},50),o.resize(g),o.talk(g.zimTabTag.getAttribute("aria-label"))),g.toggled=!0,g},!(g.toggle=function(e){return!0!==e&&(!1===e||g.parent)?g.hide():g.show(),g})!==i&&Jo.styleTransforms(this,d),this.clone=function(){return g.cloneProps(new Jo.Waiter(l,a,e,t,o,n,r,s,i,this.group,u))},this.dispose=function(e,t,o){g.ticker&&createjs.Ticker.off("tick",g.ticker),createjs.Tween.removeTweens(g),g.removeFrom();for(var n=0;n<y.numChildren;n++){var r=y.getChildAt(n);clearInterval(w[n]),createjs.Tween.removeTweens(r)}return o||this.zimContainer_dispose(!0),!0}},Jo.extend(Jo.Waiter,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.ProgressBar=function(t,o,n,r,i,l,a,e,s,c,u,d,h,p,g,f,m,z,y,b,v,w){if(C=zob(Jo.ProgressBar,arguments,"barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, width, style, group, inherit",this))return C;z_d("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=v;var C=!1===b?{}:Jo.getStyle(this.type,this.group,w);zot(o)&&(o=null!=C.foregroundColor?C.foregroundColor:Jo.green),zot(n)&&(n=null!=C.backgroundColor?C.backgroundColor:Jo.charcoal),zot(r)&&(r=null!=C.borderColor?C.borderColor:n),zot(i)&&(i=null!=C.borderWidth?C.borderWidth:null),zot(s)&&(s=null!=C.labelPosition?C.labelPosition:"bottom"),zot(t)&&(t=null!=C.barType?C.barType:"circle"),zot(l)&&(l=null!=C.padding?C.padding:"circle"==t?2:-.5),zot(u)&&(u=null!=C.corner?C.corner:15),zot(d)&&(d=null!=C.shadowColor?C.shadowColor:"rgba(0,0,0,.3)"),zot(h)&&(h=null!=C.shadowBlur?C.shadowBlur:14),zot(p)&&(p=null!=C.backing?C.backing.clone():null),zot(f)&&(f=null==C.fastClose||C.fastClose),r<0||i<0?r=i=null:null!=r&&null==i&&(i="circle"==t?10:2);var x=$o(g);zot(g)&&(g=null!=C.delay?C.delay:"s"==x?.1:100),zot(z)&&(z=null==C.autoHide||C.autoHide),zot(a)&&(a=null!=C.label?C.label:null),zot(e)&&(e=null!=C.color?C.color:o),zot(y)&&(y=null!=C.width?C.width:"circle"==t?40:200),"string"!=typeof a&&"number"!=typeof a||(a=new Jo.Label({text:a,color:e,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),!zot(c)&&zot(a)&&(a=new Jo.Label("")),this.label=a;var k,T,A,P=30,E=this,S=0;function B(e){var t,o;return E.backing?(t=E.getChildIndex(E.backing),E.removeChild(E.backing)):t=E.numChildren,E.border&&E.removeChild(E.border),zot(e)||"Pattern"!=e.type?e=E.backing=(zot(e)?new Jo.Rectangle(y,P,n,r,i,u,null,null,null,!1):p).addTo(E,t):(o=e,((e=E.backing=new Jo.Rectangle(y,P,n,null,null,u,null,null,null,!1).addTo(E,t)).pattern=o).center(e),o.setMask(e.shape),i&&(E.border=new Jo.Rectangle(y,P,"rgba(0,0,0,0)",r,i,u,null,null,null,!1).addTo(E,t+1))),e}function W(e){"circle"==t?k.graphics.c().mt(0,0).s(o).ss(i-2*l+.5).a(0,0,y,0,360*e/100*Math.PI/180):(T.sca(e/100,1),k.setMask(T)),zot(c)||(a.text=a.startText+" "+Math.min(Math.round(e),100)+"%"),z&&f&&100<=Math.round(e)&&(E.timeOut=setTimeout(function(){E.hide()},200)),!E.dispatched&&100<=Math.round(e)&&(E.dispatchEvent("complete"),E.dispatched=!0,setTimeout(function(){E&&(E.dispatched=!1)},100)),E.stage&&E.stage.update()}E.visible=!1,setTimeout(function(){E.visible=!0,E.stage&&E.stage.update()},g),"circle"==t?(y/=2,p=this.backing=new Jo.Circle(y,"rgba(0,0,0,0)",n,i,null,null,null,null,null,!1).addTo(E),k=this.bar=new Jo.Shape({style:!1}).addTo(E).loc(p.x,p.y).rot(-90)):(-1!=d&&0<h&&(new Jo.Rectangle(y-2,P-2,n,null,null,u,null,null,null,!1).addTo(this).shadow=new createjs.Shadow(d,3,3,h)),p=B(p),v=u,Array.isArray(v)||(v=[u,u,u,u]),I=1.2*(l+i/2),k=this.bar=new Jo.Rectangle(y-1.8*(l+i/2),P-1.8*(l+i/2),o,null,null,[v[0]-I,v[1]-I,v[2]-I,v[3]-I],null,null,null,!1).center(this),T=this.mask=new Jo.Rectangle(y-1.8*(l+i/2),P-1.8*(l+i/2),null,null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1),k.setMask(T)),E.setBacking=function(e){B(e),E.stage&&E.stage.update()},p.on("click",function(e){e.stopImmediatePropagation()}),zot(a)||(a.scaleX=a.scaleY=.8,a.startText=a.text,zot(c)||(a.text=a.startText+"  0%"),a.center(E),"above"==s?a.y-=60:a.y+=60,a.alpha=.8),this.hide=function(){var e,t=E.stage;return E.parent&&E.parent.removeChild(E),"Pattern"==E.backing.type&&E.backing.pauseInterval&&E.backing.pauseInterval(),t&&t.update(),E.zimAccessibility&&((e=E.zimAccessibility).resize(E),(A||E.zimTabTag.nextSibling).focus(),setTimeout(function(){e.talk("Progress Bar has finished.")},50)),E.toggled=!1,E},this.show=function(){var e,t="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(zot(m)){if(!WW.zdf)return void zogy(t);m=WW.zdf.stage}else{if(!m.getBounds)return void zogy(t);if(zot(m.stage))return void zogy("zim display - Waiter(): The container must have a stage property")}return E.timeOut&&clearTimeout(E.timeOut),W(0),E.zimActiveLoader&&E.zimActiveLoader.on("progress",function(e){W(S=100*e.progress)}),E.center(m),"Pattern"==E.backing.type&&E.backing.pauseInterval&&E.backing.pauseInterval(!1),E.zimAccessibility&&(e=E.zimAccessibility,setTimeout(function(){e.activatedObject&&(A=e.activatedObject.zimTabTag)},50),e.resize(E),e.talk(E.zimTabTag.getAttribute("aria-label"))),E.toggled=!0,E},E.toggle=function(e){return!0!==e&&(!1===e||E.parent)?E.hide():E.show(),E},E.run=function(e,t){zot(t)||(z=t),zot(e)&&(e="s"==x?3:3e3),en(e,x);var o=e*("s"==x?1e3:1);E.runInterval&&clearInterval(E.runInterval),E.percent=0;var n=Date.now();return E.runInterval=setInterval(function(){E.percent=(Date.now()-n)/o*100,100<=E.percent&&(E.percent=100,clearInterval(E.runInterval))},30),E},E.dispatched=!1,Object.defineProperty(E,"percent",{get:function(){return S},set:function(e){W(S=e)}});var I=E.getBounds();E.setBounds(I.x-5,I.y-5,I.width+10,I.height+10),!1!==b&&Jo.styleTransforms(this,C),this.clone=function(){return E.cloneProps(new Jo.ProgressBar(t,o,n,r,i,l,a,e,s,c,u,d,h,p,g,f,m,z,y,b,this.group,w))},this.dispose=function(e,t,o){return"Pattern"==E.backing.type&&E.backing.clearInterval&&E.backing.clearInterval(),E.runInterval&&clearInterval(E.runInterval),o||this.zimContainer_dispose(!0),!0}},Jo.extend(Jo.ProgressBar,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Indicator=function(e,t,n,o,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C){var x;if(x=zob(Jo.Indicator,arguments,"width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, selectedIndicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, index, backgroundAlpha, selectedIndex, style, group, inherit",this))return x;z_d("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=w;w=!1===v?{}:Jo.getStyle(this.type,this.group,C);zot(e)&&(e=null!=w.width?w.width:300),zot(t)&&c&&c.pos&&(T=c.height,u&&u.pos&&u.height>T&&(T=u.height),0<T&&(t=T)),zot(t)&&(t=null!=w.height?w.height:50),zot(n)&&(n=null!=w.num?w.num:6),zot(c)&&(c=null!=w.indicatorType?w.indicatorType:"dot"),zot(u)&&(u=null!=w.selectedIndicatorType?w.selectedIndicatorType:c),zot(o)&&(o=null!=w.foregroundColor?w.foregroundColor:"star"==c?Jo.yellow:"heart"==c?Jo.red:Jo.orange),zot(r)&&(r=null!=w.backgroundColor?w.backgroundColor:Jo.granite),r<0&&(r=null!=w.backgroundColor?w.backgroundColor:"rgba(0,0,0,.01)"),zot(i)&&(i=null!=w.borderColor?w.borderColor:null),zot(l)&&(l=null!=w.borderWidth?w.borderWidth:null),i<0||l<0?i=l=null:null!=i&&null==l&&(l=1),zot(a)&&(a=null!=w.backdropColor?w.backdropColor:-1),zot(s)&&(s=null!=w.corner?w.corner:0),zot(d)&&(d=null!=w.fill&&w.fill),zot(h)&&(h=null!=w.scale?w.scale:1),zot(p)&&(p=null!=w.lightScale?w.lightScale:1),zot(g)&&(g=null!=w.interactive&&w.interactive),zot(f)&&(f=null!=w.shadowColor?w.shadowColor:"rgba(0,0,0,.3)"),zot(m)&&(m=null!=w.shadowBlur?w.shadowBlur:5),zot(y)&&(y=null!=w.backgroundAlpha?w.backgroundAlpha:.2);var k,T,A=(zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",P=this;this.lights=[],-1!=a&&(T=P.backdrop=new Jo.Rectangle(e,t,a,i,l,s,null,null,null,!1),this.addChild(T));var E,S=this.lightsContainer=new Jo.Container({style:!1});this.addChild(S);var B=.5*t,W=e/n,I=new createjs.Shape;I.graphics.f("black").dr(-W/2/p+B/2,-t/2+B/2,W/p,t);for(var M=0;M<n;M++)E=new Container(B,B).reg("center","center"),"dot"==c||"circle"==c?E.dim=new Jo.Circle(B/2,r,i,l,null,null,null,null,null,!1):"square"==c||"box"==c?(E.dim=new Jo.Rectangle(B,B,r,i,l,null,null,null,null,!1),E.dim.regX=E.dim.width/2,E.dim.regY=E.dim.height/2):"star"==c?E.dim=new Jo.Poly(.6*B,5,.5,r,i,l,null,null,!1):"heart"==c?E.dim=new Jo.Blob({points:[[0,-40.7,0,0,-57.3,-76.6,41.8,-80.3,"mirror"],[100,0,0,0,23.7,-45.4,-23.7,45.4,"mirror"],[0,100,0,0,0,0,0,0,"mirror"],[-100,0,0,0,21.9,48.2,-21.9,-48.2,"mirror"]],color:r,interactive:!1}).transformPoints("scale",.15):c.pos&&(E.dim=c.clone().reg("center","center"),E.dim.myCache=!1,E.dim.alpha=y),E.dim.center(E),this.lights.push(E),"dot"==u||"circle"==c?E.bright=new Jo.Circle(B/2,o,i,l,null,null,null,null,null,!1):"square"==u||"box"==u?(E.bright=new Jo.Rectangle(B,B,o,i,l,null,null,null,null,!1),E.bright.regX=E.bright.width/2,E.bright.regY=E.bright.height/2):"star"==u?E.bright=new Jo.Poly(.6*B,5,.5,o,i,l,null,null,!1):"heart"==u?E.bright=new Jo.Blob({points:[[0,-40.7,0,0,-57.3,-76.6,41.8,-80.3,"mirror"],[100,0,0,0,23.7,-45.4,-23.7,45.4,"mirror"],[0,100,0,0,0,0,0,0,"mirror"],[-100,0,0,0,21.9,48.2,-21.9,-48.2,"mirror"]],color:o,interactive:!1}).transformPoints("scale",.15):u.pos&&(E.bright=u.clone().reg("center","center"),E.bright.myCache=!1),E.znum=M,E.scaleX=E.scaleY=p,E.hitArea=I,E.x=W/2+W*M,E.y=t/2,E.mouseChildren=!1,S.addChild(E);function O(e){n<=e&&(e=-1);for(var t=0;t<n;t++){var o=S.getChildAt(t);o.removeAllChildren(),(d?t<=e?o.bright:o.dim:t==e?o.bright:o.dim).center(o)}P.zimAccessibility&&P.zimAccessibility.changeTitle(P),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!P.stage||P.stage.update()}S.setBounds(0,0,e,t),S.regX=S.x=e/2,S.regY=S.y=t/2,this.addChild(S),-1!=f&&0<m&&(S.shadow=new createjs.Shadow(f,2,2,m)),g&&(S.cur("pointer"),P.lightsEvent=S.on(A,function(e){if(k==e.target.znum){if(0<k)return;if(0==k)return O(k=-1),void P.dispatchEvent("change")}O(k=e.target.znum),P.dispatchEvent("change")})),S.scaleX=S.scaleY=h,Object.defineProperty(this,"index",{get:function(){return k},set:function(e){k=Math.floor(e),O(k=Jo.constrain(k,-1,n-1))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return this.index},set:function(e){this.index=e}}),Object.defineProperty(this,"num",{get:function(){return n},set:function(){zon&&zogy("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(P,"enabled",{get:function(){return P._enabled},set:function(e){zt(P,e)}}),zot(b)&&zot(w.selectedIndex)||!zot(z)||!zot(w.index)||(z=zot(b)?w.selectedIndex:b),zot(z)&&(z=null!=w.index?w.index:0),P.index=z,!1!==v&&Jo.styleTransforms(this,w),this.dispose=function(e,t,o){o||(P.lightsEvent&&S.off(A,P.lightsEvent),this.zimContainer_dispose())},this.clone=function(){return P.cloneProps(new Jo.Indicator(e,t,n,o,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,this.group,C))}},Jo.extend(Jo.Indicator,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.TextInput=function(a,r,i,l,s,c,u,t,o,n,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,O,j,L,D,_,R,Y,X,N){if(e=zob(Jo.TextInput,arguments,"width, height, placeholder, text, size, font, color, backgroundColor, borderColor, borderWidth, maxLength, password, selectionColor, selectionAlpha, cursorColor, cursorSpeed, shadowColor, shadowBlur, align, corner, padding, paddingH, paddingV, shiftH, shiftV, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, readOnly, inputType, rtl, uppercase, placeholderInstant, keyboardShift, style, group, inherit",this))return e;z_d("54.2"),this.group=X;var e=!1===Y?{}:Jo.getStyle("TextInput",this.group,N);zot(s)&&(s=null!=e.size?e.size:36),!zot(w)&&"ignore"!=w||(w=null!=e.padding&&"ignore"!=w?e.padding:5),zot(C)&&(C=null!=e.paddingH?e.paddingH:w),zot(x)&&(x=null!=e.paddingV?e.paddingV:w),zot(a)&&(a=null!=e.width?e.width:300),zot(r)&&(r=null!=e.height?e.height:s+2*x),zot(i)&&(i=null!=e.placeholder?e.placeholder:null),zot(l)&&(l=null!=e.text?e.text:""),zot(c)&&(c=null!=e.font?e.font:"arial"),zot(u)&&(u=null!=e.color?e.color:Jo.dark),zot(t)&&(t=null!=e.backgroundColor?e.backgroundColor:Jo.lighter),zot(o)&&(o=null!=e.borderColor?e.borderColor:null),zot(n)&&(n=null!=e.borderWidth?e.borderWidth:null);var F=function(){return arguments}(a,r,i,l,u,t,o);function H(){return WW.DIR&&"rtl"==WW.DIR||!WW.DIR&&"rtl"==Jo.DIR?"start"==b?b="right":"end"==b&&(b="left"):"start"==b?b="left":"end"==b&&(b="right"),b}this.veeObj={width:F[0],height:F[1],placeholder:F[2],text:F[3],color:F[4],backgroundColor:F[5],borderColor:F[6]},a=Jo.Pick.choose(a),r=Jo.Pick.choose(r),i=Jo.Pick.choose(i),l=Jo.Pick.choose(l),u=Jo.Pick.choose(u),t=Jo.Pick.choose(t),o=Jo.Pick.choose(o),zot(p)&&(p=null!=e.selectionColor?e.selectionColor:u),zot(g)&&(g=null!=e.selectionAlpha?e.selectionAlpha:.2),zot(f)&&(f=null!=e.cursorColor?e.cursorColor:u),zot(m)&&(m=null!=e.cursorSpeed?e.cursorSpeed:.5),zot(z)&&(z=null!=e.shadowColor?e.shadowColor:"rgba(0,0,0,.3)"),zot(y)&&(y=null!=e.shadowBlur?e.shadowBlur:20),zot(b)&&(b=null!=e.align?e.align:"left"),zot(v)&&(v=null!=e.corner?e.corner:0),zot(k)&&(k=null!=e.shiftH?e.shiftH:0),zot(h)&&(h=null!=e.password&&e.password),zot(T)&&(T=null!=e.shiftV?e.shiftV:h?.25*s:0),zot(d)&&(d=null!=e.maxLength?e.maxLength:"center"==b?1.8*Math.floor(a/s):null),zot(A)&&(A=null!=e.scrollBarActive&&e.scrollBarActive),zot(P)&&(P=null!=e.scrollBarDrag&&e.scrollBarDrag),zot(E)&&(E=null!=e.scrollBarColor?e.scrollBarColor:o),zot(S)&&(S=null!=e.scrollBarAlpha?e.scrollBarAlpha:.3),zot(B)&&(B=null==e.scrollBarFade||e.scrollBarFade),zot(W)&&(W=null==e.scrollBarH||e.scrollBarH),zot(I)&&(I=null==e.scrollBarV||e.scrollBarV),zot(O)&&(O=null!=e.readOnly&&e.readOnly),zot(j)&&(j=null!=e.inputType?e.inputType:"text"),P&&(B=null!=e.scrollBarFade&&e.scrollBarFade),zot(L)&&(L=null!=e.rtl?e.rtl:"rtl"==WW.DIR||"rtl"==Jo.DIR?"rtl":null),zot(D)&&(D=null!=e.uppercase?e.uppercase:null),zot(R)&&(R=null!=e.keyboardShift?e.keyboardShift:null),D&&(l=l&&l.toUpperCase(),i=i&&i.toUpperCase()),zot(_)&&(_=null==e.placeholderInstant||e.placeholderInstant),b=H(),this.zimWindow_constructor(a,r,null,t,o,n,w,v,!1,A,P,E,S,B,W,I,!1,null,null,!1,!0,z,y,C,x,!0,null,null,null,null,null,!1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,Y,X,Jo.copy(e)),this.type="TextInput";var V,G,U,q,Q,Z,K,J,$=this;function ee(){function t(){M&&!zot(e)&&WW.visualViewport.height>e&&($.tiBlur(),WW.visualViewport.removeEventListener("resize",t)),e=WW.visualViewport.height}var e,o,n;V&&($.re&&$.stage.frame.off("resize",$.re),$.remove(V),G=V.text,Q=V.focus,U=$.label.hiddenInput.selectionStart,q=$.label.hiddenInput.selectionEnd,$.placeholderLabel.dispose(),$.label.dispose(),K.dispose(),J.dispose(),$.label.positionBlinkerAndSelection(),$.label.focus&&$.label.blinker.replayTween()),$.placeholderLabel=new Jo.Label({text:i||"",size:s,color:u,font:c,shiftH:k,shiftV:T,valign:"top"}).alp(.5),(null==G&&""==l||""===G)&&$.add($.placeholderLabel),Z=new Jo.Rectangle({width:a-2*w,height:r-2*w+4,color:Jo.clear,style:!1}).center($),$.cur("text"),V=$.label=new Jo.TextInput.LabelInput(null!=G?G:l,s,d,h,p,g,f,m,c,u,null,null,null,b,"top",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,k,T,null,null,null,null,j,L,D,_,Y,X,N),$.add(V),V.setMask(Z),$.htmlTag=$.label.hiddenInput,$.selection=$.label.selection,$.blinker=$.label.blinker,"right"==b?(V.x=a-C,$.placeholderLabel.x=a-$.placeholderLabel.width-C):"center"==b&&(V.x=a/2,$.placeholderLabel.x=(a-$.placeholderLabel.width)/2),V.ogx=V.x,$.placeholderLabel.x=V.x,$.placeholderLabel.align=b,(K=new Jo.Rectangle({width:w,height:r,color:Jo.clear,style:!1}).addTo($).expand(0)).on("mousedown",function(e){V.onMousedown(e),e.stopImmediatePropagation()}),K.on("pressmove",function(e){V.onPressmove(e),e.stopImmediatePropagation()}),K.on("dblclick",function(e){V.onDblclick(e),e.stopImmediatePropagation()}),(J=new Jo.Rectangle({width:w,height:r,color:Jo.clear,style:!1}).pos(0,0,Jo.RIGHT,Jo.TOP,$).expand(0)).on("mousedown",function(e){V.onMousedown(e),e.stopImmediatePropagation()}),J.on("pressmove",function(e){V.onPressmove(e),e.stopImmediatePropagation()}),J.on("dblclick",function(e){V.onDblclick(e),e.stopImmediatePropagation()}),$.label.on("focus",function(){var e;WW.M&&R&&($.re&&$.stage.frame.off("resize",$.re),$.re=$.stage.frame.on("resize",function(){$.stage&&e>$.stage.height/4&&($.stage.y=$.stage.scaleY*($.stage.height/4-e),$.stage.update())}),WW.visualViewport&&(WW.visualViewport.removeEventListener("resize",t),WW.visualViewport.addEventListener("resize",t)),e=$.label.localToGlobal(0,0).y,$.stage&&e>$.stage.height/4&&($.stage.y=$.stage.scaleY*($.stage.height/4-e),$.stage.update())),_&&$.placeholderLabel.parent&&($.placeholderLabel.removeFrom(),$.stage&&$.stage.update()),$.dispatchEvent("focus")}),$.tiBlur=function(){WW.M&&R&&$.stage&&($.re&&$.stage.frame.off("resize",$.re),$.label.hiddenInput.blur(),$.stage.y=oe,$.stage.update()),_&&""==V.text&&!$.placeholderLabel.parent&&($.add($.placeholderLabel),$.stage&&$.stage.update()),$.dispatchEvent("blur")},$.label.on("blur",$.tiBlur),$.label.on("input",function(e){ne()}),$.label.on("keydown",function(e){$.label.deleteKey=46==e.detail}),$.label.on("blinker",function(){var e=$.localToGlobal(0,0).x,t=e+a-C-V.blinker.width,o=V.blinker,n=o.localToGlobal(0,0).x,r=V.localToGlobal(0,0).x-1,i=V.x+V.blinker.x,l=Jo.constrain(i,C,a-C-V.blinker.width);i!=l&&(V.x-=i-l),"left"==b?V.width<$.width?V.x=V.ogx:t<n||V.oldWidth==V.width?V.x-=i-l:V.oldWidth>V.width&&1!=$.label.deleteKey&&(V.x+=Math.abs(o.oldX-n)+V.blinker.width+C):"right"==b?V.width<$.width?V.x=V.ogx:t<n||V.oldWidth==V.width?V.x-=i-l:V.oldWidth>V.width&&1==$.label.deleteKey&&n<r-$.width&&(V.x-=Math.abs(o.oldX-n)+V.blinker.width+C):"center"==b&&(V.width<$.width?V.x=V.ogx:t<n||V.oldWidth==V.width?V.x-=i-l:V.oldWidth>V.width&&n<t&&($.width,1!=$.label.deleteKey?V.x+=V.blinker.width+C:V.x-=V.blinker.width+C)),V.oldWidth=V.width,o.oldX=n,$.stage&&$.stage.update()}),null!=G&&("number"==(o=$.label.hiddenInput).type&&(o.type="text"),V.focus=$.keyFocus=Q,n=zdf,$.stage&&(n=$.stage.frame),n.zil&&V.focus&&WW.removeEventListener("keydown",n.zil[0]),n.zil&&!V.focus&&WW.addEventListener("keydown",n.zil[0]),o.selectionStart=U,o.selectionEnd=q,$.label.positionBlinkerAndSelection(),$.label.focus&&$.label.blinker.replayTween())}ee();var te=V.text;$.on("mousedown",function(e){V.onMousedown(e),te=V.text}),$.on("pressmove",function(e){V.onPressmove(e),e.stopImmediatePropagation()}),$.on("dblclick",function(e){V.onDblclick(e),e.stopImmediatePropagation()}),$.added(function(e){e.on("stagemousedown",function(e){$.hitTestPoint(e.stageX,e.stageY)||(V.focus=!1,V.text!=te&&$.dispatchEvent("change"),te=V.text)})});var oe=$.stage?stage.y:0;function ne(){""!=V.text&&$.placeholderLabel.parent&&($.placeholderLabel.removeFrom(),$.stage&&$.stage.update()),""!=V.text||$.placeholderLabel.parent||($.add($.placeholderLabel),$.stage&&$.stage.update())}function re(){$.keyFocus=!0}Object.defineProperty($,"text",{get:function(){return V.hiddenInput.value},set:function(e){te=e,V.setText(e,!0),ne(),$.label.positionBlinkerAndSelection(),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}),null!=WW.KEYFOCUS&&(Jo.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Jo.KEYFOCUS==$},set:function(){Jo.KEYFOCUS=$}}),Jo.KEYFOCUS||re(),this.on("mousedown",function(){re()}),Object.defineProperty($,"readOnly",{get:function(){return O},set:function(e){O=e,$.htmlTag.readOnly=O,e?$.blinker.vis(!1):$.blinker.vis(!0)}}),$.readOnly=O,Object.defineProperty($,"focus",{get:function(){return V.focus},set:function(e){V.focus=e}}),Object.defineProperty($,"color",{get:function(){return V.color},set:function(e){V.color=e,Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}),Object.defineProperty($,"size",{get:function(){return V.size},set:function(e){s=e,V.size=e,this.placeholderLabel&&(this.placeholderLabel.size=e),V.hiddenInput.style.fontSize=e+"px",Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}),Object.defineProperty($,"align",{get:function(){return V.align},set:function(e){V.align=b=H(),V.x="right"==b?a-V.width:"center"==b?a/2:0,$.placeholderLabel.x=V.x,$.placeholderLabel.align=b,Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}),Object.defineProperty($,"font",{get:function(){return V.font},set:function(e){V.font=e,Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}),Object.defineProperty($,"selectionAlpha",{get:function(){return V.selectionAlpha},set:function(e){V.selectionAlpha=e,0!=V.selection.alpha&&(V.selection.alpha=e),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}),!(this.resize=function(e,t){return a=e||a,r=t||r,$.zimWindow_resize(a,r),ee(),$})!==Y&&Jo.styleTransforms(this,e),this.clone=function(e){return $.cloneProps(new Jo.TextInput(e||!Jo.isPick(F[0])?a:F[0],e||!Jo.isPick(F[1])?r:F[1],e||!Jo.isPick(F[2])?i:F[2],e||!Jo.isPick(F[3])?l:F[3],s,c,e||!Jo.isPick(F[4])?u:F[4],e||!Jo.isPick(F[5])?t:F[5],e||!Jo.isPick(F[6])?o:F[6],n,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,O,j,L,D,_,R,Y,this.group,N))}},Jo.extend(Jo.TextInput,Jo.Window,["clone","resize"],"zimWindow",!1),Jo.TextInput.LabelInput=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N){this.zimLabel_constructor(e,t,s,c,null,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,null,O,j,null,L,Y,X,N),this.type="LabelInput",zot(c)&&(c=Jo.dark),zot(r)&&(r=c),zot(i)&&(i=.2),this.selectionAlpha=i,zot(l)&&(l=c),zot(a)&&(a=.5),this.hiddenInput=document.createElement("INPUT"),this.hiddenInput.setAttribute("id",Jo.makeID()),this.hiddenInput.value=e,"text"==D&&n&&(D="password"),"number"==(this.hiddenInput.type=D)&&(this.hiddenInput.pattern="[^(0-9).-+*/%$]*",this.hiddenInput.inputmode="numeric");0<o&&(this.hiddenInput.maxLength=o),this.hiddenInput.autocapitalize="off",this.hiddenInput.autocorrect="off",this.hiddenInput.autocomplete="off",this.hiddenInput.spellcheck=!1,this.hiddenInput.style.position="absolute",this.hiddenInput.style.overflow="hidden",this.hiddenInput.style.touchAction="none",this.hiddenInput.style.left="-99999px",this.hiddenInput.style.top="-99999px",this.hiddenInput.style.zIndex=-999,this.hiddenInput.style.opacity=0,this.hiddenInput.style.width="1px",this.hiddenInput.style.height="1px",this.hiddenInput.style.fontSize="1px",this.onFocus=function(){this.stage&&(F=this.stage.frame),F.zil&&WW.removeEventListener("keydown",F.zil[0]),this.blinker.alp(1).replayTween(),this.selection.alp(.2),this.positionBlinkerAndSelection(),this.dispatchEvent("focus")},this.onBlur=function(){this.stage&&(F=this.stage.frame),F.zil&&WW.addEventListener("keydown",F.zil[0]),this.positionBlinkerAndSelection(),this.blinker.pauseAnimate(!0).alp(0),this.selection.alp(0),this.hiddenInput.type=D,this.dispatchEvent("blur")},this.onInput=function(e,t){R&&(this.hiddenInput.value=this.hiddenInput.value.toUpperCase());var o=this.hiddenInput.value;"number"==D&&(o=o.replace(/[^(0-9).\-+*/%$]*/g,""),this.hiddenInput.value=o),this.text="password"==this.hiddenInput.type?o.replace(/./g,"*"):o,this.measureText(),WW.M&&this.positionBlinkerAndSelection(),t||this.dispatchEvent(e)},this.onSelect=function(){this.positionBlinkerAndSelection(),this.focus&&this.blinker.replayTween()};var F,H=this;this.onKeydown=function(e){this.deleteKey="Backspace"==e.code||"Delete"==e.code,this.blinker.replayTween(),setTimeout(function(){H.positionBlinkerAndSelection.call(H),H.dispatchEvent(e)},10)},this.onMousedown=function(e){var t=this.text.length,e=this.eventPositionGlobalToLocal(e);this.focus||(this.hiddenInput.focus(),"email"==D&&(this.hiddenInput.type="text")),"number"==D&&(this.hiddenInput.type="text");e=this.mapPointToIndex(e);_?this.hiddenInput.setSelectionRange(t-e,t-e):this.hiddenInput.setSelectionRange(e,e),this.positionBlinkerAndSelection()},this.onPressmove=function(e){var t=this.text.length;this.focus||this.hiddenInput.focus();e=this.eventPositionGlobalToLocal(e),e=_?t-this.mapPointToIndex(e):this.mapPointToIndex(e);this.hiddenInput.selectionStart===this.hiddenInput.selectionEnd?this.hiddenInput.selectionStart<=e?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,e,_?"backward":"forward"):this.hiddenInput.setSelectionRange(e,this.hiddenInput.selectionEnd,_?"forward":"backward"):this.hiddenInput.selectionDirection===(_?"backward":"forward")?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,e,_?"backward":"forward"):this.hiddenInput.setSelectionRange(e,this.hiddenInput.selectionEnd,_?"forward":"backward"),this.positionBlinkerAndSelection()},this.onDblclick=function(){this.hiddenInput.select(),this.positionBlinkerAndSelection()},this.hiddenInput.addEventListener("paste",function(){setTimeout(function(){H.hiddenInput.setSelectionRange(H.hiddenInput.selectionStart,H.hiddenInput.selectionEnd,_?"forward":"backward")},50)}),this.positionBlinkerAndSelection=function(){var e,t,o,n,r=this.text.length;this.focus&&(e=this.backing||this.background?this.paddingH:0,t=this.backing||this.background?this.paddingV:0,this.hiddenInput.selectionStart!==this.hiddenInput.selectionEnd||0==r?(_?(n=this.textWidthArray[r-this.hiddenInput.selectionStart],o=this.textWidthArray[r-this.hiddenInput.selectionEnd],this.selection.widthOnly=o-n,this.selection.pos(o+e-1+W,t+I)):(n=this.textWidthArray[this.hiddenInput.selectionStart],o=this.textWidthArray[this.hiddenInput.selectionEnd],this.selection.widthOnly=o-n,this.selection.pos(n+e-1+W,t+I)),this.selection.heightOnly=this.textHeight,this.selection.alp(this.selectionAlpha)):this.selection.alp(0),this.blinker.heightOnly=this.textHeight,null==(n="backward"===this.hiddenInput.selectionDirection?this.hiddenInput.selectionStart:this.hiddenInput.selectionEnd)&&(n=r),_&&(n=r-n),this.blinker.pos(this.textWidthArray[n]+e-1+("right"==p&&""==this.text?this.width:"center"==p&&""==this.text?this.width/2:0)+W,t+I),this.dispatchEvent("blinker")),this.stage&&this.stage.update()},this.eventPositionGlobalToLocal=function(e){e=this.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY);return e.x-="right"==p?this.label.x-this.width:"center"==p?(this.label.x-this.width)/2:this.label.x,e.y-=this.label.y,e},this.mapPointToIndex=function(e){for(var t=this.textWidthArray.length-1,o=0;o<this.textWidthArray.length-1;o++){var n=(this.textWidthArray[o]+this.textWidthArray[o+1])/2;if(e.x<=n){t=o;break}}return t},this.measureText=function(){var e=this.label.clone(),t=this.text;_&&(t=t.split("").reverse().join(""));for(var o=0;o<t.length&&o<this.previousMeasuredText.length&&t[o]===this.previousMeasuredText[o];)o++;for(this.textWidthArray=this.textWidthArray.slice(0,o+1),o++;o<=t.length;o++)e.text=t.slice(0,o),this.textWidthArray.push(e.getMeasuredWidth());this.previousMeasuredText=t,this.textHeight=e.getMeasuredLineHeight()},this.setText=function(e,t){R&&(e=e.toUpperCase()),this.hiddenInput.value=e,this.onInput(null,t)},Object.defineProperty(this,"focus",{get:function(){return document.activeElement===H.hiddenInput},set:function(e){!0===e?(H.hiddenInput.focus(),this.blinker.alp(1).replayTween(),this.selection.alp(.2),this.positionBlinkerAndSelection()):H.hiddenInput.blur()}}),this.added(function(e){F=e.frame,H.zfe=H.hiddenInput.addEventListener("focus",H.onFocus.bind(H)),H.zbe=H.hiddenInput.addEventListener("blur",H.onBlur.bind(H))}),H.zie=this.hiddenInput.addEventListener("input",this.onInput.bind(this)),H.zse=this.hiddenInput.addEventListener("select",this.onSelect.bind(this)),H.zke=this.hiddenInput.addEventListener("keydown",this.onKeydown.bind(this)),document.body.appendChild(this.hiddenInput),H.zme=this.on("mousedown",this.onMousedown.bind(this)),H.zpe=this.on("pressmove",this.onPressmove.bind(this)),H.zde=this.on("dblclick",this.onDblclick.bind(this)),this.cur("text"),this.blinker=new Jo.Rectangle({width:2,height:1,color:l,style:!1}).animate({obj:{alpha:0},wait:a,time:.1,rewind:!0,rewindWait:a,loop:!0,loopWait:a}).pauseAnimate(!0).alp(0).addTo(this),this.selection=new Jo.Rectangle({width:1,height:1,color:r,style:!1}).alp(0).addTo(this),this.textWidthArray=[0],this.previousMeasuredText="",this.textHeight=null,this.measureText(),this.dispose=function(){this.hiddenInput||(this.hiddenInput.removeEventListener("focus",H.zfe),this.hiddenInput.removeEventListener("blur",H.zbe),this.hiddenInput.removeEventListener("input",H.zie),this.hiddenInput.removeEventListener("select",H.zse),this.hiddenInput.removeEventListener("keydown",H.zke),this.hiddenInput.remove(),this.hiddenInput=null,this.zimLabel_dispose(!0))}},Jo.extend(Jo.TextInput.LabelInput,Jo.Label,"dispose","zimLabel",!1),Jo.List=function(l,n,r,e,i,t,o,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,H,V,G,U,q,Q,Z,K,J,$,ee,te,oe,ne,re,ie,le,ae,se,ce,ue,de,he,pe,ge,fe,me,ze,ye,be,ve,we,Ce,xe,ke,Te,Ae,Pe,Ee,Se,Be,We,Ie,Me,Oe,je,Le,De,_e,Re,Ye,Xe,Ne){if(Ve=zob(Jo.List,arguments,"width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, spacing, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, downColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideFactor, slideSnap, slideSnapDamp, shadowColor, shadowBlur, paddingH, paddingV, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, collapse, collapseColor, collapsed, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, index, noScale, pulldownToggle, optimize, keyEnabled, resizeHandle, resizeBoundary, resizeVisible, continuous, closeOthers, drop, dropTargets, dropSelf, dropCopy, dropColor, dropThickness, dropScrollSpeed, dropReticleAlpha, dropHitTest, dropFull, dropSnap, dropEnd, dropScale, dropWidth, dropHeight, selectedIndex, style, group, inherit",this))return Ve;z_d("60.5"),this.group=Xe;var Fe=!1===Ye?{}:Jo.getStyle("List",this.group,Ne);zot(l)&&(l=null!=Fe.width?Fe.width:300);var He=n;zot(n)&&(n=null!=Fe.height?Fe.height:zot(ce)?200:200+ce.height),zot(r)&&(r=null!=Fe.list?Fe.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),0==r.length&&(r=["%-&"]),this.originalList=r,zot(e)&&(e=null!=Fe.viewNum?Fe.viewNum:5),zot(i)&&(i=null==Fe.vertical||Fe.vertical),zot(t)&&(t=null==Fe.currentSelected||Fe.currentSelected);var Ve=!zot(o)||!zot(s);zot(ue)&&(ue=null!=Fe.checkBox&&Fe.checkBox),zot(o)&&(o=null!=Fe.align?Fe.align:ue?"left":"center"),zot(a)&&(a=null!=Fe.valign?Fe.valign:"center"),zot(s)&&(s=null!=Fe.labelAlign?Fe.labelAlign:o),zot(c)&&(c=null!=Fe.labelValign?Fe.labelValign:a),zot(p)&&(p=null!=Fe.indent?Fe.indent:ue?0:10),zot(u)&&(u=null!=Fe.labelIndent?Fe.labelIndent:p),zot(d)&&(d=null!=Fe.labelIndentH?Fe.labelIndentH:u),zot(h)&&(h=null!=Fe.labelIndentV?Fe.labelIndentV:u),zot(g)&&(g=null!=Fe.spacing?Fe.spacing:2),zot(v)&&(v=null!=Fe.backdropColor?Fe.backdropColor:Jo.dark),zot(f)&&(f=null!=Fe.backgroundColor?Fe.backgroundColor:Jo.tin),zot(m)&&(m=null!=Fe.rollBackgroundColor?Fe.rollBackgroundColor:Jo.grey),zot(z)&&(z=null!=Fe.downBackgroundColor?Fe.downBackgroundColor:m),zot(y)&&(y=null!=Fe.selectedBackgroundColor?Fe.selectedBackgroundColor:Jo.charcoal),zot(b)&&(b=null!=Fe.selectedRollBackgroundColor?Fe.selectedRollBackgroundColor:Jo.grey),zot(w)&&(w=null!=Fe.color?Fe.color:Jo.white),zot(C)&&(C=null!=Fe.rollColor?Fe.rollColor:w),zot(x)&&(x=null!=Fe.downColor?Fe.downColor:C),zot(k)&&(k=null!=Fe.selectedColor?Fe.selectedColor:w),zot(T)&&(T=null!=Fe.selectedRollColor?Fe.selectedRollColor:C),zot(v)&&(v=null!=Fe.backdropColor?Fe.backdropColor:v);var Ge=A,Ue=P;zot(A)&&(A=null!=Fe.borderColor?Fe.borderColor:Jo.silver),zot(P)&&(P=null!=Fe.borderWidth?Fe.borderWidth:1),zot(E)&&(E=null!=Fe.padding?Fe.padding:g),zot(S)&&(S=null!=Fe.corner?Fe.corner:0),zot(B)&&(B=null==Fe.swipe||Fe.swipe),zot(W)&&(W=null==Fe.scrollBarActive||Fe.scrollBarActive),zot(I)&&(I=null==Fe.scrollBarDrag||Fe.scrollBarDrag),zot(M)&&(M=null!=Fe.scrollBarColor?Fe.scrollBarColor:A),zot(O)&&(O=null!=Fe.scrollBarAlpha?Fe.scrollBarAlpha:.3),zot(j)&&(j=null==Fe.scrollBarFade||Fe.scrollBarFade),zot(L)&&(L=null!=Fe.scrollBarH?Fe.scrollBarH:!i),zot(D)&&(D=null!=Fe.scrollBarV?Fe.scrollBarV:i),I&&(j=null!=Fe.scrollBarFade&&Fe.scrollBarFade),zot(_)&&(_=null==Fe.scrollBarOverlay||Fe.scrollBarOverlay),zot(R)&&(R=null==Fe.slide||Fe.slide),zot(Y)&&(Y=null!=Fe.slideFactor?Fe.slideFactor:.95),zot(X)&&(X=null!=Fe.slideSnap?Fe.slideSnap:i?"vertical":"horizontal"),zot(H)&&(H=null!=Fe.shadowColor?Fe.shadowColor:"rgba(0,0,0,.3)"),zot(V)&&(V=null!=Fe.shadowBlur?Fe.shadowBlur:20),zot(U)&&(U=null!=Fe.paddingV?Fe.paddingV:E),zot(G)&&(G=null!=Fe.paddingH?Fe.paddingH:E),zot(q)&&(q=null==Fe.scrollWheel||Fe.scrollWheel),zot(Z)&&(Z=null!=Fe.titleBar?Fe.titleBar:null),zot(K)&&(K=null!=Fe.titleBarColor?Fe.titleBarColor:null),zot(J)&&(J=null!=Fe.titleBarBackgroundColor?Fe.titleBarBackgroundColor:null),zot($)&&($=null!=Fe.titleBarHeight?Fe.titleBarHeight:35),zot(ee)&&(ee=null!=Fe.draggable?Fe.draggable:null),zot(te)&&(te=null!=Fe.boundary?Fe.boundary:null),zot(oe)&&(oe=null!=Fe.onTop?Fe.onTop:null),zot(ne)&&(ne=null!=Fe.close?Fe.close:null),zot(re)&&(re=null!=Fe.closeColor?Fe.closeColor:null),zot(ie)&&(ie=null!=Fe.collapse?Fe.collapse:null),zot(le)&&(le=null!=Fe.collapseColor?Fe.collapseColor:null),zot(se)&&(se=null!=Fe.excludeCustomTap&&Fe.excludeCustomTap),zot(ue)&&(ue=null!=Fe.checkBox&&Fe.checkBox),zot(de)&&(de=null!=Fe.pulldown&&Fe.pulldown),zot(me)&&(me=null!=Fe.pulldownToggle&&Fe.pulldownToggle),zot(fe)&&(fe=null!=Fe.noScale&&Fe.noScale),zot(he)&&(he=null!=Fe.clone&&Fe.clone),zot(ze)&&(ze=null==Fe.optimize||Fe.optimize),zot(ye)&&(ye=null!=Fe.keyEnabled?Fe.keyEnabled:null),zot(be)&&(be=null!=Fe.resizeHandle?Fe.resizeHandle:null),zot(ve)&&(ve=null!=Fe.resizeBoundary?Fe.resizeBoundary:null),zot(we)&&(we=null!=Fe.resizeVisible&&Fe.resizeVisible),zot(Ce)&&(Ce=null!=Fe.continuous&&Fe.continuous),zot(xe)&&(xe=null!=Fe.closeOthers&&Fe.closeOthers),zot(ke)&&(ke=null!=Fe.drop&&Fe.drop),zot(Te)&&(Te=null!=Fe.dropTargets?Fe.dropTargets:null),zot(Ae)&&(Ae=null==Fe.dropSelf||Fe.dropSelf),zot(Pe)&&(Pe=null!=Fe.dropCopy&&Fe.dropCopy),zot(Ee)&&(Ee=null!=Fe.dropColor?Fe.dropColor:Jo.white),zot(Se)&&(Se=null!=Fe.dropThickness?Fe.dropThickness:1),zot(Be)&&(Be=null!=Fe.dropScrollSpeed?Fe.dropScrollSpeed:5),zot(We)&&(We=null!=Fe.dropReticleAlpha?Fe.dropReticleAlpha:1),zot(Ie)&&(Ie=null!=Fe.dropHitTest?Fe.dropHitTest:"bounds"),zot(Oe)&&(Oe=null==Fe.dropSnap||Fe.dropSnap),zot(Me)&&(Me=null==Fe.dropFull||Fe.dropFull),zot(je)&&(je=null==Fe.dropEnd||Fe.dropEnd),zot(Le)&&(Le=null!=Fe.dropScale?Fe.dropScale:null),zot(De)&&(De=null!=Fe.dropWidth?Fe.dropWidth:null),zot(_e)&&(_e=null!=Fe.dropHeight?Fe.dropHeight:null),!1===Z&&(Z=null),this.vertical=i;var qe,Qe=this,Ze=n;WW.DIR&&"rtl"==WW.DIR||!WW.DIR&&"rtl"==Jo.DIR?"start"==o?o="right":"end"==o&&(o="left"):"start"==o?o="left":"end"==o&&(o="right"),Ce?(Qe.continuous=!0,qe=Jo.copy(r),Jo.loop(r.length,function(e){r[e].clone?qe.push(r[e].clone()):qe.push(r[e])})):qe=r,ue&&Jo.loop(qe,function(e,t){"%-&"!=qe[t]&&(qe[t]=Jo.List.checkItem(e,null,l,"left",10,10,g,w,C,k,T,f,m,y,b))});var Ke,Je,$e,et,tt,ot,nt,rt,it,lt=$o();qe.constructor=={}.constructor&&(Je=zot(qe.shade)?zot(Fe.shade)?.2:Fe.shade:qe.shade,$e=zot(qe.dim)?zot(Fe.dim)?.1:Fe.dim:qe.dim,et=zot(qe.shift)?zot(Fe.shift)?15:Fe.shift:qe.shift,tt=zot(qe.bloom)?!zot(Fe.bloom)&&Fe.bloom:qe.bloom,ot=zot(qe.whither)?!zot(Fe.whither)&&Fe.whither:qe.whither,nt=zot(qe.open)?!zot(Fe.open)&&Fe.open:qe.open,"arrows"==(rt=(rt=zot(qe.expander)?zot(Fe.expander)?"plus":Fe.expander:qe.expander).toLowerCase())&&(rt="arrow"),"none"!=rt&&"arrow"!=rt&&(rt="plus"),!0===tt&&(tt="s"==lt?.01:10),!0===ot&&(ot="s"==lt?.01:10),en(tt),en(ot),!0===et&&(et=15),!0===Je&&(Je=.2),!0===$e&&($e=.1),it=zot(qe.subStyles)?zot(Fe.subStyles)?{}:Fe.subStyles:qe.subStyles,zot(qe.menu)||(qe=qe.menu),Ke=Qe.tree=new Jo.Hierarchy(qe),qe=Ke.getLinearList(),Ve||(o=s="left")),de&&(e=(zot(Ke)?qe:Ke).length,zot(He)&&(n=e*l/620*100+(e+1)*g+(zot(Z)?0:$)),P=0,y=f,v=Jo.clear,B=!1);var at,st=0,ct=0;Jo.loop(qe,function(e){"ListItem"==e.type&&(e.width=l-2*g),fe&&(e.width&&(st+=e.width),e.height&&(ct+=e.height))}),st&&(st+=g*(qe.length-1)),ct&&(ct+=g*(qe.length-1)),this.align=o,this.valign=a,this.indent=p,this.spacing=g,zot(ce)||(n-=ce.height,((ce.list=Qe).organizer=ce).setButtons(),$+=ce.height),Ce&&(W=!1),this.zimWindow_constructor(l,n,null,v,A,P,E,S,B,W,I,M,O,j,L,D,R,Y,X,N,!0,H,V,G,U,q,Q,Z,K,J,$,ee,te,oe,ne,re,pe,!1,null,be,ie,le,ae,ze,ve,we,Ce?i?"vertical":"horizontal":null,Ye,Xe,Jo.copy(Fe)),this.type="List",zot(Z)||(this.titleBarLabel.pos(null,$-30,null,!0),zot($)&&($=30),n-=$),zot(ce)||ce.addTo(Qe).loc(0,-ce.height),st&&fe?(Qe.itemWidth=i?l-2*G-(!W||_?0:6):st/qe.length,Qe.itemHeight=i?ct/qe.length:n-2*U-(!W||_?0:6)):(Qe.itemWidth=i?l-2*G-(!W||_?0:6):(l-2*G)/e,Qe.itemHeight=i?(n-2*U)/e:n-2*U-(!W||_?0:6));var ut,dt,ht,pt,gt=Jo.copy(Fe);function ft(e,t,o){e.listZID=t,e.label&&(Je&&new Jo.Rectangle(et*(o.level+1),e.height).alp(Je).pos(0,0,"right"==Qe.align,!1,e),$e&&new Jo.Rectangle(e.width,e.height).alp((o.level+1)*$e).addTo(e).bot().ord(1),et&&"center"!=Qe.align&&(e.label.x+=("right"==Qe.align?-1:1)*et*(o.level+1)));t=Ke.getData(t);t.obj=e,t.list&&!Jo.isEmpty(t.list)&&(e.expander=new Jo.Label({size:"arrow"==rt?22:36,text:t.open?"arrow"==rt?"▲":"-":"arrow"==rt?"▼":"+",align:"center",color:Jo.convertColor(w,"rgba",.6)}).alp("none"==rt?0:.7).pos("arrow"!=rt&&t.open?20:15,t.open?-3:0,"right"!=Qe.align,CENTER,e))}function mt(n){var r,i,o,t,l,a,s;Qe.selected&&Qe.selected.expander&&((r=Ke.getData(Qe.selected.listZID)).open?(Qe.selected.expander&&(Qe.selected.expander.text="arrow"==rt?"▼":"+",Qe.selected.expander.pos(15,3,"right"!=Qe.align,CENTER,Qe.selected)),r.open=!1,o=Ke.getNextSibling(Qe.selected.listZID),t=zot(o)?Qe.items.length-1:Jo.loop(Qe.items,function(e,t){if(e.listZID==o)return t-1}),ot?(i=0,Qe.enabled=!1,Jo.interval(ot,function(e){Qe.removeAt(1,Qe.index+t-Qe.index-i),i++,e.total==e.count+1&&(Qe.enabled=!0,Qe.dispatchEvent("collapsed"))},t-Qe.index,!0)):(Qe.removeAt(t-Qe.index,Qe.index+1),Qe.dispatchEvent("collapsed"))):(r.open=!0,Qe.selected.expander&&(Qe.selected.expander.text="arrow"==rt?"▲":"-",Qe.selected.expander.pos("arrow"==rt?15:20,0,"right"!=Qe.align,"center",Qe.selected)),l=Ke.getLinearList(r.list),a=Ke.getLinearIDs(r.list),r.opened?Array.isArray(l)&&(tt?(i=0,Qe.enabled=!1,Jo.interval(tt,function(e){Qe.addAt(l[i],Qe.index+1+i),(n=new createjs.Event("bloom")).item=l[i],Qe.dispatchEvent(n),e.total==e.count+1&&(Qe.enabled=!0,(n=new createjs.Event("expanded")).items=l,Qe.dispatchEvent(n)),i++},l.length,!0)):(Qe.addAt(l,Qe.index+1),(n=new createjs.Event("expanded")).items=l,Qe.dispatchEvent(n))):(r.opened=!0,zot(s=it[r.level])&&(s={}),Array.isArray(l)&&(tt?(i=0,Qe.enabled=!1,Jo.interval(tt,function(e){Qe.addAt(l[i],Qe.index+1+i,{backgroundColor:s.backgroundColor,color:s.color,rollBackgroundColor:s.rollBackgroundColor,rollColor:s.rollColor,selectedBackgroundColor:s.selectedBackgroundColor,selectedColor:s.selectedColor,selectedRollBackgroundColor:s.selectedRollBackgroundColor,selectedRollColor:s.selectedRollColor});var t=a[i],o=Qe.items[Qe.index+1+i];s.borderColor&&(o.borderColor=s.borderColor),ft(o,t,r),o.label&&(o.label.backgroundColor=Jo.clear),(n=new createjs.Event("bloom")).item=o,Qe.dispatchEvent(n),e.total==e.count+1&&(Qe.enabled=!0,(n=new createjs.Event("expanded")).items=l,Qe.dispatchEvent(n)),i++,Qe.stage&&Qe.stage.update()},l.length,!0)):(Qe.addAt(l,Qe.index+1,{backgroundColor:s.backgroundColor,color:s.color,rollBackgroundColor:s.rollBackgroundColor,rollColor:s.rollColor,selectedBackgroundColor:s.selectedBackgroundColor,selectedColor:s.selectedColor,selectedRollBackgroundColor:s.selectedRollBackgroundColor,selectedRollColor:s.selectedRollColor}),Jo.loop(a,function(e,t){t=Qe.items[Qe.index+1+t];ft(t,e,r),t.label&&(t.label.backgroundColor=Jo.clear)}),(n=new createjs.Event("expanded")).items=l,Qe.dispatchEvent(n))))))}delete gt.borderWidth,delete gt.borderColor,ut=Jo.copy(qe,he),at=Qe.tabs=new Jo.Tabs({width:i?Qe.itemWidth:Qe.itemWidth*qe.length,height:i?Qe.itemHeight*qe.length:Qe.itemHeight,tabs:ut,spacing:g,vertical:i,backgroundColor:f,rollBackgroundColor:m,downBackgroundColor:z,selectedBackgroundColor:y,selectedRollBackgroundColor:b,color:w,rollColor:C,downColor:x,selectedColor:k,selectedRollColor:T,backdropColor:v,currentEnabled:!0,currentSelected:t,align:o,valign:a,labelAlign:s,labelValign:c,labelIndent:u,labelIndentH:d,labelIndentV:h,indent:p,useTap:!0,excludeCustomTap:se,keyWrap:!1,keyEnabled:ye,style:Ye,group:Xe,inherit:gt}).siz(i?l-2*G:null,i?null:n-2*U).mov(i?0:G,i?U:0),Qe.add(at),Jo.loop(at.labels,function(e){e&&(e.backgroundColor=Jo.clear)}),Ce&&Qe.on("scrolling",function(){var e=Qe.tabs.localToLocal(0,0,Qe);i?(e.y>=-Qe.tabs.buttons[0].height&&(Qe.tabs.y-=Qe.tabs.height/2+g/2),e.y-Qe.tabs.buttons[Qe.tabs.buttons.length-1].height<=n-Qe.tabs.height&&(Qe.tabs.y+=Qe.tabs.height/2+g/2)):(e.x>=-Qe.tabs.buttons[0].width&&(Qe.tabs.x-=Qe.tabs.width/2+g/2),e.x-Qe.tabs.buttons[Qe.tabs.buttons.length-1].width<=l-Qe.tabs.width&&(Qe.tabs.x+=Qe.tabs.width/2+g/2))}),Qe.updateTree=function(){mt()},Qe.expandList=function(e){return Qe.index=e,Qe.selected&&mt(),Qe.selected},Ke&&(me&&Qe.added(function(e){dt=e,Qe.stageToggleEvent=dt.on("stagemousedown",function(){var e=dt.getObjectUnderPoint(dt.frame.mouseX,dt.frame.mouseY);e&&Qe.contains(e)||Qe.enabled&&Qe.selected&&Ke.getData(Qe.selected.listZID).open&&(xe&&Qe.toggle(!1),mt())})}),P=Ke.getLinearIDs(),Jo.loop(P,function(e,t){Qe.tabs.buttons[t].listZID=e}),Jo.loop(Qe.tabs.buttons,function(e){var t=Ke.getData(e.listZID);Jo.isEmpty(t.list)||(e.expander=new Jo.Label({size:"arrow"==rt?22:36,text:"arrow"==rt?"▼":"+",align:"center",color:Jo.convertColor(w,"rgba",.6)}).alp("none"==rt?0:.7).pos(15,0,"right"!=Qe.align,"center",e))}),ht=nt,Qe.toggle=function(t,o){if(zot(o)&&(o=0),zot(t))t=!ht;else if(t==ht&&zot(o))return;if(!t)return function t(e,n){Jo.loop(e,function(o,e){e.open&&t(e.list,n+1),e.open=!1,0!=n?Jo.loop(Qe.items,function(e,t){e.listZID==o&&Qe.removeAt(1,t),e.listZID==o&&e.expander&&(e.expander.text="arrow"==rt?"▼":"+",e.expander.pos(15,3,"right"!=Qe.align,"center",e.expander.parent))},!0):Jo.loop(Qe.items,function(e,t){e.listZID==o&&e.expander&&(e.expander.text="arrow"==rt?"▼":"+",e.expander.pos(15,3,"right"!=Qe.align,"center",e.expander.parent))},!0)},!0)}(Qe.tree.data,0),yt=null,ot=e,Qe.stage&&Qe.stage.update(),Qe;var e=ot;if(ot=!1,Array.isArray(o)){for(var n=o.length-1;0<=n;n--)!function(){var e=n;setTimeout(function(){Qe.toggle(t,o[e])},50*n)}();return ot=e,Qe}return Qe.index=o,ht=t,mt(null),ot=e,Qe},Object.defineProperty(Qe,"toggled",{get:function(){return ht},set:function(e){ht!=e&&Qe.toggle()}}),Qe.tap({call:function(e){if(Qe.selected&&Qe.selected.expander){if(!Ke.getData(Qe.selected.listZID).open&&xe)return Qe.toggle(!1),void Qe.openAtNum(Qe.accordionIndex);mt(e)}},mobileUp:!0})),at.tap({call:function(e){e.target.index!=Qe.index&&(Qe.index=at.index,Qe.dispatchEvent("change"),me&&(Qe.index=0),e.preventDefault())},mobileUp:!0}),at.on("keychange",function(e){var t;e.target.index!=Qe.index&&(Qe.index=at.index,setTimeout(function(){i?((t=Qe.selected.y+Qe.scrollY)<0||t>Qe.height-Qe.selected.height)&&Qe.animateTo(Qe.index,"ms"==lt?100:.1):((t=Qe.selected.x+Qe.scrollX)<0||t>Qe.width-Qe.selected.width)&&Qe.animateTo(Qe.index,"ms"==lt?100:.1)},100),Qe.dispatchEvent("change"))}),this.getItemIndex=function(e){return Qe.items.indexOf(e)},this.animateTo=function(e,t){zot(e)&&(e=0),zot(t)&&(t=.05);var o,n=$o(t),e=Ct(Qe.index=e);return i?(o=Math.abs(Qe.scrollY-e)/Qe.itemHeight,Qe.animate({scrollY:e},o*t/("s"==n?1:1e3))):(o=Math.abs(Qe.scrollX-e)/Qe.itemWidth,Qe.animate({scrollX:e},o*t/("s"==n?1:1e3))),Qe},this.addAt=function(o,e,t,n){if(zot(o))return Qe;var r,i=Qe.optimize;return Qe.optimize=!1,Qe.tabs.loop(function(e){e.visible=!0}),"ListItem"==o.type?o.width=l-2*g:Array.isArray(o)&&Jo.loop(o,function(e){"ListItem"==e.type&&(e.width=l-2*g)}),n?Array.isArray(o)?(r=[],Jo.loop(o,function(e){e.clone?r.push(o.clone()):r.push(Jo.copy(o,n))}),Qe.tabs.addAt(r,e,t)):o.clone?Qe.tabs.addAt(o.clone(),e,t):Qe.tabs.addAt(Jo.copy(o,n),e,t):(ue&&(Array.isArray(o)||(o=[o]),Jo.loop(o,function(e,t){"string"==typeof e&&(o[t]=Jo.List.checkItem(e,null,l,"left",10,10,g,w,C,k,T,f,m,y,b))})),Qe.tabs.addAt(o,e,t)),Qe.update(),Qe.optimize=i,Qe},this.removeAt=function(e,t){var o=Qe.optimize;Qe.optimize=!1,Ce&&Qe.tabs.removeAt(e,t+r.length),Qe.tabs.removeAt(e,t),Qe.tabs.loop(function(e){e.visible=!0}),pt=Qe.tabs.index;t=at.getBounds();return at.setBounds(0,0,t.width,t.height),t.height<n&&(Qe.scrollY=0),Qe.update(),Qe.optimize=o,Qe},"%-&"==qe[0]&&1==qe.length&&Qe.removeAt(1,0),this.clear=function(){return Qe.tabs.removeAt(Qe.length,0),Qe.contentContainer.x=0,Qe.contentContainer.y=0,Qe.update(),Qe},this.setCheck=function(e,t){zot(e)&&(e=0),zot(t)&&(t=!0),Qe.items[e].checkBox.checked=t,Qe.items[e].content.zimOut()},this.getCheck=function(e){return zot(e)&&(e=0),Qe.items[e].checkBox.checked};var zt,yt,bt=!(this.setChecks=function(t){return Jo.loop(Qe.items,function(e){e.checkBox.checked=t,e.content.zimOut()}),Qe});function vt(){if(bt)return!0;var n,r,i,l,a,t;bt=!0,Te&&!Array.isArray(Te)&&(Te=[Te]),Te=Te||[],ke&&Ae&&Te.unshift(Qe),Qe.added(function(t){zt=t.frame,Jo.loop(Te,function(e){e.dropReticle=new Jo.Rectangle(20,20,clear,Ee,Se).reg(CENTER).rot(45).alp(We),e.dropReticleIndex=null,e.zgb=e.boundsToGlobal(),e.zgs=e.getConcatenatedDisplayProps().matrix.decompose().scaleX/t.scaleX})}),Qe.dropDown=Qe.on("mousedown",function(e){if(r=o=e.target,!Qe.items.includes(r)){for(var t=!1,o=r;o.parent;){if(Qe.items.includes(o.parent)){t=!0,r=o;break}o=o.parent}if(!t)return}Qe.items.includes(r.parent)&&(r=r.parent.content),n=Qe.globalToLocal(zt.mouseX,zt.mouseY),i=r.globalToLocal(zt.mouseX,zt.mouseY),l=(zot(o.znum)?o.parent:o).znum,a=r.alpha,Qe.dropList=null,Qe.dropNewIndex=null}),Qe.dropMove=Qe.on("pressmove",function(){var e;!t&&n&&(e=Qe.localToGlobal(n.x,n.y),((Qe.vertical&&Math.abs(e.x-zt.mouseX)>Math.abs(e.y-zt.mouseY)||!Qe.vertical&&Math.abs(e.x-zt.mouseX)<Math.abs(e.y-zt.mouseY))&&!Qe.hitTestPoint(zt.mouseX,zt.mouseY)||Qe.vertical&&!D||!Qe.vertical&&!L)&&(Qe.cancelCurrentDrag(),e=r.getConcatenatedDisplayProps().matrix.decompose().scaleX/F.stage.scaleX,t=r.clone(!0).reg(i.x,i.y).sca(e).alp(.5),Qe.dropItem=t,Qe.dropIndex=l,Qe.dropStage=zt.stage.on("stagemousemove",function(){t.loc(zt.mouseX,zt.mouseY),Jo.List.doDropOver(Te,t,void 0,Be)}),Qe.dispatchEvent("dropdown"),Qe.pointerUpEvent=zt.on("pointerup",function(){if(zt.off("pointerup",Qe.pointerUpEvent),zt.stage.off("stagemousemove",Qe.dropStage),Jo.loop(Te,function(e){return"List"!=e.type?!t["hitTest"+String(Ie).charAt(0).toUpperCase()+String(Ie).slice(1)](e)||Me&&e.dropFull?void 0:(r.alpha=a,Pe||Qe.removeAt(1,l),t.reg(r.regX,r.regY,!0),Oe&&t.loc(e),Le&&t.sca(Le),(De||_e)&&t.siz(De,_e),je&&t.noMouse(),Me&&(e.dropFull=!0),t.droppedTarget=e,t.dropClone=!0,t.dropList=Qe,t.dropTarget=e,t.alpha=a,t.dropStartX=r.dropStartX,t.dropStartY=r.dropStartY,t.dropStartS=r.dropStartS,Qe.dropItem=t,Qe.dropTarget=e,r=n=t=null,!1):(e.scrollInt&&e.scrollInt.clear(),zot(e.dropReticleIndex)?void 0:(e.dropReticle.removeFrom(),Pe||Qe.removeAt(1,l),l<e.dropReticleIndex&&Qe==e&&e.dropReticleIndex--,Pe?(e.addAt(t,e.dropReticleIndex),t.alpha=a,t.dropList=Qe,t.dropTarget=e,Qe.dropItem=t):(e.addAt(r,e.dropReticleIndex),r.dropList=Qe,r.dropTarget=e,Qe.dropItem=r,t.dispose()),t=null,r.alpha=a,n=null,Qe.dropTarget=e,Qe.dropNewIndex=e.dropReticleIndex,e.dropReticleIndex=null,r=null,!1))})){if(!r)return;var e=r.localToGlobal(i.x,i.y);t.animate({x:e.x,y:e.y},.1,null,function(){t.dispose(),r.alpha=a,r=n=t=null}),Qe.dropItem=r,(Qe.dropList=Qe).dropTarget=null,Qe.dropNewIndex=Qe.dropIndex}Qe.dispatchEvent("dropup"),Qe.stage.update()}),r.alp(.5)))})}function wt(){Qe.dropDown&&Qe.off("mousedown",Qe.dropDown),Qe.dropMove&&Qe.off("pressmove",Qe.dropMove),Qe.dropStage&&zt.stage.off("stagemousemove",Qe.dropStage),Jo.loop(Te,function(e){e.scrollInt&&e.scrollInt.clear()}),bt=!(Te=[])}function Ct(e){if(i){var t=-(Qe.itemHeight+g)*e+n/2-Qe.itemHeight/2;return(Qe.itemHeight+g)*Qe.length<n&&(t=0),0<t&&(t=0),(Qe.itemHeight+g)*Qe.length>n&&t<-Qe.tabs.height+n-2*U&&(t=-Qe.tabs.height+n-2*U),t}e=-(Qe.itemWidth+g)*e+l/2-Qe.itemWidth/2;return(Qe.itemWidth+g)*Qe.length<l&&(e=0),0<e&&(e=0),(Qe.itemWidth+g)*Qe.length>l&&e<-Qe.tabs.width+l-2*G&&(e=-Qe.tabs.width+l-2*G),e}(ke||Te)&&vt(),Object.defineProperty(Qe,"drop",{get:function(){return ke},set:function(e){(ke=e)?(vt(),Te.includes(Qe)||Te.unshift(Qe)):Te&&(0<=(e=Te.indexOf(Qe))&&Te.splice(e,1),0==Te.length&&wt())}}),Qe.updateDrop=function(){return Jo.loop(Te,function(e){e.zgb=e.boundsToGlobal(),e.zgs=e.getConcatenatedDisplayProps().matrix.decompose().scaleX/zt.stage.scaleX}),Qe},Object.defineProperty(Qe,"dropTargets",{get:function(){return Te},set:function(e){Te=e;vt()&&(e&&!Array.isArray(Te)&&(Te=[Te]),Te=Te||[],ke&&!Te.includes(Qe)&&Te.unshift(Qe),Jo.loop(Te,function(e){e.dropReticle&&e.dropReticle.dispose(),e.dropReticle=new Jo.Rectangle(20,20,clear,Ee,Se).reg(CENTER).rot(45).alp(We),e.zgb=e.boundsToGlobal(),e.zgs=e.getConcatenatedDisplayProps().matrix.decompose().scaleX/zdf.stage.scaleX,e.dropReticleIndex=null}),0==Te.length&&wt())}}),Object.defineProperty(Qe,"dropColor",{get:function(){return Ee},set:function(t){Ee=t,Jo.loop(Te,function(e){e.dropReticle&&(e.dropReticle.borderColor=t)})}}),Object.defineProperty(Qe,"items",{get:function(){return Qe.tabs.buttons},set:function(){zon&&zogy("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Qe,"list",{get:function(){return Qe.tabs.buttons},set:function(){zon&&zogy("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(Qe,"length",{get:function(){return Qe.tabs.buttons.length},set:function(){zon&&zogy("List() - length is read only")}}),Object.defineProperty(Qe,"index",{get:function(){return Ce?(pt+r.length)%r.length:pt},set:function(e){at.index=e,Qe.label=at.label,Qe.selected=at.selected,pt=e,Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Qe.stage||Qe.stage.update()}}),t&&(Qe.index=0),Object.defineProperty(this,"selectedIndex",{get:function(){return this.index},set:function(e){this.index=e}}),Object.defineProperty(Qe,"indexPlusPosition",{get:function(){return Ce?(pt+r.length)%r.length:pt},set:function(e){Qe.index=e,pt=e,i?Qe.scrollY=Ct(e)-2:Qe.scrollX=Ct(e),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Qe.stage||Qe.stage.update()}}),Object.defineProperty(Qe,"text",{get:function(){return Qe.label?Qe.label.text:null},set:function(e){Qe.label&&(Qe.label.text=e)}}),Object.defineProperty(Qe,"bloom",{get:function(){return tt},set:function(e){tt=e}}),Object.defineProperty(Qe,"whither",{get:function(){return ot},set:function(e){ot=e}}),Object.defineProperty(Qe,"value",{get:function(){return Qe.label?Qe.label.text:null},set:function(n){var e=Jo.loop(Qe.list,function(e,t){var o;e.label&&(o=e.label.text),"Label"==e.type&&(o=e.text);e=new RegExp(n,"i");if(o&&o.match(e))return t});!0!==e&&(Qe.indexPlusPosition=e)}}),Object.defineProperty(this,"currentValue",{get:function(){return this.value},set:function(e){this.value=e}}),Object.defineProperty(Qe,"itemDown",{get:function(){return Qe.tabs.buttonDown},set:function(){}}),Object.defineProperty(Qe,"itemsText",{get:function(){for(var e=[],t=0;t<Qe.tabs.buttons.length;t++){var o=Qe.tabs.buttons[t].label;o&&!zot(o.text)?e.push(o.text):e.push(null)}return e},set:function(){zon&&zogy("List() - itemsText is read only")}}),t&&(Qe.index=0),Object.defineProperty(Qe,"checkBoxes",{get:function(){for(var e=[],t=0;t<Qe.tabs.buttons.length;t++){var o=Qe.tabs.buttons[t].checkBox;e.push(o)}return e},set:function(){zon&&zogy("List() - checkBoxes is read only")}}),Object.defineProperty(Qe,"accordionIndex",{get:function(){var e=Qe.selected.listZID;return e?Number(e.split("id")[1]):null},set:function(){zon&&zogy("List() - accordionIndex is read only")}}),this.last=function(){return this.indexPlusPosition=this.length-1,this},this.first=function(){return this.indexPlusPosition=0,this},this.openAtLevel=function(e){var o,n;zot(e)||(o=[],Jo.loop(e,function(e){o.push(e)}),n=Qe.bloom,Qe.bloom=!1,Jo.interval(.01,function(e){var t=Qe.items[e.count];t?-1!=o.indexOf(Qe.tree.getData(t.listZID).level)&&Qe.expandList(e.count):(e.clear(),Qe.bloom=n)},null,!0,!1,"s"))},this.openAtNum=function(e,t){if(!zot(e)){if(!yt){var n;yt={},function e(t,o){for(n in t)yt[n]=o,e(t[n].list,n)}(Qe.tree.data);var o,r={};for(o in yt){r[o]||(r[o]=[]);for(var i=yt[o];i;)r[o].unshift(i),i=yt[i];r[o].push(o)}}var l=r?r["id"+e]:[],a=Qe.bloom;Qe.bloom=!1,Jo.interval(.01,function(e){var t=Qe.items[e.count];t?-1!=l.indexOf(t.listZID)&&Qe.expandList(e.count):(e.clear(),Qe.bloom=a)},null,!0,!1,"s")}},nt&&mt&&Qe.openAtLevel(1e4),zot(Re)&&zot(Fe.selectedIndex)||!zot(ge)||!zot(Fe.index)||(ge=zot(Re)?Fe.selectedIndex:Re),zot(ge)&&(ge=null!=Fe.index?Fe.index:0),Qe.index=ge,!1!==Ye&&Jo.styleTransforms(this,Fe),this.clone=function(){return Qe.cloneProps(new Jo.List(l,Ze,Jo.copy(Qe.originalList,!0),e,i,t,o,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,Ge,Ue,E,Jo.copy(S),B,W,I,M,O,j,L,D,_,R,Y,X,N,H,V,G,U,q,Q,Z,K,J,$,ee,te,oe,ne,re,ie,le,ae,se,ce,ue,de,he,pe,ge,fe,me,ze,ye,be,ve,we,Ce,xe,ke,Te,Ae,Pe,Ee,Se,Be,We,Ie,Me,Oe,je,Le,De,_e,Re,Ye,this.group,Ne))},this.dispose=function(e,t,o){return Qe.stageToggleEvent&&dt.off("stagemousedown",Qe.stageToggleEvent),Qe.organizer&&Qe.organizer.dispose(),this.zimWindow_dispose(),!0}},Jo.extend(Jo.List,Jo.Window,["clone","dispose"],"zimWindow",!1),Jo.List.scrollUp=function(e,t){e.scrollInt&&e.scrollInt.clear(),e.scrollInt=Jo.interval(.01,function(){e.dropReticle.parent&&e.dropReticle.removeFrom(),e.vertical?(e.scrollY+=t,0<e.scrollY&&(e.scrollY=0,e.scrollInt.clear())):(e.scrollX+=t,0<e.scrollX&&(e.scrollX=0,e.scrollInt.clear()))},null,null,null,"seconds")},Jo.List.scrollDown=function(e,t){e.scrollInt&&e.scrollInt.clear(),e.scrollInt=Jo.interval(.01,function(){e.dropReticle.parent&&e.dropReticle.removeFrom(),e.vertical?(e.scrollY-=t,e.scrollY<-e.scrollYMax&&(e.scrollY=-e.scrollYMax,e.scrollInt.clear())):(e.scrollX-=t,e.scrollX<-e.scrollXMax&&(e.scrollX=-e.scrollXMax,e.scrollInt.clear()))},null,null,null,"seconds")},Jo.List.doDropOver=function(e,a,s,c){var u;Jo.loop(e,function(e){if("List"==e.type){if(u)return e.scrollInt&&e.scrollInt.clear(),e.dropReticle.removeFrom(),void(e.dropReticleIndex=null);if(e.vertical?0<e.scrollYMax&&(a.x>e.zgb.x&&a.x<e.zgb.x+e.zgb.width?a.y<e.zgb.y?(a.y>e.zgb.y-50?Jo.List.scrollUp(e,c):a.y>e.zgb.y-80&&Jo.List.scrollUp(e,1.5*c),u=!0):a.y>e.zgb.y+e.zgb.height?(a.y<e.zgb.y+e.zgb.height+50?Jo.List.scrollDown(e,c):a.y<e.zgb.y+e.zgb.height+80&&Jo.List.scrollDown(e,1.5*c),u=!0):e.scrollInt&&e.scrollInt.clear():e.scrollInt&&e.scrollInt.clear()):0<e.scrollXMax&&(a.y>e.zgb.y&&a.y<e.zgb.y+e.zgb.height?a.x<e.zgb.x?(a.x>e.zgb.x-50?Jo.List.scrollUp(e,c):a.x>e.zgb.x-80&&Jo.List.scrollUp(e,1.5*c),u=!0):a.x>e.zgb.x+e.zgb.width?(a.x<e.zgb.x+e.zgb.width+50?Jo.List.scrollDown(e,c):a.x<e.zgb.x+e.zgb.width+80&&Jo.List.scrollDown(e,1.5*c),u=!0):e.scrollInt&&e.scrollInt.clear():e.scrollInt&&e.scrollInt.clear()),e.hitTestReg(a)){u=!0;var t,o,n,r=e.tabs.globalToLocal(a.x,a.y),i=e.tabs.getObjectUnderPoint(r.x,r.y,1);if(i){s=i;var l=e.items.includes(s);if(zot(i.znum))for(;s.parent;){if(e.items.includes(s.parent)){l=!0,i=s.parent;break}s=s.parent}l&&(n=i.boundsToGlobal(),e.vertical?a.y>n.y+n.height/2?(t=n.y+n.height+e.spacing*e.zgs/2)>e.zgb.y&&t<e.zgb.y+e.zgb.height&&(e.dropReticle.loc(n.x+n.width/2,t),e.dropReticleIndex=i.znum+1):(t=n.y-e.spacing*e.zgs/2)>e.zgb.y&&t<e.zgb.y+e.zgb.height&&(e.dropReticle.loc(n.x+n.width/2,t),e.dropReticleIndex=i.znum):a.x>n.x+n.width/2?(o=n.x+n.width+e.spacing*e.zgs/2)>e.zgb.x&&o<e.zgb.x+e.zgb.width&&(e.dropReticle.loc(o,n.y+n.height/2),e.dropReticleIndex=i.znum+1):(o=n.x-e.spacing*e.zgs/2)>e.zgb.x&&o<e.zgb.x+e.zgb.width&&(e.dropReticle.loc(o,n.y+n.height/2),e.dropReticleIndex=i.znum))}else 0<e.items.length?(n=e.items[e.items.length-1].boundsToGlobal(),e.vertical?a.y>n.y+n.height?(t=n.y+n.height+e.spacing*e.zgs/2,e.dropReticle.loc(e.zgb.x+e.zgb.width/2,t),e.dropReticleIndex=e.items.length):(e.dropReticle.removeFrom(),e.dropReticleIndex=null):a.x>n.x+n.width?(o=n.x+n.width+e.spacing*e.zgs/2,e.dropReticle.loc(o,e.zgb.y+e.zgb.height/2),e.dropReticleIndex=e.items.length):(e.dropReticle.removeFrom(),e.dropReticleIndex=null)):(e.vertical?(t=e.zgb.y+e.spacing*e.zgs/2,e.dropReticle.loc(e.zgb.x+e.zgb.width/2,t)):(o=e.zgb.x+e.spacing*e.zgs/2,e.dropReticle.loc(o,e.zgb.y+e.zgb.height/2)),e.dropReticleIndex=0)}else e.dropReticle.removeFrom(),e.dropReticleIndex=null}})},Jo.List.makeBase=function(e,t,o,n){zot(n)&&(n=Jo.dark),e.backing=new Jo.Rectangle(e.width,e.height,n).center(e),"Label"==t.type?e.label=t:e.label=new Jo.Label(t,null,null,Jo.white),e.text=e.label.text,e.label.center(e).loc(o)},Jo.List.slider=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p){var g;if(g=zob(Jo.List.slider,arguments,"label, min, max, val, call, step, decimals, obj, property, paddingLeft, paddingRight, factor, offset, backgroundColor"))return g;var f=new Jo.Container(620,100);return f.type="ListItem",f.listItem="Slider",f.call=r,zot(l)&&(l=0),zot(c)&&(c=20),zot(u)&&(u=30),zot(d)&&(d=1),zot(h)&&(h=0),Jo.List.makeBase(f,e,c,p),f.slider=new Jo.Slider({inside:!0,barWidth:40,barLength:150,barColor:Jo.blue,min:t,max:o,step:i}).sca(1.5).center(f).mov(20).change(function(){f.stepper.value=Jo.decimals(h+f.slider.value*d,l),a&&s&&(a[s]=f.slider.value),f.call&&"function"==typeof f.call&&f.call(f.slider.value,f.parent),f.slider.stage&&f.slider.stage.update()}),zot(n)||(f.slider.value=n),f.stepper=new Jo.Stepper({corner:0,arrows:!1,stepperType:"number",min:h+t*d,max:h+o*d,step:i}).center(f).pos(u,null,!0).change(function(){f.slider.value=f.stepper.value/(d||1)-h,a&&s&&(a[s]=f.slider.value),f.call&&"function"==typeof f.call&&f.call(f.slider.value,f.parent),f.stepper.stage&&f.stepper.stage.update()}),zot(n)||(f.stepper.value=h+n*d),f},Jo.List.checkBox=function(e,t,o,n,r,i,l,a){var s;if(s=zob(Jo.List.checkBox,arguments,"label, checked, call, obj, property, paddingLeft, paddingRight, backgroundColor"))return s;var c=new Jo.Container(620,100);return c.type="ListItem",c.listItem="CheckBox",c.call=o,zot(i)&&(i=20),zot(l)&&(l=30),Jo.List.makeBase(c,e,i,a),c.checkBox=new Jo.CheckBox({startChecked:t,label:""}).sca(1.2).center(c).pos(256+l,null,!0).change(function(){n&&r&&(n[r]=c.checkBox.checked),c.call&&"function"==typeof c.call&&c.call(c.checkBox.checked,c.parent),c.checkBox.stage&&c.checkBox.stage.update()}),c},Jo.List.colorPicker=function(e,t,o,n,r,i,l,a,s){var c;if(c=zob(Jo.List.colorPicker,arguments,"label, color, picker, call, obj, property, paddingLeft, paddingRight, backgroundColor"))return c;var u=new Jo.Container(620,100);return u.type="ListItem",u.listItem="ColorPicker",u.call=n,zot(l)&&(l=20),zot(a)&&(a=30),Jo.List.makeBase(u,e,l,s),zot(t)&&(t=Jo.pink),u.colorPicker=o||new Jo.ColorPicker({alphaPicker:!1,selectedColor:t}),u.swatch=new Jo.Rectangle(132,66,t,Jo.lighter,5).center(u).pos(270,null,!0).cur(),u.swatch.on("mousedown",function(){u.colorPicker.selectedColor=u.swatch.color,u.colorPicker.show()}),u.colorLabel=new Jo.Label(u.swatch.color.toUpperCase(),40,null,Jo.light).center(u).pos(a,null,!0),u.colorPicker.on("close",function(){var e=u.colorPicker.stage;u.colorPicker.hide(),e&&e.update()}),u.colorPicker.on("change",function(){var e=u.colorPicker.stage;u.swatch.color=u.colorPicker.selectedColor,u.colorLabel.text=u.swatch.color.toUpperCase(),u.colorPicker.hide(),r&&i&&(r[i]=u.colorPicker.selectedColor),u.call&&"function"==typeof u.call&&u.call(u.colorPicker.selectedColor,u.parent),e&&e.update()}),u},Jo.List.checkItem=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m){if(z=zob(Jo.List.checkItem,arguments,"label, size, width, align, paddingH, paddingV, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit"))return z;var z=Jo.getStyle("CheckBox",f,m);zot(t)&&(t=null!=z.size?z.size:20);m=Jo.getStyle("List",f,m);zot(o)&&(o=300),zot(r)&&(r=10),zot(i)&&(i=10),zot(n)&&(n=null!=m.align?m.align:"center"),zot(l)&&(l=null!=m.spacing?m.spacing:2),zot(d)&&(d=null!=m.backgroundColor?m.backgroundColor:Jo.tin),zot(h)&&(h=null!=m.rollBackgroundColor?m.rollBackgroundColor:Jo.grey),zot(p)&&(p=null!=m.selectedBackgroundColor?m.selectedBackgroundColor:Jo.charcoal),zot(g)&&(g=null!=m.selectedRollBackgroundColor?m.selectedRollBackgroundColor:Jo.grey),zot(a)&&(a=null!=m.color?m.color:Jo.white),zot(s)&&(s=null!=m.rollColor?m.rollColor:a),zot(c)&&(c=null!=m.selectedColor?m.selectedColor:a),zot(u)&&(u=null!=m.selectedRollColor?m.selectedRollColor:s);var y=new Jo.Container;return y.type="CheckItem",e=zik(e),s=zik(s),c=zik(c),h=zik(h),y.checkBox=new Jo.CheckBox({size:t,label:e,color:a,tap:!0}),y.backing=new Jo.Rectangle(o-2*l,y.checkBox.height+2*i,d).addTo(y),y.checkBox.center(y),"center"!=n&&"middle"!=n&&y.checkBox.pos(r,null,"right"==n),y.backing.tap({call:function(){y.checkBox.toggle(),y.zimOut()},mobileUp:!0}),y.checkBox.change(function(){y.zimOut()}),y.zimOver=function(){y.backing.color=y.checkBox.checked?g:h,y.checkBox.label.color=y.checkBox.checked?u:s,y.stage&&y.stage.update()},y.zimOut=function(){y.backing.color=y.checkBox.checked?p:d,y.checkBox.label.color=y.checkBox.checked?c:a,y.stage&&y.stage.update()},y.backing.on("mouseover",y.zimOver),y.checkBox.on("mouseover",y.zimOver),y.backing.on("mouseout",y.zimOut),y.checkBox.on("mouseout",y.zimOut),y},Jo.Stepper=function(o,e,t,n,r,i,l,s,a,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y){var X;if(X=zob(Jo.Stepper,arguments,"list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, index, value, arrowColor, arrowScale, selectedIndex, currentValue, style, group, inherit",this))return X;z_d("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=R;R=!1===_?{}:Jo.getStyle(this.type,this.group,Y);zot(o)&&(o=null!=R.list?R.list:[]),zot(e)&&(e=null!=R.width?R.width:100),zot(t)&&(t=null!=R.backgroundColor?R.backgroundColor:Jo.white),zot(n)&&(n=null!=R.borderColor?R.borderColor:null),zot(r)&&(r=null!=R.borderWidth?R.borderWidth:null),n<0||r<0?n=r=null:null!=n&&null==r&&(r=1),zot(l)&&(l=null!=R.color?R.color:Jo.grey),zot(i)&&(i=null!=R.label?R.label:""),"string"!=typeof i&&"number"!=typeof i||(i=new Jo.Label({text:i,size:null!=R.size?2*R.size:40,color:l,align:null!=R.align?R.align:"center",valign:null!=R.valign?R.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}).loc(0,0)),zot(s)&&(s=null!=R.vertical&&R.vertical),zot(a)&&(a=null==R.arrows||R.arrows),zot(c)&&(c=null!=R.corner?R.corner:16),zot(u)&&(u=null!=R.shadowColor?R.shadowColor:"rgba(0,0,0,.3)"),zot(d)&&(d=null!=R.shadowBlur?R.shadowBlur:14),zot(h)&&(h=null!=R.continuous&&R.continuous),zot(p)&&(p=null==R.display||R.display),zot(g)&&(g=null==R.press||R.press),zot(f)&&(f=null==R.hold||R.hold);var N=$o(m);zot(m)&&(m=null!=R.holdDelay?R.holdDelay:"s"==N?.4:400),zot(z)&&(z=null!=R.holdSpeed?R.holdSpeed:"s"==N?.2:200),en(z,N),zot(y)&&(y=null==R.draggable||R.draggable),(zot(b)||b<=0)&&(b=null!=R.dragSensitivity?R.dragSensitivity:.1),zot(v)&&(v=null!=R.dragRange?R.dragRange:200),zot(w)&&(w=null!=R.stepperType?R.stepperType:0<o.length?"list":"number"),zot(C)&&(C=null!=R.min?R.min:0),zot(x)&&(x=null!=R.max?R.max:10),zot(k)&&(k=null!=R.step?R.step:1),zot(T)&&(T=null!=R.step2?R.step2:k),zot(A)&&T!=k&&"number"==w&&(A=null==R.arrows2||R.arrows2),zot(P)&&(P=null!=R.arrows2Scale?R.arrows2Scale:.5),zot(E)&&(E=null==R.keyEnabled||R.keyEnabled),zot(S)&&(S=null==R.keyArrows||R.keyArrows),zot(B)&&(B=null==R.rightForward||R.rightForward),zot(W)&&(W=null!=R.downForward?R.downForward:"number"!=w),zot(O)&&(O=null!=R.arrowColor?R.arrowColor:t),zot(j)&&(j=null!=R.arrowScale?R.arrowScale:1);var F=this;t=zik(t);var H,V,G,U=k,q=1;function Q(e){e=String(e).split(".")[1];return e=e?e.length:0}"number"==w?(C=Number(C),x=Number(x),isNaN(C)&&(C=0),isNaN(x)&&(x=100),H=x<C?(q=-1,oe=x,x=C,C=oe,x):C,this.min=C,this.max=x,C<0&&0<x&&(H=0),k=Math.abs(k),V=Math.max(Q(k),Q(T))):"letter"==w?(o="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof C&&(C="A"),"string"!=typeof x&&(x="Z"),C=C.substr(0,1).toUpperCase(),x=x.substr(0,1).toUpperCase(),(ne=o.indexOf(C))<0&&(C="A",ne=0),(re=o.indexOf(x))<0&&(x="Z",re=o.length),re<ne&&(o.reverse(),ne=o.length-1-ne,re=o.length-1-re),o=o.splice(ne,re-ne+1)):w="list";var Z,K,J,$,ee,te,oe,ne,re,ie,le,ae,se,ce,ue=0,de=0;function he(r,i,l,e,t){var a;f&&(0==(ie=e)&&(ie=1),0==(le=t)&&(le=1),y||(b=1),e=m*("s"==N?1e3:1),a=t=z*("s"==N?1e3:1),ae=new Jo.Proportion(0,v,t,t*b),Z=setTimeout(function(){!function n(){K=setTimeout(function(){var e,t,o=r;y&&(e=Math.abs(ue-ie),t=Math.abs(de-le),s?(i||l||(e=0),l&&(t=0)):(i||l||(t=0),l&&(e=0)),(10<=e||10<=t)&&(a=t<e?(U=s?T:k,o=0<ue-ie?1:-1,ae.convert(Math.abs(ie-ue))):(U=s?k:T,o=0<de-le?1:-1,"number"!=w&&W||(o*=-1),ae.convert(Math.abs(le-de))))),ge(o),n()},a)}()},e))}function pe(){F.zimAccessibility&&F.zimAccessibility.aria||(clearTimeout(Z),clearTimeout(K))}function ge(e){if("number"==w){var t=H=Number(H);H+=Number(U*e*q),H=Jo.decimals(H,V),h?H>F.max?H=F.min:H<F.min&&(H=F.max):(H>F.max?(H=1==k?F.max:t,p&&se.cur("default")):p&&se.cur("pointer"),H<F.min&&(H=1==k?F.min:t))}else{if(e=I+e,h)e>o.length-1&&(e=0),e<0&&(e=o.length-1);else{if(e>o.length-1)return void(p&&se.cur("default"));if(p&&se.cur("pointer"),e<0)return}I=e}me("number"==w?H:o[I],"number"==w?H:I),F.value!=ce&&F.dispatchEvent("change"),ce=F.value}function fe(){F.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function me(e,t){I=t,p&&("number"==w&&0!=e&&0<V&&(e=Jo.decimals(e,V,!0)),i.text=e,i.center(F)),a&&(J.alpha=1,$.color=O,J.cur("pointer"),ee.alpha=1,te.color=O,ee.cur("pointer"),h||(!1!==B?"number"==w?(I==F.min&&(0<q?ze:ye)(),I==F.max&&(0<q?ye:ze)()):(0==I&&(s?ye:ze)(),I==o.length-1&&(s?ze:ye)()):"number"==w?(I==F.min&&(0<q?ye:ze)(),I==F.max&&(0<q?ze:ye)()):(0==I&&(s?ze:ye)(),I==o.length-1&&(s?ye:ze)()))),!ee||Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!ee.stage?!i||Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!i.stage||i.stage.update():ee.stage.update(),F.zimAccessibility&&F.zimAccessibility.changeTitle(F,null,!0)}function ze(){a&&(J.alpha=.8,$.color=Jo.fog,J.cur("default"))}function ye(){a&&(ee.alpha=.8,te.color=Jo.fog,ee.cur("default"))}y&&this.on("mousedown",function(e){F.zimAccessibility&&F.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,ue=e.rawX/Jo.scaX,de=e.rawY/Jo.scaY,G=this.stage.on("stagemousemove",function(e){ue=e.rawX/Jo.scaX,de=e.rawY/Jo.scaY}))},null,!0),(this.label=i).mouseChildren=!1,i.mouseEnabled=!1,a&&(J=this.containerPrev=new Jo.Container({style:!1}),this.addChild(J),$=this.arrowPrev=new Jo.Triangle(60,48,48,O,null,null,null,null,null,null,null,!1).sca(j),-1!=u&&0<d&&(J.shadow=new createjs.Shadow(u,3,3,d)),J.addChild($),J.expand(),J.cur("pointer"),J.on("mousedown",function(e){var t;F.zimAccessibility&&F.zimAccessibility.aria||(U=k,ge(t=s?W?1:-1:B?-1:1),he(t,null,null,e.stageX/Jo.scaX,e.stageY/Jo.scaY))}),f&&J.on("pressup",pe),s?(J.rotation=180,J.x=e/2,J.y=p?J.height+15+60+J.height/2+15:2*J.height):(J.rotation=-90,J.x=J.height/2,J.y=30)),p?((se=this.textBox=new Jo.Rectangle(e,60,t,n,r,c,null,null,null,!1)).cur("pointer"),this.addChild(se),-1!=u&&0<d&&(se.shadow=new createjs.Shadow(u,3,3,d)),a&&(s?a&&(se.y=$.height+15):a&&(se.x=$.height+15)),this.addChild(i),0<o.length&&(I=0,i.text=o[I]),i.center(F),se.on("mousedown",function(e){F.zimAccessibility&&F.zimAccessibility.aria||(ce=F.value,g&&ge(1),he(1,!0,null,e.stageX/Jo.scaX,e.stageY/Jo.scaY))}),se.on("pressup",function(){F.zimAccessibility&&F.zimAccessibility.aria})):0<o.length&&(I=0),a&&(ee=this.containerNext=new Jo.Container({style:!1}),this.addChild(ee),te=this.arrowNext=new Jo.Triangle(60,48,48,O,null,null,null,null,null,null,null,!1).sca(j),-1!=u&&0<d&&(ee.shadow=new createjs.Shadow(u,3,3,d)),ee.addChild(te),ee.expand(),ee.cur("pointer"),ee.on("mousedown",function(e){var t;F.zimAccessibility&&F.zimAccessibility.aria||(U=k,ge(t=s?W?-1:1:B?1:-1),he(t,null,null,e.stageX/Jo.scaX,e.stageY/Jo.scaY))}),f&&ee.on("pressup",pe),s?(ee.rotation=0,ee.x=e/2,ee.y=ee.getBounds().height/2):(ee.rotation=90,ee.x=p?se.x+se.getBounds().width+ee.getBounds().height/2+15:J.x+J.getBounds().width,ee.y=30)),f&&p&&se.on("pressup",pe),A&&(oe=this.prev2=new Jo.Container({style:!1}),re=this.arrowPrev2=new Jo.Triangle(60,48,48,"rgba(0,0,0,.2)",O,2,null,null,null,null,null,!1),oe.addChild(re),oe.expand(),oe.cur("pointer"),oe.sca(P),oe.alpha=.5,oe.on("mousedown",function(e){var t;F.zimAccessibility&&F.zimAccessibility.aria||(U=T,ge(t=s?B?-1:1:W?1:-1),he(t,null,!0,e.stageX/Jo.scaX,e.stageY/Jo.scaY))}),f&&oe.on("pressup",pe),ne=this.next2=new Jo.Container({style:!1}),re=this.arrowNext2=new Jo.Triangle(60,48,48,"rgba(0,0,0,.2)",O,2,null,null,null,null,null,!1),ne.addChild(re),ne.expand(),ne.cur("pointer"),ne.sca(P),ne.alpha=.5,ne.on("mousedown",function(e){var t;F.zimAccessibility&&F.zimAccessibility.aria||(U=T,ge(t=s?B?1:-1:W?-1:1),he(t,null,!0,e.stageX/Jo.scaX,e.stageY/Jo.scaY))}),f&&ne.on("pressup",pe),s?(oe.y=this.height/2,oe.x=-oe.width/2-15*Math.max(.2,Math.min(1,P)),oe.rotation=270,ne.y=this.height/2,ne.x=this.width+ne.width/2+15*Math.max(.2,Math.min(1,P)),ne.rotation=90):(ne.x=this.width/2,ne.y=-ne.height/2-15*Math.max(.2,Math.min(1,P)),ne.rotation=0,oe.x=this.width/2,oe.y=this.height+oe.height/2+15*Math.max(.2,Math.min(1,P)),oe.rotation=180),this.addChild(oe,ne)),Object.defineProperty(this,"stepperArray",{get:function(){if("number"==w){o=[];for(var e=F.min;e<=F.max;e+=Math.min(k,T))o.push(Number(Jo.decimals(e,V,null,!1)));o.push(x)}return o},set:function(e){o=e;e=F.index;F.index=e}}),Object.defineProperty(this,"min",{get:function(){return C},set:function(e){var t;"number"==w?(F.value<e&&(F.value=e),C=e,t=F.index,F.index=t):C=e}}),Object.defineProperty(this,"max",{get:function(){return x},set:function(e){var t;"number"==w?(F.value>e&&(F.value=e),x=e,t=F.index,F.index=t):x=e}}),me("number"==w?H:o[I],"number"==w?H:I),Object.defineProperty(this,"index",{get:function(){return"number"==w?F.stepperArray.indexOf(F.value):I},set:function(e){zot(e)||("number"==w?(I=Math.min(F.stepperArray.length-1,Math.max(0,e)),me(H=F.stepperArray[I],H)):(e=Math.min(o.length-1,Math.max(0,e)),me(o[I=e],I)))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return this.index},set:function(e){this.index=e}}),Object.defineProperty(this,"value",{get:function(){return"number"==w?Number(H):o[I]},set:function(e){if(!zot(e))if("number"==w){if(e=Number(e),F.max>F.min){if(e>F.max||e<F.min)return}else if(e<F.max||e>F.min)return;var t=F.stepperArray.indexOf(e);t<0||(I=t,me(H=Number(F.stepperArray[I]),H))}else-1<o.indexOf(e)&&(e=o.indexOf(e))!=F.index&&me(o[I=e],I)}}),Object.defineProperty(this,"currentValue",{get:function(){return this.value},set:function(e){this.value=e}}),Object.defineProperty(this,"valueEvent",{get:function(){return F.value},set:function(e){String(e)!=String(F.value)&&(F.value=e,F.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return h},set:function(e){h=e,"number"==w?me(H,H):me(o[F.index],F.index)}}),this._enabled=!0,Object.defineProperty(F,"enabled",{get:function(){return F._enabled},set:function(e){zt(F,e),e?("number"==w?me(H,H):me(o[F.index],F.index),WW.addEventListener("keydown",F.keyDownEvent)):(ze(),ye(),WW.removeEventListener("keydown",F.keyDownEvent),p&&(i.mouseChildren=!1),p&&(i.mouseEnabled=!1)),!ee||Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!ee.stage?!i||Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!i.stage||i.stage.update():ee.stage.update()}}),null!=WW.KEYFOCUS&&(Jo.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Jo.KEYFOCUS==F},set:function(){Jo.KEYFOCUS=F}}),Jo.KEYFOCUS||fe(),this.on("mousedown",function(){fe()});var be=!0,ve="";this.on("mousedown",function(){be=!0,ve="",F.zimAccessibility&&F.zimAccessibility.aria||(F.focus=!0,0)}),this.keyDownEvent=function(e){if(F.stage&&(F.zimAccessibility&&F.focus||!F.zimAccessibility&&F.keyFocus)){var t,o=(e=e||event).keyCode;if(S&&37<=o&&o<=40&&(r=B?39:37,i=W?38:40,n=B?37:39,o==(t=W?40:38)||o==r?(U=s&&o==t||!s&&o==r?k:T,ge(1)):o!=i&&o!=n||(U=s&&o==i||!s&&o==n?k:T,ge(-1))),E)if("number"==w){var n,r=null,i=null;if(8==o&&((n=String(ve).split("")).pop(),r=n.pop(),ve=n.join("")),!e.shiftKey&&48<=o&&o<=57?r=o-48:96<=o&&o<=105?r=o-96:190==o?(ve=String(ve)+".",i=!0):173==o||189==o?(F.value=-1*F.value,F.value!=ce&&F.dispatchEvent("change"),ce=F.value,0):46==o&&(be=!0,ve=""),zot(r)&&zot(i))return be=!0,void(ve="");zot(r)||(ve=be?(be=!1,r):r=Number(ve+""+r),r<C||x<r||(F.value=r,F.value!=ce&&F.dispatchEvent("change"),ce=F.value))}else be=!0,ve="",F.value=String.fromCharCode(e.keyCode),F.value!=ce&&F.dispatchEvent("change"),ce=F.value}},WW.addEventListener("keydown",this.keyDownEvent),this.next=function(){ge(1)},this.prev=function(){ge(-1)},zot(L)&&zot(R.selectedIndex)||!zot(I)||!zot(R.index)||(I=zot(L)?R.selectedIndex:L),zot(I)&&(I=null!=R.index?R.index:0),F.index=I,zot(D)&&zot(R.currentValue)||!zot(M)||!zot(R.value)||(M=zot(D)?R.currentValue:D),zot(M)&&(M=null!=R.value?R.value:null),zot(M)||(F.value=M),!1!==_&&Jo.styleTransforms(this,R),this.clone=function(){return F.cloneProps(new Jo.Stepper(o,e,t,n,r,i.clone(),l,s,a,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,this.group,Y))},this.dispose=function(e,t,o){return WW.removeEventListener("keydown",F.keyDownEvent),F.removeAllEventListeners(),F.stage&&F.stage.off(G),o||this.zimContainer_dispose(!0),J=this.containerPrev=$=this.arrowPrev=null,ee=this.containerNext=te=this.arrowNext=null,!(se=this.textBox=i=this.label=null)}},Jo.zut=function(e){if(zot(e)||!e.key)return!0;Jo.async("https://zimjs.com/gamdata.php?id="+e.key+"&player="+e.player+"&score="+e.score+"&reverse="+e.info.reverse+"&total="+e.info.total+"&allowZero="+e.info.allowZero,e.info.type)},Jo.extend(Jo.Stepper,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Slider=function(n,r,t,i,o,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,e,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,F,H){if(ee=zob(Jo.Slider,arguments,"min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, value, expand, expandVertical, expandBar, expandBarVertical, useLabels, labelMargin, labelColor, range, rangeColor, rangeWidth, rangeMin, rangeMax, rangeAve, addZero, currentValue, style, group, inherit",this))return ee;z_d("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=F;var V,G=!1===N?{}:Jo.getStyle(this.type,this.group,H);if(zot(n)&&(n=null!=G.min?G.min:0),zot(r)&&(r=null!=G.max?G.max:10),r-n!=0){zot(v)&&(v=null!=G.sound&&G.sound),zot(t)&&(t=null!=G.step?G.step:0),zot(O)&&(O=null!=G.range&&G.range),zot(i)&&(i=null!=G.button?G.button:O?"circle":v?"aztec":null),i&&"Button"==i.type&&(i=i.clone()),zot(o)&&(o=null!=G.barLength?G.barLength:300),zot(l)&&(l=null!=G.barWidth?G.barWidth:3),zot(a)&&(a=null!=G.barColor?G.barColor:v?Jo.lighter:Jo.granite),zot(s)&&(s=null!=G.vertical?G.vertical:!!v),zot(c)&&(c=null!=G.useTicks?G.useTicks:!!v),zot(d)&&(d=null!=G.tickStep?G.tickStep:t||(c||v?(r-n)/40:0)),zot(h)&&(h=null!=G.semiTicks?G.semiTicks:d?3:0),zot(u)&&(u=null!=G.tickColor?G.tickColor:v?Jo.tin:a),zot(p)&&(p=null!=G.tickScale?G.tickScale:v?1.25:1),zot(g)&&(g=null!=G.semiTickScale?G.semiTickScale:1),zot(f)&&(f=null!=G.accentSize?G.accentSize:v?10:0),zot(m)&&(m=null!=G.accentOffset?G.accentOffset:v?-(f+l)/2:0),zot(z)&&(z=null!=G.accentColor?G.accentColor:Jo.pink),zot(y)&&(y=null!=G.accentBackgroundColor?G.accentBackgroundColor:v?Jo.blue:Jo.clear),zot(b)&&(b=null!=G.accentDifference?G.accentDifference:-.5),zot(w)&&(w=null!=G.inside&&G.inside),zot(C)&&(C=null==G.keyArrows||G.keyArrows),zot(k)&&(k=null==G.keyArrowsH||G.keyArrowsH),zot(T)&&(T=null==G.keyArrowsV||G.keyArrowsV),zot(x)&&(x=null!=G.keyArrowsStep?G.keyArrowsStep:(r-n)/100),zot(A)&&(A=null!=G.damp&&G.damp),zot(X)&&zot(G.currentValue)||!zot(e)||!zot(G.value)||(e=zot(X)?G.currentValue:X),zot(e)&&(e=null!=G.value?G.value:null),zot(P)&&(P=null!=G.expand?G.expand:Jo.mobile()?10:null),zot(E)&&(E=null!=G.expandVertical?G.expandVertical:P),zot(S)&&(S=null!=G.expandBar?G.expandBar:null),zot(B)&&(B=null!=G.expandBarVertical?G.expandBarVertical:P),zot(W)&&(W=null!=G.useLabels&&G.useLabels),zot(I)&&(I=null!=G.labelMargin?G.labelMargin:20),zot(M)&&(M=null!=G.labelColor?G.labelColor:Jo.dark),zot(j)&&(j=null!=G.rangeColor?G.rangeColor:purple),zot(L)&&(L=null!=G.rangeWidth?G.rangeWidth:l+4),zot(D)&&(D=null!=G.rangeMin?G.rangeMin:e),zot(_)&&(_=null!=G.rangeMax?G.rangeMax:(r-n)/2),zot(R)&&(R=null!=G.rangeAve?G.rangeAve:null),zot(Y)&&(Y=null!=G.addZero&&G.addZero);var U=this;this.update=function(){};var q=function(){return arguments}(n,r,t,e);this.veeObj={min:q[0],max:q[1],step:q[2],value:q[3]},n=Jo.Pick.choose(n),r=Jo.Pick.choose(r);var Q,Z=t=Jo.Pick.choose(t);e=Jo.Pick.choose(e),f&&(U.accentBacking=new Jo.Rectangle(o-.25,f+b,y).addTo(this).rot(s?90:0).mov(s?-m-l/2+b/2:.25,s?0:m+l/2-b/2),Q=U.accent=new Jo.Rectangle(o,f,z).sca(0,1).rot(s?-90:0).mov(s?-m-f-l/2:0,s?o:m+l/2).addTo(this));var K,J,$,ee,te,oe=!(!zot(G.backing)&&"Pattern"!=G.backing.type);!zot(i)&&"string"!=typeof i||(K=30,J=40,s&&(K=50,J=40),"pill"!=i&&"aztec"!=i&&"circle"!=i&&"grip"!=i||("pill"==i?$={width:s?40:18,height:s?18:40,borderColor:Jo.tin,borderWidth:3,corner:8}:"aztec"==i?($={width:K=null!=G.width?G.width:.9*Math.max(K,J),height:J=null!=G.height?G.height:.6*Math.min(K,J),backing:Ie(null!=G.backgroundColor?G.backgroundColor:Jo.lighter,K,J).rot(s?0:-90),rollBacking:Ie(null!=G.rollBackgroundColor?G.rollBackgroundColor:Jo.white,K,J).rot(s?0:-90)},G.borderWidth=0,G.borderColor=0):"circle"==i&&(K=null!=G.width?G.width:30,J=null!=G.height?G.height:30,$={width:K,height:K,corner:null!=G.corner?G.corner:K/2}),U.buttonType=i),ee=null!=G.borderColor?G.borderColor:$?$.borderColor:oe?Jo.granite:null,F=null!=G.backgroundColor?G.backgroundColor:Jo.white,i=new Jo.Button({width:null!=G.width?G.width:$?$.width:K,height:null!=G.height?G.height:$?$.height:J,label:"",backgroundColor:F,rollBackgroundColor:null!=G.rollBackgroundColor?G.rollBackgroundColor:O?F:zot(G.backgroundColor)||G.backgroundColor==Jo.white?Jo.moon:G.backgroundColor.lighten(.2),borderColor:ee,rollBorderColor:null!=G.rollBorderColor?G.rollBorderColor:ee,borderWidth:null!=G.borderWidth?G.borderWidth:$?$.borderWidth:oe?1:null,corner:null!=G.corner?G.corner:$?$.corner:0,backing:null!=G.backing?G.backing.clone():$?$.backing:null,rollBacking:null!=G.rollBacking?G.rollBacking.clone():$?$.rollBacking:null,shadowColor:null!=G.shadowColor?G.shadowColor:O?-1:null,shadowBlur:null!=G.shadowBlur?G.shadowBlur:null,style:!1}),"circle"==U.buttonType?(i.scaleY=J/K,s||i.rot(-90)):"grip"==U.buttonType&&Jo.loop([1,1,1],function(e,t,o){s?new Jo.Line(.62*i.width,e,i.borderColor||Jo.grey).pos(0,.4*i.height/2+(t+1)*(.6*i.height)/(o+1),Jo.CENTER,Jo.TOP,i):new Jo.Line(.62*i.height,e,i.borderColor||Jo.grey).rot(90).pos(.4*i.width/2+(t+1)*(.6*i.width)/(o+1),0,Jo.LEFT,Jo.CENTER,i)})),i.rollPersist=!0,zot(P)&&zot(E)||i.expand(P,E),s?(te=i.width,w?(ce=o,this.setBounds(0,0,te,ce)):(ce=o+i.height,this.setBounds(-i.width/2,-i.height/2,te,ce))):(ce=Math.max(i.height,l),w?(te=o,this.setBounds(0,0,te,ce)):(te=o+i.width,this.setBounds(-i.width/2,-i.height/2,te,ce)));var ne,re,ie,le,ae,se,ce,ue,de,he,pe,ge,fe,me,ze,ye,be,ve,we,Ce=n,xe=0;if(this.button=i,this.cur("pointer"),c&&(le=this.ticks=new Jo.Shape({style:!1}),this.addChild(le),(ae=le.graphics).ss(1).s(u),se=Math.round((r-n)/(d||t)),ce=(r-n)/se,d?(ce!=d&&zon&&zogy("Slider() - non-divisible step ("+d+") adjusted to "+ce),d=ce):(ce!=t&&zon&&zogy("Slider() - non-divisible step ("+t+") adjusted to "+ce),t=ce),ue=w?(o-(s?i.height:i.width))/Math.abs(se):o/Math.abs(se)),s){if(de=w?i.height/2:0,ne=this.bar=new Jo.Rectangle(l,o,a,null,null,null,null,null,null,!1),S?ne.expand(S,B):ne.expand(20,0),ne.centerReg(this),i.centerReg(this),ie=ne.getBounds(),re=new createjs.Rectangle(ne.x,ie.y+de,0,ie.height-2*de),c){for(W&&(he=U.labels=(new Jo.Container).addTo(U)),pe=0;pe<=Math.abs(se);pe++)fe=(ge=pe%(h+1)==0)?25*p:15*g,me=de+ue*pe,ae.mt(0,me).lt(fe,me),W&&(h&&ge||!h)&&(ze=Math.max(Jo.countDecimals(Z),Jo.countDecimals(n),Jo.countDecimals(r)),new Jo.Label({text:Jo.decimals(r-(r-n)/Math.abs(se)*pe,ze+1,Y),size:G.size||10,color:M,align:"left",valign:"center"}).centerReg({add:!1}).reg(0).loc(fe+I+2,me-1,he));le.x=ne.x+15}}else if(de=w?i.width/2:0,ne=this.bar=new Jo.Rectangle(o,l,a,null,null,null,null,null,null,!1),S?ne.expand(S,B):ne.expand(0,20),ne.centerReg(this),i.centerReg(this),ie=ne.getBounds(),re=new createjs.Rectangle(ie.x+de,ne.y,ie.width-2*de,0),c){for(W&&(he=U.labels=(new Jo.Container).addTo(U)),pe=0;pe<=Math.abs(se);pe++)fe=de+ue*pe,me=-((ge=pe%(h+1)==0)?25*p:15*g),ae.mt(fe,0).lt(fe,me),W&&(h&&ge||!h)&&(ze=Math.max(Jo.countDecimals(Z),Jo.countDecimals(n),Jo.countDecimals(r)),new Jo.Label({text:Jo.decimals(n+(r-n)/Math.abs(se)*pe,ze+1,Y),size:G.size||10,color:M,align:"center",valign:"center"}).centerReg({add:!1}).loc(fe,me-I,he));le.y=ne.y-10}i.x=re.x,i.y=re.y,i.on("mousedown",function(e){V=e.target.stage,U.focus=!0;e=U.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY);ye=e.x-i.x,be=e.y-i.y,V&&(V.mouseMoveOutside=!0)}),i.on("pressmove",function(e){Oe(e)}),ne.on("mousedown",function(e){V=e.target.stage,be=ye=0,U.zimAccessibility&&U.zimAccessibility.aria||Oe(e)}),A&&(ve=n,we=new Jo.Damp(ve,A),U.ticker=Jo.Ticker.add(function(){ve=we.convert(Ce)})),Object.defineProperty(this,"value",{get:function(){return A?ve:Ce},set:function(e){zot(e)||(n<r?(e<n&&(e=n),r<e&&(e=r)):(n<e&&(e=n),e<r&&(e=r)),Ce=e=Me(e),we&&we.immediate(Ce),xe=s?(i.y=(e-r)/(n-r)*re.height+de,i.y):(i.x=(e-n)/(r-n)*re.width+de,i.x),Q&&We(),Le(),O&&U.update(),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!U.stage||U.stage.update())}}),Object.defineProperty(this,"currentValue",{get:function(){return this.value},set:function(e){this.value=e}}),Object.defineProperty(this,"valueEvent",{get:function(){return A?ve:Ce},set:function(e){e!=U.value&&(U.value=e,U.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return n},set:function(){zon&&zogy("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(){zon&&zogy("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return t},set:function(){zon&&zogy("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return k},set:function(e){k=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return T},set:function(e){T=e}}),null!=WW.KEYFOCUS&&(Jo.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Jo.KEYFOCUS==U},set:function(){Jo.KEYFOCUS=U}}),C&&!Jo.KEYFOCUS&&De(),this.on("mousedown",function(){C&&De()});var ke,Te,Ae,Pe=!1,Ee=!1,Se=!1,Be=!1;this.keyDownEvent=function(e){U.stage&&(U.zimAccessibility&&U.focus||!U.zimAccessibility&&U.keyFocus)&&(37==e.keyCode&&k?Pe=!0:40==e.keyCode&&T?Ee=!0:39==e.keyCode&&k?Se=!0:38==e.keyCode&&T&&(Be=!0),null==U.keyInterval&&(Pe||Ee||Se||Be)&&(_e(),U.keyTimeout=setTimeout(function(){null==U.keyInterval&&(Pe||Ee||Se||Be)&&(U.keyInterval=setInterval(_e,40))},140)))},WW.addEventListener("keydown",this.keyDownEvent),U.keyUpEvent=function(e){37==e.keyCode?Pe=!1:40==e.keyCode?Ee=!1:39==e.keyCode?Se=!1:38==e.keyCode&&(Be=!1),null==U.keyInterval||Pe||Ee||Se||Be||(clearInterval(U.keyInterval),U.keyInterval=null)},WW.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(U,"enabled",{get:function(){return U._enabled},set:function(e){zt(U,e),e?O||(WW.addEventListener("keydown",U.keyDownEvent),WW.addEventListener("keyup",U.keyUpEvent)):O||(WW.removeEventListener("keydown",U.keyDownEvent),WW.removeEventListener("keyup",U.keyUpEvent))}}),zot(e)||(U.value=e),Jo.setSwipe(this,!1),!1!==N&&Jo.styleTransforms(this,G),this.clone=function(e){return U.cloneProps(new Jo.Slider(e||!Jo.isPick(q[0])?U.min:q[0],e||!Jo.isPick(q[1])?U.max:q[1],e||!Jo.isPick(q[2])?U.step:q[2],i.clone(),o,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,e||!Jo.isPick(q[3])?U.value:q[3],P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,this.group,H))},O&&(O=!1,WW.removeEventListener("keydown",U.keyDownEvent),WW.removeEventListener("keyup",U.keyUpEvent),(this.rangeSliderA=this).rangeButtonA=i,(ke=this.rangeSliderB=this.clone().addTo(this)).on("change",function(){U.dispatchEvent("change")}),this.rangeSliderA.value=D,this.rangeSliderB.value=_,Te=this.rangeButtonB=ke.button,WW.removeEventListener("keydown",ke.keyDownEvent),WW.removeEventListener("keyup",ke.keyUpEvent),ke.bar&&ke.bar.dispose(),ke.labels&&ke.labels.dispose(),ke.ticks&&ke.ticks.dispose(),ke.accent&&ke.accent.dispose(),ke.accentBacking&&ke.accentBacking.dispose(),(Ae=this.rangeBar=new Jo.Rectangle(100,L,j).reg(0,L/2).addTo(this).ord(-2).drag({onTop:!1})).on("pressmove",function(){Ae.y=ne.y,Ae.x<0&&(Ae.x=0),Ae.x>ne.width-Ae.width&&(Ae.x=ne.width-Ae.width),ke.value=(Ae.x+Ae.width)/ne.width*(U.max-U.min),U.value=Ae.x/ne.width*(U.max-U.min),U.dispatchEvent("change")}),this.update=function(){Ae.x=Math.min(Te.x,i.x),Ae.widthOnly=Math.abs(Te.x-i.x)},this.bar.noMouse(),i.on("pressmove",this.update),Te.on("pressmove",this.update),this.update(),O=!0,Object.defineProperty(U,"rangeMin",{get:function(){return Math.min(Te.x,i.x)/ne.width*(U.max-U.min)},set:function(e){Te.x<i.x?ke.value=e:U.value=e,U.update()}}),Object.defineProperty(U,"rangeMax",{get:function(){return Math.max(Te.x,i.x)/ne.width*(U.max-U.min)},set:function(e){Te.x>i.x?ke.value=e:U.value=e,U.update()}}),Object.defineProperty(U,"rangeAve",{get:function(){return(Math.min(Te.x,i.x)+Math.abs(Te.x-i.x)/2)/ne.width*(U.max-U.min)},set:function(e){var t=Math.abs(Te.x-i.x),o=(e-U.min)/(U.max-U.min)*ne.width,e=o+t/2;o-t/2<0?i.x<Te.x?(i.x=0,Te.x=i.x+t):(Te.x=U.min,i.x=Te.x+t):e>ne.width?i.x>Te.x?(i.x=ne.width,Te.x=i.x-t):(Te.x=ne.width,i.x=Te.x-t):i.x<Te.x?(i.x=o-t/2,Te.x=o+t/2):(Te.x=o-t/2,i.x=o+t/2),U.update()}}),Object.defineProperty(U,"rangeAmount",{get:function(){return Math.abs(Te.x-i.x)*(U.max-U.min)/ne.width},set:function(e){zogy("ZIM Slider - rangeAmount is read only")}}),zot(R)||(this.rangeAve=R)),this.dispose=function(e,t,o){return WW.removeEventListener("keydown",U.keyDownEvent),WW.removeEventListener("keyup",U.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zogy("ZIM Slider must have a different min and max");function We(){Q.sca((U.value-U.min)/Math.abs(U.max-U.min),1)}function Ie(e,t,o){var n=new Jo.Shape(t,o);return n.f(e).s(null!=G.borderColor?G.borderColor:Jo.tin).ss(null!=G.borderWidth?G.borderWidth:3).mt(2,0).lt(t+2,.2*o).lt(t+2,.8*o).lt(2,o).cp().centerReg({add:!1}),n}function Me(e){return 0==t?e:Math.round(e/t)*t}function Oe(e){var t,o=U.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY),e=(t=o.x-ye,e=o.y-be,o=re,t=Math.max(o.x,Math.min(o.x+o.width,t)),e=Math.max(o.y,Math.min(o.y+o.height,e)),{x:t,y:e});xe=s?(i.x=e.x,Ce=Me((e.y-re.y)/re.height*(n-r)),i.y=re.y+Ce*re.height/(n-r),Ce+=r,i.y!=xe&&U.dispatchEvent("change"),i.y):(Ce=Me((e.x-re.x)/re.width*(r-n)),i.x=re.x+Ce*re.width/(r-n),Ce+=n,i.y=e.y,i.x!=xe&&U.dispatchEvent("change"),i.x),Q&&We(),Le(),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!U.stage||U.stage.update()}function je(e){return 0<e?1:-1}function Le(){U.zimAccessibility&&U.zimAccessibility.changeTitle(U,null,!0)}function De(){U.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function _e(){(Pe||Ee)&&(U.valueEvent-=0<t?t*je(r-n):x*je(r-n)),(Se||Be)&&(U.valueEvent+=0<t?t*je(r-n):x*je(r-n))}},Jo.extend(Jo.Slider,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Selector=function(s,t,o,n,r,i,c,u,d,h,p,g,l,a,f,m,z,y,e,b,v){var w;if(w=zob(Jo.Selector,arguments,"tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingH, paddingV, speed, diagonal, dim, multi, keyArrows, behind, resizeScale, index, liveIndex, selectedIndex, style, group, inherit",this))return w;z_d("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=b;var b=!1===e?{}:Jo.getStyle(this.type,this.group,v),C=$o();zot(s)&&(s=null!=b.tile?b.tile:new Jo.Tile(new Jo.Circle(20,Jo.red),4,4,10,10)),zot(t)&&(t=null!=b.borderColor?b.borderColor:Jo.white),zot(o)&&(o=null!=b.borderWidth?b.borderWidth:2),zot(n)&&(n=null!=b.backgroundColor?b.backgroundColor:"rgba(0,0,0,.1)"),zot(r)&&(r=null!=b.corner?b.corner:10),zot(i)&&(i=null!=b.dashed&&b.dashed),zot(c)&&(c=null!=b.padding?b.padding:s.spacingH/2),zot(u)&&(u=null!=b.paddingV?b.paddingV:s.spacingV/2),zot(d)&&(d=null!=b.speed?b.speed:2),zot(h)&&(h=null!=b.diagonal&&b.diagonal),zot(p)&&(p=null!=b.dim&&b.dim),zot(g)&&(g=null!=b.multi&&b.multi),g&&(d=0),zot(l)&&(l=null==b.keyArrows||b.keyArrows),zot(a)&&(a=null!=b.behind&&b.behind),zot(f)&&(f=null!=b.resizeScale&&b.resizeScale),zot(y)&&zot(b.selectedIndex)||!zot(m)||!zot(b.index)||(m=zot(y)?b.selectedIndex:y),zot(m)&&(m=null!=b.index?b.index:null),zot(z)&&(z=null!=b.liveIndex&&b.liveIndex),this.liveIndex=z;var x=[],k=[];Jo.loop(s.items.length,function(){x.push(zik(t)),k.push(zik(n))});var T,A,P,E,S,B,W=this;zot(m)&&g||(v=zot(A=m)||m<0?0:m,T=s.getChildAt(v),W.currentItem=s.getChildAt(v),zot(m=A)&&(m=null!=b.index?b.index:0)),(A=T||s.getChildAt(0))&&(P=A.width+2*c,E=A.height+2*u),W.tile=s.addTo(W).cur(),g?(B=this.selectors=[],Jo.loop(10,function(){(S=new Jo.Rectangle(P,E,Jo.faint,Jo.faint,o,r,i,{ignoreScale:!f}).centerReg(W,a?0:1)).visible=!1,B.push(S),S.mouseEnabled=!1}),this.selector=S):((S=this.selector=new Jo.Rectangle(P,E,Jo.faint,Jo.faint,o,r,i,{ignoreScale:!f}).centerReg(W)).loc(s.width/2,A.y+u,W,a?0:1),S.visible=!1),m<0||zot(T)||(S.loc(A.x+c,A.y+u,W,a?0:1),S.color=k[m],S.borderColor=x[m],S.visible=!0),s.mov(c,u),this.setBounds(s.width+2*c,s.height+2*u);var I={};function M(e,t,o,n){zot(o)&&(o=S),m=(T=e).tileNum,o.color=k[m],o.borderColor=x[m],g&&(W.upItem=W.upIndex=null,W.downItem=T,W.downIndex=m),W.animating=!0;var r,i=s.localToLocal(e.x,e.y,W),l=Math.abs(i.x-S.x),a=Math.abs(i.y-S.y),t=W.noAnimate||t?0:d;W.noAnimate=!1,0==t?(o.loc(i.x,i.y).siz(e.width+2*c,e.height+2*u),W.animating=!1,W.dispatchEvent("change")):(h||(l+a)*t<=0?o.animate({x:i.x,y:i.y},(a+l)*t):(o.stopAnimate(),a<=l?o.animate([{props:{x:i.x},time:Math.max("s"==C?.1:100,l*t/("s"==C?1e3:1))},{props:{y:i.y},time:Math.max("s"==C?.1:100,a*t/("s"==C?1e3:1))}]):o.animate([{props:{y:i.y},time:Math.max("s"==C?.1:100,a*t/("s"==C?1e3:1))},{props:{x:i.x},time:Math.max("s"==C?.1:100,l*t/("s"==C?1e3:1))}])),o.animate({props:{widthOnly:e.width+2*c,heightOnly:e.height+2*u},time:Math.max("s"==C?.2:200,(a+l)*t/("s"==C?1e3:1)),events:W.liveIndex,call:function(){W.animating=!1,n?W.dispatchEvent("changeset"):W.dispatchEvent("change")}}),W.liveIndex&&(r=null,o.on("animation",function(){var e=o.parent.localToGlobal(o.x,o.y),e=s.itemUnderPoint(e.x,e.y);e.tileNum!=r&&(m=e.tileNum,n?W.dispatchEvent("changeset"):W.dispatchEvent("change"),r=e.tileNum)})),p&&(t=!0===p?.7:Jo.constrain(p,0,1),s.animate({props:{alpha:t},rewind:!0,time:(a+l)*d*.7/("s"==C?1e3:1)}))),s.stage&&s.stage.update()}function O(){W.keyFocus=!0;var e=document.activeElement;e&&e.blur()}this.tileDown=s.on("mousedown",function(e){var t=S;if(!g||!zot(t=B.shift())){t.visible=!0;for(var o=e.target,n=0;o.parent!=s&&n<10;)o=o.parent,n++;o.parent==s&&M(o,null,t),g&&(e="id"+Math.abs(e.pointerID+1),I[e]={index:m,item:T,selector:t})}}),g&&(this.tileMove=s.on("pressmove",function(e){var t="id"+Math.abs(e.pointerID+1),o=I[t];zot(o)||(t=s.itemUnderPoint(e.stageX/Jo.scaX,e.stageY/Jo.scaY),o.item!=t&&(W.upItem=o.item,W.upIndex=o.index,W.downItem=o.item=t,W.downIndex=o.index=t?t.tileNum:null,W.dispatchEvent("change"),zot(t)?o.selector.visible=!1:(e=s.localToLocal(t.x,t.y,W),o.selector.loc(e.x,e.y).siz(t.width+2*c,t.height+2*u),o.selector.color=k[o.index],o.selector.borderColor=x[o.index],o.selector.visible=!0),W.stage.update()))}),this.tileUp=s.on("pressup",function(e){var t="id"+Math.abs(e.pointerID+1),e=I[t];zot(e)||(W.downIndex=W.downItem=null,W.upIndex=e.index,W.upItem=e.item,B.push(e.selector),e.selector.visible=!1,W.dispatchEvent("change"),!W.stage||Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||W.stage.update(),delete I[t])})),W.noAnimate=!1,l&&W.added(function(){W.keyEvent=W.stage.frame.on("keydown",function(e){var t,o,n,r;W.stage&&W.enabled&&(W.animating||(W.zimAccessibility&&W.focus||!W.zimAccessibility&&W.keyFocus)&&(!0===(t=Jo.loop(s.items2D,function(e,o){e=Jo.loop(e,function(e,t){if(e==T)return[t,o]});if(Array.isArray(e))return e}))&&(t=[0,0]),o=s.items2D[t[1]].length,n=s.items2D.length,"39"==e.keyCode?(r=(t[0]+1)%o,M(s.items2D[t[1]][r],r<t[0])):"37"==e.keyCode?(r=(t[0]-1+o)%o,M(s.items2D[t[1]][r],r>t[0])):"38"==e.keyCode?(r=(t[1]-1+n)%n,M(s.items2D[r][t[0]],r>t[1])):"40"==e.keyCode&&(r=(t[1]+1)%n,M(s.items2D[r][t[0]],r<t[1]))))})}),Object.defineProperty(this,"index",{get:function(){return m},set:function(e){zot(e)&&(W.currentItem=null),W.currentItem=s.items[Math.round(e)]}}),Object.defineProperty(this,"selectedIndex",{get:function(){return this.index},set:function(e){this.index=e}}),Object.defineProperty(this,"text",{get:function(){return T.text},set:function(){zon&&zogy("Selector() - text is read only")}}),Object.defineProperty(this,"currentItem",{get:function(){return T},set:function(e){if(zot(e))return m=T=null,S.visible=!1,W.selectedCol=null,void(W.selectedRow=null);S.visible=!0,W.lastItem=T,W.lastIndex=m,W.lastCol=W.selectedCol,W.lastRow=W.selectedRow,W.selectedCol=e.tileCol,W.selectedRow=e.tileRow,m=e.tileNum,M(T=e,null,null,!0)}}),this._enabled=!0,Object.defineProperty(W,"enabled",{get:function(){return W._enabled},set:function(e){e?W.mouse():W.noMouse(),W._enabled=e}}),null!=WW.KEYFOCUS&&(Jo.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Jo.KEYFOCUS==W},set:function(){Jo.KEYFOCUS=W}}),Jo.KEYFOCUS||O(),this.on("mousedown",function(){O()}),!1!==e&&Jo.styleTransforms(this,b),this.clone=function(e){e=s.clone?s.clone(e):s;return e.x=e.y=0,W.cloneProps(new Jo.Selector(e,t,o,n,r,i,c,u,d,h,p,g,l,a,f,m,z,y,this.style,this.group))},this.dispose=function(e,t,o){W.keyEvent&&W.stage&&W.stage.frame.off("keydown",W.keyEvent),s.off(W.tileDown),s.dispose(),g&&(s.off(W.tileMove),s.off(W.tileUp)),o||this.zimContainer_dispose(!0)}},Jo.extend(Jo.Selector,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Slicer=function(n,t,o,r,i,l,a,s,c,u,d,h,p,g){if(M=zob(Jo.Slicer,arguments,"obj, objScale, slices, types, titleBar, remember, upload, selection, multiple, proportion, resize, style, group, inherit",this))return M;z_d("62.7"),this.group=p;var f=!1===h?{}:Jo.getStyle("Slicer",this.group,g);zot(n)&&(n=null!=f.obj?f.obj:new Jo.Tile),zot(t)&&(t=null!=f.objScale?f.objScale:1);var m=t,z=o;zot(o)&&(o=null!=f.slices?f.slices:[[0,1],[0,1]]);var y=[[1],[1]];Jo.loop(o,function(e,t){Jo.loop(e,function(){y[t].push(1)})}),o=Jo.copy(o),zot(r)&&(r=null!=f.slices?f.slices:y),r=Jo.copy(r),zot(i)&&(i=null!=f.titleBar?f.titleBar:"Slicer"),zot(l)&&(l=null==f.remember||f.remember),zot(a)&&(a=null==f.upload||f.upload),zot(s)&&(s=null==f.selection||f.selection),zot(c)&&(c=null==f.multiple||f.multiple),zot(u)&&(u=null==f.proportion||f.proportion),zot(d)&&(d=null==f.resize||f.resize);var b=n.width*m+60,v=n.height*m+60+(i?30:0),w=b,C=v;this.zimWindow_constructor(b,v,null,null,null,null,null,null,!1,null,null,null,null,null,!1,!1,!1,null,null,null,null,null,null,null,null,null,null,i,dark,moon,null,!0,null,null,null,null,null,null,null,d,!0),this.type="Slicer";var x=this;x.collapseIcon&&x.collapseIcon.mov(2),x.titleBar&&(x.titleBarLabel.mov(26,1),zdf.makeIcon(tin,clear,[tin,tin,tin,tin,tin]).scaleTo(x.titleBar,87,87).loc(5,2,x.titleBar)),x.obj=n,x.data=o,x.dataTypes=r;var k=x.height-(i?30:0),T=new Jo.Container(x.width,k),A=x.splitterContent=new Jo.Container(x.width-60,k-60).pos(30,30,LEFT,TOP,T),P=n.width*m,E=n.height*m;n.sca(m).addTo(A);var S=x.box=new Jo.Rectangle({width:P,height:E,borderColor:black,scaleDimensions:!1}).alp(.5).pos(30,30,LEFT,TOP,T).expand(0);S.on("mousedown",function(){N.loop(function(e){e.triangle.color=faint}),Y=null,V.loop(function(e){e.triangle.color=faint}),X=null,x.stage.update()});var B=x.hide=new Jo.Button({width:30,height:30,label:"-",toggle:"+",color:silver,backgroundColor:darker,rollBackgroundColor:lighter,rollColor:granite,corner:0,shadowColor:-1,style:!1}).sca(1).loc(0,0,T);B.label.mov(0,-2),B.on("click",function(){B.toggled?(B.label.mov(0,3),S.visible=j.visible=L.visible=N.visible=V.visible=D.visible=_.visible=J.visible=!1,I&&I.vis(!1),a&&O.removeFrom()):(B.label.mov(0,-3),S.visible=j.visible=L.visible=N.visible=V.visible=D.visible=_.visible=J.visible=!0,I&&I.vis(!0),a&&O.addTo(x.contentContainer))});var I,M,O,j=x.trackH=new Jo.Rectangle(P,30,white).alp(.1).loc(S.x,S.y-30,T).cur(),L=x.trackV=new Jo.Rectangle(30,E,white).alp(.1).loc(S.x-30,S.y,T).cur(),D=x.deleteH=new Jo.Button({width:60,height:60,label:"X",backgroundColor:red,corner:0,shadowColor:-1,style:!1}).sca(.5).pos(0,0,RIGHT,TOP,T),_=x.deleteV=D.clone().pos(0,0,LEFT,BOTTOM,T);s&&c&&(I=x.toggle=new Jo.Toggle({height:18,width:30,backgroundColor:grey,corner:9,label:"multiple",color:tin}).loc(_.x+45,_.y+6,T)),a&&(M=new Jo.Circle(6,silver).reg(CENTER,3),new Jo.Circle({radius:9,color:silver,percent:40}).center(M).mov(0,8),p=new Jo.Circle(6,grey).reg(CENTER,3),new Jo.Circle({radius:9,color:grey,percent:40}).center(p).mov(0,8),(O=x.loader=new Jo.Loader({width:30,height:30,backgroundColor:darker,rollBackgroundColor:lighter,corner:3,borderColor:-1,label:"",icon:M,rollIcon:p})).on("loaded",function(e){n.dispose(),O.removeRoll();var t=e.bitmap.fit(0,0,w-60,C-60-(i?30:0));m=t.scale,e.bitmap.sca(1),b=e.bitmap.width*m+60,v=e.bitmap.height*m+60,x.resize(b,v),n=e.bitmap.sca(m).loc(0,0,A,0),x.obj=n,$(),x.dispatchEvent("loaded")}));var R=x.instruct=new Jo.Container(T.width,T.height).addTo(T).animate({wait:1,from:!0,props:{alpha:0},rewind:!0,rewindWait:2,call:function(){R.dispose(),R=null}}).noMouse();new Jo.Label("Add slices here",15,null,blue).pos(0,8,CENTER,TOP,R),new Jo.Label("Add slices here",15,null,blue).rot(-90).pos(8,0,LEFT,CENTER,R),x.add(T),x.add(O,null,!0),O.pos(0,0,RIGHT,BOTTOM);var Y,X,N=x.linesHContainer=new Jo.Container(P,E).loc(S,null,T),V=x.linesVContainer=new Jo.Container(P,E).loc(S,null,T);function G(){x.data[0]=[0,1],N.loop(function(e){x.data[0].push(Jo.decimals(e.x/S.width,3))}),x.data[0].sort(function(e,t){return e-t}),Z()}function U(o){return Jo.loop(x.data[0],function(e,t){if(Jo.decimals(o.x/S.width,3)<e)return t})}function q(){x.data[1]=[0,1],V.loop(function(e){x.data[1].push(Jo.decimals(e.y/S.height,3))}),x.data[1].sort(function(e,t){return e-t}),Z()}function Q(o){return Jo.loop(x.data[1],function(e,t){if(Jo.decimals(o.y/S.height,3)<e)return t})}function Z(e){zot(e)&&(e=!0),J.disposeAllChildren(),Jo.loop(K,function(e){x.selectTile(e[0],e[1])}),e&&x.dispatchEvent("change"),localStorage&&(localStorage.zimSlicer=JSON.stringify(x.exchange))}x.makeLine=function(e,t,o){var n;return 1<t&&(t/=100),"vertical"==e?(e=t*S.width,(n=new Jo.Container(30,30+E).reg(15,30).loc(e,0,N)).triangle=new Jo.Triangle(30,30,30,o?blue:faint,blue).rot(180).pos(0,4,CENTER,TOP,n),n.line=new Jo.Rectangle(1,S.height,red).ble().expand(3).reg(0,0).pos(0,30,CENTER,TOP,n),n.drag({all:!0,boundary:new Jo.Boundary(0,0,S.width,0),localBoundary:!0}),n.on("mousedown",function(){N.loop(function(e){e.triangle.color=e==n?blue:faint}),Y=x.currentLineH=n,x.stage.update()}),n.on("pressmove",G)):(t=t*S.height,(n=new Jo.Container(30+P,30).reg(30,15).loc(0,t,V)).triangle=new Jo.Triangle(30,30,30,o?blue:faint,blue).rot(90).pos(4,0,LEFT,CENTER,n),n.line=new Jo.Rectangle(S.width,1,red).ble().expand(3).reg(0,0).pos(30,0,LEFT,CENTER,n),n.drag({all:!0,boundary:new Jo.Boundary(0,0,0,S.height),localBoundary:!0}),n.on("mousedown",function(){V.loop(function(e){e.triangle.color=e==n?blue:faint}),X=x.currentLineV=n,x.stage.update()}),n.on("pressmove",q)),n},j.on("mousedown",function(){R&&R.dispose(),N.loop(function(e){e.triangle.color=faint});var e=N.globalToLocal(F.mouseX,F.mouseY);x.currentLineH=Y=x.makeLine(VERTICAL,e.x/S.width,!0);var o=x.selectedIndexH=U(Y);K.sort(function(e,t){return e[0]-t[0]}),loop(K,function(e,t){e[0]>=o&&e[0]++},!0),x.dataTypes&&x.dataTypes[0].splice(o-1,0,x.dataTypes[0][o-1]),G(),x.stage.update()}),D.on("click",function(){var o,n;Y&&(o=U(Y),K.sort(function(e,t){return e[0]-t[0]}),loop(K,function(e,t){e[0]>=o-1&&e[0]--},!0),n=[],loop(K,function(e,t){e[0]==o-2&&0<=n.indexOf(JSON.stringify(e))?K.splice(t,1):n.push(JSON.stringify(e))},!0),n=null,x.dataTypes&&x.dataTypes[0].splice(o-1,1),Y.dispose(),x.currentLineH=Y=null,G(),x.dispatchEvent("delete"),x.stage.update())}),L.on("mousedown",function(){R&&R.dispose(),V.loop(function(e){e.triangle.color=faint});var e=V.globalToLocal(F.mouseX,F.mouseY),e=N.globalToLocal(F.mouseX,F.mouseY);x.currentLineV=X=x.makeLine(HORIZONTAL,e.y/S.height,!0);var o=x.selectedIndexV=Q(X);K.sort(function(e,t){return e[1]-t[1]}),loop(K,function(e,t){e[1]>=o&&e[1]++},!0),x.dataTypes&&x.dataTypes[1].splice(o-1,0,x.dataTypes[1][o-1]),q(),x.stage.update()}),_.on("click",function(){var o,n;X&&(o=Q(X),K.sort(function(e,t){return e[1]-t[1]}),loop(K,function(e,t){e[1]>=o-1&&e[1]--},!0),n=[],loop(K,function(e,t){e[1]==o-2&&0<=n.indexOf(JSON.stringify(e))?K.splice(t,1):n.push(JSON.stringify(e))},!0),n=null,x.dataTypes&&x.dataTypes[1].splice(o-1,1),X.dispose(),x.currentLineV=X=null,q(),x.dispatchEvent("delete"),x.stage.update())});var K=x.selected=[],J=x.highlightsContainer=new Jo.Container(W,H).loc(S,null,T).noMouse();function $(){k=x.height-(i?30:0);var o=S.width,t=S.height;x.box.siz(x.width-60,k-60).expand(0),D.loc(S.x+S.width,S.y-30),_.loc(S.x-30,S.y+S.height),j.widthOnly=S.width,L.heightOnly=S.height,N.loop(function(e,t){e.line.heightOnly=S.height,u&&(e.x=e.x*S.width/o),e.dragBoundary(new Jo.Boundary(0,0,S.width,0))}),V.loop(function(e){e.line.widthOnly=S.width,u&&(e.y=e.y*S.height/t),e.dragBoundary(new Jo.Boundary(0,0,0,S.height))}),I&&I.loc(_.x+45,_.y+6,T),a&&(O.loc(x.box.width+30,x.box.height+30),O.resize()),Z(),n.width?(n.scaleTo(x.box,100,100).loc(0,0,A,0),x.stage.update()):setTimeout(function(){n.scaleTo(x.box,100,100).loc(0,0,A,0),x.stage.update()},50)}x.selectTile=function(e,t,o){o&&J.disposeAllChildren(),e=Jo.constrain(e,0,x.data[0].length-1),t=Jo.constrain(t,0,x.data[1].length-1),x.selection=new Jo.Rectangle(x.data[0][e+1]*S.width-x.data[0][e]*S.width-10,x.data[1][t+1]*S.height-x.data[1][t]*S.height-10,white.toAlpha(.2),white,2,0,!0).loc(x.data[0][e]*S.width+5,x.data[1][t]*S.height+5,J).ble()},s&&(S.cur(),S.on("mousedown",function(){var o=S.globalToLocal(x.stage.frame.mouseX,x.stage.frame.mouseY),n=Jo.loop(x.data[0],function(e,t){if(o.x<e*S.width)return t-1}),r=Jo.loop(x.data[1],function(e,t){if(o.y<e*S.height)return t-1}),e=Jo.loop(K,function(e,t){if(JSON.stringify(e)==JSON.stringify([n,r]))return!(!(1<K.length&&c)||F.shiftKey||I.toggled)||(K.splice(t,1),!1)});c&&(F.shiftKey||I.toggled)||(K=x.selected=[]),e&&K.push([n,r]),Z(!1),x.dispatchEvent("selection")})),x.on("resize",$),d&&x.resizeHandle.on("pressup",function(){var e=n.width+60,t=n.height+60;x.resize(e,t),x.stage.update()}),x.setObject=function(t,o){return n.dispose(),n=t,zot(o)&&(o=e.bitmap.fit(0,0,w-60,C-60-(i?30:0)).scale),n.sca(1),b=n.width*o+60,v=n.height*o+60,x.resize(b,v),n=n.sca(o).loc(0,0,A,0),x.obj=n,$(),x.dispatchEvent("loaded"),x},x.updateLines=function(e){return x.data=e,N.disposeAllChildren(),V.disposeAllChildren(),Jo.loop(e[0],function(e,t,o){0!=t&&t!=o-1&&x.makeLine(VERTICAL,e)}),Jo.loop(e[1],function(e,t,o){0!=t&&t!=o-1&&x.makeLine(HORIZONTAL,e)}),x.selectedIndexH=x.selectedIndexV=x.currentLineH=x.currentLineV=null,x.stage&&x.stage.update(),x},x.setSlicerTypes=function(e){x.dataTypes||(x.dataTypes=[[1],[1]]);var t=x.slicerTypes=e;return x.on("select",function(){var o,n;0<K.length?(t.shield.vis(!1),Jo.loop(K,function(e){var t=x.dataTypes[0][e[0]];if(o="bad"==o||null!=o&&o!=t?"bad":t,t=x.dataTypes[1][e[1]],n="bad"==n||null!=n&&n!=t?"bad":t,"bad"==o&&"bad"==n)return!1}),"bad"==o?(t.radioH.selectedIndex=-1,t.tile.backgrounds[1].color=brown):(t.radioH.selectedIndex=o,t.tile.backgrounds[1].color=light),"bad"==n?(t.radioV.selectedIndex=-1,t.tile.backgrounds[3].color=brown):(t.radioV.selectedIndex=n,t.tile.backgrounds[3].color=light)):(t.radioH.selectedIndex=-1,t.radioV.selectedIndex=-1,t.shield.vis(!0))}),x.stage.update(),x},x.clearSelection=function(){var e;return K=x.selected=[],J.disposeAllChildren(),x.slicerTypes&&((e=x.slicerTypes).radioH.selectedIndex=-1,e.radioV.selectedIndex=-1,e.shield.vis(!0)),x.stage.update(),x},x.clear=function(){return localStorage&&localStorage.removeItem("zimSlicer"),x.exchange=[[[],[]],[[1],[1]]],x.clearSelection(),x.dispatchEvent("change"),x},Object.defineProperty(x,"slices",{get:function(){var e=Jo.copy(x.data);return e[0].shift(),e[0].pop(),e[1].shift(),e[1].pop(),e},set:function(e){e=Jo.copy(e);e[0].unshift(0),e[0].push(1),e[1].unshift(0),e[1].push(1),x.updateLines(e)}}),Object.defineProperty(x,"types",{get:function(){return Jo.copy(x.dataTypes)},set:function(e){x.dataTypes=Jo.copy(e)}}),Object.defineProperty(x,"exchange",{get:function(){var e=Jo.copy(x.data);return e[0].shift(),e[0].pop(),e[1].shift(),e[1].pop(),[e,Jo.copy(x.dataTypes)]},set:function(e){var t=Jo.copy(e[0]),e=Jo.copy(e[1]);t[0].unshift(0),t[0].push(1),t[1].unshift(0),t[1].push(1),x.updateLines(t),x.dataTypes=e}}),l&&localStorage&&localStorage.zimSlicer?(x.exchange=JSON.parse(localStorage.zimSlicer),R.dispose()):z&&(x.exchange=[o,r],R.dispose()),setTimeout(function(){x.dispatchEvent("change")},20),!1!==h&&Jo.styleTransforms(this,f),this.clone=function(){return x.cloneProps(new Jo.Slicer(n.clone(),t,Jo.copy(o),Jo.copy(r),i,l,a,s,c,u,d,h,this.group,g))}},Jo.extend(Jo.Slicer,Jo.Window,["clone"],"zimWindow",!1),Jo.SlicerTypes=function(o,e,t,n,r,i){if(z=zob(Jo.SlicerTypes,arguments,"slicer, titleBar, sliceType, style, group, inherit",this))return z;z_d("62.75"),this.group=r;var l,a,s,c,u,d,h,p,g,f,m,z,y=!1===n?{}:Jo.getStyle("SlicerTypes",this.group,i);zot(o)&&(o=null!=y.slicer?y.slicer:null),zot(o)?zogy("ZIM SlicerTypes - needs a Slicer Object"):(zot(e)&&(e=null!=y.titleBar?y.titleBar:"Slicer Types"),zot(t)&&(t=null!=y.sliceType?y.sliceType:"stretch"),(l=["fixed","stretch","tile"]).indexOf(t)<0&&(t="stretch"),this.zimWindow_constructor(470,150,null,null,null,null,null,null,!1,null,null,null,null,null,!1,!1,null,null,null,null,null,null,null,null,null,null,null,e,dark,moon,null,!0,null,null,null,null,null,null,null,null,!0),(a=this).collapseIcon.mov(2),a.titleBarLabel.mov(25,1),zdf.makeIcon(tin,clear,[tin,tin,tin,tin,tin]).scaleTo(a.titleBar,87,87).loc(5,2,a.titleBar),a.slicer=o,a.sliceType=t,a.defaultIndex=l.indexOf(t),s=new Jo.Container,c=a.radioH=new Jo.RadioButtons({size:20,buttons:["fixed","stretch","tile"],vertical:!1,selectedIndex:-1}).change(function(){Jo.loop(o.selected,function(e){o.dataTypes[0][e[0]]=c.selectedIndex}),o.dispatchEvent("change"),d.backgrounds[1].color=light,a.stage.update(),localStorage&&(localStorage.zimSlicer=JSON.stringify(o.exchange))}),u=a.radioV=c.clone().change(function(){Jo.loop(o.selected,function(e){o.dataTypes[1][e[1]]=u.selectedIndex}),o.dispatchEvent("change"),d.backgrounds[3].color=light,a.stage.update(),localStorage&&(localStorage.zimSlicer=JSON.stringify(o.exchange))}),Style.remember("slicer"),STYLE={align:CENTER,valign:CENTER,backgroundColor:light,backgroundPaddingH:5},d=a.tile=new Jo.Tile([new Label("Horizontal",20).alp(.5),c,new Label("Vertical",20).alp(.5),u],2,2,5,5,!0).sca(.8).addTo(s),Style.recall("slicer"),h=new Jo.TextArea({width:600,height:300,wrap:!0,spellCheck:!1}),(p=a.importPane=new Jo.Pane({content:h,close:!0,closeColor:red})).content.mov(0,-20),(g=a.submitButton=new Jo.Button({width:220,label:"IMPORT",wait:"CONFIRM",waitTime:2,waitBackgroundColor:red,rollWaitBackgroundColor:red}).sca(.6).pos(0,-60,CENTER,BOTTOM,p.content)).on("mousedown",function(){var e;g.waiting&&(p.hide(),g.clearWait(),o.clearSelection(),e=(e=h.text.trim().split("\n")).pop().replace(/([^0])\./g,"$10."),e=JSON.parse("["+e+"]"),a.updateData(e[0],e[1]))}),g.on("close",function(){g.clearWait()}),f=new Jo.TextArea({width:600,height:300,wrap:!0,spellCheck:!1}),m=a.exportPane=new Jo.Pane({content:f,close:!0,closeColor:red}),z=a.importButton=new Jo.Button({width:220,label:"IMPORT"}).tap(function(){var e=Jo.copy(o.data);e[0].shift(),e[0].pop(),e[1].shift(),e[1].pop(),h.text="// replace this current data with desired slices, types data:\n\n"+JSON.stringify(e)+", "+JSON.stringify(o.dataTypes),p.show()}),r=a.exportButton=new Jo.Button({width:220,label:"EXPORT"}).tap(function(){var e=Jo.copy(o.data);e[0].shift(),e[0].pop(),e[1].shift(),e[1].pop(),f.text="// use as slices, types parameters in ZIM SlicedBitmap()\n// can also modify and IMPORT into Slicer Types tool\n\n"+JSON.stringify(e)+", "+JSON.stringify(o.dataTypes),m.show()}),new Jo.Tile([z,r],1,2,0,20,!0).siz(null,d.height).loc(d.width+20+20,0,s),a.add(s,0,!0),a.shield=new Jo.Rectangle(d.width+20,d.height,dark).alp(.7).loc(d,null,d.parent),Object.defineProperty(a,"sliceType",{get:function(){return t},set:function(e){t=e,l.indexOf(t)<0&&(t="stretch"),a.defaultIndex=l.indexOf(t)}}),o&&o.setSlicerTypes(a),!(a.updateData=function(e,t){e[0].unshift(0),e[0].push(1),e[1].unshift(0),e[1].push(1),o.updateLines(e),o.dataTypes=t})!==n&&Jo.styleTransforms(this,y),this.clone=function(){return a.cloneProps(new Jo.SlicerTypes(o,e,t,n,this.group,i))})},Jo.extend(Jo.SlicerTypes,Jo.Window,["clone"],"zimWindow",!1),Jo.Dial=function(n,i,r,t,o,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,e,D,_,R,Y,X,N,F){if(J=zob(Jo.Dial,arguments,"min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, useTicks, innerTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, innerCircle, innerScale, innerColor, inner2Color, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, linear, gap, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, value, useLabels, labelMargin, addZero, currentValue, style, group, inherit",this))return J;z_d("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=N;var H=!1===X?{}:Jo.getStyle(this.type,this.group,F);if(zot(n)&&(n=null!=H.min?H.min:0),zot(i)&&(i=null!=H.max?H.max:10),i-n!=0){zot(T)&&(T=null!=H.sound&&H.sound),zot(r)&&(r=null!=H.step?H.step:T?0:1),zot(t)&&(t=null!=H.width?H.width:100),zot(o)&&(o=null!=H.backgroundColor?H.backgroundColor:Jo.granite),zot(l)&&(l=null!=H.indicatorColor?H.indicatorColor:T?Jo.white:Jo.licorice),zot(a)&&(a=null!=H.indicatorScale?H.indicatorScale:1),zot(s)&&(s=null!=H.indicatorType?H.indicatorType:T?"aztec":"arrow"),zot(c)&&(c=null!=H.useTicks?H.useTicks:0!=r),zot(u)&&(u=null!=H.innerTicks&&H.innerTicks),zot(h)&&(h=null!=H.tickStep?H.tickStep:r||(c?.25:0)),zot(p)&&(p=null!=H.semiTicks?H.semiTicks:T?3:0),zot(d)&&(d=null!=H.tickColor?H.tickColor:T?Jo.tin:o),zot(g)&&(g=null!=H.tickScale?H.tickScale:T?1.25:1),zot(f)&&(f=null!=H.semiTickScale?H.semiTickScale:1.25),zot(m)&&(m=null==H.innerCircle||H.innerCircle),zot(y)&&(y=null!=H.innerColor?H.innerColor:T?Jo.pink:"rgba(0,0,0,.2)"),zot(b)&&(b=null!=H.inner2Color?H.inner2Color:T?Jo.light:"rgba(0,0,0,.1)"),zot(z)&&(z=null!=H.innerScale?H.innerScale:T?.4:.5),zot(v)&&(v=null!=H.accentSize?H.accentSize:T?t/2*.15:0),zot(w)&&(w=null!=H.accentOffset?H.accentOffset:t/2*.45),zot(k)&&(k=null!=H.accentDifference?H.accentDifference:-.25),zot(C)&&(C=null!=H.accentColor?H.accentColor:Jo.pink),zot(x)&&(x=null!=H.accentBackgroundColor?H.accentBackgroundColor:T?Jo.blue:Jo.clear),zot(P)&&(P=null!=H.gap?H.gap:T?.25:0),zot(A)&&(A=null!=H.linear?H.linear:T),P&&(M=!(A=!0)),zot(E)&&(E=null==H.limit||H.limit),zot(S)&&(S=null==H.keyArrows||H.keyArrows),zot(B)&&(B=null!=H.keyArrowsStep?H.keyArrowsStep:(i-n)/100),zot(W)&&(W=null==H.keyArrowsH||H.keyArrowsH),zot(I)&&(I=null==H.keyArrowsV||H.keyArrowsV),zot(M)&&(M=null!=H.continuous&&H.continuous),M&&(E=null!=H.limit&&H.limit),zot(L)&&(L=null!=H.damp&&H.damp),zot(Y)&&zot(H.currentValue)||!zot(e)||!zot(H.value)||(e=zot(Y)?H.currentValue:Y),zot(e)&&(e=null!=H.value?H.value:null),zot(D)&&(D=null!=H.useLabels&&H.useLabels),zot(_)&&(_=null!=H.labelMargin?H.labelMargin:10),zot(R)&&(R=null!=H.addZero&&H.addZero),0==E&&(L=null);var V=this;this.cur("pointer");var G=function(){return arguments}(n,i,r,e);this.veeObj={min:G[0],max:G[1],step:G[2],value:G[3]},n=Jo.Pick.choose(n),i=Jo.Pick.choose(i);var U=r=Jo.Pick.choose(r);e=Jo.Pick.choose(e);var q,Q,Z,K=t/2,J=t,$=n,ee=0;v&&(Q=t/2+w+v/2,Z=360*P/2,V.accentBacking=new Jo.Shape(-K,-K,2*K,2*K).addTo(this).s(x).ss(v+k).a(0,0,Q,(Z-90)*Jo.RAD,(360-Z-90)*Jo.RAD),q=V.accent=new Jo.Shape(-K,-K,2*K,2*K).addTo(this));N=this.backing=new Jo.Circle(K,o,null,null,null,null,null,null,null,!1);v?N.center(this):this.addChild(N),m&&(oe=this.inner=new Jo.Circle(K*z,y,null,null,null,null,null,null,null,!1),this.addChild(oe),ne=this.inner2=new Jo.Circle(K*(z-.1),b,null,null,null,null,null,null,null,!1),this.addChild(ne)),T&&(V.rotation=180);var te,oe,ne,re,ie,le,ae,se,ce=Math.abs(i-n)/(h||r)+(P?1:0),ue=r?Math.abs(i-n)/r:0;if(c){var de,he=this.ticks=new Jo.Container({style:!1});this.addChild(he),D&&(de=V.labels=new Jo.Container(2*t,2*J).centerReg(V));for(var pe=0;pe<ce;pe++){var ge=pe%(p+1)==0,fe=new Jo.Rectangle(1,K*(ge?.2*g:.1*f),d,null,null,null,null,null,null,!1);fe.regY=K+(u?z-.05:fe.height+.1*K),fe.regX=.5,fe.rotation=(360-360*P)/(ce-(P?1:0))*pe+360*P/2,he.addChild(fe),D&&(p&&ge||!p)&&(ge=Math.max(Jo.countDecimals(U),Jo.countDecimals(n),Jo.countDecimals(i)),new Jo.Label({text:Jo.decimals(n+(i-n)/Math.abs(ue||ce)*pe,ge+1,R),size:H.size||10,align:"center",valign:"center"}).centerReg({add:!1}).loc(0,-_-1,fe).addTo(de))}V.expand(fe.height)}this.setBounds(-K,-K,t,t),"dot"==s||"circle"==s?(te=this.indicator=new Jo.Container({style:!1}),re=this.indicatorShape=new Jo.Circle(.19*K,l,null,null,null,null,null,null,null,!1),te.addChild(re),Jo.sca(te,a),te.regY=K-te.getBounds().width*a/2-.07*K):"line"==s||"rectangle"==s?(te=this.indicator=new Jo.Container({style:!1}),re=this.indicatorShape=new Jo.Rectangle(.1*K,.3*K,l,null,null,null,null,null,null,null,null,!1),te.addChild(re),Jo.sca(te,a),te.regY=K-te.getBounds().width*a/2-.07*K,te.regX=.05*K):"aztec"==s?(te=this.indicator=new Jo.Container({style:!1}),oe=.05*K,ne=.1*K,J=.42*K,re=this.indicatorShape=new Jo.Shape(-ne,0,2*ne,J).f(l).mt(-oe,0).lt(oe,0).lt(ne,J).lt(-ne,J).cp(),te.addChild(re),Jo.sca(te,a),te.regY=K-te.getBounds().width*a/2-.04*K):(te=this.indicator=new Jo.Container({style:!1}),re=this.indicatorShape=new Jo.Triangle(.4*K,.4*K,.4*K,l,null,null,null,null,null,null,null,!1),te.addChild(re),Jo.sca(te,a),te.regY=K-te.getBounds().height*a*(u?.85:.75),u&&(re.rotation=180)),te.regY/=a,this.addChild(te);var me,ze,ye,be,ve,we,Ce,xe,ke,Te=0;M&&(ye=ze=me=0,we=!(ve=be=!1)),A?this.on("mousedown",function(e){var o,n;V.zimAccessibility&&V.zimAccessibility.aria||(o=ie=te.rotation,n=V.parent.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY),ae=V.on("pressmove",function(e){var t=V.parent.globalToLocal(e.rawX/Jo.scaX,e.rawY/Jo.scaY);te.rotation=o=ie+100*(n.y-t.y)/(this.width||1),E&&(360-360*P/2<o||o<0+360*P/2)&&(o=Jo.constrain(o,360*P/2,360-360*P/2),n=V.parent.globalToLocal(e.rawX/Jo.scaX,e.rawY/Jo.scaY),ie=o),Oe(o)}),se=this.on("pressup",function(){V.off("pressmove",ae),V.off("pressup",se)}))}):(Ce=!0,this.on("mousedown",function(e){var t,o,n,r;V.zimAccessibility&&V.zimAccessibility.aria||(ie=te.rotation,t=V.parent.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY),o=t.x-V.x,n=V.y-t.y,le=180*Math.atan2(o,n)/Math.PI,r=(new Date).getTime(),ae=V.on("pressmove",function(e){var t,o;be&&(o=(t=V.parent.globalToLocal(e.rawX/Jo.scaX,e.rawY/Jo.scaY)).x-V.x,n=V.y-t.y,le=180*Math.atan2(o,n)/Math.PI,ie=te.rotation),o=(t=V.parent.globalToLocal(e.rawX/Jo.scaX,e.rawY/Jo.scaY)).x-V.x,n=V.y-t.y;var n=180*Math.atan2(o,n)/Math.PI,n=((n=ie+n-le)+36e5)%360;E&&Ce&&(180<n-Te&&V.value!=i?n=0:n-Te<-180&&(n=359)),Ce=!0,Oe(n),Te=n}),se=this.on("pressup",function(e){V.value!=V.min&&V.value!=V.max&&(Ce=!1),(new Date).getTime()-r<200&&(t=V.parent.globalToLocal(e.rawX/Jo.scaX,e.rawY/Jo.scaY),o=t.x-V.x,n=V.y-t.y,Oe(180*Math.atan2(o,n)/Math.PI-V.rotation)),ie=te.rotation,V.off("pressmove",ae),V.off("pressup",se)}))})),L&&(xe=n,ke=new Jo.Damp(xe,L),V.ticker=Jo.Ticker.add(function(){xe=ke.convert($)})),Object.defineProperty(this,"value",{get:function(){return L?xe:$},set:function(e){zot(e)||(M?(be=!1,zot(O)||zot(j)?zot(O)?zot(j)||j<e&&(e=j,be=!0):e<O&&(e=O,be=!0):O<j?(e<O&&(e=O,be=!0),j<e&&(e=j,be=!0)):(O<e&&(e=O,be=!0),e<j&&(e=j,be=!0)),we&&(ve=!0,ye=360*Math.floor(e/(i-n)))):n<i?(e<n&&(e=E?n:i),i<e&&(e=E?i:n)):(n<e&&(e=E?n:i),e<i&&(e=E?i:n)),e=We($=e),L&&L.immediate($),te.rotation=360*P/2+(e-n)*(360-360*P)/(i-n),te.rotation=(te.rotation+36e5)%360,ee=e-n,Te=te.rotation,q&&Be(),Me(),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!V.stage||V.stage.update())}}),Object.defineProperty(this,"currentValue",{get:function(){return this.value},set:function(e){this.value=e}}),Object.defineProperty(this,"valueEvent",{get:function(){return L?xe:$},set:function(e){e!=V.value&&(V.value=e,V.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return n},set:function(e){M?n=e:zon&&zogy("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return i},set:function(e){M?i=e:zon&&zogy("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return M},set:function(){zon&&zogy("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return O},set:function(e){O=e,V.value<O&&(V.value=O)}}),Object.defineProperty(this,"continuousMax",{get:function(){return j},set:function(e){j=e,V.value>j&&(V.value=j)}}),Object.defineProperty(this,"step",{get:function(){return r},set:function(){zon&&zogy("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return W},set:function(e){W=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return I},set:function(e){I=e}}),null!=WW.KEYFOCUS&&(Jo.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Jo.KEYFOCUS==V},set:function(){Jo.KEYFOCUS=V}}),S&&!Jo.KEYFOCUS&&je(),this.on("mousedown",function(){S&&je()});var Ae=!1,Pe=!1,Ee=!1,Se=!1;this.keyDownEvent=function(e){V.stage&&(V.zimAccessibility&&V.focus||!V.zimAccessibility&&V.keyFocus)&&(37==e.keyCode&&W?Ae=!0:40==e.keyCode&&I?Pe=!0:39==e.keyCode&&W?Ee=!0:38==e.keyCode&&I&&(Se=!0),null==V.keyInterval&&(Ae||Pe||Ee||Se)&&(Le(),V.keyTimeout=setTimeout(function(){null==V.keyInterval&&(Ae||Pe||Ee||Se)&&(V.keyInterval=setInterval(Le,40))},140)))},WW.addEventListener("keydown",this.keyDownEvent),V.keyUpEvent=function(e){37==e.keyCode?Ae=!1:40==e.keyCode?Pe=!1:39==e.keyCode?Ee=!1:38==e.keyCode&&(Se=!1),null==V.keyInterval||Ae||Pe||Ee||Se||(clearInterval(V.keyInterval),V.keyInterval=null)},WW.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(V,"enabled",{get:function(){return V._enabled},set:function(e){e?(WW.addEventListener("keydown",V.keyDownEvent),WW.addEventListener("keyup",V.keyUpEvent)):(WW.removeEventListener("keydown",V.keyDownEvent),WW.removeEventListener("keyup",V.keyUpEvent)),V._enabled=e}}),zot(e)&&(e=null!=H.value?H.value:n),V.value=e,!1!==X&&Jo.styleTransforms(this,H),this.clone=function(e){return V.cloneProps(new Jo.Dial(e||!Jo.isPick(G[0])?V.min:G[0],e||!Jo.isPick(G[1])?V.max:G[1],e||!Jo.isPick(G[2])?V.step:G[2],t,o,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,e||!Jo.isPick(G[3])?V.value:G[3],D,_,R,Y,X,this.group,F))},this.dispose=function(e,t,o){return WW.removeEventListener("keydown",V.keyDownEvent),WW.removeEventListener("keyup",V.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zogy("ZIM Dial range must not be 0");function Be(){q.c().s(C).ss(v),A?q.a(0,0,Q,(Z-90)*Jo.RAD,(te.rotation-2*Z)*Jo.RAD):q.a(0,0,Q,(Z-90)*Jo.RAD,(te.rotation-90)*Jo.RAD)}function We(e){return 0==r?e:Math.round(e/r)*r}function Ie(e){return 0<e?1:-1}function Me(){V.zimAccessibility&&V.zimAccessibility.changeTitle(V,null,!0)}function Oe(e){if(M){ve&&(me=e,ve=!1),me+180<e?ye-=360:e<me-180&&(ye+=360),ze=ye+e,we=!1;var t=V.value;return V.value=We(ze*(i-n)/360),t!=V.value&&V.dispatchEvent("change"),me=e,we=!0,q&&Be(),1}var o;e<0&&(e+=360),e%=360,0!=r?(o=We(((e=Math.min(e,360))-360*P/2)/(360-360*P)*(i-n)),te.rotation=360*P/2+o*(360-360*P)/(i-n)):o=((te.rotation=e)-360*P/2)/(360-360*P)*(i-n),o!=ee&&($=(ee=o)+n,q&&Be(),V.dispatchEvent("change"),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!V.stage||V.stage.update()),Me()}function je(){V.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function Le(){(Ae||Pe)&&(V.valueEvent-=0<r?r*Ie(i-n):B*Ie(i-n)),(Ee||Se)&&(V.valueEvent+=0<r?r*Ie(i-n):B*Ie(i-n))}},Jo.extend(Jo.Dial,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Tabs=function(s,c,n,u,d,h,p,g,f,m,z,y,b,v,l,a,w,C,o,r,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,i,Y,X,N,F,H,V,G,U,q,Q,e,Z){var t;if(t=zob(Jo.Tabs,arguments,"width, height, tabs, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentH, labelIndentV, indent, useTap, excludeCustomTap, index, styleLabels, keyWrap, selectedIndex, style, group, inherit",this))return t;z_d("65");var K=!1===Q?{}:Jo.getStyle("Tabs",e,Z);zot(v)&&(v=null!=K.vertical&&K.vertical),zot(s)&&(s=null!=K.width?K.width:null);var J=!zot(s);if(zot(s)&&(s=v?60:240),zot(c)&&(c=null!=K.height?K.height:v?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=e,(zot(n)||n.length<=0)&&(n=null!=K.tabs?K.tabs:[1,2,3,4]),zot(u)&&(u=null!=K.backgroundColor?K.backgroundColor:Jo.tin),zot(d)&&(d=null!=K.rollBackgroundColor?K.rollBackgroundColor:Jo.grey),zot(h)&&(h=null!=K.downBackgroundColor?K.downBackgroundColor:d),zot(p)&&(p=null!=K.selectedBackgroundColor?K.selectedBackgroundColor:Jo.dark),zot(g)&&(g=null!=K.selectedRollBackgroundColor?K.selectedRollBackgroundColor:d),zot(f)&&(f=null!=K.color?K.color:Jo.white),zot(m)&&(m=null!=K.rollColor?K.rollColor:f),zot(z)&&(z=null!=K.downColor?K.downColor:m),zot(y)&&(y=null!=K.selectedColor?K.selectedColor:f),zot(b)&&(b=null!=K.selectedRollColor?K.selectedRollColor:m),zot(T)&&(T=null!=K.backing?K.backing.clone():null),zot(A)&&(A=null!=K.rollBacking?K.rollBacking.clone():null),zot(L)&&(L=null!=K.align?K.align:"center"),zot(D)&&(D=null!=K.valign?K.valign:"center"),zot(_)&&(_=null!=K.labelAlign?K.labelAlign:L),zot(R)&&(R=null!=K.labelValign?K.labelValign:D),zot(N)&&(N=null!=K.indent?K.indent:10),zot(i)&&(i=null!=K.labelIndent?K.labelIndent:N),zot(Y)&&(Y=null!=K.labelIndentH?K.labelIndentH:i),zot(X)&&(X=null!=K.labelIndentV?K.labelIndentV:i),zot(a)&&(a=null!=K.currentEnabled&&K.currentEnabled),zot(w)&&(w=null==K.currentSelected||K.currentSelected),w||(a=!0),zot(l)&&(l=null!=K.spacing?K.spacing:1),zot(C)&&(C=null!=K.corner?K.corner:0),zot(x)&&(x=null!=K.gradient?K.gradient:null),zot(k)&&(k=null!=K.gloss?K.gloss:null),zot(o)&&(o=null!=K.base?K.base:0!=C||Array.isArray(C)?v?"left":"bottom":"none"),zot(r)&&(r=null==K.keyEnabled||K.keyEnabled),zot(F)&&(F=null!=K.useTap&&K.useTap),zot(H)&&(H=null!=K.excludeCustomTap&&K.excludeCustomTap),zot(j)&&(j=null!=K.backdropColor?K.backdropColor:null),zot(G)&&(G=null!=K.styleLabels&&K.styleLabels),zot(U)&&(U=null==K.keyWrap||K.keyWrap),"none"==o||0==C||Array.isArray(C))Array.isArray(C)||(C=[C,C,C,C]);else switch(o){case"bottom":C=[C,C,0,0];break;case"left":C=[0,C,C,0];break;case"top":C=[0,0,C,C];break;case"right":C=[C,0,0,C]}var $=this;this.keyEnabled=r;var ee,te,oe,ne=0,re=[],ie=[],le=n.length,ae=(s-l*(le-1))/le,se=(c-l*(le-1)-2)/le;zot(j)||(oe=this.backdrop=new Jo.Rectangle(s,c,j,null,null,null,null,null,null,!1),this.addChild(oe));var ce,ue=!1;function de(e){for(var t=0;t<e.length;t++){var o=e[t];o.constructor!=={}.constructor?ce="string"==typeof o||"number"==typeof o||"Label"==o.type?(e[t]={type:"TabObject",label:String(null!=o)||"Label"==o.type?o:"1"},ce&&"TabObject"!=ce&&(ue=!0),"TabObject"):(ce&&"TabObject"==ce&&(ue=!0),"Other"):(ce&&"TabObject"!=ce&&(ue=!0),ce="TabObject",o.type="TabObject")}}de(n);for(var he,pe=0,ge=0,fe=0;fe<n.length;fe++)te=n[fe],v?J&&(te.width=te.width||s):(zot(te.width)&&ge++,pe+=zot(te.width)?ae:te.width);if(!v)if(s-l*(le-1)<pe)for(fe=0;fe<n.length;fe++)(te=n[fe]).width=(s-l*(le-1))/pe*(zot(te.width)?ae:te.width);else if(Math.round(pe)<Math.round(s-l*(le-1))&&0<ge)for(he=(le*ae-(pe-ge*ae))/ge,fe=0;fe<n.length;fe++)(te=n[fe]).width=zot(te.width)?he:te.width;function me(e,t){for(fe=0;fe<e.length;fe++)""!=(te=e[fe])&&"TabObject"==te.type&&(zot(te.label)&&(te.label=" "),"string"!=typeof te.label&&"number"!=typeof te.label||(te.label=new Jo.Label({text:te.label,size:null!=K.size?K.size:v?se/2:c/2,font:null!=K.font?K.font:null,style:G,valign:R,inherit:t})))}me(n,G?K:null);for(var ze=0,fe=0;fe<n.length;fe++)!(te=n[fe]).width&&v&&te.label.width>ze&&(ze=te.label.width);var ye=0;function be(e,t){var o=[],n=[];for(fe=0;fe<e.length;fe++){if("TabObject"==(te=e[fe]).type){var r={color:zot(te.color)?Jo.Pick.choose(f):te.color,rollColor:zot(te.rollColor)?Jo.Pick.choose(m):te.rollColor,downColor:zot(te.downColor)?Jo.Pick.choose(z):te.downColor,selectedColor:zot(te.selectedColor)?Jo.Pick.choose(y):te.selectedColor,selectedRollColor:zot(te.selectedRollColor)?Jo.Pick.choose(b):te.selectedRollColor,backgroundColor:zot(te.backgroundColor)?Jo.Pick.choose(u):te.backgroundColor,rollBackgroundColor:zot(te.rollBackgroundColor)?Jo.Pick.choose(d):te.rollBackgroundColor,downBackgroundColor:zot(te.downBackgroundColor)?Jo.Pick.choose(h):te.downBackgroundColor,selectedBackgroundColor:zot(te.selectedBackgroundColor)?Jo.Pick.choose(p):te.selectedBackgroundColor,selectedRollBackgroundColor:zot(te.selectedRollBackgroundColor)?Jo.Pick.choose(g):te.selectedRollBackgroundColor,wait:zot(te.wait)?Jo.Pick.choose(P):te.wait};if(t)for(var i in t)zot(t[i])||(r[i]=t[i]);(ee=new Jo.Button({width:v?zot(te.width)?J?s:ze+se/2+C[0]/2:te.width:zot(te.width)?ae:te.width,height:v?se:c,label:te.label,borderColor:null!=K.borderColor?K.borderColor:null,borderWidth:null!=K.borderWidth?K.borderWidth:null,backgroundColor:r.backgroundColor,rollBackgroundColor:r.rollBackgroundColor,downBackgroundColor:r.downBackgroundColor,downColor:r.downColor,corner:C,shadowColor:-1,gradient:x,gloss:k,backing:T?T.clone():null,rollBacking:A?A.clone():null,wait:r.wait,waitTime:zot(te.waitTime)?E:te.waitTime,waitBackgroundColor:zot(te.waitBackgroundColor)?S:te.waitBackgroundColor,rollWaitBackgroundColor:zot(te.rollWaitBackgroundColor)?B:te.rollWaitBackgroundColor,waitColor:zot(te.waitColor)?W:te.waitColor,rollWaitColor:zot(te.rollWaitBackgroundColor)?I:te.rollWaitColor,waitModal:zot(te.waitModal)?M:te.waitModal,waitEnabled:zot(te.waitEnabled)?O:te.waitEnabled,align:_,valign:R,indentH:Y,indentV:X,inherit:Jo.copy(K)})).tabInfo=r,ee.color=ee.tabInfo.color,ee.rollColor=ee.tabInfo.rollColor,ee.type="TabsButton",ee.content=te,ee.listIndentReady=!0}else{if(te.listIndentReady)ee=te;else{(ee=new Jo.Container).type=te.type,ee.content=te;for(var l=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],a=0;a<l.length;a++)te[l[a]]&&(ee[l[a]]=te[l[a]])}te.checkBox&&(ee.checkBox=te.checkBox),zot(ee.tabInfo)&&(ee.tabInfo={}),H&&(ee.excludeTap=!0),ee.tabInfo.color=zot(te.color)?f:te.color,ee.tabInfo.backgroundColor=zot(te.backgroundColor)?u:te.backgroundColor,te.listIndentReady||(new Jo.Rectangle(Math.max(te.width,v?J?s:ze+se/2+C[0]/2:te.width),Math.max(te.height,v?se:c),Jo.clear).addTo(ee).expand(0).cur(),te.center(ee).cur(),"center"!=L&&"middle"!=L&&te.pos(0,null,"right"==L),"center"!=D&&"middle"!=D&&te.pos(null,0,null,"bottom"==D),ee.listIndentReady=!0)}ee.width>ye&&(ye=ee.width),F?ee.tap(function(e){Ce(e.currentTarget.znum),$.dispatchEvent("change"),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}):ee.zimTabEvent=ee.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(e){Ce(e.currentTarget.znum),$.dispatchEvent("change"),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}),ee.on("mousedown",function(e){$.buttonDown=e.currentTarget}),ee.on("pressup",function(e){$.buttonDown=null;var t=e.currentTarget.znum;F||"click"==Jo.ACTIONEVENT?setTimeout(function(){xe(t)},50):xe(t)}),n.push(te.label),o.push(ee),ee.index=fe}return[o,n]}var ve=be(n);function we(){var e,t=0,o=0;for(fe=0;fe<ie.length;fe++)(e=ie[fe]).znum=fe,e.index=fe,e.index==ne&&w&&(e.backgroundColor=p,e.rollBackgroundColor=g,e.color=y),re[fe]&&(re[fe].znum=fe),$.addChild(e),v&&!J||(e.x=(s-e.width)/2,e.y=(c-e.height)/2),v?(e.y=o,o=e.y+e.height+l,"left"==L?e.x=("TabsButton"==e.type||"ListItem"==e.type?0:N)+(e.regX-(e.getBounds()?e.getBounds().x:0))*e.scaleX:"right"==L&&(e.x=(J?s:ye)-e.width-("TabsButton"==e.type||"ListItem"==e.type?0:N))):(e.x=t,t=e.x+e.width+l,"top"==D?e.y=("TabsButton"!=e.type||ue?N:0)+(e.regY-(e.getBounds()?e.getBounds().y:0))*e.scaleY:"bottom"==D&&(e.y=c-e.height-("TabsButton"!=e.type||ue?N:0))),e.enabled=!(fe==ne&&!a),e.visible=!0;zot(j)||$.removeChild(oe),$._bounds=null;var n=$.getBounds(),r=0,i=0;if(n||0==createjs.EaselJS.version[0]?n&&(r=v&&0!=n.width&&J?s:n.width,i=v&&0!=n.height?n.height:c,$.setBounds(r,i)):$.setBounds(),zot(j)||(oe.widthOnly=r,oe.heightOnly=i,$.addChildAt(oe,0)),v&&!J)for(fe=0;fe<=ie.length;fe++)"center"!=L&&"middle"!=L||(e.x=(r-e.width)/2)}function Ce(e,t){var o;e!=ne&&((o=ie[ne])&&w&&(o.tabInfo&&zot(o.tabInfo.wait)&&(o.tabInfo.backgroundColor&&(o.backgroundColor=o.tabInfo.backgroundColor),o.tabInfo.rollBackgroundColor&&(o.rollBackgroundColor=o.tabInfo.rollBackgroundColor),o.tabInfo.color&&o.label&&(o.color=o.tabInfo.color),o.tabInfo.rollColor&&o.label&&(o.rollColor=o.tabInfo.rollColor)),a||(o.enabled=!0)),(o=ie[ne=e])&&((e=o.tabInfo)&&zot(o.tabInfo.wait)&&w&&(e.selectedBackgroundColor&&(o.backgroundColor=zot(e.downBackgroundColor)||t?e.selectedBackgroundColor:e.downBackgroundColor),e.selectedRollBackgroundColor&&(o.rollBackgroundColor=e.selectedRollBackgroundColor),e.selectedColor&&o.label&&(o.color=zot(e.downColor)||t?e.selectedColor:e.downColor),e.selectedRollColor&&o.label&&(o.rollColor=e.selectedRollColor)),t&&!a&&(o.enabled=!1)))}function xe(e){var t=ie[e];t&&w&&((e=t.tabInfo)&&zot(e.wait)&&(e.selectedBackgroundColor&&(t.backgroundColor=$.selected==t?e.selectedBackgroundColor:e.backgroundColor),e.selectedColor&&t.label&&(t.color=$.selected==t?e.selectedColor:e.color)),a||(t.enabled=!1))}function ke(){$.keyFocus=!0;var e=document.activeElement;e&&e.blur()}ie=ve[0],re=ve[1],we(),this.addAt=function(e,t,o){zot(t)&&(t=ie.length),t=Jo.constrain(t,0,ie.length),Array.isArray(e)||(e=[e]),de(e),me(e,o);e=be(e,o),o=e[0],e=e[1];t<=ne&&(ne+=o.length);o=[t,0].concat(o);return Array.prototype.splice.apply(ie,o),o=[t,0].concat(e),Array.prototype.splice.apply(re,o),we(),$},this.removeAt=function(e,t){if(0==ie.length)return $;for(zot(e)&&(e=1),zot(t)&&(t=ie.length-e),(t=Jo.constrain(t,0,ie.length-e))<=ne&&ne<=t+e&&(ne=-1),t+e<ne&&(ne-=e),fe=t;fe<t+e;fe++)ie[fe].tabInfo&&(ie[fe].tabInfo.backgroundColor&&(ie[fe].backgroundColor=ie[fe].tabInfo.backgroundColor),ie[fe].tabInfo.color&&ie[fe].label&&(ie[fe].color=ie[fe].tabInfo.color)),F?ie[fe].noTap():ie[fe].off((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",ie[fe].zimTabEvent),ie[fe].removeFrom();return ie.splice(t,e),re.splice(t,e),we(),$},$.keyEvent=function(e){var t;$.keyEnabled&&$.keyFocus&&!$.zimAccessibility&&9==e.keyCode&&(t=ne,e.shiftKey?Ce(--t<0?U?n.length-1:0:t):Ce(++t>n.length-1?U?0:n.length-1:t),$.dispatchEvent("change"),$.dispatchEvent("keychange"),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update(),e.preventDefault())},WW.addEventListener("keydown",$.keyEvent),Object.defineProperty(this,"selected",{get:function(){return ie[ne]},set:function(){zon&&zogy("Tabs() - selected is read only - try index")}}),Object.defineProperty(this,"index",{get:function(){return ne},set:function(e){Ce(e,!0),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return this.index},set:function(e){this.index=e}}),this.last=function(){return this.index=this.buttons.length-1,this},this.first=function(){return this.index=0,this},Object.defineProperty(this,"tabs",{get:function(){return ne},set:function(e){Ce(Math.min(Math.max(e,0),n.length-1)),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return $.buttons[0].tabItems?$.buttons[0].tabItems.color:f},set:function(e){if(f=e,$.buttons[0].tabInfo){for(var t=0;t<$.buttons.length;t++)$.buttons[t].tabInfo&&($.buttons[t].tabInfo.color=e),t==ne&&w||($.buttons[t].color=f);Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return $.buttons[0].tabItems?$.buttons[0].tabItems.rollColor:m},set:function(e){if(m=e,$.buttons[0].tabInfo){for(var t=0;t<$.buttons.length;t++)$.buttons[t].tabInfo&&($.buttons[t].tabInfo.rollColor=e),$.buttons[t].rollColor=m,t!=ne&&$.buttons[t].rolled&&($.buttons[t].color=m);Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return $.buttons[0].tabItems?$.buttons[0].tabItems.selectedColor:y},set:function(e){if(y=e,$.buttons[0].tabInfo){for(var t=0;t<$.buttons.length;t++)$.buttons[t].tabInfo&&($.buttons[t].tabInfo.selectedColor=e),t==ne&&w&&($.buttons[t].color=y);Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return $.buttons[0].tabItems?$.buttons[0].tabItems.selectedRollColor:b},set:function(e){if(b=e,$.buttons[0].tabInfo){for(var t=0;t<$.buttons.length;t++)$.buttons[t].tabInfo&&($.buttons[t].tabInfo.selectedRollColor=e),t==ne&&w&&$.buttons[t].rolled&&($.buttons[t].color=b);Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return $.buttons[0].tabItems?$.buttons[0].tabItems.backgroundColor:u},set:function(e){if(u=e,$.buttons[0].tabInfo){for(var t=0;t<$.buttons.length;t++)$.buttons[t].tabInfo&&($.buttons[t].tabInfo.backgroundColor=e),t==ne&&w||($.buttons[t].backgroundColor=u);Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return $.buttons[0].tabItems?$.buttons[0].tabItems.rollBackgroundColor:d},set:function(e){if(d=e,$.buttons[0].tabInfo){for(var t=0;t<$.buttons.length;t++)$.buttons[t].tabInfo&&($.buttons[t].tabInfo.rollBackgroundColor=e),$.buttons[t].rollBackgroundColor=d,t!=ne&&$.buttons[t].rolled&&($.buttons[t].backgroundColor=d);Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return $.buttons[0].tabItems?$.buttons[0].tabItems.selectedBackgroundColor:p},set:function(e){if(p=e,$.buttons[0].tabInfo){for(var t=0;t<$.buttons.length;t++)$.buttons[t].tabInfo&&($.buttons[t].tabInfo.selectedBackgroundColor=e),t==ne&&w&&($.buttons[t].backgroundColor=p);Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return $.buttons[0].tabItems?$.buttons[0].tabItems.selectedRollBackgroundColor:g},set:function(e){if(g=e,$.buttons[0].tabInfo){for(var t=0;t<$.buttons.length;t++)$.buttons[t].tabInfo&&($.buttons[t].tabInfo.selectedRollBackgroundColor=e),t==ne&&w&&$.buttons[t].rolled&&($.buttons[t].backgroundColor=g);Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!$.stage||$.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return re[ne]},set:function(){zon&&zogy("Tabs() - selected is read only - try index")}}),Object.defineProperty(this,"text",{get:function(){return null!=re[ne]?re[ne].text:void 0},set:function(){zon&&zogy("Tabs() - selected is read only - try index")}}),Object.defineProperty(this,"buttons",{get:function(){return ie},set:function(){zon&&zogy("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return re},set:function(){zon&&zogy("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty($,"enabled",{get:function(){return $._enabled},set:function(e){zt($,e)}}),null!=WW.KEYFOCUS&&(Jo.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Jo.KEYFOCUS==$},set:function(){Jo.KEYFOCUS=$}}),r&&Jo.KEYFOCUS&&ke(),this.on("mousedown",function(){r&&ke()});e=$.getBounds();zot(e)||0==e.width?$.setBounds(0,0,s,c):$.width=s,zot(q)&&zot(K.selectedIndex)||!zot(V)||!zot(K.index)||(V=zot(q)?K.selectedIndex:q),zot(V)&&(V=null!=K.index?K.index:0),$.index=V,!1!==Q&&Jo.styleTransforms(this,K),this.clone=function(){for(var e=Jo.copy(n,!0),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return $.cloneProps(new Jo.Tabs(s,c,e,u,d,h,p,g,f,m,z,y,b,v,l,a,w,C,o,r,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,i,Y,X,N,F,H,V,G,U,q,Q,this.group,Z))},this.doDispose=function(e,t,o){$.keyEvent&&WW.removeEventListener("keydown",$.keyEvent),Jo.loop($.buttons,function(e){e.dispose()}),$.keyEvent=null,o||this.zimContainer_dispose(!0),w=te=n=re=ee=ie=null}},Jo.extend(Jo.Tabs,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Tabs.prototype.dispose=function(e){return this.doDispose(null,null,e)},Jo.Pad=function(e,n,t,o,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j){var L;if(L=zob(Jo.Pad,arguments,"width, cols, rows, keys, backgroundColor, rollBackgroundColor, downBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, downColor, selectedColor, selectedRollColor, spacing, currentEnabled, currentSelected, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, index, selectedIndex, style, group, inherit",this))return L;z_d("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=O;var D,_=!1===M?{}:Jo.getStyle(this.type,this.group,j);if(zot(e)&&(e=null!=_.width?_.width:150),zot(n)&&(n=null!=_.cols?_.cols:3),zot(t)&&(t=null!=_.rows?_.rows:n),zot(o))if(null!=_.keys)o=_.keys;else for(o=[],D=1;D<=t*n;D++)o.push(D);zot(f)&&(f=null==_.currentEnabled||_.currentEnabled),zot(g)&&(g=null!=_.spacing?_.spacing:1);var R,Y=this;this.cols=n,this.rows=t;var X,N=e/n-g,F=[],H=0;for(this.labels=[],this.buttons=[],D=0;D<t;D++){for(var V=[],G=0;G<n;G++)V.push(null!=o[H]?o[H]:""),H++;var U=null!=_.corner?_.corner:z;U&&!Array.isArray(U)&&(U=[U,U,U,U]),X=F[D]=new Jo.Tabs({width:e,height:N,tabs:V,backgroundColor:null!=_.backgroundColor?_.backgroundColor:r,rollBackgroundColor:null!=_.rollBackgroundColor?_.rollBackgroundColor:i,downBackgroundColor:null!=_.downBackgroundColor?_.downBackgroundColor:l,selectedBackgroundColor:null!=_.selectedBackgroundColor?_.selectedBackgroundColor:a,color:null!=_.color?_.color:c,rollColor:null!=_.rollColor?_.rollColor:u,downColor:null!=_.downColor?_.downColor:d,selectedColor:null!=_.selectedColor?_.selectedColor:h,spacing:null!=_.spacing?_.spacing:g,currentEnabled:null!=_.currentEnabled?_.currentEnabled:f,currentSelected:null!=_.currentSelected?_.currentSelected:m,corner:U,backing:null!=_.backing?_.backing.clone():w,rollBacking:null!=_.rollBacking?_.rollBacking.clone():C,base:null,keyEnabled:!1,gradient:null!=_.gradient?_.gradient:b,gloss:null!=_.gloss?_.gloss:v,wait:null!=_.wait?_.wait:x,waitTime:null!=_.waitTime?_.waitTime:k,waitBackgroundColor:null!=_.waitBackgroundColor?_.waitBackgroundColor:T,rollWaitBackgroundColor:null!=_.rollWaitBackgroundColor?_.rollWaitBackgroundColor:A,waitColor:null!=_.waitColor?_.waitColor:P,rollWaitColor:null!=_.rollWaitColor?_.rollWaitColor:E,waitModal:null!=_.waitModal?_.waitModal:S,waitEnabled:null!=_.waitEnabled?_.waitEnabled:B,group:O,style:!1}),this.labels=this.labels.concat(X.labels),this.buttons=this.buttons.concat(X.buttons),this.addChild(X),X.index=-1,X.y=(N+g)*D,X.znum=D,X.on("change",q)}function q(e){var t=e.target;Y.selected=t.selected,Y.text=t.text,Y.label=t.label;for(var e=t.index,o=0;o<F.length;o++)t!=F[o]&&(F[o].index=-1);R=t.znum*n+e,Y.dispatchEvent("change"),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update()}this.tabs=F,Object.defineProperty(this,"index",{get:function(){return R},set:function(e){R=e;for(var t=0;t<F.length;t++)F[t].index=-1;e=Math.floor(R/n);0<=e&&e<Y.tabs.length&&(Y.tabs[e].index=R%n)}}),Object.defineProperty(this,"selectedIndex",{get:function(){return this.index},set:function(e){this.index=e}}),this._enabled=!0,Object.defineProperty(Y,"enabled",{get:function(){return Y._enabled},set:function(e){zt(Y,e)}}),zot(I)&&zot(_.selectedIndex)||!zot(W)||!zot(_.index)||(W=zot(I)?_.selectedIndex:I),zot(W)&&(W=null!=_.index?_.index:0),Y.index=W,!1!==M&&Jo.styleTransforms(this,_),this.clone=function(){return Y.cloneProps(new Jo.Pad(e,n,t,o,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,this.group,j))},this.dispose=function(e,t,o){Jo.loop(F,function(e){e.dispose()}),this.labels=this.buttons=this.tabs=null,X=F=Y.rowTabs=null,o||this.zimContainer_dispose(!0)}},Jo.extend(Jo.Pad,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.NumPad=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C){if(T=zob(Jo.NumPad,arguments,"advanced, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, numberCorner, close, closeColor, collapse, collapseColor, collapsed, align, shadowColor, shadowBlur, draggable, boundary, style, group, inherit",this))return T;z_d("57.7"),this.group=w;var x=!1===v?{}:Jo.getStyle("NumPad",this.group,C);zot(e)&&(e=null!=x.advanced&&x.advanced);var k="simple"==e?310:400,T="simple"==e?440:e?620:530;zot(t)&&(t=null!=x.titleBar?x.titleBar:"NUMPAD"),zot(o)&&(o=null!=x.titleBarColor?x.titleBarColor:Jo.white),zot(n)&&(n=null!=x.titleBarBackgroundColor?x.titleBarBackgroundColor:Jo.grey),zot(r)&&(r=null!=x.titleBarHeight?x.titleBarHeight:40),zot(i)&&(i=null!=x.backgroundColor?x.backgroundColor:Jo.darker),zot(l)&&(l=null!=x.borderColor?x.borderColor:Jo.pewter),zot(a)&&(a=null!=x.borderWidth?x.borderWidth:null),l<0||a<0?l=a=null:null!=l&&null==a&&(a=1),zot(s)&&(s=null!=x.corner?x.corner:15),zot(c)&&(c=null!=x.numberCorner?x.numberCorner:30),zot(f)&&(f=null!=x.align?x.align:"left"),zot(m)&&(m=null!=x.shadowColor?x.shadowColor:"rgba(0,0,0,.3)"),zot(z)&&(z=null!=x.shadowBlur?x.shadowBlur:14),zot(y)&&(y=null==x.draggable||x.draggable),zot(b)&&(b=null!=x.boundary?x.boundary:null),zot(u)&&(u=null==x.close||x.close),zot(d)&&(d=null!=x.closeColor?x.closeColor:zot(o)?Jo.grey:o),Array.isArray(s)||(s=[s,s,s,s]),zot(h)&&(h=null==x.collapse||x.collapse),zot(p)&&(p=null!=x.collapseColor?x.collapseColor:zot(o)?Jo.grey:o),zot(g)&&(g=null!=x.collapsed&&x.collapsed),this.zimPanel_constructor(k,T,null,t,o,n,r,i,l,a,s,u,d,null,null,null,h,p,g,f,m,z,y,b,v,w,C),this.type="NumPad";var A=this;function P(e,t){return zot(t)&&(t=mist),{label:e,backgroundColor:t,rollBackgroundColor:white,color:darker,rollColor:darker}}w=[P("C",Jo.red.darken(.1)),P(new Jo.Label({text:"␣",size:90,shiftV:-24}),Jo.yellow.darken(.1)),P(new Jo.Label({text:"/",size:48,bold:!0,shiftV:3})),P(new Jo.Label({text:"*",size:65,shiftV:18})),1,2,3,P(new Jo.Label({text:"-",size:60,shiftV:-3})),4,5,6,P(new Jo.Label({text:"+",size:55,shiftV:3})),7,8,9,P(new Jo.Label({text:"⌫",size:"ios"==M?60:35}),Jo.red.darken(.1)),P(new Jo.Label({text:",",size:70,shiftV:-3})),P(new Label({text:".",size:70,shiftV:-3})),0,P(new Jo.Label({text:"⏎",size:"ios"==M?40:50,shiftV:5}),Jo.green.darken(.1))];function E(){return"rtl"==getComputedStyle(zdf.canvas).direction}"simple"==e?(w.splice(0,4),w.splice(3,1),w.splice(6,1),w.splice(10,2),w[12]=w[9],w[9]=w[10],w[10]=w[12]):e&&(w.splice(2,0,P("%",yellow.darken(.1))),w.splice(4,0,P(new Jo.Label({text:"^",size:47,shiftV:10}),yellow.darken(.1))),w.splice(4,0,P(E()?"(":")",yellow.darken(.1))),w.splice(4,0,P(E()?")":"(",yellow.darken(.1)))),A.pad=new Jo.Pad({width:"simple"==e?290:380,cols:"simple"==e?3:4,rows:"simple"==e?4:e?6:5,keys:w,spacing:6,currentSelected:!1,backgroundColor:Jo.grey,rollBackgroundColor:Jo.tin,selectedBackgroundColor:Jo.grey,downBackgroundColor:Jo.green,corner:c}),A.pad.on("mousedown",function(){"C"==A.pad.text?A.key="clear":"␣"==A.pad.text?A.key="space":"⌫"==A.pad.text?A.key="backspace":"⏎"==A.pad.text?A.key="enter":A.key=A.pad.text,A.dispatchEvent("pressed")}),A.add(A.pad,null,!0),!1!==v&&Jo.styleTransforms(this,x),this.clone=function(){return A.cloneProps(new Jo.NumPad(e,t?t.clone():"",o,n,r,i,l,a,s,c,u,d,h,p,A.collapsed,f,m,z,y,b,v,this.group,C))}},Jo.extend(Jo.NumPad,Jo.Panel,["clone"],"zimPanel",!1),Jo.DPad=function(e,o,t,n,r,i,l,a,s,c,u,d,h,p,g,f,m){if(z=zob(Jo.DPad,arguments,"axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",this))return z;z_d("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=f;var z=!1===g?{}:Jo.getStyle(this.type,this.group,m);zot(e)&&(e=null!=z.axis?z.axis:"all"),zot(o)&&(o=null!=z.width?z.width:100),zot(t)&&(t=null!=z.backgroundColor?z.backgroundColor:Jo.granite),zot(r)&&(r=null!=z.borderColor?z.borderColor:null),zot(n)&&(n=null!=z.borderWidth?z.borderWidth:null),r<0||n<0?r=n=null:null!=r&&null==n&&(n=1),zot(i)&&(i=null!=z.indicatorColor?z.indicatorColor:Jo.moon),zot(l)&&(l=null!=z.indicatorPressColor?z.indicatorPressColor:Jo.lighter),zot(a)&&(a=null!=z.indicatorScale?z.indicatorScale:1),zot(s)&&(s=null!=z.indicatorRadius?z.indicatorRadius:null),zot(c)&&(c=null==z.innerCircle||z.innerCircle),zot(u)&&(u=null!=z.innerScale?z.innerScale:.5),zot(d)&&(d=null!=z.activeRadius?z.activeRadius:o),zot(h)&&(h=null==z.clamp||z.clamp),zot(p)&&(p=null!=z.logo&&z.logo);var y=this;this.axis=e,this.outer=new Jo.Circle(o/2,t,r,n).addTo(this);f=this.inner=new Jo.Circle(o*u/2,"rgba(0,0,0,.2)").center(this);p&&(this.logo=new Jo.Label({text:"D",bold:!0}).center(f).mov(1,2).alp(.3));var b=(new Jo.Container).addTo(this),v=.2*(o-n)*a,f=8;"vertical"==e?f=2:"horizontal"==e?(f=2,b.rotation=90):"both"==e&&(f=4),Jo.loop(f,function(e,t){new Jo.Triangle(v,v,v,i).addTo(b).reg(null,zot(s)?.475*(o-n):s).rot(360*e/t)});var w,C,x=0,k=0;y.dirX=0;y.dirY=0;this.on("mousedown",function(e){C=e,b.loop(function(e){e.color=l}),y.ticker=Jo.Ticker.add(function(){var e;x=(e=C).stageX/Jo.scaX,k=e.stageY/Jo.scaY,w=y.globalToLocal(x,k),(e=new createjs.Event("change")).dirX=2*((w.x+d)/(2*d)-.5),e.dirY=2*((w.y+d)/(2*d)-.5),h&&(e.dirX=Jo.constrain(e.dirX,-1,1),e.dirY=Jo.constrain(e.dirY,-1,1)),y.dirX=e.dirX,y.dirY=e.dirY,y.dispatchEvent(e)})}),this.on("pressmove",function(e){C=e}),this.on("pressup",function(){Jo.Ticker.remove(y.ticker),y.dirX=y.dirY=0,b.loop(function(e){e.color=i}),y.stage&&y.stage.update()}),this._enabled=!0,Object.defineProperty(y,"enabled",{get:function(){return y._enabled},set:function(e){zt(y,e)}}),!1!==g&&Jo.styleTransforms(this,z),this.clone=function(){return y.cloneProps(new Jo.DPad(e,o,t,n,r,i,l,a,s,c,u,d,h,p,g,this.group,m))},this.dispose=function(e,t,o){return this.ticker&&Jo.Ticker.remove(this.ticker),o||this.zimContainer_dispose(!0),!0}},Jo.extend(Jo.DPad,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Radial=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_){if(R=zob(Jo.Radial,arguments,"labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, index, selectedIndex, style, group, inherit",this))return R;z_d("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=D;var R=!1===L?{}:Jo.getStyle(this.type,this.group,_);zot(e)&&(e=null!=R.labels?R.labels:["A","B","C","D","E"]),zot(t)&&(t=null!=R.size?R.size:30),zot(o)&&(o=null!=R.font?R.font:"verdana"),zot(l)&&(l=null!=R.startAngle?R.startAngle:null),zot(a)&&(a=null!=R.totalAngle?R.totalAngle:360),zot(s)&&(s=null!=R.angles?R.angles:null),zot(c)&&(c=null==R.flip||R.flip),zot(u)&&(u=null!=R.shiftRadial?R.shiftRadial:0),zot(d)&&(d=null!=R.icons?R.icons:null),zot(h)&&(h=null!=R.rollIcons?R.rollIcons:null),zot(p)&&(p=null!=R.rotateIcons&&R.rotateIcons),zot(g)&&(g=null!=R.iconsShiftRadial?R.iconsShiftRadial:0),zot(n)&&(n=null!=R.height?R.height:60),zot(r)&&(r=null!=R.coreRadius?R.coreRadius:100),zot(i)&&(i=null!=R.coreColor?R.coreColor:Jo.dark),zot(b)&&(b=null!=R.backdropColor?R.backdropColor:Jo.clear),zot(f)&&(f=null!=R.backgroundColor?R.backgroundColor:Jo.granite),zot(m)&&(m=null!=R.rollBackgroundColor?R.rollBackgroundColor:Jo.tin),zot(z)&&(z=null!=R.selectedBackgroundColor?R.selectedBackgroundColor:Jo.charcoal),zot(y)&&(y=null!=R.selectedRollBackgroundColor?R.selectedRollBackgroundColor:z),zot(v)&&(v=null!=R.color?R.color:Jo.white),zot(w)&&(w=null!=R.rollColor?R.rollColor:v),zot(C)&&(C=null!=R.selectedColor?R.selectedColor:v),zot(x)&&(x=null!=R.selectedRollColor?R.selectedRollColor:w),zot(k)&&(k=null!=R.borderColor?R.borderColor:Jo.dark),zot(T)&&(T=null!=R.borderWidth?R.borderWidth:2),zot(E)&&(E=null!=R.gapAsAngle&&R.gapAsAngle),zot(P)&&(P=null!=R.gap?R.gap:E?3:6),zot(A)&&(A=null!=R.gradient?R.gradient:null),!0===A&&(A=.1),zot(S)&&(S=null!=R.spacing?R.spacing:6),zot(B)&&(B=null!=R.spacingInner?R.spacingInner:S),zot(W)&&(W=null!=R.spacingOuter?R.spacingOuter:S),zot(I)&&(I=null!=R.currentEnabled&&R.currentEnabled),zot(M)&&(M=null==R.currentSelected||R.currentSelected);var Y=this,X=this.innerRadius=r+B,N=this.outerRadius=X+n;this.setBounds(-N,-N,2*N,2*N);var F,D=this.backdrop=new Jo.Circle(N+W,b).center(this);if(0<r&&(this.core=new Jo.Circle(r,i).center(this)),s&&s.length<e.length-1)return zon&&zogy("Radial() - not enough angles provided"),this;if(e&&0<e.length||d&&0<d.length){if(e&&0<e.length&&(F=e.length),d&&0<d.length&&(F=0<F?Math.min(d.length,F):d.length),h&&h.length<F)for(var H=0;H<F-h.length;H++)h.push(new Jo.Circle(1,Jo.clear));var V=D.width,G=this.buttons=new Jo.Container(-V/2,-V/2,V,V).centerReg(this),U=P;E||(P=P/N*180/Math.PI,U=U/X*180/Math.PI);for(var q=(a-P*F+(360==a?0:P))/F,Q=l||0,Z=0;Z<F;Z++){s&&(q=s[Z]);var K=new Jo.Shape(-V/2,-V/2,V,V).centerReg(G);K.num=Z,K.zimSelected=!1,K.angle=q;var J=K.graphics;K.backgroundColor=Jo.Pick.choose(f),K.rollBackgroundColor=Jo.Pick.choose(m),K.selectedBackgroundColor=Jo.Pick.choose(z),K.selectedRollBackgroundColor=Jo.Pick.choose(y),K.color=Jo.Pick.choose(v),K.rollColor=Jo.Pick.choose(w),K.selectedColor=Jo.Pick.choose(C),K.selectedRollColor=Jo.Pick.choose(x),K.colorCommand=J.f(K.backgroundColor).command,(zot(T)||0<T)&&(zot(k)&&zot(T)||(zot(k)&&(k=Jo.black),K.borderColorCommand=J.s(k).command,K.borderWidthCommand=J.ss(T).command));var $,ee=(Q-90-q/2)*Math.PI/180,te=(Q-90+q/2)*Math.PI/180,oe=(Q-90+(q+P-U)/2)*Math.PI/180,ne=(Q-90-(q+P-U)/2)*Math.PI/180;J.arc(0,0,N,ee,te,!1),J.arc(0,0,X,oe,ne,!0).cp(),A&&(J.s().ss().rf(["rgba(0,0,0,"+A+")","rgba(255,255,255,"+A+")"],[0,1],0,0,X,0,0,N),J.arc(0,0,N,ee,te,!1),J.arc(0,0,X,oe,ne,!0).cp()),K.cur("pointer"),K.zimOverEvent=K.on("mouseover",function(e){e=e.target;e.colorCommand.style=e==Y.selected&&M?e.selectedRollBackgroundColor:e.rollBackgroundColor,e.label&&(e.label.color=e==Y.selected&&M?e.selectedRollColor:e.rollColor),h&&(e.holder.removeAllChildren(),h[e.num].loc(1,0,e.holder)),Y.stage&&Y.stage.update()}),K.zimOutEvent=K.on("mouseout",function(e){e=e.target;e.colorCommand.style=e==Y.selected&&M?e.selectedBackgroundColor:e.backgroundColor,e.label&&(e.label.color=e==Y.selected&&M?e.selectedColor:e.color),h&&(e.holder.removeAllChildren(),d&&d[e.num].loc(1,0,e.holder)),Y.stage&&Y.stage.update()}),K.zimDownEvent=K.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(e){var t=e.target,e=t!==Y.selected;Y.lastSelected=Y.selected,re=t.num,M?e?(Y.selected&&(Y.selected.colorCommand.style=Y.selected.backgroundColor,Y.selected.label&&(Y.selected.label.color=Y.selected.color)),Y.selected=t,Y.label=t.label,Y.label&&(Y.text=Y.label.text),Y.icon=t.icon,t.colorCommand.style=t.selectedRollBackgroundColor,t.label&&(t.label.color=t.selectedRollColor)):I||(re=-1,Y.selected=null,Y.label=null,Y.text=null,Y.icon=null,t.colorCommand.style=t.rollBackgroundColor,t.label&&(t.label.color=t.rollColor)):(Y.selected=t,Y.label=t.label,Y.label&&(Y.text=Y.label.text),Y.icon=t.icon),Y.dispatchEvent("change"),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update()}),d&&0<d.length&&(ne=X+n/2+g,(ne=K.holder=new Jo.Container(3,ne).addTo(this).reg(1,ne).rot(Q)).mouseChildren=!1,ne.mouseEnabled=!1,K.icon=d[Z],d[Z].loc(1,0,ne),p||(d[Z].rotation=-Q)),e&&0<e.length&&($="LabelOnArc"!=e[Z].type?($="Label"==e[Z].type?e[Z]:new Jo.Label({text:e[Z],size:t,font:o,color:v,style:L,inherit:_}),new Jo.LabelOnArc({label:$,color:v,size:t,spacing:-5,flip:c&&90<Q&&Q<270,radius:X+(n-$.height)/2+2+u,style:L,inherit:_})):e[Z],e[Z]=$,(K.label=$).center(this).rot(Q),$.mouseChildren=!1,$.mouseEnabled=!1),Z!=e.length-1&&(Q+=(q+(s?s[Z+1]:q))/2+P)}zot(l)||(Y.rotation+=Y.buttons.getChildAt(0).angle/2)}var re=null;Object.defineProperty(this,"index",{get:function(){return re},set:function(e){var t;Y.buttons&&(t=Y.buttons.getChildAt(e)),t!==Y.selected&&(Y.selected&&(Y.selected.colorCommand.style=Y.selected.backgroundColor,Y.selected.label&&(Y.selected.label.color=Y.selected.color)),(Y.selected=t)&&(M&&(t.colorCommand.style=t.selectedRollBackgroundColor),t.label&&(M&&(t.label.color=t.selectedColor),Y.text=t.label.text))),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!Y.stage||Y.stage.update()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return this.index},set:function(e){this.index=e}}),zot(j)&&zot(R.selectedIndex)||!zot(O)||!zot(R.index)||(O=zot(j)?R.selectedIndex:j),zot(O)&&(O=null!=R.index?R.index:0),Y.index=O,!1!==L&&Jo.styleTransforms(this,R),this.clone=function(){return Y.cloneProps(new Jo.Radial(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,this.group,_))}},Jo.extend(Jo.Radial,Jo.Container,"clone","zimContainer",!1),Jo.RadialMenu=function(e,i,l,a,s,t,o,n,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,r,S,B,W,I,M,O,j,L,D){var _="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",R=_.split(", "),Y=!1;if(e&&e.constructor==={}.constructor)for(var X in e)if(0<=R.indexOf(X)){Y=!0;break}if(e&&Y&&(F=zob(Jo.RadialMenu,arguments,_,this)))return F;z_d("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=L;_=!1===j?{}:Jo.getStyle(this.type,this.group,D);zot(e)&&(e=null!=_.menu?_.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),zot(i)&&(i=null!=_.size?_.size:30),zot(l)&&(l=null!=_.font?_.font:"verdana"),zot(c)&&(c=null!=_.startAngle?_.startAngle:null),zot(u)&&(u=null!=_.totalAngle?_.totalAngle:360),zot(d)&&(d=null==_.flip||_.flip),zot(p)&&(p=null!=_.rotateIcons&&_.rotateIcons),zot(h)&&(h=null!=_.shiftRadial?_.shiftRadial:0),zot(g)&&(g=null!=_.iconsShiftRadial?_.iconsShiftRadial:0),zot(a)&&(a=null!=_.height?_.height:60),zot(s)&&(s=null!=_.coreRadius?_.coreRadius:100),zot(t)&&(t=null!=_.coreColor?_.coreColor:Jo.dark),zot(o)&&(o=null!=_.title?_.title:"MENU"),zot(n)&&(n=null!=_.titleIcon?_.titleIcon:null),zot(b)&&(b=null!=_.backdropColor?_.backdropColor:Jo.clear),zot(f)&&(f=null!=_.backgroundColor?_.backgroundColor:Jo.granite),zot(m)&&(m=null!=_.rollBackgroundColor?_.rollBackgroundColor:Jo.tin),zot(z)&&(z=null!=_.selectedBackgroundColor?_.selectedBackgroundColor:Jo.charcoal),zot(y)&&(y=null!=_.selectedRollBackgroundColor?_.selectedRollBackgroundColor:z),zot(v)&&(v=null!=_.color?_.color:Jo.white),zot(w)&&(w=null!=_.rollColor?_.rollColor:v),zot(C)&&(C=null!=_.selectedColor?_.selectedColor:v),zot(x)&&(x=null!=_.selectedRollColor?_.selectedRollColor:w),zot(k)&&(k=null!=_.borderColor?_.borderColor:Jo.dark),zot(T)&&(T=null!=_.borderWidth?_.borderWidth:2),zot(E)&&(E=null!=_.gapAsAngle&&_.gapAsAngle),zot(P)&&(P=null!=_.gap?_.gap:E?3:6),zot(r)&&(r=null!=_.spacing?_.spacing:6),zot(A)&&(A=null!=_.gradient?_.gradient:null),!0===A&&(A=.1),zot(S)&&(S=null!=_.spacingInner?_.spacingInner:r),zot(B)&&(B=null!=_.spacingOuter?_.spacingOuter:r),zot(W)&&(W=null!=_.currentEnabled&&_.currentEnabled),zot(I)&&(I=null==_.currentSelected||_.currentSelected),zot(M)&&(M=null!=_.open&&_.open),zot(O)&&(O=null==_.under||_.under);var N=this,F=(zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",H=null,L=this.core=new Jo.Circle({radius:s,color:t,style:j,inherit:D}).addTo(this);n&&(this.titleIcon=n.center(L)),o&&(this.title=new Jo.Label({text:o,size:i,font:l,color:v,style:j,inherit:D}).center(L)),L.cur("pointer"),L.on(F,function(){N.leafNode=!1,0==q.length?Q():(Jo.loop(q,function(e){e.index=-1,e.removeFrom(),q=[]}),N.outerLevel=0,N.selected=N.outerMenu=N.selectedMenu=N.text=null),!W&&N.selected==H||N.dispatchEvent("change"),H=N.selected,N.stage&&N.stage.update()}),this.closeRings=function(e){zot(e)&&(e=N.outerLevel);var o=N.outerLevel-e;Jo.loop(q,function(e,t){o-1<t&&(e.removeFrom(),e.index=-1,q.pop())},!0),N.outerLevel=o,N.outerMenu=q[q.length-1],N.outerMenu&&(N.outerMenu.index=-1),N.selected=N.selectedMenu=N.text=null,q[q.length-2]?(N.selectedMenu=q[q.length-2],N.index=N.selectedMenu.index):N.index=-1,N.selected!=H&&N.dispatchEvent("change"),H=N.selected,N.stage&&N.stage.update()};var V,G,U={};N.outerLevel=0,e.constructor=={}.constructor&&(e={core:e},V=N.tree=new Jo.Hierarchy(e),G=V.getLinearIDs()),N.lastRadial=null;var q=this.radials=[];function Q(e){var o,t,n,r;e?o=e.ringLevel:(o=0,r=s),Jo.loop(q,function(e,t){o-1<t&&(e.removeFrom(),e.index=-1,q.pop())},!0),e&&(t=e.selected),t?(n=t.id,r=e.outerRadius,Z(n,o+1,r)):e||Z("id0",o+1,r),N.selected=t,N.selected?(N.selectedMenu=q[N.selected.menu.ringLevel-1],N.index=N.selected.num,N.selected.label?N.text=N.selected.label.text:N.text=null):W&&e?(N.index=e.index,N.label=e.label,N.text=e.text,N.icon=e.icon,N.selectedMenu=e):(N.text=null,N.index=-1,N.selectedMenu=null),N.stage&&N.stage.update()}function Z(e,t,o){var n,r;t&&(N.outerLevel=t),U[e]||(t=(r=V.getData(e)).list)&&!Jo.isEmpty(t)&&(o={labels:V.getLinearList(t),coreRadius:o,size:i,font:l,startAngle:c,totalAngle:u,flip:d,rotateIcons:p,shiftRadial:h,iconsShiftRadial:g,height:a,coreColor:Jo.clear,backdropColor:b,backgroundColor:f,rollBackgroundColor:m,selectedBackgroundColor:z,selectedRollBackgroundColor:y,color:v,rollColor:w,selectedColor:C,selectedRollColor:x,borderColor:k,borderWidth:T,gapAsAngle:E,gap:P,gradient:A,spacingInner:S,spacingOuter:B,currentSelected:I,currentEnabled:W,style:j,inherit:D},r.styles&&(o=Jo.merge(o,r.styles)),n=U[e]=new Jo.Radial(o),G=V.getLinearIDs(t),n.buttons.loop(function(e,t){e.menu=n,e.id=G[t]}),n.ringLevel=N.outerLevel,n.index=-1,n.on("change",function(e){N.leafNode=!1,Q(e.target),!W&&N.selected==H||N.dispatchEvent("change"),H=N.selected})),U[e]?(q.push(U[e]),U[e].center(N),O&&U[e].bot()):(N.leafNode=!0,--N.outerLevel),N.outerMenu=n}M&&Q(),!1!==j&&Jo.styleTransforms(this,_),this.clone=function(){return N.cloneProps(new Jo.RadialMenu(e,i,l,a,s,t,o,n,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,r,S,B,W,I,M,O,j,this.group,D))}},Jo.extend(Jo.RadialMenu,Jo.Container,"clone","zimContainer",!1),Jo.ColorPicker=function(e,o,n,r,i,t,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S){if(W=zob(Jo.ColorPicker,arguments,"width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, index, selectedColor, dropperTarget, spectrumCollapse, spectrumMode, spectrumClose, spectrumOk, spectrumTitle, tolerancePicker, collapsed, selectedIndex, style, group, inherit",this))return W;z_d("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=E;var B,W=!1===P?{}:Jo.getStyle(this.type,this.group,S);zot(e)&&(e=null!=W.width?W.width:500),zot(o)&&(o=null!=W.colors?W.colors:"spectrum"),"legacy"==o&&(B=!0),zot(n)&&(n=null!=W.cols?W.cols:10),zot(r)&&(r=null!=W.spacing?W.spacing:2);E=!B&&0<o.length&&o.length<=n;"spectrum"==o&&(n=10,E=!(r=2)),zot(t)&&(t=null!=W.alphaPicker?W.alphaPicker:!E),zot(k)&&(k=null!=W.tolerancePicker&&W.tolerancePicker),k&&(t=!1),zot(i)&&(i=null!=W.greyPicker?W.greyPicker:!E),zot(s)&&(s=null!=W.shadowColor?W.shadowColor:"rgba(0,0,0,.3)"),zot(c)&&(c=null!=W.shadowBlur?W.shadowBlur:14),zot(u)&&(u=null!=W.buttonBar?W.buttonBar:!E),zot(a)&&(a=u||"spectrum"==o?null==W.draggable||W.draggable:null!=W.draggable&&W.draggable),zot(d)&&(d=null!=W.circles&&W.circles),zot(h)&&(h=null!=W.indicator&&W.indicator,u||(h=null==W.indicator||W.indicator)),zot(p)&&(p=null!=W.backgroundColor?W.backgroundColor:Jo.black),zot(l)&&(l=null!=W.startBackgroundColor?W.startBackgroundColor:null),zot(g)&&(g=null==W.keyArrows||W.keyArrows),zot(y)&&(y=null!=W.dropperTarget&&W.dropperTarget),zot(b)&&(b=null==W.spectrumCollapse||W.spectrumCollapse),zot(v)&&(v=null==W.spectrumMode||W.spectrumMode),zot(w)&&(w=null==W.spectrumClose||W.spectrumClose),zot(C)&&(C=null==W.spectrumOk||W.spectrumOk),zot(x)&&(x=null!=W.spectrumTitle?W.spectrumTitle:null),zot(T)&&(T=null!=W.collapsed&&W.collapsed);var I=this;if(zot(f)){if(!WW.zdf)return;f=WW.zdf.stage}else{if(!f.getBounds)return;if(zot(f.getStage))return}I.container=f;var M="#e472c4",O="#50c4b7",j=1,L=1,D=new Jo.Shape;this.addChild(D),D.x+=r,D.y+=r,B=!1;var _,R,Y=[],X="spectrum"==o;if(zot(o)||"legacy"==o||"spectrum"==o){B=!0;for(var N=6,N=Math.ceil(Math.pow(216,.5)),F=(e-r)/18-r,H=Math.floor(Math.pow(N*N,1/3)),V=[],G=0;G<6;G++)for(var U=0;U<6;U++)for(var q=0;q<6;q++)V.push("#"+J(3*G)+J(3*U)+J(3*q));for(o=[],G=0;G<V.length;G++)_=Math.floor(G/6),o[18*((R=G%6)+6*(H=18<=_?1:0))+(_-6*H*3)]=V[G];n=18,Y=[O,M]}else F=(e-r)/n-r;var Q,Z=Math.ceil(o.length/n),E=1,K=String(o[o.length-1]);function J(e){return(e=Math.floor(e).toString(16))+""+e}zot(l)||((oe=l.match(/rgba\((.*)\)/))&&(E=(_=oe[1].split(",")).pop(),l="rgb("+_.join(",")+")"),K=String(l)),B&&(Q=O),H=0;var $,ee,te=D.graphics,N=null!=W.borderColor?W.borderColor:null,oe=null!=W.borderWidth?W.borderWidth:null;!zot(N)&&zot(oe)&&(oe=1),oe&&zot(N)&&(N=Jo.dark),oe&&te.s(N).ss(oe);var ne=o.length;for(X&&(ne=56),G=0;G<ne;G++)_=G%n,R=Math.floor(G/n),$=_*(F+r),ee=R*(F+r),d?te.f(o[G]).dc($+F/2,ee+F/2,F/2):te.f(o[G]).r($,ee,F,F);var re=ee+F+r;I.colors=o;var ie=re;if(i){for(G=0;G<16;G++)Y.push("#"+J(G)+J(G)+J(G));for(G=0;G<Y.length;G++)_=Math.floor(G/n),$=(R=G%n)*(F+r),ee=_*(F+r)+re,d?te.f(Y[G]).dc($+F/2,ee+F/2,F/2):te.f(Y[G]).r($,ee,F,F);re=ee+F+r;var le=n,ae=Math.ceil(Y.length/n)}function se(e){zot(e)||e<0?h.visible=!1:(h.visible=!0,"#000"==K||"#000000"==K||"black"==K?(h.color="#222",h.alpha=1):(h.color="black",h.alpha=.5),h.x=D.x+e%n*(F+r)+F/2,h.y=D.x+Math.floor(e/n)*(F+r)+F/2)}I.greys=Y,h&&!X&&((h=this.indicator=d?new Jo.Circle(F/2*.5,null,null,null,null,null,null,null,null,!1):new Jo.Rectangle(.5*F,.5*F,null,null,null,null,null,null,null,!1)).alpha=.5,h.centerReg(),this.addChild(h),h.mouseEnabled=!1,se(o.indexOf(K)));var ce,ue,de,he,pe,ge,N=re;(t||k)&&((ce=new Jo.Container({style:!1})).setBounds(0,0,600,70),this.addChild(ce),ce.x=0,ce.y=re,oe=this.alphaBacking=new Jo.Rectangle(580,50,Jo.licorice,null,null,0,null,null,null,!1),ce.addChild(oe),Jo.centerReg(oe,ce),oe=this.alphaBut=new Jo.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),(ue=this.alphaSlider=new Jo.Slider({min:0,max:1,step:k?0:.05,button:oe,barLength:k?275:330,barWidth:2,barColor:Jo.silver,vertical:!1,useTicks:!1,inside:!1,style:!1})).value=zot(E)?1:E,k&&(ue.value=.1),ce.addChild(ue),ue.x=40,ue.y=ce.height/2,de=this.alphaText=new Jo.Label({text:k?"Tolerance: 0.1":"Alpha: "+Jo.decimals(E),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group}),ce.addChild(de),de.x=ue.x+ue.bar.width+40,de.y=ce.height/2-de.height/2,ce.scaleX=ce.scaleY=e/600,ue.on("change",function(){de.text=k?"Tolerance: "+et(ue.value):"Alpha: "+et(ue.value),t&&Te&&(Te.alpha=L=ue.value),I.dispatchEvent("change"),I.stage&&I.stage.update()}),re+=ce.height-10,k&&(I.toleranceBacking=I.alphaBacking,I.toleranceBut=I.alphaBut,I.toleranceSlider=I.alphaSlider,I.alphaBacking=I.alphaBut=I.alphaSlider=null)),u?((he=new Jo.Container({style:!1})).setBounds(0,0,600,100),this.addChild(he),he.x=0,he.y=re+10,(pe=this.swatchText=new Jo.TextInput({align:"left",selectionAlpha:.5,text:K.toUpperCase(),width:140,size:30,color:"orange",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})).on("input",function(){4!=pe.text.length&&7!=pe.text.length||(Te.color=pe.text,K=Te.color,I.dispatchEvent("change"))}),he.addChild(pe),Jo.centerReg(pe),pe.x=90,pe.y=48,a&&((fe=this.grip=new Jo.Shape({style:!1})).cur("pointer"),he.addChild(fe),fe.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),fe.x=70,fe.y=65,pe.y=40,fe.mouseEnabled=!1),ge=this.closeBut=new Jo.Button({width:90,height:90,label:"X",backgroundColor:Jo.licorice,rollBackgroundColor:Jo.charcoal,corner:0,style:!1}),he.addChild(ge),ge.x=600-ge.width-10,ge.y=0,ge.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){I.hide(),I.dispatchEvent("close")}),ye=this.okBut=new Jo.Button({width:150,height:90,label:"OK",backgroundColor:Jo.licorice,rollBackgroundColor:Jo.charcoal,corner:0,style:!1}),he.addChild(ye),ye.x=ge.x-ye.width-10,ye.y=0,ye.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){Xe(),I.dispatchEvent("ok")}),be=this.swatchBacking=new Jo.Shape({style:!1}),he.addChild(be),(te=be.graphics).f(Jo.black).r(.5,.5,50,89).f(Jo.granite).r(50,.5,50,89).f(Jo.white).r(100,.5,49.5,89),be.x=ye.x-150-10,be.y=0,Te=this.swatch=new Jo.Rectangle(150,90,K,null,null,null,null,null,null,!1),he.addChild(Te),Te.x=be.x,Te.y=0,Te.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){I.dispatchEvent("swatch")}),Te.cur("pointer"),Te.alpha=L=E,he.scaleX=he.scaleY=e/600,re+=he.height):D.cur("pointer"),t||u||(re-=10-r);var fe=re+10;this.setBounds(0,0,e,fe);var me=this.background=new Jo.Rectangle(e,fe,p,null,null,null,null,null,null,!1);this.addChildAt(me,0),-1!=s&&0<c&&(me.shadow=new createjs.Shadow(s,8,8,c));var ze,ye,be,ve,we,Ce,xe,ke,Te,Ae,Pe,Ee,Se=WW.zdf,Be=!1;this.dropperTarget=y,X&&(o="spectrum",be=(ye=N-30+1)-20+1,ve=I.bar=new Jo.Rectangle(I.width,31,Jo.black).addTo(I),x&&(I.title=new Jo.Label(x,18,null,Jo.light).pos(u?12:50,1,LEFT,CENTER,I.bar).noMouse()),a&&ve.cur(),fe=new Jo.Container(I.width,ye).loc(0,30,I),N=new Jo.Rectangle(I.width,be,new Jo.GradientColor(["rgb(255 0 0)","rgb(255 255 0)","rgb(0 255 0)","rgb(0 255 255)","rgb(0 0 255)","rgb(255 0 255)","rgb(255 0 0)"],[0,1/6,2/6,.5,4/6,5/6,1],0,0,I.width,0)).addTo(fe).mov(0,19),new Jo.Rectangle(I.width,be/2,new Jo.GradientColor(["rgba(255,255,255,1)","rgba(255,255,255,0)"],[0,1],0,0,0,be/2)).loc(N,null,fe),new Jo.Rectangle(I.width,be/2+.5,new Jo.GradientColor(["rgba(0,0,0,1)","rgba(0,0,00,0)"],[1,0],0,0,0,be/2+.5)).loc(N,null,fe).mov(0,be/2),new Jo.Rectangle(I.width,20,new Jo.GradientColor(["black","white"],[.1,.9],0,0,I.width,0)).addTo(fe),we=I.gradient=new Jo.Bitmap(fe).loc(fe,null,I).cur("none"),Ce=I.pixels=new Jo.Pixel(fe,.5).loc(fe,null,I).vis(!1).cur("none"),fe.dispose(),!u&&w&&((xe=I.closeIcon=new Jo.Shape(-40,-40,80,80,null,!1)).graphics.f(Jo.light).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),xe.sca(.25).expand(10,10,10,1).pos(7,0,Jo.RIGHT,Jo.CENTER,ve).cur().addTo(I),xe.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){I.hide(),I.dispatchEvent("close")})),(ke=I.collapseIcon=new Jo.Triangle(20,20,20,Jo.faint,Jo.light,2).expand(10,10,10,1).pos(40+(xe?30:0),0,Jo.RIGHT,Jo.CENTER,ve).cur().addTo(I)).on("mousedown",function(){I.collapse(0==ke.rotation)}),u||((Te=this.swatch=new Jo.Rectangle(35,20,K,white,null,null,null,null,null,!1)).loc(5,5,ve),Te.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){I.dispatchEvent("swatch")}),Te.cur("pointer"),Te.alpha=L=E),E=new Jo.Rectangle(20,20,Jo.white).reg("center"),new Jo.Tile(new Jo.Rectangle(10,10,Jo.series(Jo.silver,Jo.white,Jo.white,Jo.silver)),2,2,0,0).addTo(E),E.mouseChildren=!1,(Ae=I.modeIcon=new Jo.Button({width:20,height:20,shadowColor:-1,label:"",backing:E,toggleEvent:"mousedown",toggleBacking:new Jo.Rectangle(20,20,new Jo.GradientColor([Jo.white,Jo.grey],[0,1],0,0,20,20)).reg("center")}).pos(8+(xe?30:0),5,Jo.RIGHT,Jo.TOP,I).expand(10,10,10,1)).on("mousedown",function(){Ce.vis(Ae.toggled),I.spectrumToggled=!Ae.toggled,Se.stage.update()}),v||(Ae.removeFrom(),ke.mov(28)),b||ke.removeFrom(),C||I.okBut&&I.okBut.removeFrom(),!w&&ge&&ge.removeFrom(),Pe=new Jo.Rectangle(I.width,I.height-ye-30,Jo.faint).pos(0,0,Jo.LEFT,Jo.BOTTOM,I).noMouse(),Ee=this.dropper=new Jo.Circle(10,Jo.clear,Jo.white,8),new Jo.Circle(5,Jo.clear,Jo.black,2).center(Ee),new Jo.Circle(7,Jo.clear,Jo.white,2).center(Ee),Ee.noMouse()),this.updateDropperTarget=function(){Ee.vis(!1),_e(),Ee.vis(!0).top()},this.spectrumToggled=X;var We,Ie,Me=!(this.toggleSpectrum=function(e){e!=I.spectrumToggled&&(zot(e)&&(e=!I.spectrumToggled),I.spectrumToggled=e,Ae.toggle(!e),Ce.vis(!e),I.updateDropperTarget())});function Oe(){var e;if(Se.stage.mouseInBounds?Ee.alp(1):Ee.alp(0),Ee.loc(Se.mouseX,Se.mouseY,Se.stage),Me=(I.spectrumToggled?we:Ce).hitTestReg(Ee),e=!!I.dropperTarget&&(Ee.x>=ze.x&&Ee.x<=ze.x+ze.width&&Ee.y>=ze.y&&Ee.y<=ze.y+ze.height),t=I.dropperTarget?(Me||e)&&!Pe.hitTestReg(Ee)&&!ve.hitTestReg(Ee):Me,!Be&&t)je(e);else if(Be&&!t)return Be=!1,ze.dispose(),Ee.vis(!1),void Se.stage.update();if(t){if(Me)o=I.spectrumToggled?we:Ce;else{if(!I.dropperTarget)return;o=ze}var t=o.globalToLocal(Se.mouseX,Se.mouseY),o=o.getColorAt(t.x,t.y,!0),t="rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")";o[3]<.05&&(t=Se.color),Ee.borderColor=t,Se.stage.update()}}function je(e){Be=!0,e&&_e(),Ee.vis(!0).top()}function Le(){De(),I.dropperDown=Se.stage.on("stagemousedown",Oe),I.dropperMove=Se.stage.on("stagemousemove",Oe),I.dropperUp=Se.stage.on("stagemouseup",function(){Oe(),(Te&&X&&Me&&Te.color!=Ee.borderColor||!Te&&X&&Me)&&Ye()})}function De(){I.dropperDown&&Se.stage.off("stagemousedown",I.dropperDown),I.dropperMove&&Se.stage.off("stagemousemove",I.dropperMove),I.dropperUp&&Se.stage.off("stagemouseup",I.dropperUp)}function _e(){ze&&ze.dispose&&ze.dispose();var e=new Jo.Rectangle(Se.width,Se.height,Se.color).addTo(Se.stage,0),t=I.dropperTarget&&I.dropperTarget.getBounds&&I.dropperTarget.type&&!I.dropperTarget.type.includes("Stage")?I.dropperTarget.boundsToGlobal():Se.stage.getBounds();ze=new Jo.Bitmap(Se.stage,t.width,t.height,t.x,t.y).loc(t).cur("none"),e.dispose(),ze.on("mousedown",Ye)}function Re(){ze&&ze.dispose&&ze.dispose(),Ee.vis(!1)}function Ye(){Ee.vis(!1),I.value=Jo.convertColor(Ee.borderColor,"hex"),I.dispatchEvent("change"),Be&&(y?(_e(),Ee.vis(!0).top(),setTimeout(function(){I.updateDropperTarget(),Se.stage.update()},50)):(Ee.vis(!0).top(),Se.stage.update()))}function Xe(){if(B&&i){var e=[O=M,M=Q];for(G=0;G<2;G++){var t=D.graphics;_=Math.floor(G/n),$=(R=G%n)*(F+r),ee=_*(F+r)+ie,Y[G]=e[G],t.f(me.color).r($-1,ee-1,F+2,F+2).f(e[G]).r($,ee,F,F)}}Q=K,j=L,I.dispatchEvent("change"),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!I.stage||I.stage.update()}function Ne(e){We=e.stageX/Jo.scaX-I.x,Ie=e.stageY/Jo.scaY-I.y}function Fe(e){I.x=e.stageX/Jo.scaX-We,I.y=e.stageY/Jo.scaY-Ie,I.stage&&I.stage.update()}function He(){I.stage&&I.stage.update()}this.collapsed=!1,this.collapse=function(e){zot(e)&&(e=!0),e!=I.collapsed&&((I.collapsed=e)?(Ae.enabled=!1,ke.rot(180),I.background.vis(!1),we.vis(!1),Pe.vis(!1),D.visible=!1,Ce&&Ce.vis(!1),ce&&ce.vis(!1),u&&he.vis(!1),Be=!1,De(),Re(),I.dispatchEvent("collapsed")):(Ae.enabled=!0,ke.rot(0),I.background.vis(!0),we.vis(!0),Pe.vis(!0),D.visible=!0,I.spectrumToggled||Ce.vis(!0),ce&&ce.vis(!0),u&&he.vis(!0),Be=!0,Le(),_e(),ve.hitTestReg(Ee)&&Re(),I.dispatchEvent("expanded")),Se.stage.update())},X&&b&&I.titleBar&&I.titleBar.tap(function(){I.collapsed?I.collapse(!1):I.collapse(!0)},null,null,null,!0,null,null,null,null,!1,!0),X&&T&&b&&(I.vis(!1),setTimeout(function(){I.collapse(!0),I.vis(!0),I.stage&&I.stage.update()},50)),a&&(me.on("mousedown",Ne),me.on("pressmove",Fe),me.on("pressup",He),X&&(ve.on("mousedown",Ne),ve.on("pressmove",Fe),ve.on("pressup",He)));var Ve,Ge,Ue,qe,Qe=n*(F+r),Ze=Z*(F+r);function Ke(){I.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function Je(){I.zimAccessibility&&I.zimAccessibility.changeTitle(I,null,!0)}function $e(e){e<0&&(e=I.colors.length-1),e>I.colors.length-1&&(e=0),I.index=e,I.dispatchEvent("change"),I.stage&&I.stage.update()}i&&(Ve=le*(F+r),Ge=ae*(F+r)),D.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(e){var t=Jo.hitTestGrid(D,Qe,Ze,n,Z,e.stageX,e.stageY,0,0,r,r);zot(t)||(K=o[t],I.swatch&&(Te.color=K,pe&&(pe.text=String(o[t]).toUpperCase())),Xe()),i&&(t=null,zot(t=Jo.hitTestGrid(D,Ve,Ge,le,ae,e.stageX,e.stageY,0,Ze,r,r))||(K=Y[t],I.swatch&&(Te.color=K,pe&&(pe.text=Y[t].toUpperCase())),Xe())),h&&se(o.indexOf(K)),u?I.stage&&I.stage.update():h&&I.stage&&I.stage.update(),Je()}),Object.defineProperty(this,"selectedColor",{get:function(){return K},set:function(e){e=e.toLowerCase(),Q=K=e,I.swatch&&(Te.color=K,pe&&(pe.text=K),I.stage&&I.stage.update()),h&&!X&&se(o.indexOf(K)),Je()}}),Object.defineProperty(this,"value",{get:function(){return K},set:function(e){I.selectedColor=e}}),Object.defineProperty(this,"currentValue",{get:function(){return this.value},set:function(e){this.value=e}}),Object.defineProperty(this,"valueEvent",{get:function(){return K},set:function(e){e!=I.selectedColor&&(I.selectedColor=e,I.dispatchEvent("change"))}}),Object.defineProperty(this,"index",{get:function(){return X?null:o.indexOf(K)},set:function(e){X||(Q=K=o[e],I.swatch&&(Te.color=K,pe&&(pe.text=K),I.stage&&I.stage.update()),h&&se(o.indexOf(K)),Je())}}),Object.defineProperty(this,"selectedIndex",{get:function(){return this.index},set:function(e){this.index=e}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return t?et(ue.value):1},set:function(e){t&&(j=ue.value=e,Te&&(Te.alpha=j),de&&(de.text="Alpha: "+et(ue.value)),I.stage&&I.stage.update())}}),Object.defineProperty(this,"selectedTolerance",{get:function(){return k?et(ue.value):1},set:function(e){k&&(ue.value=e,I.stage&&I.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return X?"spectrum":i?o.concat(Y):o},set:function(){zon&&zogy("ColorPicker() colors is read only - make a new ColorPicker to change")}}),null!=WW.KEYFOCUS&&(Jo.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Jo.KEYFOCUS==I},set:function(){zns?Jo.KEYFOCUS=I:WW.KEYFOCUS=I}}),g&&Jo.KEYFOCUS&&Ke(),this.on("mousedown",function(){g&&Ke()}),this.keyDownEvent=function(e){var t;I.stage&&(X||(I.zimAccessibility&&I.focus||!I.zimAccessibility&&I.keyFocus)&&(t=I.index,37==e.keyCode||40==e.keyCode?$e(--t):38!=e.keyCode&&39!=e.keyCode||$e(++t)))},WW.addEventListener("keydown",this.keyDownEvent),this.hide=function(){return Ue=I.stage,I.removeFrom(),Ue&&Ue.update(),I},this.on("removed",function(){X&&(Be=!1,De(),Re());{var e;I.toggled=!1,I.zimAccessibility&&((e=I.zimAccessibility).resize(I),(qe||I.zimTabTag.nextSibling).focus(),setTimeout(function(){e.talk("ColorPicker has been closed.")},50))}Ue&&Ue.update()});function et(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}this.show=function(){return I.center(I.container),I},this.on("added",function(){var e;I.stage&&(Ue=I.stage,Se=Ue.frame),I.zimAccessibility&&(e=I.zimAccessibility,setTimeout(function(){e.activatedObject&&(qe=e.activatedObject.zimTabTag)},50),e.resize(I),e.tabIndex=I.zimTabIndex),I.toggled=!0,setTimeout(function(){X&&(Be=!0,_e(),Le(),je(),Oe()),I.stage&&I.stage.update()},20)}),this.toggle=function(e){return!0!==e&&(!1===e||I.container.contains(I))?I.hide():I.show(),I},zot(A)&&zot(W.selectedIndex)||!zot(m)||!zot(W.index)||(m=zot(A)?W.selectedIndex:A),zot(m)&&(m=null!=W.index?W.index:0),I.index=m,zot(z)&&(z=null!=W.selectedColor?W.selectedColor:null),null!=z?I.selectedColor=z:X&&(I.selectedColor="#888888"),!1!==P&&Jo.styleTransforms(this,W),this.clone=function(){return I.cloneProps(new Jo.ColorPicker(e,B?null:o,n,r,i,t,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,this.group,S))},this.dispose=function(e,t,o){return WW.removeEventListener("keydown",I.keyDownEvent),X&&(De(),I.gradient.cur("default"),I.pixels.cur("default"),y&&y.cur("default"),ze.cur("default"),Be=!1,Re()),I.titleBar&&I.titleBar.removeAllEventListeners(),ue&&ue.dispose(),Ee&&Ee.dispose(),I.dropperDown&&Se.stage.off("stagemousedown",I.dropperDown),I.dropperMove&&Se.stage.off("stagemousemove",I.dropperMove),I.dropperUp&&Se.stage.off("stagemouseup",I.dropperUp),o||this.zimContainer_dispose(!0),!0}},Jo.extend(Jo.ColorPicker,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.EmojiPicker=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y){if(b=zob(Jo.EmojiPicker,arguments,"width, height, emojis, monochrome, backgroundColor, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, cache, size, collapse, collapseColor, collapsed, colSize, rowSize, style, group, inherit",this))return b;z_d("67.05"),this.group=z;var b=!1===m?{}:Jo.getStyle("EmojiPicker",this.group,y);zot(e)&&(e=null!=b.width?b.width:400),zot(t)&&(t=null!=b.height?b.height:600),zot(n)&&(n=null!=b.monochrome&&b.monochrome),zot(r)&&(r=null!=b.backgroundColor?b.backgroundColor:Jo.lighter),zot(i)&&(i=null!=b.titleBar?b.titleBar:"Emojis"),zot(l)&&(l=null!=b.titleBarColor?b.titleBarColor:null),zot(a)&&(a=null!=b.titleBarBackgroundColor?b.titleBarBackgroundColor:Jo.silver.toAlpha(.8)),zot(s)&&(s=null!=b.titleBarHeight?b.titleBarHeight:40),zot(c)&&(c=null!=b.cache?b.cache:!!Jo.mobile()),zot(u)&&(u=null!=b.size?b.size:30),zot(g)&&(g=null!=b.colSize?b.colSize:u+15),zot(f)&&(f=null!=b.rowSize?b.rowSize:u+14),zot(d)&&(d=null!=b.collapse&&b.collapse),zot(h)&&(h=null!=b.collapseColor?b.collapseColor:zot(l)?Jo.grey:l),zot(p)&&(p=null!=b.collapsed&&b.collapsed),this.zimWindow_constructor(e,t,null,r,null,null!=b.borderWidth?b.borderWidth:2,null!=b.padding?b.padding:10,null!=b.corner?b.corner:10,null,null==b.scrollBarActive||b.scrollBarActive,null==b.scrollBarDrag||b.scrollBarDrag,null,null,null,!1,null,null,null,null,null,!0,null,null,null,null,null,null,i,l,a,s,null==b.draggable||b.draggable,null,null,null==b.close||b.close,null,null,null!=b.fullSize&&b.fullSize,null,null!=b.resizeHandle&&b.resizeHandle,d,h,p,null,null,null,null,m,z,Jo.copy(b)),this.type="EmojiPicker";var v=this;this.emojiData=zot(o)?["💥","🌵","🎂","🍰","🐩","🔥","🌫","🌊","🍏","🍎","🍋","🍌","🍇","🍑","🍅","🍆","🧀","🍕","🍬","🍭","🍩","🍺","🍻","🍸","🍾","☕️","💩","👻","🤖","💤","👀","💃","💃🏻","💃🏼","💃🏽","💃🏾","💃🏿","👔","👗","👙","👘","👠","👒","🎩","🐱","🐻","🐶","🐼","🐯","🦁","🐮","🐷","🐙","🐵","🐒","🐔","🐦","🐴","🦄","🐝","🐢","🐠","🐐","🕊","🐕","🐈","🐉","🐲","🎄","🍀","🌻","🌹","💐","🍄","☀️","🌧","⚽️","🏀","🏈","⚾️","🎾","🏒","⛷","🏄","🏊","🚴","🎭","🎨","🎷","🎺","🎸","🎻","🎰","🎳","🚗","🚕","🚌","🚎","🚑","🚒","🚜","🚂","✈️","⛵️","🛰","🌁","🌋","🏞","🌅","🎆","🌈","🏠","🏥","🏫","⌚️","📱","🖥","💾","📼","🎥","☎️","📺","📻","📡","🕯","💰","💎","🚬","⚰","🔮","💈","🚽","🔑","🛏","🎉","🎊","❤️","🤡","😀","😬","😁","😂","😃","😄","😅","😆","😇","😉","😊","🙂","🙃","☺️","😋","😌","😍","😘","😗","😙","😚","😜","😝","😛","🤑","🤓","😎","🤗","😏","😶","😐","😑","😒","🙄","🤔","😳","😟","😠","😔","😕","🙁","☹️","😣","😫","😩","😱","😨","😰","😯","😦","😢","😪","😓","😭","😵","😲","🤐","😷","🤒","🤕","😴","💀","☠️","👽","😺","😸","😹","😻","😼","😽","🙀","😿","😾","👄","💋","👅","🗣","👤","👥","👖","👣","👡","👢","👞","👟","🎓","👑","👜","👛","💼","👓","🕶","💍","🌂","❄️","🌪","⚡️","🥑","🦋","🙈","🙉","🙊","🐧","🕷","🦂","🦀","🐍","🐛","🐌","🐞","🐜","🐟","🐡","🐬","🐳","🐋","🐊","🐆","🌲","🌳","🌴","🌱","🌿","🍃","🍂","🍁","🌺","🌼","🌸","🌰","🎃","🐚","🕸","🌎","🌍","🌏","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌚","🌝","🌛","🌜","🌞","🌙","⭐️","🌟","💫","✨","☄️","🍔","🍳","🍟","🌭","🍝","🌮","🌯","🍣","🍨","🍦","🍷","🍹","🏆","🎪","🎹","🚀","⛲️","🎢","⛰","🏔","🗻","💯","🎵","🎶","💬","💭","🗯","🃏","🏳️‍🌈","🥓","🥃","🎤","🚨","🏍","🏕","⛺️","🏜","🏖","🏝","🌇","🌆","🏙","🌃","🏘","🏡","🏢","🔨","⚙","🔫","💣","🔪","💊","🕳","💉","🛁","⛱","🎁","🎈","🎀","📅","🗳","📚","✏️","⚪️","⚫️","⬛️","⬜️","🖼","🏚","🏭","🔲","🔳","🎱","🔺","🔻","💦","⛳️","🏟","💡","🔭","🔬","🕰","🐪","🐫","🐘","🐸","🐰","🐭","🚪","🛍","👁","🍓","🍒","🌶","🌽","🍠","🍯","🍞","🍫","🍿","🍪","🍊","🏹","👯","👯‍♂️","🗑","€"]:o;var w=[];Jo.loop(this.emojiData,function(e){e=new Jo.Emoji(e,u,n);w.push(e)}),this.wrapper=new Jo.Wrapper({items:w,width:e,alignInner:Jo.CENTER,valignInner:Jo.CENTER,wrapperType:"column",colSize:g,rowSize:f}).cur(),this.backdrop=new Jo.Rectangle(this.wrapper.width,this.wrapper.height,Jo.faint),Jo.timeout(.2,function(){v.scrollBar&&v.scrollBar.vertical&&v.scrollBar.vertical.getBounds()&&v.scrollBar.vertical.expand(),v.backdrop.heightOnly=v.wrapper.height,c&&v.wrapper.cache()}),this.add(this.backdrop),this.add(this.wrapper),this.wrapper.tap(function(e){v.currentEmoji=e.target,v.dispatchEvent("change")}),!1!==m&&Jo.styleTransforms(this,b),this.clone=function(){return v.cloneProps(new Jo.EmojiPicker(e,t,m,this.group,y))},this.dispose=function(){return!0}},Jo.extend(Jo.EmojiPicker,Jo.Window,["clone","dispose"],"zimWindow",!1),Jo.TextEditor=function(i,n,e,t,o,r,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O){if(j=zob(Jo.TextEditor,arguments,"width, color, backgroundColor, fieldColor, fieldHeight, textSize, sizeList, optionList, colorList, fontList, live, button, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, wrap, limit, scroll, placeholder, password, borderColor, borderWidth, margin, corner, shadowColor, shadowBlur, draggable, boundary, frame, fontListHeight, fontListViewNum, style, group, inherit",this))return j;z_d("67.1"),this.group=M;var j=!1===I?{}:Jo.getStyle("TextEditor",this.group,O);if(zot(i)&&(i=null!=j.width?j.width:400),zot(e)&&(e=null!=j.backgroundColor?j.backgroundColor:Jo.lighter),zot(h)&&(h=null!=j.titleBar?j.titleBar:"Text Editor"),zot(P)&&(P=null==j.draggable||j.draggable),zot(f)&&(f=null!=j.titleBarHeight?j.titleBarHeight:30),zot(t)&&(t=null!=j.fieldColor?j.fieldColor:e.darken(.05)),zot(u)&&(u=null==j.live||j.live),zot(m)&&(m=null==j.wrap||j.wrap),zot(y)&&(y=null==j.scroll||j.scroll),zot(x)&&(x=null!=j.margin?j.margin:10),zot(z)&&(z=null!=j.limit?j.limit:null),zot(h)&&(h=null!=j.titleBar?j.titleBar:null),zot(l)&&(l=null!=j.sizeList?j.sizeList:null),zot(s)&&(s=null!=j.colorList?j.colorList:null),zot(a)&&(a=null!=j.optionList?j.optionList:null),zot(c)&&(c=null!=j.fontList?j.fontList:null),zot(t)&&(t=null!=j.fieldColor?j.fieldColor:null),zot(o)&&(o=null!=j.fieldHeight?j.fieldHeight:null),zot(r)&&(r=null!=j.textSize?j.textSize:null),zot(B)&&(B=null!=j.fontListHeight?j.fontListHeight:100),zot(W)&&(W=null!=j.fontListViewNum?j.fontListViewNum:3),void 0===S){if(!WW.zdf)return void(zon&&zogy("zim.TextEditor - please provide a reference to zim Frame"));S=WW.zdf}this.zimPanel_constructor(i,300,null,h,p,g,f,e,w,C,k,!0,null,null,null,null,null,null,null,null,T,A,P,E,I,M,O);var L=this;zot(d)&&(d=new Jo.Button({width:50,height:50,label:"",icon:(new Jo.Shape).sca(.4).f("white").p("AikFsQg5jmhphxIA1gXQBeBGA3CwQC8mRCpjOIBfAoQkPFGiSFpg"),color:Jo.white,corner:10,backgroundColor:Jo.green.darken(.2),borderColor:Jo.white,borderWidth:2,rollBackgroundColor:Jo.green,shadowBlur:3}).pos(x,f+2*x,Jo.RIGHT,Jo.TOP,L)),(L.button=d).on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){u||(_.text=D.text);L.hide(),L.dispatchEvent("set")}),zot(o)&&(o=null!=j.fieldHeight?j.fieldHeight:d.height+2*x);var D=L.textArea=new Jo.TextArea({color:n,backgroundColor:t,width:i-d.width-3*x,height:zot(o)?d.height+2*x:o,expand:10,password:v,placeholder:b,frame:S}).loc(x,f+x+(o&&o<d.height+2*x?(d.height-o)/2+x:0),null,null,!1);m||(D.tag.style.whiteSpace="nowrap"),z&&D.tag.setAttribute("maxLength",z),y&&(D.tag.style.overflowY="auto");var _=new Jo.Label;L.on("pressmove",function(){D.resize()}),L.on("close",function(){L.inputEvent&&D.off("input",L.inputEvent),D.removeFrom()}),L.panelHeight=f+x+Math.max(o,d.height+2*x)+x;var R,Y,X,N,F,H,V,G,U,q=Jo.mobile(),Q=q?35:30;function Z(){D.tag.style.display="block",Y.hide(),L.stage&&L.stage.update()}function K(){_&&(D.text=_.text),n&&(n.color=_.color),X&&X.toggle(1==_.bold),N&&N.toggle(1==_.italic),F&&(F.noAnimate=!0,"center"==_.align?F.index=1:"right"==_.align?F.index=2:F.index=0),H&&(H.value=_.size),U&&(U.value=_.font),L.inputEvent&&D.off("input",L.inputEvent),L.inputEvent=D.on("input",function(){u&&_&&(_.text=D.text),""==D.text&&D.tag.placeholder&&(_.text=D.tag.placeholder),L.dispatchEvent("input"),L.dispatchEvent("update"),L.stage&&L.stage.update()})}function J(){L.keyFocus=!0}(l||a||s)&&(new Jo.Rectangle(i,Q+x,"rgba(0,0,0,.05)").loc(0,L.panelHeight,L),R=[],s&&(V=Array.isArray(s),(Y=L.colorPicker=new Jo.ColorPicker({colors:V?s:null,cols:V?Math.min(s.length,12):null,alphaPicker:!1,greyPicker:!V,container:S.stage})).on("close",Z),Y.on("change",function(){_.color=n.color=Y.selectedColor,L.dispatchEvent("update"),Z()}),L.closeColorPicker=function(){Z()},(n=L.swatch=new Jo.Rectangle(Q,Q,_.color,Jo.dark,1).cur()).on("mousedown",function(){L.dispatchEvent("color"),D.tag.style.display="none",Y.selectedColor=n.color,Y.show(),L.stage&&L.stage.update()}),R.push(n)),a&&(!0===a&&(a=["bold","italic","align"]),zot(WW.STYLE)&&(WW.STYLE={}),zot(WW.STYLE.group)&&(WW.STYLE.group={}),WW.STYLE.group.zimEditor={width:Q,height:Q,corner:0,borderColor:Jo.tin,shadowBlur:-1,backgroundColor:Jo.light,rollBackgroundColor:Jo.light,toggleBackgroundColor:Jo.green,toggleColor:Jo.grey},Jo.loop(a,function(e){var o,n;"bold"==e.toLowerCase()?((X=L.bold=new Jo.Button({label:new Jo.Label({text:"B",color:Jo.grey,size:16,bold:!0}),toggle:"B",group:"zimEditor"})).on("click",function(){_.bold=X.toggled,L.dispatchEvent("update"),L.stage&&L.stage.update()}),R.push(X),_.bold&&X.toggle()):"italic"==e.toLowerCase()?((N=L.italic=new Jo.Button({label:new Jo.Label({text:"I",color:Jo.grey,size:16,bold:!0,italic:!0}),toggle:"I",group:"zimEditor"})).on("click",function(){_.italic=N.toggled,L.dispatchEvent("update"),L.stage&&L.stage.update()}),R.push(N),_.italic&&N.toggle()):"align"==e.toLowerCase()&&(o=new Jo.Tile(new Jo.Rectangle(Q-10,Q-10,Jo.grey).centerReg(),3,1,10,10),n=q?["⇚","⇔","⇛"]:["⇐","⇔","⇒"],Jo.loop(3,function(e){var t=o.getChildAt(e);new Jo.Label(n[e],2*Q/3,null,Jo.white).center(t).expand(10)}),e=0,"right"==_.align?e=2:"center"!=_.align&&"middle"!=_.align||(e=1),(F=L.align=new Jo.Selector({tile:o,corner:0,borderWidth:1,borderColor:Jo.grey,backgroundColor:Jo.clear,index:e})).on("change",function(){0==F.index?_.align="left":1==F.index&&(_.align="center"),2==F.index&&(_.align="right"),L.dispatchEvent("update"),L.stage&&L.stage.update()}),R.push(F))}),delete WW.STYLE.group.zimEditor),l&&((H=L.sizePicker=new Jo.Stepper({list:!0===l?null:l,stepperType:!0===l?null:"list",min:!0===l?5:null,max:!0===l?500:null,width:150,shadowBlur:-1,borderColor:Jo.dark,borderWidth:2,corner:0,backgroundColor:Jo.green,downForward:!1}).siz(null,Q)).arrowPrev.expand(0),H.textBox.color=Jo.lighter,H.on("change",function(){_.size=H.value,L.dispatchEvent("update"),L.stage&&L.stage.update()}),H.value=_.size,R.push(H)),V=new Jo.Tile(R,R.length,1,10,10,!0).loc(x,L.panelHeight+x/2,L),L.panelHeight=L.panelHeight+x+V.height+x),c&&(Array.isArray(c)?G=c:(G=["Arial","Courier New","Georgia","Helvetica","Palatino","Tahoma","Verdana"],q||(G=G.concat(["Comic Sans MS","Impact"])),G.sort()),(U=L.fonts=new Jo.List({width:i-2*x,height:B,viewNum:W,backgroundColor:Jo.moon,color:Jo.grey,rollColor:Jo.dark,rollBackgroundColor:Jo.green.lighten(.5),selectedBackgroundColor:Jo.mist,selectedRollBackgroundColor:Jo.green.lighten(.6),selectedColor:Jo.dark,backdropColor:Jo.light,scrollBarColor:Jo.dark,shadowBlur:-1,list:G}).center(L).loc(null,L.panelHeight)).on("change",function(){_.font=U.value,L.dispatchEvent("update"),L.stage&&L.stage.update()}),L.panelHeight=L.panelHeight+x+U.height+x),L.show=function(e,t,o,n){if(L.parent)return e==L.label||(L.label=e),L;var r;if(_=e,D.addTo(L),_&&_.stage)r=_.stage;else if(n)r=n.stage;else{if(!WW.zdf)return L;r=WW.zdf.stage}return zot(t)&&zot(o)?_&&_.y>r.height/2?L.loc(r.width/2-i/2,_.y-L.panelHeight-.05*r.height,r):_&&_.y<=r.height/2?L.loc(r.width/2-i/2,_.y+_.height+.05*r.height,r):L.center(r):L.loc(t,o),L.y<20&&(L.y=20),L.y+L.height>L.stage.height&&(L.y=L.stage.height-L.height-20),K(),L.stage.update(),L},L.hide=function(){if(s&&Y.hide(),D&&D.removeFrom(),!zot(L.stage)){var e=L.stage;return L.removeFrom(),e.update(),L}},null!=WW.KEYFOCUS&&(Jo.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Jo.KEYFOCUS==L},set:function(){Jo.KEYFOCUS=L}}),Jo.KEYFOCUS||J(),this.on("mousedown",function(){J()}),Object.defineProperty(L,"label",{get:function(){return _},set:function(e){_=e,K()}}),!1!==I&&Jo.styleTransforms(this,j),this.clone=function(){return L.cloneProps(new Jo.TextEditor(i,n,e,t,o,r,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,this.group,O))},this.dispose=function(e,t,o){return L.inputEvent&&D.off("input",L.inputEvent),Y&&Y.dispose(),n&&n.dispose(),U&&U.dispose(),d&&d.dispose(),D&&D.dispose(),F&&F.dispose(),X&&X.dispose(),N&&N.dispose(),H&&H.dispose(),o||this.zimPanel_dispose(),L.stage&&L.stage.update(),!(L.textArea=L.color=L.colorPicker=L.font=L.button=L.selector=L.bold=L.italic=L.size=null)}},Jo.extend(Jo.TextEditor,Jo.Panel,["clone","dispose"],"zimPanel",!1),Jo.Keyboard=function(n,f,m,r,i,l,a,t,z,y,b,o,v,s,c,u,d,h,w,p,g,C,x,k,T,A,P,E,S,B,W,I,M,O,e,j){var L;if(L=zob(Jo.Keyboard,arguments,"labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, placeShiftH, placeShiftV, placeScale, special, rtl, hardKeyboard, layout, numPadScale, numPadDraggable, numPadOnly, numPadAdvanced, maxLength, numbersOnly, style, group, inherit",this))return L;z_d("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=e;var D=!1===O?{}:Jo.getStyle(this.type,this.group,j);zot(n)&&(n=null!=D.labels?D.labels:[]),Array.isArray(n)||(n=[n]),zot(f)&&(f=null!=D.backgroundColor?D.backgroundColor:Jo.dark),zot(m)&&(m=null!=D.color?D.color:Jo.white),zot(r)&&(r=null!=D.shiftBackgroundColor?D.shiftBackgroundColor:"orange"),zot(i)&&(i=null!=D.shiftHoldBackgroundColor?D.shiftHoldBackgroundColor:"red"),zot(l)&&(l=null!=D.placeBackgroundColor?D.placeBackgroundColor:Jo.blue),zot(a)&&(a=null!=D.placeColor?D.placeColor:m),zot(t)&&(t=null!=D.cursorColor?D.cursorColor:Jo.blue),zot(z)&&(z=null!=D.shadeAlpha?D.shadeAlpha:.2),zot(y)&&(y=null!=D.borderColor?D.borderColor:"rgba(0,0,0,.1)"),zot(b)&&(b=null!=D.borderWidth?D.borderWidth:null),y<0||b<0?y=b=null:null!=y&&null==b&&(b=1),zot(o)&&(o=null!=D.margin?D.margin:5),zot(v)&&(v=null!=D.corner?D.corner:30),zot(s)&&(s=null!=D.draggable&&D.draggable),zot(c)&&(c=null==D.placeClose||D.placeClose),zot(u)&&(u=null!=D.shadowColor?D.shadowColor:"rgba(0,0,0,.2)"),zot(d)&&(d=null!=D.shadowBlur?D.shadowBlur:14),zot(w)&&(w=null!=D.data?D.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["€","£","¥","$","￦","~","`","¤","♡","☆"],["2/2","_","\\","|","《","》","¡","¿","backspace"],["ABC","@"]]]),w[3]||(w[3]={e:["ė","ē","ę","ê","é","ë","è"],u:["ū","û","ú","ü","ù"],i:["ī","į","ì","í","ï","î"],o:["ō","œ","ø","õ","ô","ó","ö","ò"],a:["ā","ã","å","â","á","ä","à","æ"],n:["ñ","ń"]});var _=this;zot(p)&&(p=null==D.place||D.place),zot(g)&&(g=null!=D.placeShiftH?D.placeShiftH:0),zot(C)&&(C=null!=D.placeShiftV?D.placeShiftV:0),zot(x)&&(x=null!=D.placeScale?D.placeScale:1),zot(T)&&(T=null!=D.rtl&&D.rtl),zot(A)&&(A=null==D.hardKeyboard||D.hardKeyboard),zot(E)&&(E=null!=D.numPadScale?D.numPadScale:.8),zot(B)&&(B=null!=D.numPadOnly&&D.numPadOnly),zot(S)&&(S=null==D.numPadDraggable||D.numPadDraggable),zot(W)&&(W=null!=D.numPadAdvanced&&D.numPadAdvanced),zot(I)&&(I=null!=D.maxLength?D.maxLength:null),zot(M)&&(M=null!=D.numbersOnly&&D.numbersOnly),this.maxLength=I,this.numbersOnly=M,zot(P)&&(P=null!=D.layout?D.layout:"qwerty"),"qwerty"!=(P=P.toLowerCase())&&("arabic"==P?w=[[["ض","ص","ث","ق","ف","غ","ع","ه","خ","ح","ج"],["ش","س","ي","ب","ل","ا","ت","ن","م","ك","ط"],["ذ","ء","ؤ","ر","ى","ة","و","ز","ظ","د","back"],["?123","ـ"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["€","£","¥","$","￦","~","`","¤","♡","☆","*"],["2/2","_","\\","|","《","》","¡","¿","*","backspace"],["ABC","*"]],{"ا":["أ","إ","آ","ء"],"ى":["ئ"],"ء":["ئ","ؤ"],"و":["ؤ"],"ـ":["ٍ","ً","ٌ","ْ","ُ","ِ","َ","ّ"],"*":["ٍ","ً","ٌ","ْ","ُ","ِ","َ","ّ"],n:["ñ","ń"]}]:"hebrew"==P?w=[[["ק","ר","א","ט","ו","ן","ם","פ","backspace"],["ש","ד","ג","כ","ע","י","ח","ל","ך","ף"],["ז","ס","ב","נ","ה","מ","צ","ת","ץ"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["€","£","¥","$","￦","~","`","¤","♡","☆"],["2/2","_","\\","|","《","》","¡","¿","backspace"],["ABC","@"]],{e:["ė","ē","ę","ê","é","ë","è"],u:["ū","û","ú","ü","ù"],i:["ī","į","ì","í","ï","î"],o:["ō","œ","ø","õ","ô","ó","ö","ò"],a:["ā","ã","å","â","á","ä","à","æ"],n:["ñ","ń"]}]:"azerty"==P?w=[[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["shift","w","x","c","v","b","n","´","backspace"],["?123","@"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC","@"]],[["+","x","%","=","<",">","{","}","[","]"],["€","£","¥","$","￦","~","`","¤","♡","☆"],["2/2","_","\\","|","《","》","¡","¿","backspace"],["ABC","@"]],{e:["ė","ē","ę","ê","é","ë","è"],u:["ū","û","ú","ü","ù"],i:["ī","į","ì","í","ï","î"],o:["ō","œ","ø","õ","ô","ó","ö","ò"],a:["ā","ã","å","â","á","ä","à","æ"],n:["ñ","ń"]}]:"turkish"==P&&(w=[[["q","w","e","r","t","y","u","ı","o","p","ğ","ü"],["a","s","d","f","g","h","j","k","l","ş","i"],["shift","z","x","c","v","b","n","m","ö","ç","backspace"],["?123","*"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["€","£","¥","$","￦","~","`","¤","♡","☆","*"],["2/2","_","\\","|","《","》","¡","¿","*","backspace"],["ABC","*"]],{e:["ė","ē","ę","ê","é","ë","è"],u:["ū","û","ú","ü","ù"],i:["ī","į","ì","í","ï","î"],o:["ō","œ","ø","õ","ô","ó","ö","ò"],a:["ā","ã","å","â","á","ä","à","æ"],n:["ñ","ń"]},{"ı":"I",i:"İ"},{I:"ı","İ":"i"}])),_.data=w;e="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(zot(h)){if(!WW.zdf)return void zogy(e);h=WW.zdf.stage}else{if(!h.getBounds)return void zogy(e);if(zot(h.stage))return void zogy("zim display - Keyboard(): The container must have a stage property")}-1!=u&&0<d&&(_.shadow=new createjs.Shadow(u,3,3,d));var R,Y=WW.zdf?WW.zdf.stage:null;_.labels=n;var X=10;Jo.loop(w[0],function(e){e.length>X&&(X=e.length)});var N=X,e=["/","",",",".","numpad","away"];zot(k)||e.splice(1,0,k);var F=Jo.copy(w[0]);F[3]=F[3].concat(e);var H=Jo.copy(w[1]);H[3]=H[3].concat(e);var V=Jo.copy(w[2]);V[3]=V[3].concat(e);var G,U,q,Q,Z,K,J,$,ee,te,oe,ne,re,ie,le,ae=[],se=(1e3-5*(N-1))/N,ce={def:"default",shift:"shift",number1:"number1",number2:"number2"},ue=ce.def,de=!1,he=0,pe=[];function ge(e){var t,o,n=!1;if(ue===ce.def){for(Q.color=e?i:r,t=0;t<ae.length-6-(zot(k)?0:1);t++)0<(o=ae[t]).label.text.length&&(1===o.na.length?(w[4]&&w[4][o.label.text]?o.label.text=w[4][o.label.text]:o.label.text="turkish"==P?o.label.text.toLocaleUpperCase("tr-TR"):o.label.text.toUpperCase(),o.label.centerReg(o).mov(0,6)):o.label.centerReg(o));e||(n=!0,setTimeout(function(){n&&(de=!0,Q.color=i,G.updateCache(),_.stage&&_.stage.update())},500),le=_.on("pressup",function(){_.off("pressup",le),n=!1})),ue=ce.shift}else{for(Q.color=f,de=!1,t=0;t<ae.length-6;t++)0<(o=ae[t]).label.text.length&&(1===o.na.length?(w[5]&&w[5][o.label.text]?o.label.text=w[5][o.label.text]:o.label.text=o.label.text.toLowerCase(),o.label.centerReg(o).mov(0,3)):o.label.centerReg(o));ue=ce.def}G.updateCache(),_.stage&&_.stage.update()}function fe(e){var t,o,n,r,i,l,a=0,s=0,c=!1,u=!1;zot(e)&&(e=ce.def),e===ce.def?t=F:e===ce.number1?t=H:e===ce.number2&&(t=V),_.keys=G=new Jo.Container(1e3,430,null,null,!1).addTo(_).vis(!B);for(var d=0;d<t.length;d++){(d<=1||e==ce.def&&2==d&&"shift"!=t[2][0])&&(a=(se/2+2.5)*(N-t[d].length));for(var h=0;h<t[d].length;h++){var p,c=!1,g=null,u=!1;"backspace"==t[d][h]?(g=$,u=i=!0):"back"==t[d][h]?(g=$,u=!(i=!1)):"shift"==t[d][h]?(i=!0,g=J):(3==d||e!=ce.def&&2==d)&&0==h?u=i=!0:""==t[d][h]?c=!(i=!1):"numpad"==t[d][h]?(g=te,u=!(i=!1)):"away"==t[d][h]?(g=ee,u=i=!0):i=!1,i?r=1.5*se+2.5:c?(r=(se+5)*((zot(k)?3:2)+N-10+1-w[0][3].length)-5,-1!=w[0][3].indexOf("backspace")&&(r-=se/2)):r=se,n=new Jo.Rectangle(r,se,f,y,b,v,null,null,null,!1).cur().addTo(G),u&&n.addChild(new Jo.Rectangle(r,se,"black",null,null,v,null,null,null,!1).alp(z)),n.label=o=g?new Jo.Label({text:"",backgroundColor:"ignore",font:null!=D.font?D.font:null,style:!1}):new Jo.Label({lineWidth:10,lineHeight:25,font:null!=D.font?D.font:null,text:t[d][h],color:m,align:"center",style:!1}),g&&(g=g.clone(),"numpad"==t[d][h]?(p=60,ne=n):p=70,g.scaleTo(n,p,p),g.centerReg(n)),l?(l=!1,a+=67.33):(o.centerReg(n).mov(0,isNaN(o.text)?3:7),n.x=a,n.y=s,n.na=t[d][h],2==d&&0==h&&e==ce.number1&&(n.toggle="1/2"),2==d&&0==h&&e==ce.number2&&(n.toggle="2/2"),3==d&&0==h&&e==ce.def&&(n.toggle="?123"),3==d&&0==h&&e!=ce.def&&(n.toggle="ABC"),n.toggle&&o.mov(0,3),ae.push(n),"shift"==n.na&&(Q=n),a=n.x+n.width+5)}s+=se+5,a=0}G.cache(b?-b:0,b?-b:0,b?G.width+2*b:G.width,b?G.height+2*b:G.height)}function me(e){_.numPad||(_.numPad=new Jo.NumPad({advanced:W,draggable:S}).sca(E),S||B?_.numPad.center({add:!1,container:h}):_.numPad.pos({x:0,y:8,horizontal:"center",vertical:"bottom",add:!1,container:h}),_.numPad.on("pressed",function(){"enter"==_.numPad.key?_.dispatchEvent("enter"):"backspace"==_.numPad.key?_.removeChar():"clear"==_.numPad.key?_.clearText():"space"==_.numPad.key?Ce(" "):Ce(_.numPad.key)}),_.numPad.on("close",function(){ne.removeChildAt(2),te.clone().scaleTo(ne,60,60).centerReg(ne,2),G.updateCache(),_.keys.parent&&_.keys.visible||!q||(q.visible=!1,_.toggled=!1,we()),_.dispatchEvent("numpadclose")})),ne.removeChildAt(2),_.numPad.parent||!1===e?(_.numPad.removeFrom(),_.dispatchEvent("numpadclose"),te.clone().scaleTo(ne,60,60).centerReg(ne,2)):_.numPad.parent&&!0!==e||(_.numPad.addTo(h),_.dispatchEvent("numpadopen"),oe.clone().scaleTo(ne,60,60).centerReg(ne,2)),G.updateCache(),_.stage&&_.stage.update()}function ze(){_.mouseYAmount&&(_.y=_.parent.globalToLocal(0,_.mouseYAmount-ie).y)}function ye(){Y.off("pressmousemove",_.tickerMouseEvent),Jo.Ticker.remove(ze)}function be(){if(Z&&q){for(var e=Z.label.x+Z.label.getBounds().x,t=0;t<he;t++)e+=Z.widthArray[t]||0;q.heightOnly=Z.getBounds().height*(Z.backing&&zot(Z.padding)?.9:1)-(Z.paddingV&&Z.background?2*Z.paddingV:0),q.center(Z),q.x=e}}function ve(){if(K)return _;if(!Z)return _;var e,t,o=c?["<",">","x"]:["<",">"];pe=[],Z.localToLocal(0,0,_),K=_.placeMenu=new Jo.Container({style:!1}).sca(x).addTo(h).cur();for(var n=0;n<o.length;n++)e=new Jo.Rectangle(se,se,l,y,b,v,null,null,null,!1),"x"==o[n]&&new Jo.Rectangle(se,se,"black",null,null,v,null,null,null,!1).alp(z).addTo(e),(e=new Jo.Label({lineWidth:10,text:o[n],backing:e,font:null!=D.font?D.font:null,color:a,align:"center",valign:"center",style:!1})).pos(0,0,Jo.LEFT,Jo.TOP,K).cache(),e.x=e.x+n*(se+5),pe.push(e);t=Z.localToLocal(0,0,h),K.x=t.x+g,K.y=t.y+Z.height+15+C,K.on("click",function(e){0==pe.indexOf(e.target)?0<he&&he--:1==pe.indexOf(e.target)?he<Z.text.length&&he++:we();be()}),_.stage&&_.stage.update()}function we(){if(!K)return _;K.dispose(),K=null}function Ce(e){if(Z){if("del"===e)Z&&(Z.text=[Z.text.slice(0,he-1),Z.text.slice(he)].join("")),he--,ke();else{if(ue===ce.shift&&(e="turkish"==P?e.toLocaleUpperCase("tr-TR"):e.toUpperCase()),Z&&_.maxLength&&Z.text.length>=_.maxLength)return;if(_.numbersOnly&&!isFinite(Number(e)))return;var t,o=Z.text;(t=Z.clone().removeFrom()).text=e,t=t.label.getMeasuredWidth(),Z.widthArray?Z.widthArray.splice(he,0,t):Z.widthArray=[Z.breedte],he<Z.text.length?Z.text=[Z.text.slice(0,he),e,Z.text.slice(he)].join(""):Z.text+=e,Z&&Z.label.getBounds().width<R?(he++,be()):Z.text=o}ue!==ce.shift||de||(_.removeChild(G),fe(),ue=ce.def),be();o=new createjs.Event("keydown");o.letter=e,_.dispatchEvent(o),_.stage&&_.stage.update()}}function xe(e){if(_.stage){var t,o=0,n=!1;(Z=e.target).widthArrayCheck||ke(),R=Z.label.lineWidth||1e4,(t=Z.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY)).x-=Z.label.x,t.y-=Z.label.y;for(var r=0;r<Z.widthArray.length;r++)if(o+=Z.widthArray[r],t.x<o-Z.widthArray[r]/2+Z.label.getBounds().x){he=r,n=!0;break}n||(he=Z.text.length),be(),p&&!K&&0<Z.text.length&&ve(),K&&Z&&(0<Z.text.length?(t=Z.localToLocal(0,0,h),K.x=t.x+g,K.y=t.y+Z.height+15+C):we())}}function ke(){if(Z){var e=new Jo.Label("");Z.widthArray=[];for(var t=0;t<Z.text.length;t++)(e=Z.clone().removeFrom()).text=Z.text[t],Z.widthArray.push(e.label.getMeasuredWidth());e.text=Z.text,Z.widthArrayCheck=!0,be()}}function Te(e){var t,o=!0;function n(){Z&&0<Z.text.length?(0<_.index&&Ce("del"),e?r():_.on("pressup",r)):Ce("del")}function r(){o=!1,t&&t.clear(),_.off("pressup",r)}n(),t=Jo.timeout(300,function e(){(!Z||Z.text.length<1||0==_.currentIndex)&&(o=!1),o&&(n(),t=t&&Jo.timeout(200,e,null,"ms")),Z&&Z.text.length<1&&r()},null,"ms"),_.stage&&_.stage.update()}function Ae(){for(var e=0;e<n.length;e++)n[e].clickEvent=n[e].on("click",xe)}function Pe(){if(1<n.length)for(var e=0;e<n.length;e++)n[e].off("click",n[e].clickEvent)}function Ee(){if(!q&&(Z=n[0],R=Z&&Z.label.lineWidth?Z.label.lineWidth:1e4,Z)){(q=_.blinker=new Jo.Rectangle(3,Z.height-(Z.paddingV&&Z.background?2*Z.paddingV:0),t,null,null,null,null,null,null,!1).center(Z)).x=0,q.visible=!1,q.animate({props:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst",timeUnit:"ms"});for(var e=0;e<n.length;e++)n[e].widthArray=[0];ke()}}function Se(){Jo.stopAnimate("knipperTekst"),Z&&Z.removeChild(q),Z=q=null}!function(){(J=new Jo.Shape({style:!1})).graphics.f(m).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),J.setBounds(-25.5,-36,51,72),$=new Jo.Container({style:!1});var e=new Jo.Shape({style:!1});e.graphics.f(m).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),e.setTransform(82.6,32),e.addTo($),(e=new Jo.Shape({style:!1})).graphics.f(m).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),e.setTransform(62.2,32),e.addTo($),$.setBounds(0,0,125,64),(ee=new Jo.Container({style:!1})).setBounds(0,0,147,86);for(var t,o=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],n=0;n<o.length;n++)(t=new Jo.Shape({style:!1})).graphics.f(m).s().p(o[n].p),t.setTransform(o[n].transform[0],o[n].transform[1]),t.addTo(ee);(te=new Jo.Container({style:!1})).setBounds(0,0,62,86),(oe=new Jo.Container({style:!1})).setBounds(0,0,62,86);for(var r=[{p:"Ai+heIF9AAIi/C9g",transform:[33,76,1,1,180]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]}],n=0;n<r.length;n++){var i=new Jo.Shape({style:!1});i.graphics.f(m).s().p(r[n].p),i.setTransform(r[n].transform[0],r[n].transform[1],r[n].transform[2],r[n].transform[3],r[n].transform[4]),i.addTo(te);var l=new Jo.Shape({style:!1});l.graphics.f(m).s().p(r[n].p),l.setTransform(r[n].transform[0],r[n].transform[1]),l.addTo(oe)}i.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10),l.graphics.ef().s(white).ss(3).rr(-16,-14,60,55,10)}(),fe(ue),s&&function(){re=new Jo.Rectangle(1.5*se+2.5+2.5,se,f,y,b,v,null,null,null,!1).addTo(_,0).cur();for(var e=0;e<4;e++)new Jo.Rectangle(.4*re.width,4,m,null,null,null,null,null,null,!1).centerReg(re).alp(.2).y-=15*e-22;re.x=8.5*se+40,re.y=-se-5,re.na="drag"}(),this.on("mousedown",function(e){Y=_.stage,U&&_.removeChild(U);K&&pe.indexOf(e.target)<0&&we();zot(e.target.na)||(s&&e.target===re?(_.tickerMouseEvent=Y.on("stagemousemove",function(e){_.mouseYAmount=e.stageY}),Jo.Ticker.add(ze),_.on("pressup",ye),ie=e.stageY-_.localToGlobal(0,0).y):zot(k)||e.target.na!==k?"shift"===e.target.na?ge():"?123"===e.target.toggle?(_.removeChild(G),fe(ce.number1)):"ABC"===e.target.toggle?(_.removeChild(G),ue=ce.def,fe(),de&&ge(!0)):"1/2"===e.target.toggle?(_.removeChild(G),fe(ce.number2)):"2/2"===e.target.toggle?(_.removeChild(G),fe(ce.number1)):"numpad"===e.target.na?me(e.target):"away"===e.target.na?(_.hideKeyboard(),_.dispatchEvent("close")):w[3]&&w[3][e.target.na]?function(e){var i,l=w[3][e],a=!1,s=!1;i=Jo.timeout(500,function(){var e,t,o,n=0;if(i.clear(),!a){s=!0,(U=new Jo.Container(1e3,se,null,null,!1).addTo(_,0)).y=-se-5;for(var r=0;r<l.length;r++)o=ue===ce.shift?"turkish"==P?l[r].toLocaleUpperCase("tr-TR"):l[r].toUpperCase():l[r],e=new Jo.Label({lineWidth:10,lineHeight:25,text:o,font:null!=D.font?D.font:null,color:m,align:"center",style:!1}),t=new Jo.Rectangle(se,se,f,y,b,v,null,null,null,!1).addTo(U),o=new Jo.Rectangle(se,se,"white",null,null,v,null,null,null,!1).alp(.2),t.addChild(o),e.center(t),t.na=l[r],t.x=n,n+=se+5;_.stage&&_.stage.update()}},null,"ms");var t=_.on("pressup",function(){a=!0,_.off("pressup",t),s||Ce(e)})}(e.target.na):"return"===e.target.na?Ce("\n"):"backspace"===e.target.na||"back"===e.target.na?Te():""===e.target.na?Ce(" "):Ce(e.target.na):_.dispatchEvent("special"),Y.update())}),_.addChar=function(e){!zot(e)&&e.match(/^.$/)&&Ce(e)},_.removeChar=function(){Te(!0)},_.clearText=function(){Te(!(Z.text="")),ke(),_.index=0},_.setText=function(e){Z.text=e,ke(),_.index=e.length},_.setBounds(1e3,400-26*(N-10)),Ae(),Ee(),Object.defineProperty(this,"selectedLabel",{get:function(){return Z},set:function(e){xe({target:e}),_.hidePlace()}}),Object.defineProperty(this,"index",{get:function(){return he},set:function(e){he=e,be()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return this.index},set:function(e){this.index=e}}),this.show=function(e,t){return _.addTo(h),_.placeMenu&&_.placeMenu.addTo(h),zot(e)||xe({target:n[e]}),setTimeout(()=>{q&&(q.visible=!0)},200),_.toggled=!0,B?me():B&&!t||(_.keys.vis(!0),Be.vis(!0)),_.numPad&&_.numPad.parent&&_.numPad.top(),_},this.hide=function(){return _.removeFrom(),_.placeMenu&&_.placeMenu.removeFrom(),me(!1),q&&(q.visible=!1),Y.update(),_.toggled=!1,_},this.showNumPad=function(){me(!0),_.toggled=!0,q&&(q.visible=!0)},this.hideNumPad=function(){me(!1),_.keys.parent&&_.keys.visible||!q||(q.visible=!1,_.toggled=!1,we())},this.showKeyboard=function(){_.show(null,!0)},this.hideKeyboard=function(){_.numPad&&_.numPad.parent?(_.keys.vis(!1),Be.vis(!1)):_.hide()},this.toggle=function(e){return!0!==e&&(!1===e||_.parent)?_.hide():_.show(),_},this.showPlace=function(){return ve(),_},this.hidePlace=function(){return we(),_},this.addLabels=function(e){Array.isArray(e)||(e=[e]);for(var t=e.length-1;0<=t;t--)0<=n.indexOf(e[t])||"Label"!=e[t].type?e.splice(t,1):e[t].widthArray=[0];return Pe(),n=n.concat(e),Ae(),Ee(),q&&(q.visible=!0),_},this.removeLabels=function(e){Array.isArray(e)||(e=[e]),Pe();for(var t=0;t<e.length;t++){var o=n.indexOf(e[t]);0<=o&&n.splice(o,1)}return Ae(),0==n.length?Z&&Se():Z&&-1==n.indexOf(Z)&&(Se(),Ee()),_};var Be=new Jo.Rectangle(this.width,this.height,Jo.clear,null,null,null,null,null,null,!1).addTo(this).expand().bot();Be.on("mousedown",function(){}),Be.on("click",function(){}),B&&Be.vis(!1),this.resize=function(){var e;return _.scaleTo(Y,100-2*o/Y.width*100,50-2*o/Y.height*100),_.y=Y.height-_.height-o,_.x=Y.width/2-_.width/2,Z&&K&&(e=Z.localToLocal(0,0,_),K.x=e.x,K.y=e.y+Z.height+15),_.stage&&_.stage.update(),_},this.resize(),_.selectedLabel&&(_.index=_.selectedLabel.text.length),A&&(this.keydownEvent=function(e){var t;_.stage&&(zot(t=_)||(35==e.keyCode&&(t.index=t.selectedLabel.text.length),36==e.keyCode&&(t.index=0),37==e.keyCode&&(t.index=t.index-1),39==e.keyCode&&(t.index=t.index+1),46==e.keyCode&&t.index<t.selectedLabel.text.length&&(t.index=t.index+1,t.removeChar()),8==e.keyCode&&(e.preventDefault(),t.removeChar()),t.addChar(e.key),_.stage&&_.stage.update()))},WW.addEventListener("keydown",this.keydownEvent)),!1!==O&&Jo.styleTransforms(this,D),this.clone=function(){var e=new Jo.Keyboard(n,f,m,r,i,l,t,z,o,v,s,c,u,d,h,w,p,g,C,x,k,T,A,P,E,S,B,W,I,M,O,this.group,j);return _.cloneProps(e)},this.dispose=function(e,t,o){Be.removeAllEventListeners(),Be=null,_.keydownEvent&&WW.removeEventListener("keydown",_.keydownEvent);for(var n=0;n<_.labels.length;n++)_.labels[n].removeAllEventListeners();return _.numPad&&_.numPad.dispose(),q&&q.dispose(),_.labels=Z=null,Y&&Y.off("pressmousemove",_.tickerMouseEvent),o||_.zimContainer_dispose(!0),!0}},Jo.extend(Jo.Keyboard,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Organizer=function(e,t,n,o,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A){if(B=zob(Jo.Organizer,arguments,"width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",this))return B;z_d("67.3"),this.group=T;var P,E,S,B,W,I,M,O=!1===k?{}:Jo.getStyle("Organizer",this.group,A);zot(e)&&(e=null!=O.width?O.width:t&&t.vertical?t.width:300),zot(n)&&(n=null==O.useAdd||O.useAdd),zot(o)&&(o=null==O.useRemove||O.useRemove),zot(r)&&(r=null==O.usePosition||O.usePosition),zot(i)&&(i=null!=O.autoAdd?O.autoAdd:n),zot(l)&&(l=null!=O.autoRemove?O.autoRemove:o),zot(a)&&(a=null!=O.autoPosition?O.autoPosition:r),zot(s)&&(s=null==O.addForward||O.addForward),zot(c)&&(c=null==O.removeForward||O.removeForward),zot(u)&&(u=null!=O.backgroundColor?O.backgroundColor:Jo.tin),zot(d)&&(d=null!=O.rollBackgroundColor?O.rollBackgroundColor:Jo.grey),zot(h)&&(h=null!=O.selectedBackgroundColor?O.selectedBackgroundColor:Jo.dark),zot(g)&&(g=null!=O.color?O.color:Jo.white),zot(f)&&(f=null!=O.rollColor?O.rollColor:g),zot(m)&&(m=null!=O.selectedColor?O.selectedColor:g),zot(z)&&(z=null!=O.selectedRollColor?O.selectedRollColor:g),zot(y)&&(y=null!=O.spacing?O.spacing:1),zot(b)&&(b=null!=O.corner?O.corner:0),zot(w)&&(w=null!=O.gradient?O.gradient:.2),zot(C)&&(C=null!=O.gloss?O.gloss:null),zot(x)&&(x=null!=O.backdropColor?O.backdropColor:null),Array.isArray(b)||(b=[b,b,b,b]),(n||r||o)&&(E={width:P=(e+y)/((n?1:0)+(r?4:0)+(o?1:0)),height:P,label:"",shadowColor:-1,gradient:w,corner:b,backgroundColor:u,rollBackgroundColor:d},S=[],(B=new Jo.Shape).graphics.f(g).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),n&&S.push(new Jo.Button({icon:B.sca(.55).rot(-45).reg(1),inherit:E})),r&&((T=new Jo.Shape).graphics.f(g).p("AiJieIETCeIkTCfg"),S.push(new Jo.Button({icon:T.sca(.6).rot(t&&!t.vertical?180:-90).reg(-2),inherit:E})),S.push(new Jo.Button({icon:T.clone().sca(.6).rot(t&&!t.vertical?0:90).reg(-2),inherit:E})),(T=new Jo.Shape).graphics.f(g).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),S.push(new Jo.Button({icon:T.sca(.62).rot(t&&!t.vertical?0:90).reg(0),inherit:E})),S.push(new Jo.Button({icon:T.clone().sca(.62).rot(t&&!t.vertical?180:-90).reg(0),inherit:E}))),o&&S.push(new Jo.Button({icon:B.clone().rot(0).sca(.55),inherit:E})),0==S.length&&(S=[""]),this.zimTabs_constructor(e,P,S,u,d,null,h,p,g,f,null,m,z,!1,y,!0,!1,b,null,!0,w,C,null,null,null,null,null,null,null,null,null,null,x),(W=this).list=t,W.type="Organizer",I=!(W.setButtons=function(){var e;r&&(S[0+(e=n?1:0)]&&(S[0+e].icon.rotation=W.list&&!W.list.vertical?180:-90),S[1+e]&&(S[1+e].icon.rotation=W.list&&!W.list.vertical?0:90),S[2+e]&&(S[2+e].icon.rotation=W.list&&!W.list.vertical?0:90),S[3+e]&&(S[3+e].icon.rotation=W.list&&!W.list.vertical?180:-90))}),M=t,W.change(function(e){(!I&&W.list||W.list&&W.list!=M)&&(W.list!=M&&M&&M.noChange(),W.list.change(function(){W.orgItem=W.list.selected,W.orgIndex=W.list.index}),I=!0,M=W.list);e=e.target.index;n||e++,r||n&&!(0<e)||(e=5);var t,o=zot(W.list.index)||W.list.index<0;switch(o&&(W.value=null),W.lastIndex=W.list.index,e){case 0:i&&(t=Math.max(0,W.list.index),W.add(t)),W.orgType="add";break;case 1:if(o)break;a&&(t=W.list.index,W.up(t)),W.orgType="up";break;case 2:if(o)break;a&&(t=W.list.index,W.down(t)),W.orgType="down";break;case 3:if(o)break;a&&(t=W.list.index,W.toTop(t)),W.orgType="top";break;case 4:if(o)break;a&&(t=W.list.index,W.toBottom(t)),W.orgType="bottom";break;case 5:if(o)break;l&&(t=W.list.index,W.remove(t)),W.orgType="remove"}}),this.add=function(e,t,o){return zot(e)&&(e=W.lastIndex),zot(t)&&(t=""),e=s?Math.min(W.list.length,Math.max(0,W.list.index)+1):Math.max(0,W.list.index),W.list.addAt(t,e,o),W.list.indexPlusPosition=e,W.orgItem=W.list.selected,W.orgIndex=W.list.index,W},this.up=function(e){zot(e)&&(e=W.lastIndex);var t=W.list.items[e];return zot(t)||(W.list.removeAt(1,e),W.list.addAt(t,e-1),W.list.indexPlusPosition=Math.max(0,e-1),W.orgItem=W.list.selected,W.orgIndex=W.list.index),W},this.down=function(e){zot(e)&&(e=W.lastIndex);var t=W.list.items[e];return zot(t)||(W.list.removeAt(1,e),W.list.addAt(t,e+1),W.list.indexPlusPosition=Math.min(W.list.length-1,e+1),W.orgItem=W.list.selected,W.orgIndex=W.list.index),W},this.toTop=function(e){zot(e)&&(e=W.lastIndex);var t=W.list.items[e];return zot(t)||(W.list.removeAt(1,e),W.list.addAt(t,0),W.list.first(),W.orgItem=W.list.selected,W.orgIndex=W.list.index),W},this.toBottom=function(e){zot(e)&&(e=W.lastIndex);var t=W.list.items[e];if(!zot(t))return W.list.removeAt(1,e),W.list.addAt(t,W.list.length),W.list.last(),W.orgItem=W.list.selected,W.orgIndex=W.list.index,W},!(this.remove=function(e){if(zot(e)){if(!(0<=W.list.index))return W;e=W.list.index}var t=e==W.list.index;return W.removedItem=W.list.items[e],W.list.removeAt(1,e),t?c||(e=Math.max(0,e-1)):e=W.list.index,W.list.indexPlusPosition=Math.min(W.list.length-1,e),W.orgItem=W.list.selected,W.orgIndex=W.list.index,W})!==k&&Jo.styleTransforms(this,O),this.clone=function(){return W.cloneProps(new Jo.Organizer(e,t,n,o,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,W.group,A))},this.dispose=function(e,t,o){return S=null,o||W.zimTabs_dispose(!0),!0})},Jo.extend(Jo.Organizer,Jo.Tabs,["clone","dispose"],"zimTabs",!1),Jo.Connectors=function(e,t,o,u,d,c,n,h,p,g,f,m,r,z,i,y,b,l,v,w,C,x,k,T,A,a,s,P,E,S,B,W,I,M,O,j,L){if(D=zob(Jo.Connectors,arguments,"width, height, points, node, line, linear, linearWrap, linearOrder, num, snapH, snapV, dropType, dropArray, continuous, startIndex, duplicateLine, deleteNode, dblclick, fullMove, min, max, boundary, expand, nodeRollColor, nodeRollBorderColor, nodeSelectedColor, nodeSelectedBorderColor, baseColor, baseBorderColor, baseRollover, rootLock, grandChildren, dblclickTime, steps, style, group, inherit",this))return D;z_d("67.39"),this.group=j;var D=!1===O?{}:Jo.getStyle("Connectors",this.group,L);zot(e)&&(e=null!=D.width?D.width:null),zot(t)&&(t=null!=D.height?D.height:null),this.zimContainer_constructor(null,null,null,null,!1),this.type="Connectors",zot(o)&&(o=null!=D.points?D.points:[[0,0],[100,0],[100,100],[0,100]]),zot(u)&&(u=null!=D.node?D.node:new Jo.Circle(10,Jo.grey,Jo.grey)),u.removeFrom(),u.color!=Jo.clear||u.hitArea||u.expand(0),zot(d)&&(d=null!=D.line?D.line:new Jo.Line({length:10,thickness:3,color:Jo.tin,strokeObj:{caps:"round"}})),d.oStartLength=d.startLength,d.oEndLength=d.endLength,zot(p)&&(p=null!=D.num?D.num:10),zot(c)&&(c=null!=D.linear&&D.linear),zot(n)&&(n=null==D.linearWrap||D.linearWrap),zot(T)&&(T=null!=D.nodeRollColor?D.nodeRollColor:u.color.match("rgb")?u.color:u.color.lighten(.2)),zot(A)&&(A=null!=D.nodeRollBorderColor?D.nodeRollBorderColor:u.borderColor),zot(a)&&(a=null!=D.nodeSelectedColor?D.nodeSelectedColor:Jo.white),zot(s)&&(s=null!=D.nodeSelectedBorderColor?D.nodeSelectedBorderColor:u.borderColor),zot(P)&&(P=null!=D.baseColor?D.baseColor:u.color),zot(E)&&(E=null!=D.baseBorderColor?D.baseBorderColor:u.borderColor),zot(S)&&(S=null!=D.baseRollover&&D.baseRollover),zot(w)&&(w=null!=D.min?D.min:u.radius?2*u.radius:Math.min(u.width,u.height)),zot(C)&&(C=null!=D.max?D.max:null),zot(k)&&(k=null!=D.expand?D.expand:Jo.mobile()?10:0),zot(m)&&(m=null!=D.dropType?D.dropType:"any"),zot(r)&&(r=null!=D.dropArray?D.dropArray:null),zot(z)&&(z=null!=D.continuous&&D.continuous),zot(i)&&(i=null!=D.startIndex?D.startIndex:null),zot(y)&&(y=null==D.duplicateLine||D.duplicateLine),zot(b)&&(b=null==D.deleteNode||D.deleteNode),zot(l)&&(l=null==D.dblclick||D.dblclick),zot(v)&&(v=null==D.fullMove||D.fullMove),zot(I)&&(I=null!=D.dblclickTime?D.dblclickTime:.5);var _,R,Y,X,N,F,H,V,G,U,q,Q,j=$o(I);function Z(e,t,o,n,r,i,l){if(e.addChild){W=!(B=!0);var a=e;a.connectorMoveEvent||(_.bases||(_.bases=[]),_.bases.push(a),a.connectorMoveEvent=a.on("pressmove",function(){a.positionConnectors(a,!0,!0)}),a.connectorUpEvent=a.on("pressup",function(){a.positionConnectors(a,!0,!0)}),S&&(a.connectorOverEvent=a.on("mouseover",function(){le(a)}),a.connectorOutEvent=a.on("mouseout",function(){ae(a)})),a.positionConnectors=function(o,n,r){Jo.loop(o.connectors,function(e){var t=o.parent.localToLocal(o.x-o.baseStart.x+e.nodeStart.x,o.y-o.baseStart.y+e.nodeStart.y,e.parent);e.x=t.x,e.y=t.y,pe(e,n,r)}),o.stage&&o.stage.update()},a.setConnectorColors=function(t,o,e,n){return zot(t)||(a.connectorColor=t),zot(o)||(a.connectorBorderColor=o),zot(e)||(a.connectorRollColor=e),zot(n)||(a.connectorRollBorderColor=n),Jo.loop(a.connectors,function(e){zot(t)||(e.color=t),zot(o)||(e.borderColor=o)}),a},a.setConnectorColors(P,E,T,A));var s=a.getBounds();d.endHead,Array.isArray(t)||(t=[t,t]);var c=[];return 2==t.length&&(t=[t[0],t[1],t[0],t[1]]),d.lineOrientation!=Jo.HORIZONTAL&&"auto"!=d.lineOrientation||Jo.loop([t[0],t[1]],function(e,o){var t;-1!=e&&-2!=e||(t=a.localToLocal(0==o?s.x:s.x+s.width,s.y,_),c.push([t.x,t.y,Jo.HORIZONTAL])),-1!=e&&-3!=e||(t=a.localToLocal(0==o?s.x:s.x+s.width,s.y+s.height,_),c.push([t.x,t.y,Jo.HORIZONTAL])),0<e&&Jo.loop(e,function(e,t){t=a.localToLocal(0==o?s.x:s.x+s.width,s.y+s.height*(e+1)/(t+1),_);c.push([t.x,t.y,Jo.HORIZONTAL])})}),d.lineOrientation!=Jo.VERTICAL&&"auto"!=d.lineOrientation||Jo.loop([t[2],t[3]],function(e,o){var t;-1!=e&&-2!=e||(t=a.localToLocal(s.x,0==o?s.y:s.y+s.height,_),c.push([t.x,t.y,Jo.VERTICAL])),-1!=e&&-3!=e||(t=a.localToLocal(s.x+s.width,0==o?s.y:s.y+s.height,_),c.push([t.x,t.y,Jo.VERTICAL])),0<e&&Jo.loop(e,function(e,t){t=a.localToLocal(s.x+s.width*(e+1)/(t+1),0==o?s.y:s.y+s.height,_);c.push([t.x,t.y,Jo.VERTICAL])})}),a.connectors=[],a.baseStart=new Jo.Point(a.x,a.y),Jo.loop(c,function(e){e=Z(e[0],e[1],o,n,r,i,e[2]);(!1===o||!0!==o&&!1===a.startNode)&&e.noMouse(),se(a,e)}),setTimeout(function(){a.positionConnectors(a,!0,!0)},50),_}t=u.clone().loc(e,t,F).drag({boundary:x}).expand(k);return t.orientation=l,t.startLength=r,t.endLength=i,t.startNode=o,t.endNode=n,t.nodeColor=t.color,t.on("mouseover",$),t.on("mouseout",ee),t.on("mousedown",te),t.on("pressmove",oe),t.on("pressup",ne),b&&t.hold(J),t.nodeNum=R++,t.creations=[],t}function K(){Jo.loop(o,function(e,t){e=Z(e[0],e[1],e[2],e[3],e[4],e[5]);e.dropIndex=t,r&&(e.dropArray=r[t])}),c&&F.loop(function(e,t,o){0==t?(e.before=n?F.getChildAt(o-1):null,e.after=F.getChildAt(t+1)):t==o-1?(e.after=n?F.getChildAt(0):null,e.before=F.getChildAt(t-1)):(e.before=F.getChildAt(t-1),e.after=F.getChildAt(t+1)),h&&0<t&&e.noMouse()})}function J(e){e.target.stage;e=e.target;_.bases||B&&!e.creator.creator||(e.adding?ge(e.creator):ge(e),_.stage&&_.stage.update())}function $(e){e=e.target;e.selected||(e.color=e.base?e.base.connectorRollColor:T,e.borderColor=e.base?e.base.connectorRollBorderColor:A,_.stage&&_.stage.update())}function ee(e){e=e.target;e.selected||(e.color=e.base?e.base.connectorColor:e.nodeColor,e.borderColor=e.base?e.base.connectorBorderColor:X,_.stage&&_.stage.update())}function te(e,t,o,n){var r,e=e.target;zot(e)||(o&&(e.selected=!0,V=[],_.selectNode(e,!n)),Q=e.nodeNum,c||B&&!e.creator||!l||t||(0==U&&(q=setTimeout(function(){var t;U=0,V&&(t=_.stage?_.stage.frame:WW.zdf,F.loop(function(e){if(e.hitTestPoint(t.mouseX,t.mouseY)&&e.selected)return!1})&&he())},I)),U++),e.startX=e.x,e.startY=e.y,!c&&0<V.length&&Jo.loop(V,function(e){e.startX=e.x,e.startY=e.y}),e.creations.length>=p||e.selected||e.creator&&!W||(e.adding=!0,(r=Z(e.x,e.y).bot()).creations=e.creations,r.creatorLine=e.creatorLine,r.creator=e.creator,r.orientation=e.orientation,r.startX=e.startX,r.startY=e.startY,r.dropIndex=e.dropIndex,r.dropArray=e.dropArray,r.lineArray=e.lineArray,r.color=r.nodeColor=e.nodeColor,r.startLength=e.startLength,r.endLength=e.endLength,r.startNode=e.startNode,r.endNode=e.endNode,t=r.nodeNum,r.nodeNum=e.nodeNum,e.nodeNum=t,e.base&&(r.base=e.base,r.baseStart=e.baseStart,r.nodeStart=e.nodeStart,r.connectors=e.connectors,e.base=e.baseStart=e.nodeStart=e.connectors=null,r.base.connectors&&r.base.connectors.splice(r.base.connectors.indexOf(e),1,r),r.color=r.base.connectorColor,r.borderColor=r.base.connectorBorderColor,null!=r.base.startLength&&(d.startLength=r.base.startLength),null!=r.base.endLength&&(d.endLength=r.base.endLength)),null!=e.startLength&&(d.startLength=e.startLength),null!=e.endLength&&(d.endLength=e.endLength),r.before=e.before,r.after=e.after,r.before&&(r.before.after=r),r.after&&(r.after.before=r),!r.creator||-1!=(t=r.creator.creations.indexOf(e))&&r.creator.creations.splice(t,1,r),Jo.loop(r.creations,function(e){e.creator=r}),e.creator=r,e.creatorLine=d.clone(!0).setPoints(e.x,e.y,e.x,e.y).addTo(N).alp(0),d.startLength=d.oStartLength,d.endLength=d.oEndLength,e.creatorLine.lineOrientation=e.orientation,(e.creatorLine.node=e).creatorLine.creatorNode=r,e.creations=[],e.veeObj&&!zot(e.veeObj.color)?e.color=Jo.Pick.choose(e.veeObj.color):e.color=r.color,e.nodeColor=e.color,r.creations.push(e),_.latestNode=e,B&&ce(e)))}function oe(e,t,o,n){var r=e.target;r.creatorLine&&r.creatorLine.alp(1),!c&&0<V.length&&-1==V.indexOf(r)&&he(),pe(r,!1,!0),_.bases&&Jo.loop(_.bases,function(e){r.creator&&r.creator.base==e||(!e.connectorsOn&&r.hitTestBounds(e)&&le(e),e.connectorsOn&&!r.hitTestBounds(e)&&ae(e))}),_.stage&&_.stage.update()}function ne(e,t,o,n){var r=e.target;_.bases&&Jo.loop(_.bases,function(e){e!=r.base&&e.connectorsOn&&ae(e)});e=!1;if(!c&&1<U&&!t&&(clearTimeout(q),i=r.adding?r.creator:r,r.adding&&ge(i.creations[i.creations.length-1],!0),i.selected||ue(i,!(_.stage?_.stage.frame:WW.zdf).ctrlKey),e=!(U=0)),c||_.base||(g&&(r.x=Math.round(r.x/g)*g),f&&(r.y=Math.round(r.y/f)*f)),w&&Jo.dist(r.x,r.y,r.startX,r.startY)<w||C&&Jo.dist(r.x,r.y,r.startX,r.startY)>C)return r.adding?ge(r,!0):(r.loc(r.startX,r.startY),e||pe(r)),_.stage&&_.stage.update(),_.lastNode=null,_.targetNode=null,void _.dispatchEvent("noconnection");var i=!1,e=!1;if(c){var l=r.creator;if(_.connectionStart=l,_.connectionEnd=r,l.before&&r.hitTestCircle(l.before)&&!h)r.loc(l.before).removeFrom(),l.before.after=null,l.before.before||l.before.noMouse(),l.before=null,l.after||l.noMouse(),e=!0,i=de();else if(l.after&&r.hitTestCircle(l.after))r.loc(l.after).removeFrom(),l.after.before=null,l.after.after||l.after.noMouse(),h&&l.after.mouse(),l.after=null,l.before||l.noMouse(),h&&l.noMouse(),e=!0,i=de();else{if(l&&!(0<r.creations.length))return ge(r,!0),_.stage&&_.stage.update(),_.lastNode=null,_.targetNode=null,void _.dispatchEvent("noconnection");r.loc(r.startX,r.startY).bot()}}else if("off"==m){if(!F.loop(function(e){r!=e&&r.hitTestCircles(e)&&(r.adding?ge(r,!0):(r.loc(r.startX,r.startY),pe(r)),B&&ce(r),!v&&r.creator&&0<p&&r.creator.creations.length>=p&&r.creator.noMouse(),_.targetNode=e,z&&_.nodes.loop(function(e){e!=_.latestNode&&e.noMouse()}),z&&_.nodes.loop(function(e){e!=_.latestNode&&e.noMouse()}),re(),_.dispatchEvent("connection"),_.stage&&_.stage.update())}))return void ie(r)}else if("on"==m||"single"==m){var a,s=0,l=F.loop(function(e){if(r!=e)return r.hitTestCircles(e)?(s++,s+=(a=e).creations.length,_.bases&&(!1===e.endNode||!0!==e.endNode&&e.base&&!1===e.base.endNode||r.orientation!=e.orientation||r.creator&&r.creator.base&&r.creator.base==e.base)?"no":(r.dropArray&&-1==r.dropArray.indexOf(e.dropIndex)||!y&&r.lineArray&&-1!=r.lineArray.indexOf(e.dropIndex)||"on"!=m)&&void 0):void 0});if("no"==l||l&&("single"!=m||1!=s))return void ie(r);if(r.loc(a),r.creator&&r.orientation==Jo.VERTICAL&&Math.round(r.y)==Math.round(r.creator.startY)||r.creator&&r.orientation==Jo.HORIZONTAL&&Math.round(r.x)==Math.round(r.creator.startX))return;_.targetNode=a;l=r.dropIndex;r.dropIndex=a.dropIndex,r.dropArray=Jo.copy(a.dropArray),a.lineArray?a.lineArray.push(l):a.lineArray=[l],r.lineArray=Jo.copy(a.lineArray),r.creator&&(r.creator.lineArray||(r.creator.lineArray=[]),r.creator.lineArray.push(r.dropIndex)),a.base&&a.base.connectors&&se(a.base,r),e=!0}else r.selected||(e=!0);!v&&r.creator&&0<p&&r.creator.creations.length>=p&&r.creator.noMouse(),r.adding=!1,pe(r,!0,!0),Jo.loop(V,function(e){var t;-1==V.indexOf(e.creator)&&(t=Jo.loop(e.creations,function(e){if(0<=V.indexOf(e))return!1}),re(e.nodeNum,null,Jo.decimals(e.x,2),Jo.decimals(e.y,2),t||void 0===t?1:0)),e.startX=e.x,e.startY=e.y}),r.startX=r.x,r.startY=r.y,B&&ce(r),e?(z&&_.nodes.loop(function(e){e!=_.latestNode&&e.noMouse()}),re(),_.dispatchEvent("connection"),Jo.arraysEqual(r.dropArray,r.lineArray,!1)&&_.dispatchEvent("blocked")):_.dispatchEvent("noconnection"),i&&_.dispatchEvent("complete"),_.stage&&_.stage.update()}function re(e,t,o,n,r){t?Y.push([e,null,null,1]):zot(o)?Y.push([Q,Jo.decimals(_.latestNode.x,2),Jo.decimals(_.latestNode.y,2)]):Y.push([e,null,null,null,o,n,r])}function ie(e){var t;e.adding||!W?ge(e,!0):(e.loc(e.startX,e.startY),pe(e)),B&&ce(e),e.base&&e.base.connectors&&(t=e.base,e=e,t.connectors.splice(t.connectors.indexOf(e),1),e.nodeStart=null,e.base=null),_.lastNode=null,_.targetNode=null,_.dispatchEvent("noconnection"),_.stage&&_.stage.update()}function le(t){Jo.loop(t.connectors,function(e){e.color=t.connectorRollColor,e.borderColor=t.connectorRollBorderColor}),t.connectorsOn=!0,t.stage&&t.stage.update()}function ae(t){Jo.loop(t.connectors,function(e){e.color=t.connectorColor,e.borderColor=t.connectorBorderColor}),t.connectorsOn=!1,t.stage&&t.stage.update()}function se(e,t){e.connectors.push(t),t.nodeStart=t.parent.localToLocal(t.x,t.y,e.parent),t.nodeStart.x-=e.x-e.baseStart.x,t.nodeStart.y-=e.y-e.baseStart.y,t.base=e}function ce(e){e.creator&&(e.creator.creator?ce(e.creator):e.creator&&e.creator.creations.length>=p?e.creator.noMouse():e.creator.mouse())}function ue(e,t){t&&Jo.loop(e.creations,function(e){ue(e,t)}),e.selected=!0,e.color=e.base?e.base.connectorColor:a,e.borderColor=e.base?e.base.connectorBorderColor:s,V.push(e),e.top(),G=G||_.stage.on("stagemousedown",function(){var t=_.stage?_.stage.frame:WW.zdf;F.loop(function(e){if(e.hitTestPoint(t.mouseX,t.mouseY))return!1})&&he()})}function de(){if(F.loop(function(e){if(e.before||e.after)return!1}))return F.loop(function(e){e.noMouse()}),!0}function he(){Jo.loop(V,function(e){e.selected=!1,e.color=e.base?e.base.connectorColor:e.nodeColor,e.borderColor=e.base?e.base.connectorBorderColor:X}),V=[],_.stage.off("stagemousedown",G),G=null,_.stage&&_.stage.update()}function pe(t,o,n){var e=0<V.length?V:[t];Jo.loop(e,function(e){e!=t&&e.loc(e.startX+t.x-t.startX,e.startY+t.y-t.startY),e.creator&&e.creatorLine.setPoints(e.x,e.y,e.creator.x,e.creator.y,o,n),Jo.loop(e.creations,function(e){e.creatorLine.setPoints(e.x,e.y,e.creator.x,e.creator.y,o,n)})})}function ge(e,t){var o;return Jo.loop(e.creations,function(e){ge(e)},!0),e.creatorLine&&(e.creatorLine.removeFrom(),-1!=(o=e.creator.creations.indexOf(e))&&e.creator.creations.splice(o,1),e.creator.mouseEnabled||B&&!e.creator.creator||e.creator.mouse()),e.removeFrom(),e.removeAllEventListeners(),t?R--:re(e.nodeNum,1),e=null,_}function fe(e){e.off("pressmove",e.connectorMoveEvent),e.off("pressup",e.connectorUpEvent),e.connectorOverEvent&&e.off("mouseover",e.connectorOverEvent),e.connectorOutEvent&&e.off("mouseout",e.connectorOutEvent),e.connectors=null,e.baseStart=null,e.positionConnectors=e.setConnectorColors=null,e.connectorColor=e.connectorBorderColor=e.connectorRollColor=e.connectorRollBorderColor=null,_.bases.splice(_.bases.indexOf(e),1),_.stage&&_.stage.update()}I*="s"==j?1e3:1,zot(g)&&(g=null!=D.snapH?D.snapH:null),zot(f)&&(f=null!=D.snapV?D.snapV:null),zot(B)&&(B=null!=D.rootLock&&D.rootLock),zot(W)&&(W=null==D.grandChildren||D.grandChildren),zot(M)&&(M=null!=D.steps?D.steps:null),c&&o.length<=1?zon&&zogy("Connector() - linear needs more than one point"):(R=0,(_=this).node=u,_.line=d,Y=[],u.color,X=u.borderColor,N=_.lines=new Jo.Container(e,t).addTo(_),F=_.nodes=new Jo.Container(e,t).addTo(_),"Blob"==o.type||"Squiggle"==o.type?(H=[],Jo.loop(o.points,function(e){H.push([e[0],e[1]])}),o=H):Jo.loop(o,function(e,t){e.constructor==={}.constructor&&(o[t]=[e.x,e.y,e.startNode,e.endNode,e.startLength,e.endLength],null!=e.base&&(o[t][0]=e.base),null!=e.info&&(o[t][1]=e.info))}),_.points=o,this.addNode=function(e,t,o,n,r,i){if(!c)return Z(e,t,o,n,r,i)},K(),_.setAvailableIndexes=function(o){return Array.isArray(o)||(o=[o]),_.nodes.loop(function(e,t){-1==o.indexOf(t)?e.noMouse():e.mouse()}),_},zot(i)||_.setAvailableIndexes(i),_.keyEvent=function(e){!b||46!=e.keyCode&&"Backspace"!=e.key||(Jo.loop(V,function(e){e&&e.parent&&ge(e)}),_.stage&&_.stage.update())},WW.addEventListener("keydown",_.keyEvent),V=[],U=0,_.makeConnection=function(e,t,o,n,r){var i=_.stage?_.stage.frame:WW.zdf;return n?(i.ctrlKey=1==r,te({target:e},!0,!0,r),e.loc(t,o),oe({target:e}),ne({target:e},!0)):(te({target:e},!0,!1,null),_.latestNode.loc(t,o),oe({target:_.latestNode}),ne({target:_.latestNode},!0)),i.ctrlKey=!1,_.latestNode},_.setSteps=function(e){return Jo.loop(e,function(e){var t=function(t){var e=_.nodes.loop(function(e){if(e.nodeNum==t)return e});if(e.type)return e}(e[0]);t&&(e[3]?t&&ge(t):zot(e[4])?_.makeConnection(t,e[1],e[2]):(_.makeConnection(t,e[4],e[5],!0,e[6]),he()))}),_},_.applySteps=_.setSteps,_.getSteps=function(e){return e&&(_.stage||(_.stage=zdf.stage),_.pane||(_.pane=new Jo.Pane({displayClose:!1,container:_.stage,width:Math.min(500,_.stage.width-20),height:Math.min(500,_.stage.height-20),draggable:!0}),_.textArea=new Jo.TextArea(Math.min(400,_.stage.width-70),Math.min(400,_.stage.height-70)),_.pane.add(_.textArea)),_.pane.show(),_.textArea.text=JSON.stringify(Y)),Y},Object.defineProperty(this,"steps",{get:function(){return Y},set:function(e){_.setSteps(e)}}),this.selectNode=function(e,t){ue(e,t)},this.removeNode=function(e){ge(e)},this.removeConnectors=function(){Jo.loop(F,function(e){ge(e)},!0),K(),_.stage&&_.stage.update()},this.removeBase=function(e){Jo.loop(e.connectors,function(e){ge(e)}),fe(e)},this.addBase=function(e,t){Z(e,t)},M&&_.added(function(){_.setSteps(M),_.stage.update()}),Object.defineProperty(this,"selectedList",{get:function(){return V},set:function(){zon&&zogy("Selectors() - selectedList is read only")}}),!(this.dispose=function(e,t,o){return _.nodes.loop(function(e){e.removeFrom(),e.removeAllEventListeners(),e=null},!0),_.lines.loop(function(e){e.removeFrom(),e=null},!0),WW.removeEventListener("keydown",_.keyEvent),_.keyEvent=null,_.bases&&Jo.loop(_.bases,function(e){fe(e)}),o||(_.zimContainer_dispose(!0),_.stage&&_.stage.update()),!0})!==O&&Jo.styleTransforms(this,D),this.clone=function(){return _.cloneProps(new Jo.Connectors(e,t,o,u,d,c,n,h,p,g,f,m,Jo.copy(r),z,i,y,b,l,v,w,C,x,k,T,A,a,s,P,E,S,B,W,I,M,O,_.group,L))})},Jo.extend(Jo.Connectors,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Marquee=function(e,t,o,i,n,r,l,a,s,c,u,d,h,p,g,f,m){if(w=zob(Jo.Marquee,arguments,"width, height, items, time, transition, speed, direction, marginLeft, marginRight, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",this))return w;z_d("67.4"),this.group=f;var z=!1===g?{}:Jo.getStyle("Marquee",this.group,m),y=this;zot(e)&&(e=null!=z.width?z.width:300),zot(t)&&(t=null!=z.height?z.height:100);var b=$o(i);zot(i)&&(i=null!=z.time?z.time:"s"==b?5:5e3),zot(n)&&(n=null!=z.transition?z.transition:"slide"),zot(u)&&(u=null!=z.borderColor?z.borderColor:Jo.dark),zot(d)&&(d=null!=z.borderWidth?z.borderWidth:1),u<0||d<0?u=d=null:null!=u&&null==d&&(d=1),zot(a)&&(a=null!=z.marginLeft?z.marginLeft:25),zot(s)&&(s=null!=z.marginRight?z.marginRight:25),zot(r)&&(r=null!=z.speed?z.speed:"s"==b?.5:500),en(r,b),zot(l)&&(l=null!=z.direction?z.direction:"right"),zot(h)&&(h=null!=z.refresh?z.refresh:"s"==b?1800:18e5),zot(p)&&(p=null==z.mix||z.mix),this.zimContainer_constructor(e+a+s,t,null,null,!1),this.type="Marquee",this.speed=r;var v,w=new Jo.Rectangle(e-1,t-1,Jo.clear).addTo(y).mov(a+.5,.5),C=this.content=new Jo.Container(e,t).loc(a,0,y).setMask(w),x=this.pages=new Jo.Pages(null,n,r,null,C).addTo(C),k=!1;this.add=function(e,t,o,n,r){zot(r)&&(r=!0),e.scaleTo(C,100,100),t&&e.cur().on("click",function(){zgo(t,o)}),x.addPage(e),r&&x.center(),e.marqueeViews=0,e.marquee=y,k||(k=!0,y.index=0,y.selected=x.pages[y.index].page,y.lastSelected=null,y.selected.marqueeOn&&y.selected.marqueeOn(),y.interval=Jo.interval(i,function(){y.go()})),n||I(),B&&B.top()},this.remove=function(e){var t;y.selected==e?1!=y.pages.pages.length&&((t=y.index+1)==y.pages.pages.length&&(t=0),y.pages.go(t,null,null,0),setTimeout(function(){y.pages.removePage(e),e.dispose&&e.dispose(),I()},20)):(y.pages.removePage(e),e.dispose&&e.dispose(),I())},zot(o)||Array.isArray(o)||(o=[o]),o&&0<o.length&&(p&&Jo.shuffle(o),Jo.loop(o,function(e){y.add(e,null,null,!0)})),0<h&&(v=Jo.timeout(h*("s"==b?1e3:1),function(){location.reload()},null,"ms")),y.go=function(o){var e;y.selected.marqueeViews+=1,y.selected.marqueeOff&&y.selected.marqueeOff(),o?(y.selected=o,Jo.loop(x.pages,function(e,t){e.page==o&&(y.index=t)}),y.interval.interval=y.selected.marqueeTime||i,y.interval.pause(W.toggled,null,!0)):(e=y.index+1,y.index=e%x.pages.length,y.selected=x.pages[y.index].page,y.interval.time=y.selected.marqueeTime||i),y.dispatchEvent("page"),y.selected.marqueeOn&&y.selected.marqueeOn(),x.go(y.selected,l,n,r)},x.on("pagetransitioned",function(){y.dispatchEvent("pagetransitioned"),y.indicator&&(y.indicator.index=y.index)});var T=!1,A=y.left=new Jo.Container(a-4,t-4),f=(new Jo.Shape).sca(.6);f.graphics.f(Jo.light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");b=(new Jo.Shape).sca(.6).reg(-2,0);b.graphics.f(Jo.light).mt(0,0).p("AiJieIETCeIkTCfg");var P,E,S,B,W=y.button=new Jo.Button({label:"",icon:f,toggleIcon:b,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(A,100).pos(0,0,!1,!0,A);function I(){var e;zot(a)||0==a||(e=4*a/25,A.pos(a-A.width-e,e/2,!1,!0,y),y.indicator&&(y.indicator.dispose(),y.indicator.removeFrom()),P=P||new Jo.Proportion(8,16,A.width+e,A.width/2+e,-1),y.indicator=new Jo.Indicator({width:(x.pages.length<=2?x.pages.length:x.pages.length-1)*(A.width-3),height:P.convert(x.pages.length),num:x.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:c}),y.indicator.fit(0,0,t-W.height,W.width),y.indicator.rot("down"==l?-90:90).center(A).pos(null,A.width-e/2,null,!0),y.indicator.index=y.index,y.indicator.on("change",function(){y.go(x.pages[y.indicator.index].page)}))}W.on("click",function(){y.interval&&y.interval.pause(W.toggled),T=W.toggled,y.stage.update()}),I(),!zot(s)&&0<s&&WW.zdf&&WW.zdf&&(f=4*s/25,b=y.right=new Jo.Container(45,270),(E=y.icon=WW.zdf.makeIcon(Jo.grey,Jo.lighter,Jo.silver).sca(.5).pos(0,0,!0,!0,b).mov(0,0).cur()).on("mouseover",function(){S.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0,timeUnit:"ms"}),E.stage.update()}),E.on("mouseout",function(){S.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0,timeUnit:"ms"}),E.stage.update()}),E.on("mousedown",function(){zgo("https://zimjs.com/marquee","_blank")}),S=y.label=new Jo.Label({text:"MARQUEE",color:Jo.dark,backgroundColor:Jo.lighter,shiftV:1,paddingV:5}).rot(-90).pos(0,13,!0,!1,b).reg(-10).sca(0,1).mov(0),b.fit(0,0,s-f,t-f),b.pos(s-b.width-f,f/2,!0,!0,y)),y.stage&&y.stage.update(),this.pause=function(e,t){zot(e)&&(e=!0),e!=T&&(T=e,y.interval.pause(e,t),y.button.toggle(e))},Object.defineProperty(this,"paused",{get:function(){return T},set:function(){zon&&zogy("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return i},set:function(e){i=e,y.interval.time=i}}),this.load=function(n,e){var t=[];p&&Jo.shuffle(n),Jo.loop(n,function(e){Array.isArray(e)?t.push(e[0]):t.push(e)});var o=y.stage?y.stage.frame:WW.zdf;return y.marqueeLoader=o.loadAssets(t,e),y.loadEvent=y.marqueeLoader.on("assetload",function(e){var t,o=n[e.asset.id],o=Array.isArray(o)?(t=o[0],o[1]):(t=o,"_self");y.add(e.asset,t,o),I()}),y},zot(u)||((B=new Jo.Rectangle(e-1,t-1,Jo.clear,u,d).loc(w,null,y)).mouseEnabled=!1),!1!==g&&Jo.styleTransforms(this,z),this.clone=function(){return y.cloneProps(new Jo.Marquee(e,t,o,i,n,r,l,c,u,d,h,p,g,this.group,m))},this.dispose=function(e,t,o){return v&&v.clear(),y.interval&&y.interval.clear(),y.loadEvent&&y.marqueeLoader.off("assetload",y.loadEvent),x.dispose(),x=null,o||this.zimContainer_dispose(!0),!0}},Jo.extend(Jo.Marquee,Jo.Container,["clone","dispose"],"zimContainer"),Jo.Carousel=function(s,c,n,r,i,l,a,u,d,h,p,g,f,m,z,y,b,v,w,C,e,t){var o;if(o=zob(Jo.Carousel,arguments,"items, viewNum, time, spacing, backgroundColor, backing, padding, paddingH, paddingV, arrowLeft, arrowRight, arrowGap, valign, ease, swipe, remember, index, continuous, selectedIndex, style, group, inherit",this))return o;z_d("67.45"),this.group=e;var x=!1===C?{}:Jo.getStyle("Carousel",this.group,t),k=this;this.zimContainer_constructor(),zot(s)&&(s=null!=x.items?x.items:[new Rectangle({color:red}),new Rectangle({color:orange}),new Rectangle({color:yellow}),new Rectangle({color:green}),new Rectangle({color:blue}),new Rectangle({color:purple}),new Rectangle({color:pink})]),zot(i)&&(i=null!=x.backgroundColor?x.backgroundColor:Jo.clear),zot(l)&&(l=null!=x.backing?x.backing:null),zot(f)&&(f=null!=x.valign?x.valign:"center"),zot(c)&&(c=null!=x.viewNum?x.viewNum:3),zot(r)&&(r=null!=x.spacing?x.spacing:20),zot(a)&&(a=null!=x.padding?x.padding:0),zot(u)&&(u=null!=x.paddingH?x.paddingH:a),zot(d)&&(d=null!=x.paddingV?x.paddingV:a),zot(h)&&(h=null!=x.arrowLeft?x.arrowLeft:(new Jo.Arrow).rot(180)),zot(p)&&(p=null!=x.arrowRight?x.arrowRight:new Jo.Arrow),zot(g)&&(g=null!=x.arrowGap?x.arrowGap:20);var T=$o(n);zot(n)&&(n=null!=x.time?x.time:"s"==T?.2:200),zot(m)&&(m=null!=x.ease?x.ease:"quadInOut"),zot(z)&&(z=null==x.swipe||x.swipe),zot(y)&&(y=null!=x.remember?x.remember:"zimCarousel"),zot(w)&&zot(x.selectedIndex)||!zot(b)||!zot(x.index)||(b=zot(w)?x.selectedIndex:w),zot(b)&&(b=null!=x.index?x.index:0),zot(v)&&(v=null==x.continuous||x.continuous),y&&localStorage&&!zot(localStorage[y])&&("NaN"==localStorage[y]&&(localStorage[y]=0),b=Number(localStorage[y])),k.items=s,k.viewNum=c,k.spacing=r,k.arrowLeft=h,k.arrowRight=p,k.arrowLeft.oW=h.width,k.arrowRight.oW=p.width,l&&(k.backing=l);var A={};Jo.loop(s,function(e,t){"string"==typeof e&&(e=s[t]=new Jo.Pic(e)),e.reg(CENTER,CENTER),A["width"+e.width]?A["width"+e.width]+=1:A["width"+e.width]=1});var P=0,E=0;Jo.loop(A,function(e,t){P<t&&(P=t,E=Number(e.substring(5)))});var S,B=0;Jo.loop(s,function(e){e.width=E,e.height>B&&(B=e.height)}),v?(k.continuous=!0,S=Jo.copy(s),Jo.loop(s.length,function(e){S.push(s[e].duplicate())})):S=s,k.itemWidth=E,k.itemHeight=B;var W,I,M,O=h.width+g+u;function j(){k.swipe&&(k.swipeObj=new Jo.Swipe(k.tile)).on("swipe",function(e){0!=e.swipeX&&k.cycleInterval&&(k.cycleClear(),k.dispatchEvent("cyclecleared")),1==e.swipeX?k.goLeft():-1==e.swipeX&&k.goRight()})}function L(){localStorage&&y&&(localStorage[y]=k.index),h.activate(!0),p.activate(!0),v||(k.tile.x+k.tile.width<=W-p.oW-u-g&&p.activate(!1),k.tile.x>=O&&h.activate(!1))}k.goLeft=function(e){return zot(e)&&(e=n),v&&k.tile.x>=-E&&(k.tile.x-=k.tile.width/2+r/2),k.tile.x<O&&(k.disableArrows(),b--,k.dispatchEvent("page"),k.dispatchEvent("goleft"),k.tile.animate({props:{x:k.tile.x+E+r},time:e,ease:m,call:function(){L(),k.enableArrows(),k.dispatchEvent("transitioned")}})),k},k.goRight=function(e){return zot(e)&&(e=n),v&&k.tile.x-E<=W-k.tile.width&&(k.tile.x+=k.tile.width/2+r/2),k.tile.x+k.tile.width>W-p.oW-u-g&&(k.disableArrows(),b++,k.dispatchEvent("page"),k.dispatchEvent("goright"),k.tile.animate({props:{x:k.tile.x-E-r},time:e,ease:m,call:function(){L(),k.enableArrows(),k.dispatchEvent("transitioned")}})),k},k.cycleClear=function(){return k.cycleInterval.clear(),k.cycleInterval=null,k},k.cycle=function(e,t,o,n,r,i){var l;if(l=zob(k.cycle,arguments,"cycleTime, transitionTime, repeat, repeatNum, recycle, rtl"))return l;zot(e)&&(e=null!=x.cycleTime?x.cycleTime:"s"==T?5:5e3),zot(t)&&(t=null!=x.transitionTime?x.transitionTime:"s"==T?1:1e3),zot(o)&&(o=!0),zot(n)&&(n=0),zot(r)&&(r=2*e),zot(i)&&(i=WW.DIR&&"rtl"==WW.DIR||!WW.DIR&&"rtl"==Jo.DIR);var a=i?-1:1;return k.cycleInterval&&k.cycleInterval.clear(),r&&-1!=r&&(k.recycleEvent&&k.off("cyclecleared",k.recycleEvent),k.recycleWait&&k.recycleWait.clear(),k.recycleEvent=k.on("cyclecleared",function(){k.recycleWait&&k.recycleWait.clear(),k.recycleWait=timeout(r,function(){k.cycle(e,t,o,n,r,i)})})),v?(k.repeatTotal=0,k.cycleInterval=Jo.interval(2*e,function(e){if(0==k.index)if(!o&&i)k.cycleInterval.clear();else{if(i&&1!=e.count&&(k.repeatTotal+=1),i&&0!=n&&k.repeatTotal>=n)return k.cycleInterval.clear(),void k.dispatchEvent("repeatdone");1==a?k.goRight(t):k.goLeft(t)}else if(k.index==s.length-c){if(i||1==e.count||(k.repeatTotal+=1),!i&&0!=n&&k.repeatTotal>=n)return k.cycleInterval.clear(),void k.dispatchEvent("repeatdone");1<=k.repeatTotal&&k.dispatchEvent("repeated"),i||o?1==a?k.goRight(t):k.goLeft(t):k.cycleInterval.clear()}else 1==a?k.goRight(t):k.goLeft(t)})):(k.repeatTotal=.5,k.cycleInterval=Jo.interval(2*e,function(e){if(0==k.index){if(1!=e.count&&(k.repeatTotal+=.5),0!=n&&k.repeatTotal>n)return k.cycleInterval.clear(),void k.dispatchEvent("bouncedone");1<=k.repeatTotal&&k.dispatchEvent("bounced"),a=1,k.goRight(t)}else if(k.index==s.length-c){if(1!=e.count&&(k.repeatTotal+=.5),0!=n&&k.repeatTotal>n)return k.cycleInterval.clear(),void k.dispatchEvent("bouncedone");1<=k.repeatTotal&&k.dispatchEvent("bounced"),a=-1,k.goLeft(t)}else zogb(),1==a?k.goRight(t):k.goLeft(t)})),k},k.enableArrows=function(){return k.swipeObj&&(k.swipeObj.active=!0),h.mouse(),p.mouse(),k},k.disableArrows=function(){return k.swipeObj&&(k.swipeObj.active=!1),h.noMouse(),p.noMouse(),k},Object.defineProperty(k,"index",{get:function(){return(b+s.length)%s.length},set:function(e){b=Jo.constrain(e,0,s.length-c),k.tile.x=O-b*(E+r),L()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return this.index},set:function(e){this.index=e}}),Object.defineProperty(k,"swipe",{get:function(){return z},set:function(e){(z=e)&&!k.swipeObj&&j(),k.swipeObj.active=z}}),M=B,W=(I=c*(E+r)-r)+2*u+2*g+h.width+p.width,k.setBounds(0,0,W,M+2*d),k.tile=new Jo.Tile({obj:S,cols:S.length,spacingH:r,rows:1,unique:!0,align:"center",valign:f}).center(k).loc(O),k.background=new Rectangle(I+2*u,M+2*d,i).center(k,0),k.tile.setMask(k.background),h.pos(0,0,"left","center",k),p.pos(0,0,"right","center",k),h.on("mousedown",function(){k.cycleInterval&&(k.cycleClear(),k.dispatchEvent("cyclecleared")),k.goLeft()}),p.on("mousedown",function(){k.cycleInterval&&(k.cycleClear(),k.dispatchEvent("cyclecleared")),k.goRight()}),L(),j(),l&&l.center(k,1),b&&(k.index=b),!(this.dispose=function(e,t,o){return k.swipeObj&&k.swipeObj.dispose(),k.recycleEvent&&k.off("cyclecleared",k.recycleEvent),k.cycleWait&&k.cycleWait.clear(),k.cycleInterval&&k.cycleInterval.clear(),k.swipeObj=k.recycleEvent=k.cycleWait=null,o||this.zimContainer_dispose(),!0})!==C&&Jo.styleTransforms(this,x),this.clone=function(){for(var e=[],t=0;t<s.length;t++){var o=s[t];o.duplicate?e.push(o.duplicate()):o.clone?e.push(o.clone()):e.push(Jo.copy(s[t]))}return k.cloneProps(new Jo.Carousel(e,c,n,r,i,l,a,u,d,h.duplicate(),p.duplicate(),g,f,m,z,y,b,v,w,C,this.group))}},Jo.extend(Jo.Carousel,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Loader=function(t,o,n,g,r,i,l,a,s,e,c,u,d,h,p,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O){var j;if(j=zob(Jo.Loader,arguments,"width, height, label, type, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, rollBorderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, multiple, accept, style, group, inherit",this))return j;z_d("67.5"),this.group=M;O=!1===I?{}:Jo.getStyle("Loader",this.group,O);if(zot(t)&&(t=null!=O.width?O.width:250),zot(o)&&(o=null!=O.height?O.height:70),zot(g)&&(g=null!=O.type?O.type:"image"),g=g.toLowerCase(),zot(r)&&(r=null!=O.backgroundColor?O.backgroundColor:"rgba(0,0,0,.05)"),zot(i)&&(i=null!=O.rollBackgroundColor?O.rollBackgroundColor:"rgba(0,0,0,.1)"),zot(l)&&(l=null!=O.color?O.color:"rgba(0,0,0,.5)"),zot(a)&&(a=null!=O.rollColor?O.rollColor:l),zot(s)&&(s=null!=O.borderColor?O.borderColor:"rgba(0,0,0,.3)"),zot(c)&&(c=null!=O.borderWidth?O.borderWidth:1),zot(z)&&(z=null==O.dashed||O.dashed),zot(u)&&(u=null!=O.corner?O.corner:0),zot(B)&&(B=null==O.multiple||O.multiple),zot(n)&&(n=null!=O.label?O.label:new Jo.Label({text:"UPLOAD PIC",color:l,rollColor:a,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),void 0===S){if(!WW.zdf)return void(zon&&zogy("zim.Loader - please provide a reference to zim Frame"));S=WW.zdf}this.zimButton_constructor(t,o,n,r,i,null,l,a,null,s,c,e,null,y,b,null,w,C,null,u,z,d,h,f,m,null,null,null,null,null,p,null,null,null,v,x,null,null,null,null,null,null,k,T,null,A,P,null,E,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var L=this,D=S.stage;n=L.label;var _=L.tag=document.createElement("input");(S.tag||document.body).appendChild(_),_.setAttribute("type","file"),_.setAttribute("aria-hidden",!0),B&&_.setAttribute("multiple","multiple"),W&&_.setAttribute("accept",W),_.hidden=!0,_.zimDisplay=_.style.display||"inline-block",_.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){_.click()}),_.addEventListener("change",N);var R=new createjs.DOMElement(_);D.addChild(R),R.alpha=0;var Y,X=S.retina&&WW.devicePixelRatio||1;function N(e){var i,l,a,s,c,u,d,h,p=(e.dataTransfer&&e.dataTransfer.files&&0<e.dataTransfer.files.length?e.dataTransfer:e.target).files;"text"==g||"json"==g?(i=[],"json"==g.toLowerCase()&&(a=[])):"other"==g?c=[]:d=[];for(var t,o,n=0;n<p.length;n++)t=p[n],o=void 0,(o=new FileReader).onload=function(e){var t,o,n,r;"text"==g||"json"==g?(t=e.target.result,i.push(t),"json"==g&&(o=Jo.parseJSON(t),a.push(o)),1==i.length&&(l=t,"json"==g&&(s=o)),i.length==p.length&&((n=new createjs.Event("loaded")).texts=i,n.text=l,n.lastText=t,n.total=i.length,"json"==g&&(n.jsons=a,n.json=s,n.lastJSON=o),L.dispatchEvent(n),_.value="")):"other"==g?(o=e.target.result,c.push(o),1==c.length&&(u=o),c.length==p.length&&((n=new createjs.Event("loaded")).others=c,n.other=u,n.lastOther=o,n.total=c.length,L.dispatchEvent(n),_.value="")):((r=new Image).onload=function(){var e,t=new Jo.Bitmap(r);d.push(t),1==d.length&&(h=t),d.length==p.length&&((e=new createjs.Event("loaded")).bitmaps=d,e.bitmap=h,e.lastBitmap=t,e.total=d.length,L.dispatchEvent(e),_.value="")},r.src=e.target.result)},"text"==g||"json"==g?o.readAsText(t):o.readAsDataURL(t)}this.resize=function(e,t){if(!L.stage)return _.setAttribute("aria-hidden",!0),_.hidden=!0,void(_.style.display="none");_.setAttribute("aria-hidden",!1),_.hidden=!1,_.style.display=_.zimDisplay,zot(e)&&(e=!0),L.time1&&clearTimeout(L.time1),t||(L.time1=setTimeout(function(){L.resize(null,!0)},40));var o=L.getConcatenatedMatrix().decompose(),e=L.localToGlobal(0,0);return S.retina?(t=Jo.browserZoom(),S.tag?(R.x=e.x/X/t,R.y=e.y/X/t):(R.x=S.x/D.scaleX+e.x/X/t,R.y=S.y/D.scaleY+e.y/X/t),Jo.sca(R,o.scaleX/X/D.scaleX/t,o.scaleY/X/D.scaleY/t)):(R.x=S.x+e.x*S.scale,R.y=S.y+e.y*S.scale,Jo.sca(R,S.scale*o.scaleX,S.scale*o.scaleY)),D.update(),L},this.resize(),L.on("added",function(){_.style.display="block",_.hidden=!1,_.style.display="block",L.resize()}),L.added(function e(){L.resize();L.time2=setTimeout(function(){_.style.display="block",_.hidden=!1,_.style.display="block"},50);L.on("added",e,null,!0)}),L.on("removed",function(){L.time1&&clearTimeout(L.time1),L.time2&&clearTimeout(L.time2),_&&(_.style.display="none",_.hidden=!0,_.style.display="none")}),(new XMLHttpRequest).upload&&(Y=function(e){_.removeEventListener("change",N),N(e),setInterval(function(){_.addEventListener("change",N)},100)},_.addEventListener("drop",Y)),!(this.save=function(e,t,o,n,r,i,l,a,s,c,u){var d,h;if(d=zob(L.save,arguments,"content, filename, x, y, width, height, cached, cachedBounds, type, data, quality"))return d;if(zot(e)&&(e=S.stage),"text"==s&&(s="txt"),zot(s)&&(s="png"),zot(t)?t="saved_"+String(Jo.makeID("numbers",5))+"."+s:1==(d=t.split(".")).length||-1==(p=(h=["png","jpg","jpeg","txt","json"]).indexOf(d[d.length-1].toLowerCase()))?t+="."+s:s=h[p],"txt"==s||"json"==s){var p,g=document.createElement("a");return"string"!=typeof e&&e.text&&(e=e.text),"json"!=s||isJSON(e)||(e=JSON.stringify(e)),p=new(document&&document.Blob?document.Blob:Blob)([e],{type:"text/plain"}),g.href=URL.createObjectURL(p),g.download=t,g.click(),URL.revokeObjectURL(g.href),L}zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=(e.getBounds&&e.getBounds()?e.getBounds():S).width),zot(i)&&(i=(e.getBounds&&e.getBounds()?e.getBounds():S).height);var f,g=e.cacheCanvas;if(e.cache(o,n,r,i),c){c=e.cacheCanvas.toDataURL("image/"+s,u);return l?a&&e.cache(a.x,a.y,a.width,a.height):e.uncache(),c}return/Edge\/(\d)+/.test(navigator.userAgent)?((f=WW.open()).document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+e.cacheCanvas.toDataURL("image/"+s)+"></body></html>"),f.document.close()):("jpg"==s&&(s="jpeg"),(f=document.createElement("a")).setAttribute("download",t),f.setAttribute("href",e.cacheCanvas.toDataURL("image/"+s,u)),document.body.appendChild(f),f.click(),document.body.removeChild(f)),l||g?a&&e.cache(a.x,a.y,a.width,a.height):e.uncache(),L})!==I&&Jo.styleTransforms(this,O),this.clone=function(){var e=new Jo.Loader(t,o,zot(n)?null:n.clone(),r,i,l,a,s,c,u,d,h,p,f,m,zot(y)?null:y.clone(),zot(b)?null:b.clone(),v,zot(w)?null:w.clone(),zot(C)?null:C.clone(),x,zot(k)?null:k.clone(),zot(T)?null:T.clone(),zot(A)?null:A.clone(),zot(P)?null:P.clone(),E,S,I,this.group);return L.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return S},set:function(e){e!=S&&(S.off("update",L.updateEvent),S.off("resize",L.resizeEvent),S=e,L.resizeEvent=S.on("resize",L.resize),L.updateEvent=S.on("update",L.resize),L.resize())}}),this.resizeEvent=S.on("resize",L.resize),this.updateEvent=S.on("update",L.resize),this.dispose=function(e,t,o){var n;return L.stage&&(n=L.stage),S.off("update",L.updateEvent),S.off("resize",L.resizeEvent),_.removeEventListener("change",N),Y&&_.removeEventListener("drop",Y),_&&_.parentNode&&_.parentNode.removeChild(_),_=null,o||(this.zimButton_dispose(),n&&n.update()),!0}},Jo.extend(Jo.Loader,Jo.Button,["clone","dispose"],"zimButton",!1),Jo.TextArea=function(t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,e,A){if(P=zob(Jo.TextArea,arguments,"width, height, placeholder, text, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, readOnly, spellCheck, password, inputType, wrap, maxLength, frame, expand, keyboardShift, style, group, inherit",this))return P;z_d("67.6"),this.group=e;var P=!1===T?{}:Jo.getStyle("TextArea",this.group,A);if(zot(t)&&(t=null!=P.width?P.width:250),zot(o)&&(o=null!=P.height?P.height:70),zot(n)&&(n=null!=P.placeholder?P.placeholder:null),zot(r)&&(r=null!=P.text?P.text:null),zot(i)&&(i=null!=P.size?P.size:20),zot(l)&&(l=null!=P.padding?P.padding:5),zot(a)&&(a=null!=P.color?P.color:Jo.granite),zot(s)&&(s=null!=P.backgroundColor?P.backgroundColor:"rgba(256,256,256,.1)"),zot(c)&&(c=null!=P.borderColor?P.borderColor:"rgba(0,0,0,.1)"),zot(u)&&(u=null!=P.borderWidth?P.borderWidth:null),c<0||u<0?c=u=null:null!=c&&null==u&&(u=1),zot(d)&&(d=null!=P.corner?P.corner:0),!zot(p)&&zot(h)&&(h=null!=P.shadowColor?P.shadowColor:"rgba(0,0,0,.3)"),!zot(h)&&zot(p)&&(p=null!=P.shadowBlur?P.shadowBlur:10),zot(y)&&(y=null!=P.password&&P.password),zot(b)&&(b=null!=P.inputType&&P.inputType),zot(v)&&(v=null==P.wrap||P.wrap),zot(w)&&(w=null!=P.maxLength?P.maxLength:null),zot(z)&&(z=null==P.spellCheck||P.spellCheck),zot(m)&&(m=null!=P.readOnly&&P.readOnly),zot(k)&&(k=null!=P.keyboardShift&&P.keyboardShift),this.maxLength=w,zot(x)&&(x=null!=P.expand?P.expand:20),!0===x&&(x=20),void 0===C){if(!WW.zdf)return void(zon&&zogy("zim.TextArea - please provide a reference to zim Frame"));C=WW.zdf}this.zimContainer_constructor(t,o,null,null,!1),this.type="TextArea";var E=this,S=C.stage,e=this.background=new Jo.Rectangle(t,o,s,c,u,d,g,null,null,!1).expand(x);-1!=h&&0<p&&(e.shadow=new createjs.Shadow(h,3,3,p)),E.addChild(e);var B=E.tag=b||y?document.createElement("input"):document.createElement("textarea");(C.tag||document.body).appendChild(B),zot(f)||(B.setAttribute("id",f),B.setAttribute("name",f)),y?B.setAttribute("type","password"):b&&B.setAttribute("type",b),B.readOnly=m,B.spellcheck=z,n&&B.setAttribute("placeholder",n),r&&(B.value=r),B.zimDisplay=B.style.display||"inline-block",B.style.cssText="background-color:rgba(0,0,0,.01); color:"+a+"; resize:none; z-index:3; width:"+(t-2*l)+"px; height:"+(o-2*l)+"px; overflow:hidden; outline:none;font-size:"+i+"px; font-family:"+(null!=P.font?P.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",E.taInput=function(e){!zot(E.maxLength)&&E.text.length>E.maxLength&&(E.text=E.text.substring(0,E.maxLength)),E.dispatchEvent(e)};var W,I=E.text,O=E.y;function j(){M&&!zot(W)&&WW.visualViewport.height>W&&(E.taBlur(),WW.visualViewport.removeEventListener("resize",j)),W=WW.visualViewport.height}E.taBlur=function(){WW.M&&k&&E.stage&&(E.re&&E.stage.frame.off("resize",E.re),E.stage.y=O,B.blur(),E.resize(),E.stage.update()),E.stage&&(C=E.stage.frame),C.zil&&WW.addEventListener("keydown",C.zil[0]),E.dispatchEvent("blur"),E.text!=I&&E.dispatchEvent("change")},E.taFocus=function(){var e;I=E.text,WW.M&&k&&(E.re&&E.stage.frame.off("resize",E.re),E.re=E.stage.frame.on("resize",function(){E.stage&&e>E.stage.height/4&&(E.stage.y=E.stage.scaleY*(E.stage.height/4-e),E.resize(),E.stage.update())}),WW.visualViewport&&(WW.visualViewport.removeEventListener("resize",j),WW.visualViewport.addEventListener("resize",j)),e=E.localToGlobal(0,0).y,E.stage&&e>E.stage.height/4&&(E.stage.y=E.stage.scaleY*(E.stage.height/4-e),E.resize(),E.stage.update())),E.stage&&(C=E.stage.frame),C.zil&&WW.removeEventListener("keydown",C.zil[0]),E.dispatchEvent("focus")},B.addEventListener("input",E.taInput),B.addEventListener("focus",E.taFocus),B.addEventListener("blur",E.taBlur);var L=new createjs.DOMElement(B);L.alpha=0,this.on("mousedown",function(){setTimeout(function(){B.focus()},100)}),this.setFocus=function(e){return zot(e)&&(e=!0),e?B.focus():B.blur(),E};var D=C.retina&&WW.devicePixelRatio||1;this.resize=function(e,t){zot(e)&&(e=!0),E.time1&&clearTimeout(E.time1),t||(E.time1=setTimeout(function(){E.resize(null,!0)},40));var o,n,r=E.getConcatenatedMatrix().decompose(),i=E.localToGlobal(l,l);return C.retina?(o=Jo.browserZoom(),C.tag?(L.x=i.x/D/o,L.y=i.y/D/o):(n=(S.x-S.x/D/o)/C.scale,t=(S.y-S.y/D/o)/C.scale,L.x=C.x/S.scaleX+i.x/D/o-n,L.y=C.y/S.scaleY+i.y/D/o-t),Jo.sca(L,r.scaleX/D/S.scaleX/o,r.scaleY/D/S.scaleY/o)):(C.tag?(L.x=i.x*C.scale,L.y=i.y*C.scale):(L.x=C.x+i.x*C.scale,L.y=C.y+i.y*C.scale),Jo.sca(L,C.scale*r.scaleX,C.scale*r.scaleY)),L.alpha=E.alpha,E.parent&&(L.alpha*=E.parent.alpha),e&&E.stage&&S.update(),E},this.resize(),E.added(function e(){S.addChild(L);E.time2=setTimeout(function(){B.style.display=B.zimDisplay},50);E.resize();E.on("added",e,null,!0);E.FOEvent=S.on("stagemousedown",function(){E.focus=!1})}),E.on("removed",function(){E.time1&&clearTimeout(E.time1),E.time2&&clearTimeout(E.time2),S.removeChild(L),E.FOEvent&&S.off("stagemousedown",E.FOEvent),B&&(B.style.display="none")}),Object.defineProperty(this,"value",{get:function(){return B.value},set:function(e){B.value=e}}),Object.defineProperty(this,"text",{get:function(){return B.value},set:function(e){B.value=e}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==B},set:function(e){E.setFocus(e)}}),Object.defineProperty(this,"readOnly",{get:function(){return B.readOnly},set:function(e){B.readOnly=e}}),null!=WW.KEYFOCUS&&(Jo.KEYFOCUS=WW.KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return Jo.KEYFOCUS==E},set:function(){Jo.KEYFOCUS=E}}),Jo.KEYFOCUS||(E.keyFocus=!0),E.taMousedown=function(){E.keyFocus=!0},B.addEventListener("mousedown",E.taMousedown),v||(B.style.whiteSpace="pre"),!1!==T&&Jo.styleTransforms(this,P),this.clone=function(){var e=new Jo.TextArea(t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,this.group,A);return E.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return C},set:function(e){e!=C&&(C.off("update",E.updateEvent),C.off("resize",E.resizeEvent),C=e,E.resizeEvent=C.on("resize",E.resize),E.updateEvent=C.on("update",E.resize),D=C.retina&&WW.devicePixelRatio||1,S=C.stage,E.resize())}}),E._enabled=!0;var _=E.readOnly;Object.defineProperty(E,"enabled",{get:function(){return zog("here"),E._enabled},set:function(e){e?(E.tag.style.pointerEvents="unset",E.readOnly=_):(_=E.readOnly,E.readOnly=!1,E.focus=!1,E.tag.style.pointerEvents="none",setTimeout(function(){E.readOnly=!0},50)),zt(E,e)}}),this.resizeEvent=C.on("resize",E.resize),this.updateEvent=C.on("update",E.resize),this.dispose=function(e,t,o){var n;return E.stage&&(n=E.stage),C.off("update",E.updateEvent),C.off("resize",E.resizeEvent),n&&E.FOEvent&&n.off("stagemousedown",E.FOEvent),B&&B.parentNode&&B.parentNode.removeChild(B),B.removeEventListener("input",E.taInput),B.removeEventListener("focus",E.taFocus),B.removeEventListener("blur",E.taBlur),B.removeEventListener("mousedown",E.taMousedown),B=null,o||(this.zimContainer_dispose(!0),n&&n.update()),!(E.background=null)}},Jo.extend(Jo.TextArea,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.addTo=function(e,t,o,n){var r,i;if(r=zob(Jo.addTo,arguments,"obj, container, index, still"))return r;if(z_d("47.5"),!zot(e)){if(zot(t)){if(!WW.zdf)return void zogy("zim methods - addTo(): please provide container");t=WW.zdf.stage}return zot(n)&&(n=!0),e.parent||(n=!1),n&&(i=e.parent.localToLocal(e.x,e.y,t)),zot(o)||isNaN(o)?t.addChild(e):t.addChildAt(e,o),n&&(e.x=i.x,e.y=i.y),e}zogy("zim methods - addTo(): please provide object")},Jo.removeFrom=function(e,t){if(z_d("47.6"),!zot(e))return e.removePhysics&&e.removePhysics(),zot(t)?e.parent&&e.parent.removeChild(e):t.removeChild(e),e;zogy("zim methods - removeFrom(): please provide object")},Jo.added=function(e,t,o,n){if(z_d("47.7"),!zot(e)&&!zot(t)&&"function"==typeof t){var r=$o(o);if(zot(o)&&(o="s"==r?.1:100),!e.stage){var i,o=o*("s"==r?1e3:1);n&&(en(n),i=n*("s"==r?1e3:1));var l=Date.now(),a=0,s=setInterval(function(){5<a?clearInterval(s):(a++,e.stage&&(t(e.stage,e),clearInterval(s),clearInterval(c)))},10),c=setInterval(function(){0<i&&l-Date.now()>i&&clearInterval(c),e.stage&&(t(e.stage,e),clearInterval(c))},o);return c}t(e.stage,e)}},Jo.centerReg=function(e,t,o,n){if(r=zob(Jo.centerReg,arguments,"obj, container, index, add"))return r;if("AC"==e.type&&WW.zdf)return WW.zdf.ac("centerReg",arguments),e.addTo(t,o);if(z_d("48"),zot(e)||!e.getBounds||!e.getBounds())return zogy("zim methods - centerReg(): please provide object with bounds set"),e;zot(n)&&(n=!0),zot(t)&&e.parent&&n&&(t=e.parent,zot(o)&&(o=e.parent.getChildIndex(e)),e.parent.removeChild(e)),zot(t)||t!=e.parent||(zot(o)&&(o=e.parent.getChildIndex(e)),e.parent.removeChild(e));var r=e.getBounds();return e.regX=r.x+r.width/2,e.regY=r.y+r.height/2,n?Jo.center(e,t,o):e},Jo.center=function(e,t,o,n){if(s=zob(Jo.center,arguments,"obj, container, index, add"))return s;if("AC"==e.type&&WW.zdf)return WW.zdf.ac("center",arguments),e.addTo(t,o);if(Jo.centerCheck||(z_d("48.1"),Jo.centerCheck=!0),zot(e)||!e.getBounds)return zogy("zim.center(): please provide object with bounds"),e;if(zot(t)&&(e.parent?t=e.parent:WW.zdf&&(t=WW.zdf.stage)),zot(t)||!t.getBounds)return zogy("zim.center(): please provide container with bounds"),e;var r=e.getBounds(),i=t.getBounds();zot(n)&&(n=!0);var l=!1;if(zot(i)&&(t.setBounds(0,0),i=t.getBounds(),l=!0),n&&t.addChild&&(zot(o)||"number"==typeof o&&isNaN(o)?e.parent&&e.parent==t||t.addChild(e):t.addChildAt(e,o)),zot(r))return e.x=i.x+i.width/2,e.y=i.y+i.height/2,e;var a=!1,s=!1;0==t.scaleX&&(a=!0,t.scaleX=1e-5),0==t.scaleY&&(s=!0,t.scaleY=1e-5);o=e.localToLocal(e.regX,e.regY,t),r=Jo.boundsToGlobal(e),r=Jo.boundsToGlobal(t,r,!0);return a&&(t.scaleX=0),s&&(t.scaleY=0),e.x=i.x+i.width/2-r.width/2+(o.x-r.x),e.y=i.y+i.height/2-r.height/2+(o.y-r.y),!n&&t.getStage&&t.stage&&e.parent&&(n=t.localToLocal(e.x,e.y,e.parent),e.x=n.x,e.y=n.y),l&&t.setBounds(null),e},Jo.place=function(o,e){if(z_d("49"),!zot(o)){zot(e)&&(e="obj"),Jo.lastPlace=o,Jo.drag({obj:o,currentTarget:!0,dragCursor:"crosshair"}),o.on("mousedown",function(){Jo.lastPlace=o});var t=WW.zdf;return t&&t.on("keydown",function(e){var t;o!=Jo.lastPlace||37<=(t=e.keyCode)&&t<=40&&(e=e.shiftKey?10:1,o.mov(37==t?-1*e:39==t?e:0,38==t?-1*e:40==t?e:0),n(),o.stage&&o.stage.update())}),zogy("place "+e+" - to get new position ("+o.type+")"),o.on("click",n),o}function n(){zogy(e+".x = "+Math.round(o.x)+"; "+e+".y = "+Math.round(o.y)+";"),zogy(e+".loc("+Math.round(o.x)+", "+Math.round(o.y)+");")}},Jo.placeReg=function(t,o){if(z_d("49.5"),!zot(t)){var e=t.stage;if(zot(e))return zogy("zim.placeReg() - add object to stage before calling placeReg()"),t;zot(o)&&(o="obj");var n=t.parent.localToGlobal(t.x,t.y),r=new Jo.Shape(-25,-25,50,50,null,!1).addTo(e).pos({x:n.x,y:n.y,reg:!0});return r.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),r.compositeOperation="difference",r.expand(0),Jo.drag({obj:r}),zogy("place cursor to get new registration point location"),e.on("stagemouseup",function(){var e=t.globalToLocal(r.x,r.y);zogy(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zogy(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")}),t}},Jo.pos=function(h,e,t,o,n,r,i,l,a,s,c){if(g=zob(Jo.pos,arguments,"obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY"))return g;if("AC"==h.type&&WW.zdf)return WW.zdf.ac("pos",arguments),h.addTo(r,i);z_d("41.5"),WW.DIR&&"rtl"==WW.DIR||!WW.DIR&&"rtl"==Jo.DIR?"start"==o?o="right":"end"==o&&(o="left"):"start"==o?o="left":"end"==o&&(o="right");var u=!1;"right"==o&&(u=!0);var d=!1;"bottom"==n&&(d=!0);var p=Jo.POSREG;if(null!=WW.POSREG&&(p=WW.POSREG),zot(a)&&(a=p),!zot(h)){zot(a)&&zot(s)&&(s=!1),zot(a)&&zot(c)&&(c=!1),!zot(a)&&zot(s)&&(s=a),!zot(a)&&zot(c)&&(c=a),zot(l)&&(l=!0),zot(r)||r.addChild||(r=null),h.getBounds||h.getBounds()||(s=c=!1),h.zimPos={x:e,y:t,h:o,v:n,i:i},zot(r)&&(h.parent?r=h.parent:WW.zdf&&(r=WW.zdf.stage)),!h.parent&&zot(e)&&(e=0),!h.parent&&zot(t)&&(t=0);var g=!1;h.getBounds()||(h.setBounds(0,0),g=!0);var f,p=!1;if(r&&!r.getBounds()&&(r.setBounds(0,0),p=!0),!zot(r)&&r.addChild&&l&&(f=r.getBounds().clone(),z(),a=r.getBounds(),f.width==a.width&&f.height==a.height&&f.x==a.x&&f.y==a.y||(h.removeFrom(),r.setBounds(f.x,f.y,f.width,f.height),p=!0,z())),!s&&!c&&!("center"!=o&&"middle"!=o||"center"!=n&&"middle"!=n))return h.center({container:r}),h.mov(e,t),g&&h.setBounds(null),p&&r.setBounds(null),h;if("center"==o||"middle"==o?(s?h.x=r.width/2:(f=h.y,h.center(),h.y=f),h.mov(e),o=e=null):!0===o&&(u=!0),"center"==n||"middle"==n?(c?h.y=r.height/2:(m=h.x,h.center(),h.x=m),h.mov(0,t),n=t=null):!0===n&&(d=!0),h.parent&&h.parent.getBounds){if(r=h.parent,zot(e)&&1==u&&(e=0),zot(t)&&1==d&&(t=0),zot(e)||(h.x=e),zot(t)||(h.y=t),zot(e)&&zot(t)&&!u&&!d)return g&&h.setBounds(null),p&&r.setBounds(null),h;var o=0,m=0;h.getBounds()&&(n=function(){var e=h.getBounds(),t=e.x,o=e.y,n=e.width,r=e.height,i=h._props.matrix,i=h.getMatrix(i);(t||o)&&i.appendTransform(0,0,1,1,0,0,0,-t,-o);var l=n*i.a,a=n*i.b,s=r*i.c,c=r*i.d,u=i.tx,d=i.ty,n=u,i=d;return(t=l+u)<(e=u)?e=t:n<t&&(n=t),(t=l+s+u)<e?e=t:n<t&&(n=t),(t=s+u)<e?e=t:n<t&&(n=t),(o=a+d)<(r=d)?r=o:i<o&&(i=o),(o=a+c+d)<r?r=o:i<o&&(i=o),(o=c+d)<r?r=o:i<o&&(i=o),{x:e,y:r,width:n-e,height:i-r}}(),zot(e)||(o=(u?new Jo.Point(n.x+n.width,n.y+n.height):new Jo.Point(n.x,n.y)).x-e),zot(t)||(m=(d?new Jo.Point(n.x+n.width,n.y+n.height):new Jo.Point(n.x,n.y)).y-t),n=r.getBounds(),zot(e)||(u?h.x=s?n.width+n.x-e:n.width+n.x-e-o:(h.x=s?e:e-o,h.x+=n.x)),zot(t)||(d?h.y=c?n.height+n.y-t:n.height+n.y-t-m:(h.y=c?t:t-m,h.y+=n.y)))}return g&&h.setBounds(null),p&&r.setBounds(null),l||h.removeFrom(),h}function z(){zot(i)||"number"==typeof i&&isNaN(i)?r.contains(h)||r.addChild(h):r.addChildAt(h,i)}},Jo.loc=function(e,t,o,n,r,i,l,a){var s;return(s=zob(Jo.loc,arguments,"obj, target, y, container, index, add, localToLocal, x"))?s:"AC"==e.type&&WW.zdf?(WW.zdf.ac("loc",arguments),e.addTo(n,r)):(z_d("41.55"),zot(e)?void 0:("number"==typeof t&&(a=t,t=null),zot(t)||(Array.isArray(t)?(a=t[0],o=t[1]):(zot(t.x)||(a=t.x),zot(t.y)||(o=t.y))),zot(a)&&zot(t)&&(a=e.x),zot(o)&&zot(t)&&(o=e.y),zot(i)&&(i=!0),zot(n)&&(e.parent?n=e.parent:WW.zdf&&(n=WW.zdf.stage)),i&&n&&(e.parent&&n==e.parent?zot(r)||n.addChildAt(e,r):zot(r)||isNaN(r)?n.addChild(e):n.addChildAt(e,r)),zot(l)&&(l=!0),t&&t.parent&&e.parent&&l&&(a=(t=t.parent.localToLocal(a,o,e.parent)).x,o=t.y),e.x=a,e.y=o,e))},Jo.mov=function(e,t,o){var n;return(n=zob(Jo.mov,arguments,"obj, x, y"))?n:"AC"==e.type&&WW.zdf?(WW.zdf.ac("mov",arguments),e):(z_d("41.6"),zot(e)?void 0:(zot(t)||(e.x+=t),zot(o)||(e.y+=o),e))},Jo.sca=function(e,t,o){return"AC"==e.type&&WW.zdf?(WW.zdf.ac("sca",arguments),e):(z_d("41.97"),zot(e)||zot(e.scaleX)||(zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o),e)},Jo.alp=function(e,t){if(z_d("41.7"),!zot(e))return zot(t)||(e.alpha=e.hovOriginal=t,e.tag&&e.tag.style&&("Loader"!=e.type&&(e.tag.style.opacity=t),e.tag.style.display=e.tag.zimDisplay=0==t?"none":"inline-block")),e},Jo.vis=function(e,t){if(z_d("41.71"),!zot(e))return e.visible=t,e.tag&&e.tag.style&&(e.tag.style.display=e.tag.zimDisplay=t?"inline-block":"none"),e},Jo.ble=function(e,t){if(z_d("41.72"),!zot(e))return zot(t)&&(t="difference"),e.compositeOperation=t,"Blob"!=e.type&&"Squiggle"!=e.type||e.update(),e},Jo.dye=function(e,t){if(z_d("41.73"),!zot(e))return e.hasOwnProperty("backgroundColor")?e.backgroundColor=t:e.hasOwnProperty("color")&&(e.color=t),e},Jo.hov=function(e,t,o){if(z_d("41.75"),!zot(e))return zot(t)&&(t=1),zot(o)&&(o="number"==typeof t?"alpha":"color"),e.hovMouseover&&(e.off("mouseover",e.hovMouseover),e.off("mouseout",e.hovMouseout)),-1==t?(e.cur("default"),zot(e.hovOld)||(e[e.hovType]=e.hovOld),e.hovOld=null,e.stage&&e.stage.update()):(e.cur(),e.hovOld=e[o],e.hovNew=t,e.hovType=o,e.hovMouseover=e.on("mouseover",function(){e[o]=e.hovNew,e.stage&&e.stage.update()}),e.hovMouseout=e.on("mouseout",function(){e[o]=e.hovOld,e.stage&&e.stage.update()})),e},Jo.rot=function(e,t,o,n){var r,i;if(z_d("41.8"),!zot(e))return"AC"==e.type&&WW.zdf?WW.zdf.ac("rot",arguments):zot(t)||(!e.parent||zot(o)&&zot(n)?e.rotation=t:(zot(o)&&(o=e.x),zot(n)&&(n=e.y),r=e.parent.localToLocal(o,n,e),i=new Jo.Point(e.x,e.y),e.reg(r.x,r.y),e.rotation=t,e.x=o,e.y=n,n=e.parent.localToLocal(i.x,i.y,e),e.reg(n.x,n.y),e.x=i.x,e.y=i.y)),e},Jo.siz=function(e,t,o,n){if(z_d("41.85"),!zot(e))return"AC"==e.type&&WW.zdf?WW.zdf.ac("siz",arguments):(zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o)),e},Jo.ske=function(e,t,o){if(z_d("41.9"),!zot(e))return"AC"==e.type&&WW.zdf?WW.zdf.ac("ske",arguments):(zot(t)||(e.skewX=t),zot(o)||(e.skewY=o)),e},Jo.reg=function(e,t,o,n){if(z_d("41.95"),!zot(e)){if("AC"==e.type&&WW.zdf)return WW.zdf.ac("reg",arguments),e;var r,i=e.regX,l=e.regY,a=t,s=WW.DIR||Jo.DIR||"ltr";return"default"==t&&(t=null),"string"==typeof t&&((r=e.getBounds())?("start"==t&&(t="ltr"==s?"left":"right"),"end"==t&&(t="ltr"==s?"right":"left"),"left"==t?t=r.x:"right"==t?t=r.x+r.width:"center"!=t&&"middle"!=t||(t=r.x+r.width/2)):t=null),"string"==typeof o?(r=r||e.getBounds())?"top"==o?o=r.y:"bottom"==o?o=r.y+r.height:"center"!=o&&"middle"!=o||(o=r.y+r.height/2):o=null:!zot(o)||"center"!=a&&"middle"!=a||(o=(r=r||e.getBounds())?r.y+r.height/2:null),"default"==o&&(o=null),zot(t)||(e.regX=t),zot(o)||(e.regY=o),n&&e.parent&&(l=e.localToLocal(i,l,e.parent),e.x-=l.x-e.x,e.y-=l.y-e.y),e}},Jo.top=function(e){return z_d("41.62"),zot(e)||!e.parent||e.parent.setChildIndex(e,e.parent.numChildren-1),e},Jo.bot=function(e){return z_d("41.63"),zot(e)||!e.parent||e.parent.setChildIndex(e,0),e},Jo.ord=function(e,t){if(z_d("41.64"),!zot(e)&&e.parent)return zot(t)&&(t=0),e.parent.setChildIndex(e,Jo.constrain(e.parent.getChildIndex(e)+t,0,e.parent.numChildren-1)),e},Jo.cur=function(e,t){if(z_d("41.1"),zot(e))return zogy("zim methods - cur(): please provide object"),e;zot(t)&&(t="pointer");var o=WW.zdf;return e.stage&&(o=e.stage.frame),o.cursors&&o.cursors[t]?(e.cursor="none",e._cursor=t,o.cursorList.add(e,t)):(o.cursorList&&o.cursorList.add(e,!0),e.cursor=t),e},Jo.sha=function(e,t,o,n,r){return z_d("41.2"),zot(e)?(zogy("zim methods - sha(): please provide object"),e):(zot(t)&&(t="rgba(0,0,0,.3)"),t.blur?e.shadow=t:(zot(o)&&(o=e.width?.08*e.width:5),zot(n)&&(n=e.height?.08*e.height:5),zot(r)&&(r=e.width?.16*e.width:10),e.shadow=-1==t?null:new createjs.Shadow(t,o,n,r)),e)},Jo.dep=function(e,t){if(z_d("41.65"),!zot(e))return zot(t)&&(t=0),e.depth=t,e},Jo.nam=function(e,t){if(z_d("41.67"),!zot(e)&&!zot(t))return e.name=t,Jo.zimObjectIDs[t]=e},Jo.movement=function(e,t,o){z_d("47.75");var n=e.stage||WW.zdf.stage;function r(){n=e.stage,e.zimMovementStage=n,e.zimMovementEvent&&n.off("stagemousemove",e.zimMovementEvent),e.zimMovementEvent=n.on("stagemousemove",function(e){t(e)}),e.on("mouseout",function(){e.zimMovementEvent&&n.off("stagemousemove",e.zimMovementEvent)},null,!0)}return Jo.mobile()?(e.zimMovementEvent&&n.off("pressmove",e.zimMovementEvent),e.zimMovementEvent=e.on("pressmove",function(e){t(e)})):(e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMouseoverEvent=e.on("mouseover",r),o&&r()),e},Jo.noMovement=function(e){if(z_d("47.9"),!zot(e))return e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMovementEvent&&e.zimMovementStage&&e.zimMovementStage.off("stagemousemove",e.zimMovementEvent),e},Jo.tap=function(l,a,s,c,u,e,d,h,p,g,t,r){var o;if(o=zob(Jo.tap,arguments,"obj, call, distance, time, once, dbl, dblTime, call2, call3, call4, cursor, mobileUp"))return o;if(z_d("47.8"),!zot(l)&&!zot(a)&&"function"==typeof a){zot(s)&&(s=e?10:5);var f=$o(c);zot(c)&&(c="s"==f?8:8e3),zot(u)&&(u=!1),zot(e)&&(e=!1),zot(d)&&(d=g?"s"==f?.5:500:"s"==f?1:1e3),zot(t)&&(t="pointer"),!1!==t&&l.cur(t);var m,z=!1,y=!1;return e?l.zimDblClickDownEvent=l.on("mousedown",function(e){if(m=!1,z)z=!1;else{if(z=!0,"List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY).y<=0)return}var t,o,n=e.stageX/Jo.scaX,r=e.stageY/Jo.scaY,i=Date.now();y=!0,l.zimDoubleTimeout&&clearTimeout(l.zimDoubleTimeout),l.zimDoubleTimeout=setTimeout(function(){z=y=!1,l.zimDblClickUpEvent&&l.off("pressup",l.zimDblClickUpEvent),m&&g&&(Math.abs(n+r-t/Jo.scaX-o/Jo.scaY)<s?l.excludeTap||g(e):h&&h(e))},"s"==f?1e3*d:d),l.zimDblClickUpEvent=l.on("pressup",function(e){if(t=e.stageX,o=e.stageY,m=!0,z)p&&p(e);else if(y){if(Math.abs(n+r-e.stageX/Jo.scaX-e.stageY/Jo.scaY)<s&&Date.now()-i<("s"==f?1e3*c:c)){if(l.excludeTap)return;clearTimeout(l.zimDoubleTimeout),a(e),u&&(l.off("mousedown",l.zimDblClickDownEvent),l.zimDblClickDownEvent=null,l.cursor&&l.cur("default"))}else h&&h(e);e.remove()}})}}):l.zimClickDownEvent=l.on("mousedown",function(e){if("List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY).y<=0)return}var t,o,n;M&&!r&&"List"!=e.currentTarget.type?l.excludeTap||(a(e),u&&(l.off("mousedown",l.zimClickDownEvent),l.zimClickDownEvent=null,l.cursor&&l.cur("default"))):(t=e.stageX/Jo.scaX,o=e.stageY/Jo.scaY,n=Date.now(),l.zimClickUpEvent=l.on("pressup",function(e){if(Math.abs(t-e.stageX/Jo.scaX)<s&&Math.abs(o-e.stageY/Jo.scaY)<s&&Date.now()-n<("s"==f?1e3*c:c)){if(l.excludeTap)return;a(e),u&&(l.off("mousedown",l.zimClickDownEvent),l.zimClickDownEvent=null,l.cursor&&l.cur("default"))}else h&&h(e);e.remove()}))}),l}},Jo.noTap=function(e){if(z_d("47.9"),!zot(e))return e.cursor&&e.cur("default"),e.zimClickDownEvent&&e.off("mousedown",e.zimClickDownEvent),e.zimDblClickDownEvent&&e.off("mousedown",e.zimDblClickDownEvent),e.zimClickUpEvent&&e.off("pressup",e.zimClickUpEvent),e.zimDoubleTimeout&&clearInterval(e.zimDoubleTimeout),e},Jo.hold=function(r,i,l,a,e){if(z_d("47.87"),!zot(r)&&!zot(i)&&"function"==typeof i){zot(l)&&(l=5);var s,c=$o(a);return zot(a)&&(a="s"==c?1.5:1500),zot(e)&&(e=!1),r.cur("pointer"),r.zimClickHoldDownEvent=r.on("mousedown",function(e){if(s=s||e.target.stage){if(zot(s.frame)&&(s.frame=WW.zdf),!zot(s.frame)&&s.frame.mousemoveEvent||(zot(s.frame)&&(s.frame={}),s.frame.mouseX=e.stageX/Jo.scaX,s.frame.mouseY=e.stageY/Jo.scaY,s.frame.mouseholdEvent&&s.off("stagemousemove",s.frame.mouseholdEvent),s.frame.mouseholdEvent=s.on("stagemousemove",function(e){s.frame.mouseX=e.stageX/Jo.scaX,s.frame.mouseY=e.stageY/Jo.scaY})),"List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY).y<=0)return}var t=e.stageX/Jo.scaX,o=e.stageY/Jo.scaY;clearInterval(r.zimHoldInterval);var n=0;r.zimHoldInterval=setInterval(function(){if(n<10)Math.abs(t+o-s.frame.mouseX-s.frame.mouseY)>l&&clearInterval(r.zimHoldInterval);else{if(Math.abs(t+o-s.frame.mouseX-s.frame.mouseY)<l){if(r.excludeHold)return;i(e)}clearInterval(r.zimHoldInterval)}n++},a/10*("s"==c?1e3:1)),r.zimClickHoldUpEvent=r.on("pressup",function(){clearInterval(r.zimHoldInterval),s&&s.frame.mouseholdEvent&&s.off("stagemousemove",s.frame.mouseholdEvent)},null,!0)}},null,e),r}},Jo.noHold=function(e){if(z_d("47.88"),!zot(e))return e.cursor&&e.cur("default"),e.off("mousedown",e.zimClickHoldDownEvent),e.off("pressup",e.zimClickHoldUpEvent),e.stage&&e.stage.frame.mouseEvent&&e.stage.off("stagemousemove",e.stage.frame.mouseEvent),clearInterval(e.zimHoldTimeout),e},Jo.change=function(e,t,o){if(z_d("47.85"),!zot(e)&&!zot(t)&&"function"==typeof t)return zot(o)&&(o=!1),e.zimChangeEvent=e.on("change",function(e){t(e)},null,o),e},Jo.noChange=function(e){if(z_d("47.95"),!zot(e))return e.off("mousedown",e.zimChangeEvent),e},Jo.drag=function(a,n,s,l,i,e,t,c,u,d,h,p,g,r,f,m,z,o,y,b,v,w,C,x,k,T,A,P,E,S,B,W){if(I=zob(Jo.drag,arguments,"obj, boundary, axis, overCursor, dragCursor, all, swipe, localBoundary, onTop, surround, slide, slideFactor, slideSnap, slideSnapDamp, reg, removeTweens, startBounds, rect, currentTarget, offStage, immediateBoundary, singleTouch, dropTargets, dropCopy, dropSnap, dropBack, dropEnd, dropFull, dropHitTest, dropScale, dropWidth, dropHeight"))return I;if("AC"==a.type&&WW.zdf)return WW.zdf.ac("drag",arguments),a;if(z_d("31"),!zot(a)&&a.on){var I=Jo.DRAGALL;if(null!=WW.DRAGALL&&(I=WW.DRAGALL),zot(e)&&zot(y)&&(e=I),zot(e)&&zot(y)?y=!1:zot(e)?zot(y)&&(y=!1):y=e,"Tag"!=a.type&&"TextArea"!=a.type&&"Loader"!=a.type||(y=!0),n&&n.getBounds&&("Container"==a.type||"Tile"==a.type)&&1==a.mouseChildren&&!e){var M=Array.prototype.slice.call(arguments);return M[4]=!0,setTimeout(function(){a.loop(function(e){M[0]=e,Jo.drag.apply(null,M)})},v?0:50),a}(zot(s)||"all"==s||"horizontal"!=s&&"vertical"!=s)&&(s="both"),a.zimDown&&a.noDrag(),a.cur?a.cur(zot(l)?"pointer":l):a.cursor=zot(l)?"pointer":l,zot(t)&&(t=!1),zot(c)&&(c=!1),zot(u)&&(u=!0),zot(d)&&(d=!1),zot(h)&&(h=!1),zot(p)&&(p=.9),zot(g)&&(g=!0);!0!==g&&["horizontal","vertical","auto"].indexOf(g)<0&&(g=!1),"auto"==g&&(g=!0),zot(r)&&(r=.1),zot(f)&&(f=!1),zot(m)&&(m=!0),zot(z)&&(z=!0),zot(n)&&!zot(o)&&(n=o),zot(w)&&(w=!1),C&&(h=!1,a.dropTargets=C),zot(T)&&(T=!0),zot(k)&&(k=!0),zot(A)&&(A=!0),zot(P)&&(P=!0);var O,j,L,D,_,R,Y,X,N,F,H,V,G,U,q,Q,Z,K,J,$,ee,te,oe,ne;E&&E.toLowerCase(),["reg","circles","rect","circle"].includes(E)||(E=null),zot(E)&&(E="bounds"),a.dragPaused=!1,h?(Z=WW.M?20:10,oe=te=!1,ne=50):a.zimDragTicker=function(){},a._draggable=!0,Jo.setSwipe(a,t),a.zimBoundary=n,a.zimlocalBoundary=c,a.circleBounds=!(!n||"Circle"!=n.type)&&n.radius;var re,ie,le,ae,se,ce,ue,de=a.downCheck=!1;a.zimAdded=a.on("added",ge,null,!0),a.zimRemoved=a.on("removed",function(){a.zimDragTicker&&Jo.Ticker.remove(a.zimDragTicker)},null,!0),a.parent&&ge();var he,pe=!(a.pointers={});return a.zimDown=a.on("mousedown",function(e){if(a.stage&&!a.dragPaused){if(w&&pe)return e.preventDefault(),void e.stopImmediatePropagation();he=!(pe=!0),ue=a.stage,a.zmu||(a.zmu=ue.frame.on("mouseupplus",function(e){a.downCheck&&(h||(a.downCheck=!1),me(e,!0))})),a.dragMouseX=Math.round(e.stageX/Jo.scaX)+ue.x,a.dragMouseY=Math.round(e.stageY/Jo.scaY)+ue.y;var t,o="id"+Math.abs(e.pointerID+1);if(a.pointers[o]=!0,(ce=y?e.currentTarget:e.target).dragStartX=ce.x,ce.dragStartY=ce.y,!a.zimBoundary||ce.getBounds()){if(a.downCheck=!0,a.stage.mouseMoveOutside=!0,Jo.Ticker.has(a.zimDragTicker)||Jo.Ticker.add(a.zimDragTicker,a.stage),m&&a.zimTweens)for(var n in a.zimTweens){var r=a.zimTweens[n];!r.zimObj||null==r.zimObj.x&&null==r.zimObj.y||a.stopAnimate(n)}ce.parent&&(u&&(o=ce.parent.numChildren-1,"Keyboard"==ce.parent.getChildAt(o).type&&o--,ce.parent.setChildIndex(ce,o),ce.ZIMoutlineShape&&ce.outline()),se=ce.parent==a.stage?new Jo.Point(e.stageX/Jo.scaX,e.stageY/Jo.scaY):ce.parent.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY),f&&(ce.x=se.x,ce.y=se.y),re=se.x-ce.x,ie=se.y-ce.y,le=null,a.zimBoundary&&(c?(le=Jo.boundsToGlobal(ce.parent,a.zimBoundary),d&&(ae=a.zimBoundary)):(le=a.zimBoundary,d&&(ae=Jo.boundsToGlobal(ce.parent,a.zimBoundary,!0)))),a.cur?a.cur(zot(i)?"pointer":i):a.cursor=zot(i)?"pointer":i,h&&(a.slideStartX=a.x,a.slideStartY=a.y,Q=a.zimDragMoving,D=0,_=[se.x],R=[se.y],Y=[Date.now()],q=U=-1e4,a.zimDragMoving=!0),"Pen"==a.type&&(a.zimDragCheck=!0,de=!1),zot(ce.dropStartS)&&(ce.dropStartX=ce.x,ce.dropStartY=ce.y,ce.dropStartS=ce.scale),a.dropTargets&&x&&!ce.dropClone&&ce.clone&&(ce.dropCopy=ce.clone(!0).addTo(ce.parent,ce.parent.getChildIndex(ce)),ce.dropCopy.dropClone=!0,ce.dropCopy.dropStartX=ce.dropStartX,ce.dropCopy.dropStartY=ce.dropStartY,ce.dropCopy.dropStartS=ce.dropStartS,ce.dropCopy.noMouse()),a.dropTargets&&(t=!0,Jo.loop(a.dropTargets,function(e){"List"==e.type&&(a.dropListProps||(a.dropListProps={color:white,thickness:1,alpha:1,speed:5}),e.dropReticle||(e.dropReticle=new Jo.Rectangle(20,20,clear,a.dropListProps.color,a.dropListProps.thickness).reg(CENTER).rot(45).alp(a.dropListProps.alpha),e.dropReticleIndex=null,e.zgb=e.boundsToGlobal(),e.zgs=e.getConcatenatedDisplayProps().matrix.decompose().scaleX/ue.scaleX),t=!1)}),he=!t))}else zogy("zim.drag() - drag object needs bounds set")}},!0),a.zimMove=a.on("pressmove",function(e){if(w&&!a.pointers["id"+Math.abs(e.pointerID+1)])return e.preventDefault(),void e.stopImmediatePropagation();if(!a.downCheck||a.dragPaused)return e.preventDefault(),void e.stopImmediatePropagation();var t=(b?e.rawX:e.stageX)/Jo.scaX+ue.x,e=(b?e.rawY:e.stageY)/Jo.scaY+ue.y;a.dragMouseX=Math.round(t),a.dragMouseY=Math.round(e),fe(ce,t,e),ce.ZIMoutlineShape&&ce.outline(),"Pen"==a.type&&!de&&a.drawing?de=!0:"Tag"!=a.type&&"TextArea"!=a.type&&"Loader"!=a.type||a.resize(),he&&(e=a.dropListProps.speed,Jo.List.doDropOver(C,ce,void 0,e))},!0),a.zimPosition=fe,a.zimUp=a.on("pressup",function(e){me(e)},!0),a.zimCheckBounds=ze,a}function ge(){var e,t,o;a.off("added",a.zimAdded),(n=a.zimBoundary)&&n.getBounds&&"Blob"!=n.type&&(a.zimlocalBoundary=!1,n="Stage"!=n.type&&"StageGL"!=n.type?n.boundsToGlobal():new Jo.Boundary(0,0,n.width,n.height),d||(e=a.boundsToGlobal(),se=a.localToGlobal(a.regX,a.regY),t=new Jo.Point(se.x-e.x,se.y-e.y),o=a.borderWidth||0,n.x+=t.x+o/2,n.y+=t.y+o/2,n.width-=e.width+o,n.height-=e.height+o),a.zimBoundary=n),ie=re=0,a.zimBoundary&&"Blob"!=a.zimBoundary.type&&(c?(le=Jo.boundsToGlobal(a.parent,a.zimBoundary),d&&(ae=a.zimBoundary)):(le=a.zimBoundary,d&&(ae=Jo.boundsToGlobal(a.parent,a.zimBoundary,!0)))),le&&z&&(se=a.parent.localToGlobal(a.x,a.y),fe(a,se.x,se.y)),h&&setTimeout(function(){h&&g&&(O=new Jo.Damp(null,r),j=new Jo.Damp(null,r)),a.zimDragImmediate=function(e,t){K=J=0,$=ee=0,X=H=N=V=F=G=0,h&&g&&(zot(e)||O.immediate(e),zot(t)||j.immediate(t))},L=3,D=0,_=[],R=[],Y=[],X=a.x,N=a.y,a.x,a.y,H=a.x,V=a.y,G=Date.now(),q=U=-1e4,a.zimDragMoving=!0,a.zimDragTicker=function(){var e,t,o,n,r;zot(a.slideStartX)||(ce=ce||a,a.downCheck?(t=ce.parent?ce.parent.globalToLocal(a.dragMouseX,a.dragMouseY):new Jo.Point(0,0),D++,_.push(t.x),R.push(t.y),Y.push(Date.now()),G=L<=D?(H=_.shift(),V=R.shift(),Y.shift()):(H=_[0],V=R[0],Y[0])):a.zimDragMoving&&($=K,ee=J,s==BOTH?(n=ce.x+$,r=ce.y+ee):"horizontal"==s?(n=ce.x+$,r=ce.y):"vertical"==s&&(n=ce.x,r=ce.y+ee),K=$*p,J=ee*p,le&&(o=ze(ce,n,r),!0!==g&&"horizontal"!=g||(Math.round(n)!=Math.round(o.x)&&(te||(O.immediate(n),te=!0),K=0,n=O.convert(o.x)),"horizontal"==g&&(r=o.y)),!0!==g&&"vertical"!=g||(Math.round(r)!=Math.round(o.y)&&(oe||(oe=!0,j.immediate(r),J=0),r=j.convert(o.y)),"vertical"==g&&(n=o.x)),g||(n=o.x,r=o.y)),ce.x=n,ce.y=r,t=(e=ce).x,o=ce.y,n=n,r=r,Math.abs(e.x-U)<.1&&Math.abs(e.y-q)<.1?(a.zimDragMoving=!1,e.x=n,e.y=r,e.slideStartX=null,e.slideStartY=null,Q&&(e.dispatchEvent("slidestop"),Jo.Ticker.remove(a.zimDragTicker)),"Pen"==a.type&&(a.zimDragCheck=!1,de&&a.drawing&&a.stopCheck())):(U=t,q=o)))}},50),zot(a.zimMaskDynamic)||a.zimMaskApply()}function fe(e,t,o){var n,r,i=re,l=ie;zot(e)&&(e=ce||a),e.parent&&((zot(t)||zot(o))&&(n=e.parent.localToGlobal(e.x,e.y),re=ie=0,a.zimBoundary&&(c?(le=Jo.boundsToGlobal(e.parent,a.zimBoundary),d&&(ae=e.zimBoundary)):(le=a.zimBoundary,d&&(ae=Jo.boundsToGlobal(e.parent,a.zimBoundary,!0)))),t=n.x,o=n.y,h&&(e.x,e.y,ce=e)),n=ue&&ue.type?e.parent.globalToLocal(t,o):e.parent.globalToLocal(t*Jo.scaX,o*Jo.scaY),t="both"==s||"horizontal"==s,o="both"==s||"vertical"==s,h&&g?"vertical"==g?(r=ze(e,n.x-re,n.y-ie),t&&(e.x=r.x),o&&(e.y=n.y-ie)):"horizontal"==g?(r=ze(e,n.x-re,n.y-ie),t&&(e.x=n.x-re),o&&(e.y=r.y)):(t&&(e.x=n.x-re),o&&(e.y=n.y-ie)):(r=ze(e,n.x-re,n.y-ie),t&&(e.x=r.x),o&&(e.y=r.y)),!h||Q||e.slideStartX==e.x&&e.slideStartY==e.y||(Q=!0),e.downCheck&&(re=i,ie=l))}function me(e,t){if(w&&!t&&!a.pointers["id"+Math.abs(e.pointerID+1)])return e.preventDefault(),void e.stopImmediatePropagation();pe=!1;var o="id"+Math.abs((zot(e.pointerID)?0:e.pointerID)+1);if(delete a.pointers[o],!a.downCheck||a.dragPaused)return e.preventDefault(),void e.stopImmediatePropagation();if(a.cur?a.cur(zot(l)?"pointer":l):a.cursor=zot(l)?"pointer":l,null!=e.stageX){if(h){ce.dispatchEvent("slidestart"),se=ce.parent?(o=b?e.rawX:e.stageX,n=b?e.rawY:e.stageY,ce.parent.globalToLocal(o/Jo.scaX,n/Jo.scaY)):new Jo.Point(0,0),X=se.x,N=se.y,F=Date.now(),isNaN(X)&&(X=-1e3),isNaN(N)&&(N=-1e3),$=X-H,ee=N-V;var n=F-G;K=Jo.constrain($*Z/n,-ne,ne),J=Jo.constrain(ee*Z/n,-ne,ne),oe=te=!1,a.downCheck=!1,ce.x,ce.y,t&&(H=X=0,V=N=0,G=F=0),Math.abs(ce.x-ce.dragStartX)<1&&Math.abs(ce.y-ce.dragStartY)<1&&(Q=!1,ce.dispatchEvent("slidestop"),Jo.Ticker.remove(a.zimDragTicker))}else{a.downCheck=!1;var r,i=0;for(r in a.pointers)i++;0==i&&Jo.Ticker.remove(a.zimDragTicker),"Pen"==a.type&&(a.zimDragCheck=!1,de&&a.drawing&&a.stopCheck())}a.dropTargets&&(Array.isArray(a.dropTargets)||(a.dropTargets=[a.dropTargets]),ce.droppedTarget&&(ce.droppedTarget.dropFull=!1,ce.droppedTarget=null),Jo.loop(a.dropTargets,function(e){if("List"==e.type){if(e.scrollInt&&e.scrollInt.clear(),zot(e.dropReticleIndex))return;e.dropReticle.removeFrom();var t=ce;return x&&x&&ce.dropCopy&&(t=ce.dropCopy,swapProperties("x",ce,t),swapProperties("y",ce,t)),S&&t.sca(S),(B||W)&&t.siz(B,W),A?t.noMouse():t.mouse(),(t.droppedTarget=e).addAt(t,e.dropReticleIndex),(e.dropItem=ce).droppedTarget=e,((ce.dropTarget=e).dropList=e).dropNewIndex=e.dropReticleIndex,e.dropReticleIndex=null,!1}if(ce["hitTest"+String(E).charAt(0).toUpperCase()+String(E).slice(1)](e)&&(!P||!e.dropFull)){t=ce;return x&&ce.dropCopy&&(t=ce.dropCopy,swapProperties("x",ce,t),swapProperties("y",ce,t)),k&&t.loc(e),S&&t.sca(S),(B||W)&&t.siz(B,W),A?t.noMouse():t.mouse(),P&&(e.dropFull=!0),t.droppedTarget=e,t.dropTarget=e,!1}})&&(ce.dropTarget=ce.droppedTarget=null,T?ce.animate({props:{x:ce.dropStartX,y:ce.dropStartY,scale:ce.dropStartS},time:.2,timeUnit:"s",call:function(e){x&&(e.dropCopy||e).dispose()}}):(ce.sca(ce.dropStartS),x&&ce.dropCopy&&(swapProperties("x",ce,ce.dropCopy),swapProperties("y",ce,ce.dropCopy),ce.dropCopy.mouse())))),a.stage&&a.stage.update()}}function ze(e,t,o){if(!e.parent)return{x:t,y:o};if(le)if(d){var n=e.getBounds().width,r=e.getBounds().height,i=e.getBounds().x,l=e.getBounds().y;n<ae.width?t=ae.x+(ae.width-n)/2+(e.regX-i):(t-(e.regX-i)>ae.x&&(t=ae.x+(e.regX-i)),t-(e.regX-i)+n<ae.x+ae.width&&(t=ae.x+ae.width+(e.regX-i)-n)),e.height<ae.height?o=ae.y+(ae.height-r)/2+(e.regY-l):(o-(e.regY-l)>ae.y&&(o=ae.y+(e.regY-l)),o-(e.regY-l)+r<ae.y+ae.height&&(o=ae.y+ae.height+(e.regY-l)-r))}else{if("Blob"==le.type)return le.shape.hitTestPoint(t,o)?{x:t,y:o}:{x:a.x,y:a.y};se=e.parent.localToGlobal(t,o),o=a.circleBounds?(i=le.x+le.width/2,n=le.y+le.height/2,l=a.circleBounds,Jo.dist(i,n,se.x,se.y)<=l?(t=se.x,se.y):(r=Jo.angle(i,n,se.x,se.y)*Jo.RAD,t=i+l*Math.cos(r),n+l*Math.sin(r))):(t=Math.max(le.x,Math.min(le.x+le.width,se.x)),Math.max(le.y,Math.min(le.y+le.height,se.y))),t=(se=e.parent.globalToLocal(t,o)).x,o=se.y}return{x:t,y:o}}},Jo.noDrag=function(e,t,o){if(z_d("32"),!zot(e)&&e.on){if(zot(t)&&(t=!0),zot(o)&&(o=!0),t&&e.numChildren&&1<e.numChildren)for(var n=0;n<e.numChildren;n++)r(e.getChildAt(n));return r(e),e}function r(e){var t;e.cur&&e.cur("default"),e._draggable=!1,Jo.setSwipe(e,!0),e.off("added",e.zimAdded),e.off("removed",e.zimRemoved),e.off("mousedown",e.zimDown),e.off("pressmove",e.zimMove),e.off("pressup",e.zimUp),e.zmu&&(e.stage?e.stage.frame:WW.zdf).off("mouseupplus",e.zmu),Jo.Ticker&&(e.zimDragSlide&&Jo.Ticker.remove(e.zimDragSlide),e.zimDragTicker&&(Jo.Ticker.remove(e.zimDragTicker),o&&(t=e.zimCheckBounds(e,e.x,e.y),e.animate({x:t.x,y:t.y},.3)))),e.zimDragMoving=e.zimAdded=e.zimRemoved=e.zimDown=e.zimMove=e.zimUp=e.zimBoundary=e.zimDragSlide=null,e.slideStartX=e.slideStartY=e.zimDragImmediate=null,e.dragMouseX=e.zimPosition=e.dragMouseY=e.zimDown=e.zimUp=null,e.zimDragTicker=e.zimDragSlide=null}},Jo.dragBoundary=function(e,t){if(z_d("33"),!zot(e)&&e.on)return e.zimBoundary=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},Jo.dragRect=Jo.dragBoundary,Jo.mouse=function(e){return z_d("33.1"),e.zimLastMouse&&(e.mouseChildren=e.zimLastMouse),e.mouseEnabled=!0,e.zimLastMouseEnabled=!0,e},Jo.noMouse=function(e){return z_d("33.15"),e.zimLastMouse=e.mouseChildren,e.mouseChildren=!1,e.mouseEnabled=!1,e.zimLastMouseEnabled=!1,e},Jo.wire=function(e,t,o,n,r,i,l,a){if(s=zob(Jo.wire,arguments,"obj, target, prop, twoWay, setSource, filter, call, input"))return s;if(z_d("33.2"),zot(Jo.Ticker)&&zon)return zogy("wire() - requires ZIM Frame"),e;if(zot(t)&&zon)return zogy("wire() - requires a target"),e;var s=Jo.DEFAULTWIRE;return null!=WW.DEFAULTWIRE&&(s=WW.DEFAULTWIRE),zot(a)&&(a=s&&"value"!=s&&"index"!=s||s&&Object.prototype.hasOwnProperty.call(e,s)?s:Object.prototype.hasOwnProperty.call(e,"value")?"value":Object.prototype.hasOwnProperty.call(e,"index")?"index":o),zot(o)&&(o=a),e.addChild&&(e.zimWire=!0),t.addChild&&(t.zimWired=!0),Jo.Ticker.addWire(e,[t,o,n,r,i,l,a]),e},Jo.noWire=function(e,t,o,n){var r;return(r=zob(Jo.noWire,arguments,"obj, target, prop, input"))?r:(z_d("33.25"),zot(Jo.Ticker)&&zon?zogy("noWire() - requires ZIM Frame"):Jo.Ticker.removeWire(e,t,o,n),e)},Jo.wired=function(e,t,o,n,r,i,l,a){var s;return(s=zob(Jo.wired,arguments,"obj, source, prop, twoWay, setSource, filter, call, input"))?s:(z_d("33.3"),zot(Jo.Ticker)&&zon?zogy("wired() - requires ZIM Frame"):Jo.wire(t,e,o,n,r,i,l,a),e)},Jo.noWired=function(e,t,o,n){var r;return(r=zob(Jo.noWire,arguments,"obj, source, prop, input"))?r:(z_d("33.35"),zot(Jo.Ticker)&&zon?(zogy("noWired() - requires ZIM Frame"),e):(Jo.Ticker.removeWire(t,e,o,n),target))},Jo.bind=function(e,t,o,n,r,i){var l;return(l=zob(Jo.bind,arguments,"obj, id, props, extra, filter, bindObj"))?l:(z_d("33.17"),c?zot(t)?zon&&zogy("bind() - needs a unique id"):(i||c).add(t,e,o,n,r):zon&&zogy("bind() - needs a Bind() object created first"),e)},Jo.noBind=function(e,t,o,n,r){var i;return(i=zob(Jo.noBind,arguments,"obj, props, removeConnectionData, call, bindObj"))?i:(z_d("33.18"),c&&(r||c).remove(e,t,o,n),e)},Jo.transform=function(u,t,e,o,n,r,i,l,a,d,s,c,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j){var L;if(L=zob(Jo.transform,arguments,"obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden, frame, container, minScaleX, maxScaleX, minScaleY, maxScaleY, sliceX, sliceY"))return L;if("AC"==u.type&&WW.zdf)return WW.zdf.ac("transform",arguments),u;if(z_d("33.5"),zot(u)||!u.getBounds)return zogy("zim methods - transform(): please provide object with bounds set"),u;if(!u.getBounds())return zogy("zim methods - transform(): please setBounds() on object"),u;if(!u.parent)return zogy("zim methods - transform(): object should be on stage first"),u;zot(t)&&(t=!0),zot(e)&&(e=!0),zot(o)&&(o=!0),0==u.width&&(e=!1),0==u.height&&(o=!1),zot(n)&&(n=!0),zot(r)&&(r=!0),zot(i)&&(i=!0),zot(l)&&(l=!0),zot(a)&&(a=!0),zot(d)&&(d=!!D),zot(s)&&(s=!!D),zot(c)&&(c=!0),zot(h)&&(h=!0),zot(p)&&(p=!0),zot(g)&&(g="brown"),zot(f)&&(f=1),zot(k)&&(k=null),zot(T)&&(T=null),k<0||T<0?k=T=null:null!=k&&null==T&&(T=1),zot(A)&&(A=!0),zot(P)&&(P=!1),zot(E)&&(E=WW.zdf);var D=WW.M;zot(z)&&(z=!D),zot(y)&&(y=D?20:10),zot(b)&&(b=16),zot(v)&&(v=10),zot(w)&&(w=5),zot(C)&&(C=!0),zot(x)&&(x=!1),"Tag"!=u.type&&"TextArea"!=u.type&&"Loader"!=u.type||(x=!0),zot(B)&&(B=-Number.MAX_VALUE),zot(W)&&(W=Number.MAX_VALUE),zot(I)&&(I=-Number.MAX_VALUE),zot(M)&&(M=Number.MAX_VALUE),zot(O)&&(O=!0),zot(j)&&(j=!0),u.zimMCO=u.mouseChildren,u.mouseChildren=!1;var _=u.getConcatenatedMatrix().decompose(),R=u.stage||E.stage;zot(S)&&(S=R),zot(E.eventRemove)&&(R.enableMouseOver(),E.ctrlKey=!1,E.shiftKey=!1,WW.addEventListener("keydown",function(e){E.altKey=e.altKey,E.ctrlKey=e.ctrlKey}),WW.addEventListener("keyup",function(e){E.altKey=e.altKey,E.ctrlKey=e.ctrlKey}));var Y=u.getBounds(),X=new Jo.Shape({style:!1}),N=new Jo.Shape({style:!1}),F=new Jo.Shape({style:!1});N.mouseEnabled=!1,F.controlType="reg";var H,V,G,U,q,Q,Z,K,J,$=u.parent,ee=X.graphics,te=N.graphics,oe=F.graphics,ne=new Jo.Container({style:!1});ne.type="TransformControls";var re,ie,le,ae,se,ce,ue,de,he=new Jo.Container({style:!1}),pe=new Jo.Container({style:!1}),ge=new Jo.Container({style:!1}),fe=new Jo.Container({style:!1});function me(e,t){e==t&&new Jo.Triangle(16,12,12,"white",null,null,0).addTo(e).mov(0,-13.5),new Jo.Triangle(16,12,12,"white",null,null,0).addTo(e).mov(13.5).rot(90),e==t&&new Jo.Triangle(16,12,12,"white",null,null,0).addTo(e).mov(0,13.5).rot(180),new Jo.Triangle(16,12,12,"white",null,null,0).addTo(e).mov(-13.5).rot(-90),e==t&&new Jo.Triangle(10,7,7,"black",null,null,0).addTo(e).mov(0,-13),new Jo.Triangle(10,7,7,"black",null,null,0).addTo(e).mov(13).rot(90),e==t&&new Jo.Triangle(10,7,7,"black",null,null,0).addTo(e).mov(0,13).rot(180),new Jo.Triangle(10,7,7,"black",null,null,0).addTo(e).mov(-13).rot(-90),C&&e.cache(-20,-20,40,40)}function ze(){var e=u;for(le=ie=1,se=ae=re=0;e.parent;)re+=e.rotation,ie*=e.scaleX,le*=e.scaleY,ae+=e.skewX,se+=e.skewY,e=e.parent}zot(u.zimMaskDynamic)||u.zimMaskApply(),z&&(ce=new Jo.Container({style:!1}),ue=new Jo.Container({style:!1}),me(ce,ce),me(ue,ce),de={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}),ze();for(var ye,be=re,ve=["nw-resize","ne-resize","nw-resize","ne-resize"],we=[2,3,0,1],Ce=0;Ce<4;Ce++)c?((ye=new Jo.Rectangle(y,y,Jo.pink,Jo.grey,2,null,null,null,null,!1)).centerReg(he),C&&ye.cache(-1,-1,y+2,y+2)):((ye=new Jo.Rectangle(y,y,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,null,!1)).centerReg(he),ye.expand(0)),ye.rotation=re,Z=z?"none":ve[Ce],ye.drag({overCursor:Z,dragCursor:Z,onTop:!1}),ye.controlType="corner",ye.cu=ve[Ce];for(Ce=0;Ce<we.length;Ce++)he.getChildAt(Ce).op=he.getChildAt(we[Ce]);var xe=["n-resize","e-resize","n-resize","e-resize"],we=[1,1,0,0];for(Ce=0;Ce<4;Ce++){var ke=Ce%2==0?u.width/2:y,Te=Ce%2==0?y:u.height/2;d?((ye=new Jo.Rectangle(y,y,Jo.fog,Jo.dark,2,null,null,null,null,!1)).centerReg(Ce%2==0?ge:pe),C&&ye.cache(-1,-1,y+2,y+2)):((ye=new Jo.Rectangle(ke,Te,"rgba(0,0,0,0)",null,null,null,null,null,null,!1)).centerReg(Ce%2==0?ge:pe),ye.expand(0)),ye.rotation=re,Z=z?"none":xe[Ce],ye.drag({overCursor:Z,dragCursor:Z,onTop:!1}),ye.controlType="side",ye.cu=xe[Ce]}for(Ce=0;Ce<we.length;Ce++){var Ae=Ce%2==0?ge:pe;Ae.getChildAt(Math.floor(Ce/2)).op=Ae.getChildAt(we[Ce])}var Pe=["ne-resize","nw-resize","ne-resize","nw-resize"];for(Ce=0;Ce<4;Ce++)s?((ye=new Jo.Circle(y,Jo.pink,null,null,null,null,null,null,null,!1)).addTo(fe),C&&ye.cache(-y,-y,2*y,2*y)):((ye=new Jo.Circle(y,"rgba(0,0,0,0)",null,null,null,null,null,null,null,!1)).addTo(fe),ye.expand(0)),Z=z?"none":Pe[Ce],ye.drag({overCursor:Z,dragCursor:Z,onTop:!1}),ye.controlType="rotate",ye.cu=Pe[Ce];var Ee=1.8;function Se(){var e=y*Ee*Jo.sign(ie),t=y*Ee*Jo.sign(le);fe.getChildAt(0).reg(e,t),fe.getChildAt(1).reg(-e,t),fe.getChildAt(2).reg(-e,-t),fe.getChildAt(3).reg(e,-t),R.update()}function Be(){ee.c(),te.c(),oe.c(),H=u.localToLocal(Y.x,Y.y,S),V=u.localToLocal(Y.x+Y.width,Y.y,S),G=u.localToLocal(Y.x+Y.width,Y.y+Y.height,S),U=u.localToLocal(Y.x,Y.y+Y.height,S);var e=u.localToLocal(Y.x+Y.width/2,Y.y,S),t=u.localToLocal(Y.x+Y.width,Y.y+Y.height/2,S),o=u.localToLocal(Y.x+Y.width/2,Y.y+Y.height,S),n=u.localToLocal(Y.x,Y.y+Y.height/2,S);q=u.localToLocal(u.regX,u.regY,S),Q=u.localToLocal(Y.x+Y.width/2,Y.y+Y.height/2,S),J=[H,V,G,U],K=[e,t,o,n],p&&(ee.s(g),m&&ee.sd([10,5],0),ee.ss(f).mt(H.x,H.y).lt(V.x,V.y).lt(G.x,G.y).lt(U.x,U.y).lt(H.x,H.y).cp()),zot(k)||(te.s(k),A&&te.sd([10,5],0),te.ss(T).mt(H.x,H.y).lt(V.x,V.y).lt(G.x,G.y).lt(U.x,U.y).lt(H.x,H.y).cp()),X.setBounds(H.x,H.y,V.x-H.x,U.y-H.y),h&&(oe.s("#eee").ss(f).f("rgba(0,0,0,.1)").dc(0,0,b),oe.s("#222").ss(f).dc(0,0,.3*b)),ze();for(var r=Math.min(50,Math.abs(ae))*Jo.sign(ae),i=Math.min(50,Math.abs(se))*Jo.sign(se),l=re*Jo.sign(ie*le)*Jo.sign(u.scaleX*u.scaleY),a=0;a<J.length;a++){var s=J[a];he.getChildAt(a).loc(s.x,s.y).ske(r,i).rot(l),fe.getChildAt(a).loc(s.x,s.y).rot(l);var c=K[a],s=a%2==0?ge:pe;s.getChildAt(Math.floor(a/2)).loc(c.x,c.y).ske(r,i).rot(l),d||s.getChildAt(Math.floor(a/2)).sca(a%2==0?ie/2:1,a%2==0?1:le/2)}F.x=q.x,F.y=q.y}fe.alpha=.5,Se(),Be();var We=new Jo.Shape(1e3,1e3,null,null,null,!1);function Ie(){We.x=0,We.y=0,We.graphics.c().f("rgba(0,0,0,.01)").mt(H.x,H.y).lt(V.x,V.y).lt(G.x,G.y).lt(U.x,U.y).lt(H.x,H.y).cp(),We.reg(q.x,q.y),We.x=q.x,We.y=q.y}Ie(),ne.on("dblclick",function(e){E.ctrlKey&&u.transformControls.visible&&(u.scaleX=1,u.scaleY=1,"SlicedBitmap"==u.type&&(O&&(u.slicesScaleX=1),j&&(u.slicesScaleY=1)),u.rotation=0,Be(),Ie(),R.update()),ft(e,!0)});var Me=ne.on("mousedown",je),Oe=u.on("mousedown",je);function je(e){e=R.getObjectUnderPoint(e.stageX,e.stageY,1);D||e&&(u.contains&&u.contains(e)||!u.contains&&u==e)?u.transformControls.visible||(z?(wt=!1,We.mouseEnabled=!1):E.canvas.style.cursor="move",u.transformControls.show(),u.dispatchEvent("transformshow")):!u.transformControls.visible||e&&ne.contains(e)||(u.transformControls.hide(),u.dispatchEvent("transformhide"))}var Le,De,_e,Re,Ye,Xe,Ne,Fe,He,Ve,Ge,Ue,qe,Qe,Ze,Ke=R.on("stagemousedown",function(e){var t;ht||(e=(t=R.getObjectUnderPoint(e.stageX,e.stageY,1))&&t.parent&&t.parent.layer&&t.parent.layer==u,!u.transformControls.visible||t&&(ne.contains(t)||e)||(u.dispatchEvent("transformhide"),u.transformControls.hide()))});i||(ne.off("mousedown",Me),u.off("mousedown",Oe),R.off("stagemousedown",Ke));var Je,$e,et,tt,ot=!1,nt=!1,rt=u.cursor,it=new Jo.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,null,!1).expand(20);function lt(e,t){t!=e&&(null==t.lastChildren&&(t.lastChildren=t.mouseChildren),null==t.lastMouse&&(t.lastMouse=t.mouseEnabled),t.mouseChildren=!1,t.mouseEnabled=!1)}function at(e,t){t!=e&&(null!=t.lastChildren&&(t.mouseChildren=t.lastChildren),null!=t.lastMouse&&(t.mouseEnabled=t.lastMouse))}function st(t){ht=!0,he.loop(function(e){lt(t,e)}),pe.loop(function(e){lt(t,e)}),ge.loop(function(e){lt(t,e)}),fe.loop(function(e){lt(t,e)}),t!=We&&(We&&null==We.lastMouse&&(We.lastMouse=We.mouseEnabled,u.lastMouse=u.dragPaused),We.mouseEnabled=!1,u.dragPaused=!0)}function ct(t){ht=!1,he.loop(function(e){at(t,e)}),pe.loop(function(e){at(t,e)}),ge.loop(function(e){at(t,e)}),fe.loop(function(e){at(t,e)}),t!=We&&(We&&null!=We.lastMouse&&(We.mouseEnabled=We.lastMouse,u.dragPaused=u.lastMouse),We.lastMouse=null)}z&&(it.mouseEnabled=!1,it.mouseChildren=!1,it.addChild(ue),he.on("mouseover",zt),he.on("mouseout",yt),pe.on("mouseover",zt),pe.on("mouseout",yt),ge.on("mouseover",zt),ge.on("mouseout",yt),fe.on("mouseover",zt),fe.on("mouseout",yt),(tt=new Jo.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,null,!1).expand(20)).cursor="none"),he.on("mousedown",pt),he.on("pressmove",gt),he.on("pressup",ft),pe.on("mousedown",pt),pe.on("pressmove",gt),pe.on("pressup",ft),ge.on("mousedown",pt),ge.on("pressmove",gt),ge.on("pressup",ft),fe.on("mousedown",pt),fe.on("pressmove",function(e){var t=S.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY),o=180*Math.atan2(t.y-Ze,t.x-Qe)/Math.PI;E.shiftKey?u.rot(45*Math.round((Ne+(o-Fe)*Jo.sign(ie)*Jo.sign(u.scaleX))/45)):u.rot(Ne+(o-Fe)*Jo.sign(ie)*Jo.sign(u.scaleX));Be(),it.x=t.x,it.y=t.y,z&&(u.getConcatenatedMatrix().decompose(_),_.rotation||(_.rotation=0),ue.rotation=_.rotation*Jo.sign(ie*le)*Jo.sign(u.scaleX*u.scaleY)+de[e.target.cu]+be,"side"!=e.target.controlType&&ie*le<0&&(ue.rotation+=90),tt.x=t.x,tt.y=t.y);Be(),u.transformControls.events&&(t=e.target.controlType,mt(e,t,null,!1))}),fe.on("pressup",ft);var ut,dt,ht=!1;function pt(e){st(e.target),nt=!0,a&&bt(),Je&&R.off("stagemousemove",Je),Le=e.target.x,De=e.target.y,Ue=u.x,qe=u.y,_e=u.scaleX,Re=u.scaleY,"SlicedBitmap"==u.type&&(Ye=u.slicesScaleX,Xe=u.slicesScaleY);var t,o,n,r=S.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY);"rotate"==e.target.controlType&&(ot=!0,Ne=u.rotation,t=r.x,o=r.y,n=$.localToLocal(Ue,qe,S),Qe=n.x,Ze=n.y,Fe=180*Math.atan2(o-Ze,t-Qe)/Math.PI),Ve=E.ctrlKey||"rotate"==e.target.controlType?(He=Math.abs(Le-u.x),Math.abs(De-u.y)):(He=Math.abs(Le-e.target.op.x),Math.abs(De-e.target.op.y)),"rotate"!=e.target.controlType&&(Ge=e.target.op.parent.localToLocal(e.target.op.x,e.target.op.y,u.parent)),it.stage?S.setChildIndex(it,S.getChildIndex(ne)):it.addTo(S,S.getChildIndex(ne)+1),it.x=r.x,it.y=r.y,it.cursor=z?"none":e.target.cu,z&&(u.getConcatenatedMatrix().decompose(_),_.rotation||(_.rotation=0),ue.rotation=_.rotation*Jo.sign(ie*le)*Jo.sign(u.scaleX*u.scaleY)+de[e.target.cu]+be,"side"!=e.target.controlType&&ie*le<0&&(ue.rotation+=90),tt.addTo(S,1).pos({x:r.x,y:r.y,reg:!0})),We.visible=!1,u.cursor="none",ue&&ue.parent&&ue.parent.top()}function gt(e){var t=1;E.ctrlKey&&"corner"==e.target.controlType?t=Ve<He?(e.target.x-Ue)/(Le-Ue):(e.target.y-qe)/(De-qe):Ve<He?Le-e.target.op.x&&(t=(e.target.x-e.target.op.x)/(Le-e.target.op.x)):De-e.target.op.y&&(t=(e.target.y-e.target.op.y)/(De-e.target.op.y)),"corner"==e.target.controlType?(u.scaleX=Jo.constrain(t*_e,B,W),u.scaleY=Jo.constrain(t*Re,I,M)):("SlicedBitmap"==u.type&&O?u.ssX=Jo.constrain("e-resize"==e.target.cu?t*Ye:Ye,B,W):u.scaleX=Jo.constrain("e-resize"==e.target.cu?t*_e:_e,B,W),"SlicedBitmap"==u.type&&j?u.ssY=Jo.constrain("n-resize"==e.target.cu?t*Xe:Xe,I,M):u.scaleY=Jo.constrain("n-resize"==e.target.cu?t*Re:Re,I,M)),Be();t=S.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY);it.x=t.x,it.y=t.y,z&&(tt.x=t.x,tt.y=t.y),E.ctrlKey&&"side"!=e.target.controlType||(t=e.target.op.parent.localToLocal(e.target.op.x,e.target.op.y,u.parent),u.x-=(t.x-Ge.x)*Jo.sign(ie)*Jo.sign(u.scaleX),u.y-=(t.y-Ge.y)*Jo.sign(le)*Jo.sign(u.scaleY)),Be(),u.transformControls.events&&mt(e,e.target.controlType)}function ft(e,t){ct(e.target),Se();var o=e?e.target.controlType:"move";t&&(o="reset"),z&&tt.removeFrom(),mt(e,o,!0),R.update()}function mt(e,t,o,n){null==n&&(n=!0);var r=!1;et=null;e=S.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY);"move"==t?(u.x==Ct.x&&u.y==Ct.y||((et=new createjs.Event("transformed")).transformType="move"),n&&(r=We.hitTestPoint(e.x,e.y))):"corner"==t?(u.scaleX==Ct.scaleX&&u.scaleY==Ct.scaleY||((et=new createjs.Event("transformed")).transformType="size"),n&&(r=he.hitTestPoint(e.x,e.y))):"side"==t?((u.scaleX!=Ct.scaleX||u.scaleY!=Ct.scaleY||O&&"SlicedBitmap"==u.type&&u.slicesScaleX!=Ct.slicesScaleX||j&&"SlicedBitmap"==u.type&&u.slicesScaleY!=Ct.slicesScaleY)&&((et=new createjs.Event("transformed")).transformType="stretch"),n&&(r=pe.hitTestPoint(e.x,e.y)||ge.hitTestPoint(e.x,e.y))):"rotate"==t?(u.rotation!=Ct.rotation&&((et=new createjs.Event("transformed")).transformType="rotate"),n&&(r=fe.hitTestPoint(e.x,e.y))):"reg"==t?u.regX==Ct.regX&&u.regY==Ct.regY||((et=new createjs.Event("transformed")).transformType="reg"):(et=new createjs.Event("transformed")).transformType="reset"==t?"reset":"unknown",n&&!r&&(it.removeFrom(),E.canvas.style.cursor="default",u.cursor=rt),et&&(et.pressup=o,"Tag"!=u.type&&"TextArea"!=u.type&&"Loader"!=u.type||u.resize(),u.dispatchEvent(et))}function zt(e){var t;nt||(it.stage?S.setChildIndex(it,S.getChildIndex(ne)):it.addTo(S,S.getChildIndex(ne)+1),tt.addTo(S,1),t=S.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY),it.x=t.x,it.y=t.y,tt.x=t.x,tt.y=t.y,u.getConcatenatedMatrix().decompose(_),_.rotation||(_.rotation=0),ue.rotation=_.rotation*Jo.sign(ie*le)*Jo.sign(u.scaleX*u.scaleY)+de[e.target.cu]+be,"side"!=e.target.controlType&&ie*le<0&&(ue.rotation+=90),R.update(),Je&&R.off("stagemousemove",Je),Je=R.on("stagemousemove",function(e){e=S.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY);it.x=e.x,it.y=e.y,R.update()}))}function yt(){R.off("stagemousemove",Je),nt||(u.cursor=rt,it.removeFrom(),tt.removeFrom(),R.update())}function bt(){var e;a&&(e=$.numChildren-1,"Keyboard"==$.getChildAt(e).type&&e--,$.setChildIndex(u,e),vt())}function vt(){if($==S)ne.removeFrom(),S.addChildAt(ne,S.getChildIndex(u)+1);else{for(var e=$;e.parent&&e.parent!=S;)e=e.parent;u.stage&&(ne.parent==S&&S.removeChild(ne),S.addChildAt(ne,S.getChildIndex(e)+1))}}F.drag(),F.on("mousedown",bt),F.on("pressup",function(e){if(!E.ctrlKey){for(var t=0;t<J.length;t++)if(Jo.dist(F.x,F.y,J[t].x,J[t].y)<v){F.x=J[t].x,F.y=J[t].y;break}Jo.dist(F.x,F.y,Q.x,Q.y)<v&&(F.x=Q.x,F.y=Q.y)}var o=u.rotation;ut=S.localToLocal(F.x,F.y,u),dt=$==R?new Jo.Point(F.x,F.y):S.localToLocal(F.x,F.y,$),u.reg(ut.x,ut.y),u.rotation=0,u.x=u.x+dt.x-u.x,u.y=u.y+dt.y-u.y,u.rotation=o,Be(),Ie(),ft(e),R.update()});var wt=!0;Z=z?"none":"move",We.drag({overCursor:Z,dragCursor:Z,onTop:!1}),We.controlType="move",z&&(We.on("mouseover",function(e){if(nt||!z||!wt)return;e=S.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY);ce.addTo(ne).pos({x:e.x,y:e.y,reg:!0}),R.update(),$e&&R.off("stagemousemove",$e);$e=R.on("stagemousemove",function(e){e=S.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY);ce.x=e.x,ce.y=e.y,R.update()})}),We.on("mouseout",function(){if(R.off("stagemousemove",$e),nt)return;ce.removeFrom(ne),R.update()})),We.on("mousedown",function(){st(We),bt()}),We.on("pressmove",function(e){var t;u.transformControls.visible&&(t=$==R?new Jo.Point(We.x,We.y):S.localToLocal(We.x,We.y,$),u.x=t.x,u.y=t.y,Be(),u.transformControls.events&&mt(e,"move"))}),We.on("pressup",function(e){ct(We),u.transformControls.visible&&ft(e)});var Ct,xt=R.on("stagemouseup",function(){setTimeout(function(){ht||(nt=!1,We.mouseEnabled=!0,wt||(et=new createjs.Event("transformed"),u.x!=Ct.x||u.y!=Ct.y?et.transformType="move":et.transformType="select",et.pressup=!0,u.dispatchEvent(et)),wt=!0,We.visible=!0,ot&&!E.ctrlKey&&1<w&&(u.rotation=Math.round(u.rotation/w)*w,Be()),Ie(),We.mouseEnabled=!0,ot=!1,R.update())},50)});function kt(){Ct={x:u.x,y:u.y,rotation:u.rotation,regX:u.regX,regY:u.regY,scaleX:u.scaleX,scaleY:u.scaleY},"SlicedBitmap"==u.type&&(O&&(Ct.slicesScaleX=u.slicesScaleX),j&&(Ct.slicesScaleY=u.slicesScaleY))}kt();var Tt,At=u.on("mousedown",kt);ne.on("mousedown",kt),ne.addChild(X),t&&ne.addChild(We),n&&ne.addChild(he),e&&ne.addChild(pe),o&&ne.addChild(ge),r&&ne.addChild(fe),ne.addChild(F),t&&(u.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Tt=u.on("pressmove",function(e){Be(),Ie(),Se(),u.transformControls.events&&mt(e,"move")}));var Pt=i;return u.transformControls={visible:l,events:x,ghost:!zot(k),ghostEnabled:!zot(k),show:function(){return a&&bt(),vt(),u.toggled=!0,u.transformControls.visible=!0,N.parent&&N.removeFrom(),R.update(),u.transformControls},hide:function(){var e;return u.transformControls.ghost&&(e=S.getChildIndex(ne)),S.removeChild(ne),u.transformControls.ghost&&u.transformControls.ghostEnabled&&S.addChildAt(N,e),u.toggled=!1,u.transformControls.visible=!1,z&&(Je&&R.off("stagemousemove",Je),$e&&R.off("stagemousemove",$e),nt=!1,it.removeFrom(),tt.removeFrom()),t||u.cur(rt),R.update(),u.transformControls},remove:function(e){return e||u.transformControls.hide(),i=!1,t&&(u.noDrag(),u.off("pressmove",Tt)),u.transformControls},add:function(e){return e||u.transformControls.show(),i=Pt,t&&(u.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Tt=u.on("pressmove",Tt)),u.transformControls},allowToggleOn:function(){return i=Pt=!0,Me=ne.on("mousedown",Me),Oe=u.on("mousedown",Oe),Ke=R.on("stagemousedown",Ke),u.transformControls},allowToggleOff:function(){return i=Pt=!1,ne.off("mousedown",Me),u.off("mousedown",Oe),R.off("stagemousedown",Ke),u.transformControls},disable:function(){return ne.mouseChildren=!1,ne.mouseEnabled=!1,u.mouseChildren=u.zimMCO,t&&(u.noDrag(),u.off("pressmove",Tt)),u.transformControls},enable:function(){return ne.mouseChildren=!0,ne.mouseEnabled=!0,u.mouseChildren=!1,t&&(u.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),Tt=u.on("pressmove",Tt)),u.transformControls},recordData:function(e){var t={type:u.type,index:$.getChildIndex(u),x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY,rotation:u.rotation,skewX:u.skewX,skewY:u.skewY,regX:u.regX,regY:u.regY,controls:u.transformControls.visible};return"SlicedBitmap"==u.type&&(O&&(t.slicesScaleX=u.slicesScaleX),j&&(t.slicesScaleY=u.slicesScaleY)),e?JSON.stringify(t):t},setData:function(e,t){if(!zot(e)){t&&(e=JSON.parse(e)),delete e.controls;var o,n=e.index;for(o in zot(n)&&(n=0),delete e.index,e)u[o]=e[o];return setTimeout(function(){Be(),Ie(),Se(),$.setChildIndex(u,n),u.transformControls.visible&&"Layer"!=u.type?u.transformControls.show():u.transformControls.hide(),!u.transformControls.ghost||u.transformControls.ghostEnabled||u.transformControls.visible||S.addChild(N)},90),u.transformControls}},hideGhost:function(){return u.transformControls.ghost=!1,N.removeFrom(),u.transformControls},showGhost:function(){if(u.transformControls.ghost=!0,u.transformControls.ghostEnabled&&!u.transformControls.visible){for(var e=$;e.parent&&e.parent!=S;)e=e.parent;N.stage?S.setChildIndex(N,S.getChildIndex(e)+1):S.addChildAt(N,S.getChildIndex(e)+1)}return u.transformControls},addGhost:function(){return 0<T?(u.transformControls.ghostEnabled=!0,u.transformControls.showGhost()):zon&&zogy("transform() - ghostWidth must be > 0 when making transform"),u.transformControls},removeGhost:function(){return u.transformControls.ghostEnabled=!1,u.transformControls.hideGhost(),u.transformControls},resize:function(e){return $=u.parent,Be(),Ie(),Se(),u.transformControls.visible&&u.transformControls.show(),e&&((e=new createjs.Event("transformed")).pressup=!0,e.transformType="resize",u.dispatchEvent(e)),u.transformControls},dispose:function(){u.transformControls.hide(),i=!1,u.mouseChildren=u.zimMCO,t&&(u.noDrag(),u.off("pressmove",Tt)),u.transformControls.hideGhost(),We.removeAllEventListeners(),fe.removeAllEventListeners(),F.removeAllEventListeners(),pe.removeAllEventListeners(),ge.removeAllEventListeners(),he.removeAllEventListeners(),ne.removeAllEventListeners(),Oe&&u.off("mousedown",Oe),Me&&u.off("mousedown",Me),Ke&&R.off("stagemousedown",Ke),Je&&R.off("stagemousemove",Je),$e&&R.off("stagemousemove",$e),xt&&R.off("stagemouseup",xt),At&&u.off("mousedown",At),Tt&&u.off("pressmove",Tt),ne=it=tt=null,u.transformControls=null},controls:ne,scaleControls:he,stretchXControls:pe,stretchYControls:ge,rotateControls:fe},u.toggle=function(e){return!0!==e&&(!1===e||u.transformControls.visible)?u.transformControls.hide():u.transformControls.show(),u},u.transformControls.ghost&&(u.transformControls.toggleGhost=function(e){return!0!==e&&(!1===e||u.transformControls.visible)?u.transformControls.hideGhost():u.transformControls.showGhost(),u}),l?u.transformControls.show():!P&&u.transformControls.ghost&&u.transformControls.showGhost(),u},Jo.gesture=function(p,e,t,n,o,g,f,r,i,l,a,m,s,c,u,d){var h,z,y,b,v;if(h=zob(Jo.gesture,arguments,"obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBoundary, slide, slideFactor, regControl, onTop, surround, circularBounds, rect"))return h;if("AC"==p.type&&WW.zdf)return WW.zdf.ac("gesture",arguments),p;if(z_d("34.5"),!zot(p)&&p.on){zot(e)&&(e=!0),zot(t)&&(t=!0),zot(n)&&(n=!0),zot(i)&&(i=!1),zot(r)&&(r=1),zot(l)&&(l=!1),zot(a)&&(a=5),zot(m)&&(m=!1),zot(s)&&(s=!0),zot(c)&&(c=!1),c&&n&&(c=d=null,zon&&zogy("gesture() - does not support surround when rotate is true")),zot(u)&&(u=!1),zot(o)&&!zot(d)&&(o=d);var w,C,x,k,T,A,P,E,S,B,W,I=$o();return zot(p.zimMaskDynamic)||p.zimMaskApply(),p.zimTouch||(w=new Jo.Damp(p.scaleX,.05),C=new Jo.Damp(p.scaleY,.05),x=p.scaleX/p.scaleY,p.zimTouch={move:e,scale:t,rotate:n,pointers:{},checkBounds:function(e,t){var o,n;return p.zimTouch.boundary&&(o=p.zimTouch.boundary,n=p.parent.localToLocal(e,t,p.parent),t=c?(e=Math.min(o.x,Math.max(o.x+o.width,n.x)),Math.min(o.y,Math.max(o.y+o.height,n.y))):(e=Math.max(o.x,Math.min(o.x+o.width,n.x)),Math.max(o.y,Math.min(o.y+o.height,n.y))),e=(n=p.parent.globalToLocal(e,t)).x,t=n.y),{x:e,y:t}}},o&&(p.zimTouch.boundary=o,i&&(p.zimTouch.boundary=Jo.boundsToGlobal(p.parent,o)),p.zimTouch.boundaryStartX=p.zimTouch.boundary.x,p.zimTouch.boundaryStartY=p.zimTouch.boundary.y,p.zimTouch.boundaryStartW=p.zimTouch.boundary.width,p.zimTouch.boundaryStartH=p.zimTouch.boundary.height,i=p.zimTouch.checkBounds(p.x,p.y),p.x=i.x,p.y=i.y),l&&(b=10,v=5,y=0,z=[],p.zimTouch.slideInterval=Jo.interval(b/("s"==I?1e3:1),function(){z[y++%v]=[p.x,p.y]}),p.zimTouch.slideInterval.pause(),p.animate({x:p.x,y:p.y},10/("s"==I?1e3:1),"quadOut")),p.zimTouch.mousedown=p.on("mousedown",function(e){zot(W)?W=1:W++,s&&(t=p.parent.numChildren-1,"Keyboard"==p.parent.getChildAt(t).type&&t--,p.parent.setChildIndex(p,t),p.ZIMoutlineShape&&p.outline()),m||(B=null,T=p.scaleX,A=p.scaleY,P=p.rotation,E=p.regX,S=p.regY,p.reg(0,0),k=p.getMatrix(),p.regX=E,p.regY=S);var t="id"+Math.abs(e.pointerID+1),e=p.parent.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY);p.zimTouch.pointers[t]={startX:e.x,startY:e.y,x:e.x,y:e.y},(p.zimTouch.move||p.zimTouch.rotate)&&(p.zimTouch.total=0,Jo.loop(p.zimTouch.pointers,function(){p.zimTouch.total++})),l&&1==p.zimTouch.total&&p.zimTouch.slideInterval.pause(!1),M()}),p.zimTouch.pressmove=p.on("pressmove",function(e){var t="id"+Math.abs(e.pointerID+1),o=p.parent.globalToLocal(e.stageX/Jo.scaX,e.stageY/Jo.scaY);p.zimTouch.pointers[t]&&(p.zimTouch.pointers[t].x=o.x,p.zimTouch.pointers[t].y=o.y);var n,r,i,l,a,s,c=0,u=0,d=0,h=0;Jo.loop(p.zimTouch.pointers,function(e,t){c+=t.x-t.startX,u+=t.y-t.startY,d+=t.x,h+=t.y}),0!=p.zimTouch.total&&(n=c/p.zimTouch.total,r=u/p.zimTouch.total,c=p.zimTouch.startX+n,u=p.zimTouch.startY+r,d/=p.zimTouch.total,h/=p.zimTouch.total,i={x:p.x,y:p.y,scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},p.zimTouch.move&&(a=p.zimTouch.checkBounds(c,u),i.x=a.x,i.y=a.y),2==p.zimTouch.pair.length?(l=p.zimTouch.pair[0],e=p.zimTouch.pair[1],p.zimTouch.scale&&(t=Math.sqrt(Math.pow(e.startX-l.startX,2)+Math.pow(e.startY-l.startY,2)),o=Math.sqrt(Math.pow(e.x-l.x,2)+Math.pow(e.y-l.y,2)),a=p.zimTouch.startSX+(o/t-1),o=p.zimTouch.startSY+(o/t-1),i.scaleX=a,i.scaleY=o,i.scaleX=w.convert(a),i.scaleY=C.convert(o),t=!zot(g)&&Math.min(a,o)<g,o=!zot(f)&&Math.max(a,o)>f,(t||o)&&(t?1<x?(i.scaleY=g,i.scaleX=g*x):(i.scaleX=g,i.scaleY=g/x):o&&(1<x?(i.scaleX=f,i.scaleY=f/x):(i.scaleY=f,i.scaleX=f*x)),w.immediate(i.scaleX),C.immediate(i.scaleY))),p.zimTouch.rotate&&(s=Math.atan2(l.startY-e.startY,l.startX-e.startX)*(180/Math.PI),s=Math.atan2(l.y-e.y,l.x-e.x)*(180/Math.PI)-s,i.rotation=p.zimTouch.startR+s),m?(p.scaleX=i.scaleX,p.scaleY=i.scaleY,p.rotation=i.rotation,p.zimTouch.move&&(p.x=i.x,p.y=i.y)):(p.reg(0,0),s=p.parent.localToGlobal(d,h),d=s.x,h=s.y,s=zot(B)?p.globalToLocal(d,h):p.globalToLocal(B.x,B.y),k.clone().translate(s.x,s.y).rotate(i.rotation-P).scale(i.scaleX/T,i.scaleY/A).translate(-s.x,-s.y).decompose(p),p.zimTouch.move&&(p.x+=n,p.y+=r),B=p.localToGlobal(s.x,s.y),p.reg(E,S)),p.zimTouch.scale&&p.dispatchEvent("scale"),p.zimTouch.rotate&&p.dispatchEvent("rotate")):(p.x=i.x,p.y=i.y),p.zimTouch.move&&p.dispatchEvent("move"),"Tag"!=p.type&&"TextArea"!=p.type&&"Loader"!=p.type||p.resize(),p.ZIMoutlineShape&&p.outline(),p.getStage&&p.stage&&p.stage.update())}),p.on("mousedown",function(){var e=1;p.stage.on("stagemousedown",function(){e++}),p.stage.on("stagemouseup",function(){0==--e&&setTimeout(function(){p.zimTouch&&(p.zimTouch.total=0),p.zimTouch&&(p.zimTouch.pointers={}),W=null},50)})},null,!0),p.zimTouch.pressup=p.on("pressup",function(e){var t,o="id"+Math.abs(e.pointerID+1);delete p.zimTouch.pointers[o],(p.zimTouch.move||p.zimTouch.rotate)&&p.zimTouch.total--,n&&!zot(r)&&0==p.zimTouch.total&&(0<r?p.rotation=Math.round(p.rotation/r)*r:0==r&&(p.rotation=Math.round(p.rotation))),l&&0==p.zimTouch.total&&1==W&&(p.zimTouch.slideInterval.pause(),t=z[(y+1)%z.length],e=z[y%z.length],o=p.x+(t[0]-e[0])*a,t=p.y+(t[1]-e[1])*a,e=p.zimTouch.checkBounds(o,t),t=v*b*a*Math.min((p.x-e.x)/(p.x-o)||1,(p.y-e.y)/(p.y-t)||1),p.animate({x:e.x,y:e.y},t/("s"==I?1e3:1),"quadOut",function(){p.dispatchEvent("slidestop")})),0==p.zimTouch.total&&(W=null),p.getStage&&p.stage&&p.stage.update(),M()}),o&&(O(),p.on("move",O))),p}function M(){p.zimTouch.pair=[],Jo.loop(p.zimTouch.pointers,function(e,t,o){t.startX=t.x,t.startY=t.y,o<=1&&p.zimTouch.pair.push(t)}),p.zimTouch.startX=p.x,p.zimTouch.startY=p.y,p.zimTouch.startSX=p.scaleX,p.zimTouch.startSY=p.scaleY,p.zimTouch.startR=p.rotation}function O(){var e,t=p.localToGlobal(p.regX,p.regY);o=u?(o=p.parent.localToGlobal(p.x-p.width/2,p.y-p.height/2),e=p.parent.localToGlobal(p.x+p.width/2,p.y+p.height/2),{x:o.x,y:o.y,width:e.x-o.x,height:e.y-o.y}):p.boundsToGlobal();var o={x:p.zimTouch.boundaryStartX+t.x-o.x,y:p.zimTouch.boundaryStartY+t.y-o.y,width:p.zimTouch.boundaryStartW-o.width,height:p.zimTouch.boundaryStartH-o.height};p.gestureBoundary(o,!1)}},Jo.noGesture=function(e,t,o,n){var r;return(r=zob(Jo.noGesture,arguments,"obj, move, scale, rotate"))?r:(z_d("34.6"),!zot(e)&&e.on&&e.zimTouch?(zot(t)&&(t=!0),zot(o)&&(o=!0),zot(n)&&(n=!0),e.zimTouch.move=!t,e.zimTouch.scale=!o,e.zimTouch.rotate=!n,e.zimTouch.move||e.zimTouch.scale||e.zimTouch.rotate||(e.off("mousedown",e.zimTouch.mousedown),e.off("pressmove",e.zimTouch.pressmove),e.off("pressup",e.zimTouch.pressup),delete e.zimTouch),e):void 0)},Jo.gestureBoundary=function(e,t,o){if(z_d("34.7"),!zot(e)&&e.on&&!zot(t)&&e.zimTouch){e.zimTouch.localBoundary&&e.parent?e.zimTouch.boundary=Jo.boundsToGlobal(e.parent,t):e.zimTouch.boundary=t,zot(o)&&(o=!0),o&&(e.zimTouch.boundaryStartX=t.x,e.zimTouch.boundaryStartY=t.y,e.zimTouch.boundaryStartW=t.width,e.zimTouch.boundaryStartH=t.height);t=e.zimTouch.checkBounds(e.x,e.y);return e.x=t.x,e.y=t.y,e}},Jo.effect=function(e,t,o,n,r,i){if(z_d("33.16"),zot(t))return e;zot(e.effects)&&(e.effects={}),Array.isArray(t)||(t=[t]);for(var l,a=0,s=0;s<t.length;s++){var c=t[s];c.type||(c instanceof createjs.BlurFilter?c.type="BlurEffect":c instanceof createjs.ColorFilter?c.type="ColorEffect":c instanceof createjs.AlphaMaskFilter?c.type="AlphaEffect":c instanceof createjs.ColorMatrixFilter?c.type="MultiEffect":zot(c.type)&&(c.type="custom"+a++));var u=c.type.replace(/effect/i,"");e.effects[u.toLowerCase()]=c}for(l in e.filters=[],e.effects)e.filters.push(e.effects[l]);return e.cache(o,n,r,i,null,{adjustBounds:!0},null,WW.DIR&&"rtl"==WW.DIR),e},Jo.updateEffects=function(e,t){return z_d("33.163"),e.updateCache&&(t?e.cache():e.updateCache()),e.effects&&e.effects.alpha&&e.effects.alpha.alphaMask.updateCache&&e.effects.alpha.alphaMask.updateCache(),e},Jo.noEffect=function(e,t,o){if(z_d("33.165"),zot(o)&&(o=!1),zot(t)){var n;e.effects.multi&&(n=e.effects.multi),e.effects={},n&&(e.effects.multi=n)}else{e.effects||(e.effects={}),Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r].replace(/effect/i,"");delete e.effects[i.toLowerCase()]}}for(var l in e.filters=[],e.effects)e.filters.push(e.effects[l]);return o||0<e.filters.length?e.updateCache&&e.updateCache():e.uncache&&e.uncache(),e},Jo.addPhysics=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p){var g;if(g=zob(Jo.addPhysics,arguments,"obj, dynamic, contract, shape, friction, linear, angular, density, bounciness, maskBits, categoryBits, physics, restitution, sensor"))return g;if(z_d("34.8"),zot(d)){if("undefined"==typeof zimPhysics)return zon&&zogy("ZIM Physics module must be imported"),e;zot(WW.zimDefaultPhysics)&&(WW.zimDefaultPhysics=new Jo.Physics),d=WW.zimDefaultPhysics}e.physics=d;var m,z,d="rectangle";function y(){WW.zimContactListener=new WW.b2ContactListener,b=new Jo.Dictionary(!0),w=new Jo.Dictionary(!0),WW.zimContactListener.BeginContact=function(e){var t=b.at(e.m_fixtureB.GetBody());t&&t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody(),t.obj);(t=b.at(e.m_fixtureA.GetBody()))&&t(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody(),t.obj)},WW.zimContactListener.EndContact=function(e){var t=w.at(e.m_fixtureB.GetBody());t&&t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody(),t.obj);(t=w.at(e.m_fixtureA.GetBody()))&&t(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody(),t.obj)},m.physics.world.SetContactListener(WW.zimContactListener)}return"Circle"==e.type||"Dial"==e.type?d="circle":"Triangle"==e.type?d="triangle":"Blob"==e.type&&(d="poly"),zot(n)&&(n=d),zot(s)&&(s=h),m=e,t=t,o=o,n=n,r=r,i=i,l=l,a=a,s=s,c=c,u=u,p=p,z_d("69.97"),zot(o)&&(o=0),"rectangle"==n?m.body=m.physics.makeRectangle(m.width-o,m.height-o,t,r,l,a,s,c,u,i,p):"circle"==n?m.body=m.physics.makeCircle(m.width/2-o,t,r,l,a,s,c,u,i,p):"triangle"==n?(zot(m.a)&&(m.a=m.width,m.b=m.c=Math.sqrt(Math.pow(m.a/2,2)+Math.pow(m.height,2))),m.body=m.physics.makeTriangle(m.a-o,m.b-o,m.c-o,t,r,l,a,s,c,u,i,p)):"poly"==n&&(z=[],m.reg(0,0,!0),1!=(n=m).scale&&(n=m.clone().transformPoints("scale",m.scale)),o&&(n=m.clone().transformPoints("scale",Math.max(0,1-o/((m.width+m.height)/4)))),Jo.loop(n.points,function(e){z.push({x:e[0],y:e[1]})}),m.body=m.physics.makePoly(z,m.width,m.height,t,r,l,a,s,c,u,i,p)),m.body.x=m.x,m.body.y=m.y,m.body.rotation=m.rotation,m.physics.addMap(m.body,m),m.impulse=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0);var r=m.body.GetWorldCenter();return zot(o)&&(o=r.x*m.physics.scale),zot(n)&&(n=r.y*m.physics.scale),m.body.ApplyImpulse(new WW.b2Vec2(e,t),new WW.b2Vec2(o/m.physics.scale,n/m.physics.scale)),m},m.force=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0);var r=m.body.GetWorldCenter();return zot(o)&&(o=r.x*m.physics.scale),zot(n)&&(n=r.y*m.physics.scale),m.body.ApplyForce(new WW.b2Vec2(e,t),new WW.b2Vec2(o/m.physics.scale,n/m.physics.scale)),m},m.setLinearVelocity=function(e,t){return m.body.SetLinearVelocity(new WW.b2Vec2(e,t)),m},m.setAngularVelocity=function(e){return m.body.SetAngularVelocity(e),m},m.spin=function(e){return zot(e)&&(e=10),m.body.ApplyTorque(1e3*e),m},m.torque=function(e){return zot(e)&&(e=10),m.body.ApplyTorque(e),m},m.follow=function(e,t,o,n,r,i,l,a,s,c,u,d){var h;return(h=zob(m.follow,arguments,"damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal"))?h:(m.physics.follow(m,e,t,o,n,r,i,l,a,s,c,u,d),m)},m.noFollow=function(){return m.physics.follow(null),m},m.control=function(e,t,o,n,r){var i;return(i=zob(m.control,arguments,"type, speed, speedY, horizontal, vertical"))?i:(m.physics.control(m,e,t,o,n,r),m)},m.customControl=function(e,t,o){var n;return(n=zob(m.customControl,arguments,"dir, speed, speedY"))?n:(m.physics.customControl(e,t,o),m)},m.noControl=function(){return m.physics.noControl(m),m},m.sleep=function(){return m.body.SetAwake(!1),m},m.wake=function(){return m.body.SetAwake(!0),m},m.contact=function(e){return e.obj=m,WW.zimContactListener||y(),b.add(m.body,e),m},m.noContact=function(){return f.obj=m,b.remove(m.body),m},m.contactEnd=function(e){return WW.zimContactListener||y(),w.add(m.body,e),m},m.noContactEnd=function(){return w.remove(m.body),m},m.hasOwnProperty("dynamic")||Object.defineProperty(m,"dynamic",{get:function(){return 2==m.body.GetType()},set:function(e){m.body.SetType(1==e?2:0)}}),e},Jo.removePhysics=function(e){return z_d("34.85"),zot(e.physics)||(e==e.physics.followObj&&e.physics.follow(null),e.follow=e.noFollow=e.control=e.noControl=e.sleep=e.wake=null,e.impulse=e.force=e.spin=e.torque=null,e.physics.remove(e.body),e.physics=null),e},Jo.hitTestPoint=function(e,t,o,n){if(Jo.zimhtp||(z_d("35"),Jo.zimhtp=!0),!e.stage||zot(t)||zot(o))return!1;if(!zot(e)&&e.globalToLocal){if(zot(n)&&(n=!0),n){var r=e.getBounds();if(r){n=e.globalToLocal(t,o);if(n.x>r.x+r.width||n.x<r.x)return!1;if(n.y>r.y+r.height||n.y<r.y)return!1}}o={x:t,y:o},o=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(o.x,o.y):e.globalToLocal(o.x*Jo.scaX,o.y*Jo.scaY);return e.hitTest(o.x,o.y)}},Jo.hitTestReg=function(e,t,o){if(Jo.zimhtr||(z_d("36"),Jo.zimhtr=!0),!e.stage||!t.stage)return!1;if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){zot(o)&&(o=!0);var n=t.localToGlobal(t.regX,t.regY),t=e.getBounds();if(o&&t){o=e.globalToLocal(n.x,n.y);if(o.x>t.x+t.width||o.x<t.x)return!1;if(o.y>t.y+t.height||o.y<t.y)return!1}return n=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(n.x,n.y):e.globalToLocal(n.x*Jo.scaX,n.y*Jo.scaY),e.hitTest(n.x,n.y)}},Jo.hitTestRect=function(t,e,o,n,r){if(Jo.zimhtr||(z_d("37"),Jo.zimhtr=!0),!t.stage||!e.stage)return!1;if(!zot(t)&&!zot(e)&&t.hitTest&&e.getBounds){zot(o)&&(o=0),zot(n)&&(n=!0);var i=e.getBounds();if(i){if(n)if(t.getBounds()&&!Jo.hitTestBounds(t,e))return!1;var l,a,s=i.x+i.width/2,n=i.y+i.height/2,c=e.localToGlobal(s,n);if(r){if(!d(c))return!1;for(var u=0;u<=o;u++){if(l=i.width*(u+1)/(o+1),a=i.height*(u+1)/(o+1),!d(c=e.localToGlobal(i.x+l,i.y)))return!1;if(!d(c=e.localToGlobal(i.x+i.width,i.y+a)))return!1;if(!d(c=e.localToGlobal(i.x+i.width-l,i.y+i.height)))return!1;if(!d(c=e.localToGlobal(i.x,i.y+i.height-a)))return!1}return!0}if(d(c))return!0;for(u=0;u<=o;u++){if(l=i.width*(u+1)/(o+1),a=i.height*(u+1)/(o+1),d(c=e.localToGlobal(i.x+l,i.y)))return!0;if(d(c=e.localToGlobal(i.x+i.width,i.y+a)))return!0;if(d(c=e.localToGlobal(i.x+i.width-l,i.y+i.height)))return!0;if(d(c=e.localToGlobal(i.x,i.y+i.height-a)))return!0}}else zon&&zogy("hitTestRect():\n please setBounds() on param b object")}function d(e){return e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*Jo.scaX,e.y*Jo.scaY),t.hitTest(e.x,e.y)?1:void 0}},Jo.hitTestCircle=function(t,e,o,n,r){if(Jo.zimhtc||(z_d("38"),Jo.zimhtr=!0),z_d("38"),t.stage&&e.stage&&!zot(t)&&!zot(e)&&t.hitTest&&e.getBounds){zot(o)&&(o=8),zot(n)&&(n=!0);var i=e.getBounds();if(i){var l=t.getBounds();if(n&&l&&!Jo.hitTestBounds(t,e))return!1;var a,s,c,u=i.x+i.width/2,d=i.y+i.height/2,h=e.localToGlobal(u,d),p=(i.width+i.height)/2/2;if(r){if(!f(h))return!1;for(var g=0;g<o;g++)if(a=g/o*2*Math.PI,s=u+p*Math.cos(a),c=d+p*Math.sin(a),!f(h=e.localToGlobal(s,c)))return!1;return!0}if(f(h))return!0;for(g=0;g<o;g++)if(a=g/o*2*Math.PI,s=u+p*Math.cos(a),c=d+p*Math.sin(a),f(h=e.localToGlobal(s,c)))return!0;return!1}zon&&zogy("hitTestCircle():\n please setBounds() on param b object")}function f(e){return e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*Jo.scaX,e.y*Jo.scaY),t.hitTest(e.x,e.y)?1:void 0}},Jo.hitTestCircleRect=function(e,t,o){if(Jo.zimhtcr||(z_d("38.2"),Jo.zimhtcr=!0),e.stage&&t.stage){var n=e.stage;if(!zot(e)&&!zot(t)&&e.getBounds&&t.getBounds){var r=e.getBounds(),i=t.getBounds();if(r&&i){zot(o)&&(o=0);var l=(e.radius||(r.width+r.height)/2)+o;l*=e.getConcatenatedMatrix().decompose().scaleX/n.scaleX;i=t.boundsToGlobal(),r=e.localToGlobal(0,0),o=r.x,n=r.y,t=i.x,e=i.y,r=i.x+i.width,i=i.y+i.height,o=(o<t?t:r<o?r:o)-o,n=(n<e?e:i<n?i:n)-n;return o*o+n*n<=l*l}zon&&zogy("hitTestCircleRect():\n please setBounds() on both objects")}}},Jo.hitTestCircles=function(e,t,o){if(Jo.zimhtcs||(z_d("38.5"),Jo.zimhtcs=!0),e.stage&&t.stage){var n=e.stage;if(!zot(e)&&!zot(t)&&e.hitTest&&e.getBounds&&t.getBounds){var r=e.getBounds(),i=t.getBounds();if(r&&i){zot(o)&&(o=0);var l=e.localToGlobal(r.x+r.width/2,r.y+r.height/2),a=t.localToGlobal(i.x+i.width/2,i.y+i.height/2),s=e.getConcatenatedMatrix(),c=t.getConcatenatedMatrix(),e=Math.sqrt(s.a/n.scaleX*s.a/n.scaleX+s.c/n.scaleX*s.c/n.scaleX),t=Math.sqrt(s.b/n.scaleY*s.b/n.scaleY+s.d/n.scaleY*s.d/n.scaleY),s=Math.sqrt(c.a/n.scaleX*c.a/n.scaleX+c.c/n.scaleX*c.c/n.scaleX),n=Math.sqrt(c.b/n.scaleY*c.b/n.scaleY+c.d/n.scaleY*c.d/n.scaleY),a=Math.sqrt(Math.abs(Math.pow(l.x-a.x,2)+Math.pow(l.y-a.y,2)));return r.width*Math.max(e,t)/2+i.width*Math.max(s,n)/2>=a-o}zon&&zogy("hitTestCircles():\n please setBounds() on both objects")}}},Jo.hitTestBounds=function(e,t,o,n){if(Jo.zimhtb||(z_d("39"),Jo.zimhtb=!0),e.stage&&t.stage&&!zot(e)&&!zot(t)&&e.getBounds&&t.getBounds){var r=!1;n&&n.graphics&&(r=!0);var i=e.getBounds(),l=t.getBounds();if(i&&l){zot(o)&&(o=0);e=Jo.boundsToGlobal(e),t=Jo.boundsToGlobal(t);return r&&((r=n.graphics).c(),r.ss(1).s("blue"),r.r(e.x,e.y,e.width,e.height),r.s("green"),r.r(t.x,t.y,t.width,t.height),n.stage.update()),Jo.rectIntersect(e,t,o)}zon&&zogy("hitTestBounds():\n please setBounds() on both objects")}},Jo.hitTestPath=function(o,e,t,n,r,i){if(Jo.zimhtpa||(z_d("37.5"),Jo.zimhtpa=!0),o.stage&&e.stage&&!zot(o)&&!zot(e)&&o.hitTest&&("Squiggle"==e.type||"Blob"==e.type)){var l=o.getBounds();zot(t)&&(t=2),zot(n)&&(n=!1),zot(r)&&(r=!1),zot(i)&&(i=!1);var a,s,c,u=[],d=e.interpolate(t,null,!0,null,!0);if(n)for(e.hitPathPoints?e.hitPathPoints.removeAllChildren():e.hitPathPoints=(new Jo.Container).addTo(),e.hitPathPoints.top(),s=0;s<d.length;s++)c=d[s],c=e.localToGlobal(c.x,c.y),new Jo.Circle(3).loc(c.x,c.y,e.hitPathPoints);if(l){n=Jo.boundsAroundPoints(d);if(!Jo.rectIntersect(o.boundsToGlobal(l),e.boundsToGlobal(n)))return!1}for(s=0;s<d.length;s++){if(c=d[s],function(e){var t=o.image||o.spriteSheet||"Shape"==o.type?o.globalToLocal(e.x,e.y):o.globalToLocal(e.x*Jo.scaX,e.y*Jo.scaY);if(o.hitTest(t.x,t.y))if(r)u.push({x:Math.round(e.x),y:Math.round(e.y)});else{if(!i)return 1;a=s/d.length*100}}(c=e.localToGlobal(c.x,c.y)))return!0;if(null!=a)return a}return 0<u.length&&u}},Jo.hitTestGrid=function(e,t,o,n,r,i,l,a,s,c,u,d,h){if(Jo.zimhtg||(z_d("41"),Jo.zimhtg=!0),!e.stage)return!1;zot(e)||d||(i=(p=e.globalToLocal(i,l)).x,l=p.y),zot(a)&&(a=0),zot(s)&&(s=0),zot(c)&&(c=0),zot(u)&&(u=0);var p=(t+=c)/n,t=(o+=u)/r,o=Math.min(n-1,Math.max(0,Math.floor((i-a+c/2)/p))),r=Math.min(r-1,Math.max(0,Math.floor((l-s+u/2)/t)));if("open"!=h){if(p*(o+1)-c<i-a||i-a<p*o)return;if(t*(r+1)-u<l-s||l-s<t*r)return}n=r*n+o;return zot(h)||"index"==h?n:"col"==h?o:"row"==h?r:"array"==h||"open"==h?[n,o,r]:void 0},Jo.animate=function(c,e,t,u,d,h,l,o,n,a,r,i,s,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,F,H,V,G,U,q,Q,Z,K,J,$,ee,te,oe,ne,re,ie){if(c&&(c.props||c.obj)&&(le=zob(Jo.animate,arguments,"target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startCall, startParams, animateCall, animateParams, sequence, sequenceCall, sequenceParams, sequenceReverse, sequenceRatio, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur, easeAmount, easeFrequency, timeUnit, timeCheck, noAnimateCall, pathDamp")))return le;if("AC"==c.type&&WW.zdf)return WW.zdf.ac("animate",arguments),c;if(Jo.animateCheck||(z_d("45"),Jo.animateCheck=!0),c){var le=Jo.ANIMATE;if(null!=WW.ANIMATE&&(le=WW.ANIMATE),!le)return zot(re)&&(re=!0),d&&re&&"function"==typeof d&&d(zot(h)?c:h),c;zot(ne)&&(ne=!0);var ae,se,ce=$o(null,oe,null,null,!zot(ne)&&!ne);(r||s||i)&&(a=!0),(x||b||x||k||y)&&(z=!0);var ue=arguments,de=Array.prototype.slice.call(arguments);if(zot(e)&&!zot(Q)&&(e=Q),zot(Q=e))return zon&&zogy("animate() - need props"),c;if(zot(M)||(S=0),"BeadsContainer"==c.type&&zot(S)&&(S=0),"Tone"==c.type&&($=!1),!1===$?Jo.pauseAnimateOnBlur=!1:($||zot($)&&!1!==Jo.pauseAnimateOnBlur)&&(zot(Jo.blurCheck)&&Jo.setBlurDetect(),Jo.pauseAnimateOnBlur=!0),zot(S)||!c.addChild){t=Jo.Pick.choose(t),u=Jo.Pick.choose(u),l=Jo.Pick.choose(l),r=Jo.Pick.choose(r),i=Jo.Pick.choose(i),z=Jo.Pick.choose(z),y=Jo.Pick.choose(y),x=zot(x)?t:Jo.Pick.choose(x),I=Jo.Pick.choose(I),R=Jo.Pick.choose(R),Y=Jo.Pick.choose(Y);var he=["loopCount","loopWait","rewind","rewindWait"];for(ae in j)0<=he.indexOf(ae)&&(j[ae]=Jo.Pick.choose(j[ae]))}"none"==u&&(u="linear");le={override:zot(_)?!zot(c)&&!zot(c.zimX)&&!zot(Q.x)||!zot(c)&&!zot(c.zimY)&&!zot(Q.y):_};if(zot(a)||(le.loop=a),zot(r)||(le.count=r),zot(i)||(le.loopWait=i),zot(s)||(le.loopCall=s),zot(f)||(le.loopWaitParams=f),zot(g)||(le.loopWaitCall=g),zot(p)||(le.loopParams=p),zot(m)||(le.loopPick=m),zot(z)||(le.rewind=z),zot(y)||(le.rewindWait=y),zot(b)||(le.rewindCall=b),zot(v)||(le.rewindParams=v),zot(w)||(le.rewindWaitCall=w),zot(C)||(le.rewindWaitParams=C),zot(T)||(le.startCall=T),zot(A)||(le.startParams=A),zot(P)||(le.animateCall=P),zot(E)||(le.animateParams=E),zot(J)&&(J=1),zot(e)||(le=Jo.merge(le,j)),j=le,Jo.loop(Q,function(e,t){var o;"string"==typeof e&&(1<(o=e.split(".")).length&&"."!=e.substr(0,1)&&(Q["."+e]=t,delete Q[e],e="."+e),1<o.length&&"string"==typeof t&&("+"!=(o=t.substr(0,1))&&"-"!=o&&(Q[e]="+"+t)))}),c.zimTweenOriginals={},!zot(S)&&c.addChild){for(var pe=[],ge=0;ge<c.numChildren;ge++)pe.push(c.getChildAt(ge));F=c,c=pe,F.animating=!0}var fe=["extra","zoom","speed","layer","fade"],me={zoom:"Pen"==c.type?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(c instanceof Array){for(I&&c.reverse(),ge=0;ge<c.length;ge++){var ze,ye=c[ge];if(R)for(ae in ye.zimObj={},Q)ze=0<=fe.indexOf(ae)?Q[ae]:Jo.Pick.choose(Q[ae]),ye.zimObj[ae]=ye[ae],"string"==typeof ze&&"transform"!=ae&&(ze=(ye.zimLastObj&&!zot(ye.zimLastObj[ae])?ye.zimLastObj:ye)[ae]+Number(ze.replace(/\s/g,""))),ye.zimLastObj&&(ye.zimLastObj[ae]=(z?ye.zimTweenOriginals:Q)[ae]),ye[ae]=ze;else for(ae in ye.zimObj={},Q)fe.indexOf(ae),ye.zimObj[ae]=Q[ae];var be=J;zot(M)||(be=J+(ye.ratio||0));var ve=0==ge&&0!=S?"s"==ce?.02:20:ge*S;Jo.animate(ye,ye.zimObj,t,u,ge==c.length-1?To:null,null,l,o,n,null,null,null,null,null,null,null,m,null,null,null,null,null,null,x,k,T,A,P,E,null,B,W,null,null,O,Jo.copy(j),L,D,_,null,Y,X,N,F,H,V,G,U,q,Q,Z,ve,be,$,ee,te,oe,ne,re,ie)}return F}var we=t,Ce=x;zot(we)&&(we="s"==ce?1:1e3),zot(x)&&(x=Ce=we),zot(u)&&(u="quadInOut"),zot(l)&&(l=0),zot(y)&&(y=0),zot(j)&&(j={override:!zot(c.zimX)&&!zot(Q.x)||!zot(c.zimY)&&!zot(Q.y)}),zot(h)&&(h=c),zot(O)&&(O=!0),zot(L)&&(L=!1);var xe,ke,Te,Ae,Pe,Ee=D;if(zot(D)&&(D=!1),zot(R)&&(R=!1),zot(Y)&&(Y={}),Y.scale&&(Y.scaleX=Y.scaleY=Y.scale,delete Y.scale),zot(_)||(j.override=_),zot(V)&&(V=!1),zot(U)&&(U=!!V),zot(H)&&(H=!1),zot(G)&&(G=!0),zot(q)&&(q=!0),zot(ie)&&(ie=.15),c.futureRate=J,Q instanceof Array)return(se=1,0==Q.length)?this:(function(){c&&!c.seriesTweens&&(c.seriesTweens=[],c.seriesCalls=[],c.seriesParams=[]);for(var e,t,o=0;o<Q.length;o++)(e=Q[o]).target?(e.target.seriesTweens||(e.target.seriesTweens=[]),e.target.seriesCalls||(e.target.seriesCalls=[]),e.target.seriesParams||(e.target.seriesParams=[]),e.target.seriesTweens.push(e.props),e.target.seriesCalls.push(e.call),e.target.seriesParams.push(e.params)):(c.seriesTweens.push(e.props),c.seriesCalls.push(e.call),c.seriesParams.push(e.params));for(c.seriesCalls.push(d),c.seriesParams.push(h),e=Q[0],(t=c||e.target).zimSeriesOriginals={},o=Q.length-1;0<=o;o--)zot((e=Q[o]).props)&&!zot(e.obj)&&(e.props=e.obj),e.obj=e.props,Jo.loop(e.obj,function(e){t.zimSeriesOriginals[e]="path"==e?Q[e]:xo(t,e)});var n,r,i=new Jo.Dictionary;for(Ae=new Jo.Dictionary,o=0;o<Q.length;o++)if(e=Q[o],c=c||e.target,zot(e.target)&&(e.target=c),zot(e.ease)&&(e.ease=u),!zot(e.target)){0==o&&(e.target.zimSeriesArgs=ue),zot(e.props)&&!zot(e.obj)&&(e.props=e.obj),e.obj=e.props,e.loop&&(zot(e.loopCount)||e.loopCount<=0)&&(e.loopCount=0,Q.splice(o+1,Q.length)),zot(e.obj.scale)||(e.obj.scaleX=e.obj.scaleY=e.obj.scale,delete e.obj.scale),e.from&&((s=i.at(e.target))?(e.set?(n=Jo.copy(e.obj),r=Jo.merge(s,e.set),e.obj=Wo(e.target,e.obj,r),e.set=Jo.merge(e.set,n)):(e.set=Jo.copy(e.obj),e.obj=Wo(e.target,e.obj,s)),e.from=!1):i.add(e.target,Wo(e.target,e.obj,e.set)));var l,a={};for(l in e.obj)a[l]=e.set&&e.set[l]||e.target[l];zot(Ae.at(e.target))&&Ae.add(e.target,{});var s=Jo.merge(Ae.at(e.target),a);Ae.remove(e.target),Ae.add(e.target,s),e.masterSet=Jo.copy(e.set)}zot(c.zimTweens)&&(c.zimTweens={})}(),Po(),Ao(),c);if(Q&&(Q.x&&(c.zimX=!0),Q.y&&(c.zimY=!0)),!zot(Q.shape)&&Q.shape.type==c.type&&("Blob"==c.type||"Squiggle"==c.type)){var Se=c.pointObjects,Be=Q.shape.pointObjects;if(Se.length!=Be.length)zon&&zogy("animate() - shapes must be of same number of points"),delete Q.shape;else{delete Q.shape;var We=zot(Q.blobShift)?0:Q.blobShift;delete Q.blobShift;var Ie=!0;for(ge=0;ge<Se.length;ge++)for(var Me,Oe,je=Se[ge],Le=Be[(2e4*Se.length+ge+We)%Se.length],De=0;De<4;De++)1!=De&&(Me=je[De],(Oe=Jo.copy(de))[0]=Me,Oe[1]={x:Le[De].x,y:Le[De].y,rotation:Le[De].rotation},Ie&&(Oe[42]=!0,Me.animateEvent&&Me.off("animation",Me.animateEvent),Me.animateEvent=Me.on("animation",function(){c.update()})),Ie=!1,Jo.animate.apply(Jo.animate,Oe));if(Jo.isEmpty(Q))return c}}if(!zot(c)){c.tweenStates||(c.tweenStates={all:!0});var _e=!1;if(Q.note){if(Array.isArray(Q.note))Jo.loop(Q.note,function(e,t){"string"==typeof e&&(Q.note[t]=Jo.Synth.note(e))});else if(Q.note.min)Q.note.min=Jo.Synth.note(Q.note.min),Q.note.max=Jo.Synth.note(Q.note.max);else if(Q.note.array)Jo.loop(Q.note.array,function(e,t){"string"==typeof e&&(Q.note.array[t]=Jo.Synth.note(e))});else if("function"==typeof Q.note){if(zon)return zogy("animate() - use frequency in ZIM VEE functions not note"),c}else Q.note=Jo.Synth.note(Q.note);Q.frequency=Q.note,delete Q.note}"Sprite"!=c.type&&Object.prototype.hasOwnProperty.call(c,"paused")||(Object.defineProperty(c,"paused",{get:function(){return c.animatePaused},set:function(e){c.animatePaused=e}}),null!=c.type&&(c.paused=!0),c.animating=!1);var Re,Ye,Xe,Ne,Fe=!(c.endTween=function(o,e){return c.stopAnimate(e),"all"!=o&&"main"!=o&&"none"!=o&&(o="all"),c.seriesTweens?(Jo.loop(c.seriesTweens,function(t,e){Jo.loop(t,function(e){"string"==typeof t[e]&&"transform"!=e&&(t[e]=c[e]+Number(t[e].replace(/\s/g,""))),ko(c,e,t[e])}),"all"==o&&c.seriesCalls[e]&&c.seriesCalls[e](c.seriesParams[e])}),"none"==o||(e=c.seriesCalls[c.seriesCalls.length-1])&&e(c.seriesParams[c.seriesParams.length-1]),c.seriesTweens=null,c.seriesCalls=null,c.seriesParams=null):(Jo.loop(c.zimLastObj,function(e){"string"==typeof c.zimLastObj[e]&&"transform"!=e&&(c.zimLastObj[e]=c[e]+Number(c.zimLastObj[e].replace(/\s/g,""))),ko(c,e,c.zimLastObj[e])}),"none"!=o&&d&&d(h)),c.stage&&c.stage.update(),c});Jo.loop(Q,function(e,t){c.zimTweenOriginals[e]="path"==e?Q[e]:xo(c,e),e.match("hue")?(Q.hueBatch=t,delete Q.hue,Fe=!0):e.match("saturation")?(Q.saturationBatch=t,delete Q.saturation,Fe=!0):e.match("brightness")?(Q.brightnessBatch=t,delete Q.brightness,Fe=!0):e.match("contrast")?(Q.contrastBatch=t,delete Q.contrast,Fe=!0):e.match(/^.effects/)&&(Fe=!0)}),c.resetTween=function(e){zot(e)&&(e=!0),c.pauseAnimate(),c.percent=null,c.startPercent=null;var o=c.zimSeriesOriginals||c.zimTweenOriginals;return Jo.loop(o,function(e){var t;"path"==e?(c.percentComplete=0,c.zimPath=o[e],t=(c.zimStartPercent,c.zimPath.getCurvePoint(c.zimStartPercent/100)),c.loc(t.x,t.y)):ko(c,e,o[e])}),c.zimLastObj=null,c.stage&&c.stage.update(),c.stopAnimate(),c.zimPath&&(de[1].path=c.zimPath),zot(c.zimStartRotation)||(c.rotation=c.zimStartRotation),c.zimStartRotation=null,zot(c.zimStartScaleX)||(c.scaleX=c.zimStartScaleX),c.zimStartScaleX=null,zot(c.zimStartScaleY)||(c.scaleY=c.zimStartScaleY),c.zimStartScaleY=null,Jo.animate.apply(null,c.zimSeriesArgs||de),c.pauseAnimate(e),c},c.replayTween=function(){return c.resetTween(!1),c},(Q.path||H)&&(c.requestedPercentComplete?Re=c.requestedPercentComplete:c.percentComplete&&(Ye=c,Xe="percentComplete",!Object.getOwnPropertyDescriptor(Ye,Xe).get)&&(Re=c.percentComplete),c.requestedPercentComplete=null,zot(Re)&&(Re=0),c.pathRatio=0,c.zimStartRotation=c.rotation,c.percent=null,c.parent&&"BeadsContainer"==c.parent.type||(c.startPercent=null)),L&&(O=!1),zot(c.zimTweens)&&(c.zimTweens={}),L||(c.stage?Ne=c.stage:WW.zdf?Ne=WW.zdf.stage:L=!0);var He,Ve,Ge,Ue,qe={};for(ge in Q)0<=fe.indexOf(ge)||(qe[ge]=Jo.copy(Q[ge]),Q[ge]=Jo.Pick.choose(Q[ge],null,c));if(zot(Q.scale)||(Q.scaleX=Q.scaleY=Jo.Pick.choose(Q.scale,null,c),delete Q.scale),c.zimBusy&&c.zimBusy.colorRange)Q.color&&(delete Q.color,Q.colorRange=1);else if(c.setColorRange&&!zot(Q.color)){var Qe=Q.color;delete Q.color,Q.colorRange=1,c.setColorRange(c.color,Qe),c.colorRange=0}else if(Q.color&&(c.material||c.isMaterial)){if(c.isMaterial)return zogy("ZIM animate - please animate the color on the mesh not the material"),c;var Ze=c;Ze.cT&&Jo.Ticker.remove(Ze.cT),c={val:0,zimTweens:{},ticker:Ze.cT};var Ke,Je=Ze.material.color.getHexString(),$e=Q.color;Q={val:1},Ze.cT=Jo.Ticker.add(function(){var e=Jo.colorRange("#"+Je,$e,c.val);Ze.material.color.set(e)}),d=d?(Ke=d,function(){Ze.cT==c.ticker&&(Ke(callParams||Ze),Jo.Ticker.remove(Ze.cT),Ze.cT=null,c=null)}):function(){Ze.cT==c.ticker&&(Jo.Ticker.remove(Ze.cT),Ze.cT=null,c=null)}}for(qt in Q){if(!c.zimBusy)break;c.zimBusy[qt]&&delete Q[qt]}if(!Jo.isEmpty(Q)){if("Sprite"!=c.type)null!=c.type&&(c.paused=!1),c.animating=!0;else for(var et in Q)if("normalizedFrame"!=et){c.animating=!0;break}for(ge in(D||j.loop||j.rewind)&&!1!==Ee&&(c.zimMouseEnabledCheck||(c.zimMouseEnabledCheck=!0,c.zimLastMouseEnabled=c.mouseEnabled),c.mouseEnabled=!1,setTimeout(function(){for(var e in c.zimBusy||(c.zimBusy={}),Q)c.zimBusy[e]=!0;c.zimMouseEnabledCheck=null,c.mouseEnabled=c.zimLastMouseEnabled},70)),Po(),fe.shift(),Y)Y[ge]=Jo.Pick.choose(Y[ge],null,c);for(ge in j)"waitedCall"!=ge&&"waitedParams"!=ge&&"loopCall"!=ge&&"rewindCall"!=ge&&"loopWaitCall"!=ge&&"rewindWaitCall"!=ge&&"startCall"!=ge&&"animateCall"!=ge&&(j[ge]=Jo.Pick.choose(j[ge],null,c));So(),function(){var e;for(ge in Y){if("string"==typeof Y[ge]&&"transform"!=ge){if(ge.substring&&"."==ge.substring(0,1)){if("+"==Y[ge].substr(0,1)||"-"==Y[ge].substr(0,1))continue}else if("+"==Y[ge].substr(0,1))continue;if("rgb"==Y[ge].substr(0,3))continue;e=(c.zimLastObj&&!zot(c.zimLastObj[ge])?c.zimLastObj:c)[ge],Y[ge]=e+Number(Y[ge].replace(/\s/g,""))}c.zimLastObj[ge]=(z?c.zimTweenOriginals:Q)[ge]}}(),c.seriesTweens&&(c.seriesTweens[0]=Q),!void(R&&!_e&&(Q=Wo(c,Q,Y,!0))),zot(c.percentCompleteCheck)&&(c.percentCompleteCheck=!0,c._percentComplete=0,Object.defineProperty(c,"percentComplete",{get:function(){if(c.paused)return c._percentComplete;if(c.tweenStartTime&&c.tweenEndTime){var e=Date.now(),e=j.loop&&e>c.tweenEndTime?(e-c.tweenStartTime)%(c.tweenEndTime-c.tweenStartTime):e-c.tweenStartTime,e=Math.max(0,Math.min(100,e/(c.tweenEndTime-c.tweenStartTime)*100));return c._percentComplete=e}return 0},set:function(e){this.zimTween?Bo(e,yt=!0):this.requestedPercentComplete=e,c._percentComplete=e,Fe&&c.updateEffects(),P&&"function"==typeof P&&P(E||c)}}),Object.defineProperty(c,"percentCompleteNoAngle",{get:function(){if(c.paused)return c._percentComplete;if(c.tweenStartTime&&c.tweenEndTime){var e=Date.now(),e=j.loop&&e>c.tweenEndTime?(e-c.tweenStartTime)%(c.tweenEndTime-c.tweenStartTime):e-c.tweenStartTime,e=Math.max(0,Math.min(100,e/(c.tweenEndTime-c.tweenStartTime)*100));return c._percentComplete=e}return 0},set:function(e){this.zimTween?Bo(e,!1):this.requestedPercentComplete=e,c._percentComplete=e}})),Object.defineProperty(c,"rate",{get:function(){return c.futureRate},set:function(o){c.futureRate=o,Jo.loop(c.zimTweens,function(e,t){t.timeScale=o})},configurable:!0}),!zot(Q.path)&&Q.path.segmentPoints&&(zot(Q.orient)&&(Q.orient=!0),Q.orient&&zot(Q.flip)&&(Q.flip=!0),"Pen"==c.type&&(c.infinite=!0),c.zimOnPath=!0,zot(c.pathRatio)&&(c.pathRatio=0),!0===Q.orient&&(Q.orient=Q.path),Q.orient&&(Q.startOrient=Q.rotation),He=Q.path,V?(delete Q.path,delete Q.percent,(zon&&c.startPercent&&0<c.startPercent||c.percent&&100!=c.percent)&&zogy("ZIM.animate() - startPercent and percent currently not supported with drag on path"),(Ve=He.getCurvePoint(c.pathRatio,tt,at))&&(Ge=c.parent.globalToLocal(Ve.x,Ve.y),c.x=Ge.x,c.y=Ge.y)):(zot(c.startPercent)&&(c.startPercent=Jo.Pick.choose(zot(Q.startPercent)?0:Q.startPercent,null,c)),zot(c.percent)&&(c.percent=Jo.Pick.choose(zot(Q.percent)?100:Q.percent,null,c)),delete Q.path,delete Q.percent),Ue=!He.lockControls,delete Q.path,Q.pathRatio=1);var tt,ot,nt,rt,it,lt,at,st,ct,ut,dt,ht,pt,gt,ft,mt,zt,yt,bt,vt,wt={},Ct=!0,xt=!1,kt=!0,Tt=!0;zot(Q.redirect)||(Tt=Q.redirect,delete Q.redirect),He&&(Ue||(at=Jo.copy(He.segmentPoints),tt=Jo.copy(He.segmentRatios)),c.currentPercent=c.startPercent+c.percent*c.pathRatio,Qe=(1e6+c.currentPercent)%100/100,Ve=He.getCurvePoint(Qe,tt,at),c.parent&&Ve&&(Ge=c.parent.globalToLocal(Ve.x,Ve.y),c.x=Ge.x,c.y=Ge.y),V&&(u="linear",c.cur("pointer"),ot=null!=Q.startPercent?Q.startPercent:0,it=rt=!(nt=!1),lt=ot,at=Jo.copy(He.segmentPoints),st=0,Jo.loop(at,function(e){st+=Jo.distanceAlongCurve(e)}),ct=Math.round(st/at.length/10),ut=He.interpolate(ct,null,!0,null,!0),ht=dt=(ot||0)/100*st,He.zimAnimateChanged=!1,c.zimAnimatePathChange=He.on("change",function(){He.zimAnimateChanged=!0}),c.zimAnimatePathDown=He.on("mousedown",function(){nt=!0,1==c.paused&&(xt=!0)}),c.zimAnimatePathUp=He.on("pressup",function(){xt=!1}),c.zimAnimateDragDown=c.on("mousedown",function(e){Ne=e.target.stage,c.amu||(c.amu=Ne.frame.on("mouseupplus",function(){xt=!1})),Ne.mouseMoveOutside=!0,kt=!(Ct=!1),setTimeout(function(){Ct=!0},50),xt=!0,He.zimAnimateChanged&&(at=Jo.copy(He.segmentPoints),st=0,Jo.loop(at,function(e){st+=Jo.distanceAlongCurve(e)}),ct=Math.round(st/at.length/10),ut=He.interpolate(ct,null,!0,null,!0)),He.zimAnimateChanged=!1,ot=Io(c),gt.immediate(ot);e=ot;z&&(e=xe.position>xe.duration/2?2*(100-ot):2*ot),ht=dt=(e||0)/100*st}),pt=!1,c.zimAnimateDragPress=c.on("pressmove",function(e){pt=!0,function(e){var t=He.globalToLocal(e.rawX/Jo.scaX,e.rawY/Jo.scaY),e=dt;"Blob"==He.type&&(zt[0]<zt[4]?it=!0:zt[0]>zt[4]&&(it=!1),e<10&&!it?(ht=dt=e=st-5,gt.immediate(ht/st*100),zt=[st-1,st-2,st,st-3,st-4]):st-10<e&&it&&(ht=dt=e=5,gt.immediate(ht/st*100),zt=[0,0,0,0,0]));var l=t.x,a=t.y,s=e;ut.sort(function(e,t){var o=e.x,n=e.y,r=e.r*st,i=t.x,e=t.y,t=t.r*st;return Math.sqrt(Math.pow(l-o,2)+Math.pow(a-n,2)+Math.pow(s-r,2))-Math.sqrt(Math.pow(l-i,2)+Math.pow(a-e,2)+Math.pow(s-t,2))}),ht=ut[0].r*st,ot=ht/st*100,ot=Jo.constrain(ot,0,99.95),z&&(ot/=2,xe.position>xe.duration/2&&(ot=100-ot)),c._percentComplete=ot}(e)}),c.animateReturn=function(){z?(it=rt=!1,Io(c)<50&&Mo(c,100-Io(c)),c.pauseAnimate(!1)):zon&&zogy("animate() - animateReturn() needs rewind set to true")},c.zimAnimateDragUp=c.on("pressup",function(){0==c.paused&&(xt=!1),Ct=!1,setTimeout(function(){Ct=!0},50),zt[0]<zt[4]?it=!0:zt[0]>zt[4]&&(it=!1),!c.paused&&z&&Tt&&it!=rt&&(Mo(c,100-Io(c)),rt=it)}),gt=new Jo.Damp(ot,ie),yt=!(zt=[mt=ft=0,0,0,0,0]),c.zimDragAnimateTicker=Jo.Ticker.add(function(){var e;V&&(++mt%20&&(zt.push(ht),zt.shift()),dt=ht,nt&&(ot=Io(c)),xt||kt&&1==c.paused?(nt||yt||"Blob"==He.type&&Math.abs(ft-ot)>(z?45:90)?(nt=!1,e=ot,gt.immediate(e),yt=!1):e=gt.convert(ot),.1<Math.abs(ft-e)?(Mo(c,e),ft=e):(Mo(c,e),pt=kt=!1)):kt=!1)},Ne))),Q.orient&&(!0===Q.orient&&(Dt=c.parent.localToGlobal((zot(Q.x)?c:Q).x,(zot(Q.y)?c:Q).y),Q.orient={x:Dt.x,y:Dt.y}),bt=Q.orient,delete Q.orient,vt=c.rotation,c.rotation=He.getPointAngle(0)+vt,bt!=He&&(Xt=bt.parent?bt.parent.localToLocal(bt.x,bt.y,c.parent):c.parent.globalToLocal(bt.x,bt.y),c.rotation=Jo.angle(c.x,c.y,Xt.x,Xt.y)+vt));var At=c.scaleX,Pt=c.scaleY,Et=null!=Q.flip&&Q.flip,St=null!=Q.flipVertical&&Q.flipVertical,Bt=c.x,Wt=c.y,It=0;j.loop&&(zot(j.count)||(It=j.count,delete j.count,se=1));var Mt,Ot=0;j.loopWait&&(Ot=j.loopWait,i=j.loopWait,delete j.loopWait),j.loopCall&&(Mt=j.loopCall,delete j.loopCall);var jt=c;j.loopParams&&(jt=j.loopParams,delete j.loopParams),WW.TIMECHECK&&ne&&(we&&en(we,ce),Ce&&en(Ce,ce),l&&en(l,ce),Jt&&en(Jt,ce),Ot&&en(Ot,ce),i&&en(i,ce),j.rewindWait&&en(j.rewindWait,ce),Z&&en(Z,ce),K&&en(K,ce)),"s"==ce&&(we&&(we*=1e3),Ce&&(Ce*=1e3),l&&(l*=1e3),Jt&&(Jt*=1e3),Ot&&(Ot*=1e3),i&&(i*=1e3),j.rewindWait&&(j.rewindWait*=1e3),Z&&(Z*=1e3),K&&(K*=1e3));var Lt,Dt=we;j.rewind&&(Dt+=Ce),c.zimTweenArgs={time:Dt,wait:l,wait2:Jt,wait3:Ot,loopWait:i,rewindWait:j.rewindWait,seriesWait:Z,sequenceWait:K},j.loopWaitCall&&(Lt=j.loopWaitCall,delete j.loopWaitCall);var _t,Rt,Yt=c;j.loopWaitParams&&(Yt=j.loopWaitParams,delete j.loopWaitParams),j.startCall&&(_t=j.startCall,delete j.startCall),j.startParams&&(Rt=j.startParams,delete j.startParams);var Xt=Date.now();c.tweenStartTime||(c.tweenStartTime=Xt),c.tweenEndTime||(c.tweenEndTime=Xt);var Nt=Xt+(l||0)+(Z||0),Dt=Nt+(Dt||0);Dt>c.tweenEndTime&&(c.tweenEndTime=Dt);var Ft,Ht,Vt,Gt,Ut,Dt=["ballisticIn","ballisticOut","ballisticInOut","snapIn","snapOut","snapInOut","slowmoIn","slowmoOut","slowmoInOut"];-1!=Dt.indexOf(u)&&(u=_o(u)),j.rewind&&(u&&(u instanceof Function?Ft=zik(u.reverse()):-1==(Ft=u).indexOf("InOut")&&(-1!=Ft.indexOf("Out")?Ft=Ft.replace("Out","In"):-1!=Ft.indexOf("In")&&(Ft=Ft.replace("In","Out")))),k&&(Ft=k,-1!=Dt.indexOf(Ft)&&(Ft=_o(Ft)))),Ut=u instanceof Function?u:(Vt="get"+u.charAt(0).toUpperCase()+u.slice(1),Gt=zik(ee),Qt=zik(te),zot(Gt)&&zot(Qt)||!createjs.Ease[Vt]?createjs.Ease[u]:(!zot(Qt)&&zot(Gt)&&(Gt=1),!zot(Gt)&&zot(Qt)&&(Qt=.3*1.5),createjs.Ease[Vt](Gt,Qt))),Ft&&(Ht=Ft instanceof Function?Ft:(Vt="get"+Ft.charAt(0).toUpperCase()+Ft.slice(1),Gt=zik(ee),Qt=zik(te),zot(Gt)&&zot(Qt)||!createjs.Ease[Vt]?createjs.Ease[Ft]:(!zot(Qt)&&zot(Gt)&&(Gt=1),!zot(Gt)&&zot(Qt)&&(Qt=.3*1.5),createjs.Ease[Vt](Gt,Qt))));var qt,Qt,Zt=[];for(qt in Q)Zt.push(qt);Zt=Zt.sort().toString(),c.z_twpr?0<!Z&&0<!l&&((Qt=c.z_twpr[Zt])&&qo(Qt,!0)):c.z_twpr={},c.z_twpr[Zt]=X;var Kt,Jt,$t,eo,to,oo,no,ro=!1;j.rewind?(Jt=0,delete j.rewind,z=!0,y=j.rewindWait,j.rewindWait&&(Jt=j.rewindWait,delete j.rewindWait),j.rewindCall&&($t=j.rewindCall,zot(eo=j.rewindParams)&&(eo=c),delete j.rewindCall,delete j.rewindParams),j.rewindWaitCall&&(to=j.rewindWaitCall,zot(oo=j.rewindWaitParams)&&(oo=c),delete j.rewindWaitCall,delete j.rewindWaitParams),0<Z||0<K||0<l?0<Z||0<K?(c.waiting=!0,(xe=c.zimTweens[X]=c.zimTween=createjs.Tween.get(c,{override:j.override}).wait(0<Z?Z:0,!0).wait(0<K?K:0,!0).call(function(e){e.waiting=!1,K=Z=0,Xo(xe)})).timeScale=c.futureRate,Do(xe)):Xo():(Eo(),No())):0<Z||0<K||0<l?0<Z||0<K?(c.waiting=!0,(xe=c.zimTweens[X]=c.zimTween=createjs.Tween.get(c,{override:j.override}).wait(0<Z?Z:0,!0).wait(0<K?K:0,!0).call(function(){K=Z=0,c.waiting=!1,Fo(xe)})).timeScale=c.futureRate,Do(xe)):Fo():(Eo(),Ho()),xe.startPaused=U,xe.rewinding=!1,zot(J)||(xe.timeScale=Jo.Pick.choose(J,null,c)),j.animateCall&&(P=j.animateCall,delete j.animateCall),j.animateParams&&(E=j.animateParams,delete j.animateParams),!L&&O&&(Re&&(c.pathRatio=c.percentComplete&&100!=Math.round(c.percentComplete)?c.percentComplete/100:0,c.percentCompleteNoAngle=100!=Math.round(Re)?Re:0),no=N&&!zot(F)&&F.dispatchEvent?Jo.Ticker.add(function(){Fe&&c.updateEffects(),(He||bt||Et||St)&&lo(),F.dispatchEvent("animation")},Ne):N&&c.dispatchEvent?Jo.Ticker.add(function(){Fe&&c.updateEffects(),(He||bt||Et||St)&&lo(),c.dispatchEvent("animation")},Ne):P&&"function"==typeof P?Jo.Ticker.add(function(){Fe&&c.updateEffects(),(He||bt||Et||St)&&lo(),P(E||c)},Ne):Jo.Ticker.add(function(){Fe&&c.updateEffects(),(He||bt||Et||St)&&lo()},Ne));var io=[1,1,1],lo=function(){var e,t,o,n;!c.parent||xe.passive||xe.startPaused||(V&&z&&(lt<50&&50<c.percentComplete||50<lt&&c.percentComplete<50)&&(rt=c.percentComplete<50),lt=c.percentComplete,He&&(Ue&&(at=He.segmentPoints,tt=He.segmentRatios),(t=V?He.getCurvePoint(c.pathRatio,tt,at):(c.currentPercent=c.startPercent+c.percent*c.pathRatio,e=(1e6+c.currentPercent)%100/100,1==c.pathRatio&&(e+=0<c.percent?1:0),He.getCurvePoint(e,tt,at)))&&(o=c.parent.globalToLocal(t.x,t.y),c.x=o.x,c.y=o.y)),e=Math.abs(Bt-c.x),t=Math.abs(Wt-c.y),o=90==vt||270==vt||-90==vt,Et&&Ct&&(Bt>c.x&&.01<e&&Jo.sign(o?c.scaleY:c.scaleX)==Jo.sign(At)||Bt<c.x&&.01<e&&Jo.sign(o?c.scaleY:c.scaleX)!=Jo.sign(At)||c.percentComplete<99&&1<c.percentComplete&&e<.01&&.01<t&&Jo.sign(o?c.scaleY:c.scaleX)!=Jo.sign(At))&&(o?c.scaleY*=-1:c.scaleX*=-1),St&&Ct&&(Wt>c.y&&.01<t&&Jo.sign(o?c.scaleX:c.scaleY)==Jo.sign(Pt)||Wt<c.y&&.01<t&&Jo.sign(o?c.scaleX:c.scaleY)!=Jo.sign(Pt)||c.percentComplete<99&&1<c.percentComplete&&t<.01&&.01<e&&Jo.sign(o?c.scaleX:c.scaleY)!=Jo.sign(Pt))&&(o?c.scaleX*=-1:c.scaleY*=-1),(bt&&.05<e||bt&&.05<t)&&0!=(n=He==bt?Jo.angle(Bt,Wt,c.x,c.y)+vt:(n=bt.parent?bt.parent.localToLocal(bt.x,bt.y,c.parent):c.parent.globalToLocal(bt.x,bt.y),Jo.angle(c.x,c.y,n.x,n.y)+vt))&&(c.paused&&!pt||(Et&&.01<Bt-c.x&&(n+=180),c.rotation=Math.round(n==vt?c.rotation:n),z&&50<c.percentComplete&&!Et&&(c.rotation+=180))),V&&(n=c.x-Bt+c.y-Wt,2<Math.abs(n)&&(io.push(Jo.sign(n)),io.shift(),xe.forward=function(e){if(Array.isArray(e)){for(var t=0,o=0,n=e.length;o<n;o++)t+=e[o];return t}}(io))),Bt=c.x,Wt=c.y)};(He||bt||Et||St)&&(c.handlePath=lo),zot(c.zimMaskDynamic)||c.zimMaskApply();var ao,so,co,uo,ho,po,go,fo,mo,zo,yo,bo=!1;for(Uo(),c.stopAnimate&&c.stopAnimate.real||(c.stopAnimate=function(e,t,o,n,r){if(c.dynamicAnimation=null,!r||!V){if(zot(e)&&(c.tweenStates={}),t)return c.endTween(null,e),c;if(zot(n)&&(n=!0),null==c.pan&&"Timer"!=c.type&&(null!=c.type&&(c.paused=!0),c.animating=!1),"Pen"==c.type&&c.zimOnPath&&(c.stop(),c.zimOnPath=!1),zot(o)&&(o=!0),n&&V&&(He&&He.off("change",c.zimAnimatePathChange),c.off("mousedown",c.zimAnimateDragDown),c.off("pressmove",c.zimAnimateDragPress),c.off("pressup",c.zimAnimateDragUp),c.amu&&Ne.frame.off("mouseupplus",c.amu),Jo.Ticker.remove(c.zimDragAnimateTicker)),zot(e)){if(!o)return c;for(var i in c.zimBusy=null,createjs.Tween.removeTweens(c),c.zimTweens)Qo(i);c.zimTweens=null,c.zimIdSets=null,c.zimTween=null,Jo.idSets&&Jo.idSets[ke||i]&&(delete Jo.idSets[ke||i],Jo.isEmpty(Jo.idSets)&&delete Jo.idSets),Jo.animatedObjects.remove(c)}else{Array.isArray(e)||(e=[e]);var l=Ko(e);for(i in c.zimTweens)c.zimTweens[i].requestID&&cancelAnimationFrame(c.zimTweens[i].requestID),o&&0<=l.indexOf(i)&&qo(i,n),!o&&l.indexOf(i)<0&&qo(i,n)}return c}c.pauseAnimate()},c.stopAnimate.real=!0,c.pauseAnimate=function(e,t,o,n){if(!1!==e&&c.percentComplete,"pauseOnBlur"==t?t=null:zot(t)&&(c.tweenStates={all:!1===e}),"Pen"==c.type&&(!1===e?c.zimOnPath&&(c.infinite=!0):c.stop()),ho&&!n){if(zot(t))for(var r in c.zimTweens)Zo(r,e);else c.pause(e,t);return c}if(zot(e)&&(e=!0),xt=!1,null!=c.type&&(c.paused=e),c.animating=!e,zot(o)&&(o=!0),zot(t)&&!o)return c;if(zot(t))for(r in c.zimTweens)Zo(r,e);else{Array.isArray(t)||(t=[t]);var i=Ko(t);for(r in c.zimTweens)o&&0<=i.indexOf(r)&&(Zo(r,e),c.tweenStates[r]=!e),!o&&i.indexOf(r)<0&&(Zo(r,e),c.tweenStates[r]=!e)}return"Sprite"==c.type&&(c.running||c.stop()),c}),U&&c.pauseAnimate(!0,X,null,!0),Q.extra&&(ao=Q.extra,delete Q.extra,Array.isArray(ao)||(ao=[ao])),ge=0;ge<fe.length;ge++){var vo=fe[ge];Q[vo]&&(zot(ao)&&(ao=[]),!0===(co=Q[so=vo])?ao.push({outputProp:me[so]}):Array.isArray(co)?ao.push({outputProp:me[so],outputMin:co[0],outputMax:co[1],inputMin:co[2],inputMax:co[3]}):ao.push({outputProp:me[so],outputMax:co}),delete Q[vo])}if(ao)for(c.zimStartScaleX=c.scaleX,c.zimStartScaleY=c.scaleY,xe.extraTickers=[],ge=0;ge<ao.length;ge++){var De,wo=ao[ge];for(De in zot(wo.inputObj)&&(wo.inputObj=c),zot(wo.inputProp)&&(wo.inputProp="y"),zot(wo.inputMin)&&(wo.inputMin=0),zot(wo.inputMax)&&(wo.inputMax="x"==wo.inputProp?Ne.width:Ne.height),zot(wo.outputObj)&&(wo.outputObj=c),zot(wo.outputProp)&&(wo.outputProp="scale"),zot(wo.outputMin)&&(wo.outputMin=0),zot(wo.outputMax)&&(wo.outputMax=wo.outputMin+1),zot(wo.constrain)&&(wo.constrain=!0),wo)Q[De]=Jo.Pick.choose(Q[De],null,c);"percentSpeed"==wo.outputProp&&(H=!0),uo=new Jo.Proportion(wo.inputMin,wo.inputMax,wo.outputMin,wo.outputMax,wo.factor,wo.outputRound);var Co=function(){var n=wo,r=uo;return function(){var e,t=n.outputObj,o=n.inputObj[n.inputProp];"x"!=n.inputProp&&"y"!=n.inputProp||n.inputObj.parent&&(o=n.inputObj.parent.localToGlobal(o,o)[n.inputProp]),e=n.constrain?Jo.constrain(r.convert(o),n.outputMin,n.outputMax):r.convert(o),Number.isNaN(e)&&(e=null!=n.outputMin?n.outputMin:0),"scale"==n.outputProp?(t.scaleX=Jo.sign(t.scaleX)*e,t.scaleY=Jo.sign(t.scaleY)*e):"scaleX"==n.outputProp?t.scaleX=Jo.sign(t.scaleX)*e:"scaleY"==n.outputProp?t.scaleY=Jo.sign(t.scaleY)*e:"layer"==n.outputProp?!t.parent||(o=Jo.constrain(Math.round(e),0,t.parent.numChildren-1))!=t.parent.getChildIndex(t)&&t.parent.setChildIndex(t,o):"percentSpeed"==n.outputProp?t[n.outputProp]=100*e:t[n.outputProp]=e}}();Co(),xe.extraTickers.push(Jo.Ticker.add(Co,Ne))}return H&&(c.dynamicAnimation=!0),(H||c.zimAnimateDragDown)&&(H&&(ho=!0,c.pauseAnimate(!0,X,null,!0),null!=c.type&&(c.paused=!1),c.animating=!0,xe.currentTime=0,po=xe,zot(c.percentSpeed)&&(c.percentSpeed=xe.startPaused?0:100),go=1e3/60,xe.currentTime=0,fo=!K&&!Z&&!l&&!It&&j.loop,G&&j.loop&&!It&&(G=!1),mo=t+(z?x||t:0)+(y||0)+(i||0),mo*="s"==ce?1e3:1,i=1,j.loop&&It&&(i=It),G&&(zo=mo*i),function e(){var t;xe.requestID=requestAnimationFrame(e),!H||xe.startPaused&&0==c.percentSpeed||(xe.startPaused=!1,xe!=po&&((po=xe).currentTime=0,c.pauseAnimate(!0,X,null,!0),null!=c.type&&(c.paused=!1),c.animating=!0,fo=!K&&!Z&&!l&&!It&&j.loop),fo&&(xe.currentTime+=1e4*mo,xe.setPosition(xe.currentTime,!0),fo=!1),t=xe.currentTime+go*c.percentSpeed/100,zo&&0==l&&(t=Jo.constrain(t,0,zo)),xe.currentTime=t,xe.setPosition(xe.currentTime),(He||bt||Et||St)&&lo(),Ne.update())}()),c.pause=function(e,t){if(zot(e)&&(e=!0),zot(t)&&(t=0),e){if(c.zimAnimateDragDown&&(V=!1,c.cur("default"),He&&He.off("change",c.zimAnimatePathChange),c.off("mousedown",c.zimAnimateDragDown),c.off("pressmove",c.zimAnimateDragPress),c.off("pressup",c.zimAnimateDragUp),!H))return;yo=c.percentSpeed,0<t?Jo.animate({target:c,props:{percentSpeed:0},override:!1,ticker:!1,time:t,call:function(){c.percentSpeed=0,null!=c.type&&(c.paused=!0),c.animating=!1,H=!1,c.dispatchEvent("pause")}}):(xe.startPaused=!1,c.percentSpeed=0,null!=c.type&&(c.paused=!0),c.animating=!1,H=!1,setTimeout(function(){c.dispatchEvent("pause")},10))}else{if(c.zimAnimateDragDown&&(V=!0,c.cur("pointer"),He&&(c.zimAnimatePathChange=He.on("change",c.zimAnimatePathChange)),c.zimAnimateDragDown=c.on("mousedown",c.zimAnimateDragDown),c.zimAnimateDragPress=c.on("pressmove",c.zimAnimateDragPress),c.zimAnimateDragUp=c.on("pressup",c.zimAnimateDragUp),!H&&0!=U))return;xt=!1,xe.currentTime=xe.position,0<t?Jo.animate({target:c,props:{percentSpeed:yo},override:!1,ticker:!1,time:t,call:function(){c.percentSpeed=yo,c.paused=!1,c.animating=!0,H=!0}}):(c.percentSpeed=yo,null!=c.type&&(c.paused=!1),c.animating=!0,H=!0)}return c}),c}}}function xo(e,t){if("."!=t.substr(0,1))return"transform"==t&&e.style?e.style.transform:e[t];for(var o=t.split("."),n=e,r=1;r<o.length;r++)n=n[o[r]];return n}function ko(e,t,o){if("."==t.substr(0,1)){for(var n=t.split("."),r=e,i=1;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=o}else e[t]=o}function To(){F.animating=!1,d&&d(h||F)}function Ao(){c.zimLastObj&&Jo.loop(c.zimLastObj,function(e){zot(c.zimTweenOriginals[e])||(c[e]=c.zimTweenOriginals[e],c.zimLastObj[e]=c.zimTweenOriginals[e])});for(var e,t,i,o=l,n=0,r=0;r<Q.length;r++)zot((i=Q[r]).target)||(zot(i.time)&&(i.time=we),o+=i.wait||0,e=i.time,P&&(i.animateCall?function(){var t=i.animateCall,o=i.animateParams,n=P,r=E;i.animateCall=function(e){t(o||e),n(r||e)}}():(i.animateCall=P,i.animateParams=E)),t=zot(i.rewindTime)?e:i.rewindTime,i.rewind&&(e=e+t+(i.rewindWait||0)),i.loop&&(e*=i.loopCount,e+=(i.loopCount-1)*(i.loopWait||0)),zot(i.params)&&(i.params=i.target),Pe=i.target,o<0&&(n+=o,o=0),t={target:i.target,obj:Jo.copy(i.obj),seriesWait:n,wait:o,waitedCall:i.waitedCall,waitedParams:i.waitedParams,time:i.time,ease:i.ease,from:i.from,rewind:i.rewind,call:i.call,params:i.params,loop:i.loop,loopCount:i.loopCount,loopWait:i.loopWait,loopCall:i.loopCall,loopParams:i.loopParams,loopWaitCall:i.loopWaitCall,loopWaitParams:i.loopWaitParams,loopPick:i.loopPick,rewindWait:i.rewindWait,rewindCall:i.rewindCall,rewindParams:i.rewindParams,rewindWaitCall:i.rewindWaitCall,rewindWaitParams:i.rewindWaitParams,rewindTime:i.rewindTime,rewindEase:i.rewindEase,startCall:i.startCall,startParams:i.startParams,animateCall:i.animateCall,animateParams:i.animateParams,set:Jo.copy(i.masterSet),events:N,rate:c.futureRate,pauseOnBlur:i.pauseOnBlur,easeAmount:i.easeAmount,easeFrequency:i.easeFrequency,override:!1,id:X,clean:!(!a&&!i.loop)||q},r==Q.length-1&&function(e){var t=e.call,o=e.params;j.loop&&(!j.count||se<j.count)?e.call=function(){function e(){for(var e=0;e<Ae.objects.length;e++)Ae.objects[e].set&&Ae.objects[e].set(Ae.values[e]);j.loopWaitCall&&"function"==typeof j.loopWaitCall&&j.loopWaitCall(j.loopWaitParams||c),Ao()}t&&"function"==typeof t&&t(o||c),j.loopCall&&"function"==typeof j.loopCall&&j.loopCall(j.loopParams||c),j.loopWait?(zot(c.zimTweens)&&(c.zimTweens={}),(xe=c.zimTweens[X]=c.zimTween=createjs.Tween.get(c,{override:j.override}).wait(j.loopWait,!0).call(e)).timeScale=c.futureRate):e()}:e.call=function(){t&&"function"==typeof t&&t(o),zot(h)&&(h=Pe),d&&"function"==typeof d&&d(h),c.zimLastObj=null},se++}(t),Jo.animate(t),n+=o+e,o=0)}function Po(){zot(X)?X=Jo.makeID(null,10):(X=String(X),Te=X),zot(c.zimIdSets)&&(c.zimIdSets={}),zot(c.zimIdSets[X])?c.zimTweens&&!zot(c.zimTweens[X])&&(ke=X,X=Jo.makeID(null,10),c.zimIdSets[ke]=[ke],c.zimTweens[ke].zimIdSet=ke,c.zimIdSets[ke].push(X)):(ke=X,X=Jo.makeID(null,10),c.zimIdSets[ke].push(X))}function Eo(){So(),R&&!_e&&(Q=Wo(c,Q,Y,!0))}function So(){var e;for(ge in c.zimLastObj||(c.zimLastObj={}),Q){if("string"==typeof Q[ge]&&"transform"!=ge){if(ge.substring&&"."==ge.substring(0,1)){if("+"==Q[ge].substr(0,1)||"-"==Q[ge].substr(0,1))continue}else if("+"==Q[ge].substr(0,1))continue;if("rgb"==Q[ge].substr(0,3))continue;e=(c.zimLastObj&&!zot(c.zimLastObj[ge])?c.zimLastObj:c)[ge],Q[ge]=e+Number(Q[ge].replace(/\s/g,""))}c.zimLastObj[ge]=(z?c.zimTweenOriginals:Q)[ge]}}function Bo(r,e){c.zimTween.startPaused=!1,H?zot(c.zimTween.currentTime)||(c.zimTween.currentTime=c.zimTween.currentTime-c.zimTween.position+r*c.zimTween.duration/100):c.zimTweens?Jo.loop(c.zimTweens,function(e,t,o){var n=c.tweenStartTime+(c.tweenEndTime-c.tweenStartTime)*r/100,n=t.zimLoop&&n<=t.startTime?0:t.zimLoop&&n>t.startTime+t.duration?(n-t.startTime)%t.duration:n-t.startTime;t.percentComplete=Math.max(0,Math.min(100,n/t.duration*100))},!0):c.zimTween.setPosition(Math.round(r*c.zimTween.duration/100)),e&&He&&!1!==Q.orient&&He.getCurvePoint&&(c.rotation=He.getCurvePoint(c.pathRatio,null,null,!0).angle+(vt||0)),yt&&void 0!==ot&&(ot=r),c.handlePath&&c.handlePath()}function Wo(e,t,o,n){_e=!0,He&&(!zot(e.percentComplete)||o&&!zot(o.percentComplete))&&zot((o=o||{}).pathRatio)&&(o.pathRatio=zot(o.percentComplete)?e.percentComplete/100:o.percentComplete/100);var r={};for(ge in t)o&&!zot(o[ge])?r[ge]=o[ge]:r[ge]=e[ge],n&&(e[ge]=t[ge]);return r}function Io(e){return(e.latestTween||e).percentComplete}function Mo(e,t){e&&(e.zimTween&&(e.zimTween.startPaused=!1),e.latestTween&&(e.latestTween.percentComplete=t),yt&&void 0!==ot&&(ot=value),e.handlePath&&e.handlePath())}function Oo(){if((0<Ot&&(c.waiting=!1),j.loop)&&(B&&"function"==typeof B&&(o=zot(W)?c:W,B(o)),Mt&&"function"==typeof Mt&&Mt(jt||c),m)){var e,t,o=Jo.Pick.choose(c.futureRate,null,c);if(zot(c.futureRate)||(xe.timeScale=o),zot(qe.scale)||(e=Jo.Pick.choose(qe.scale,null,c)),!R&&xe.step&&xe.step.prev&&xe.step.prev.props)for(var n in xe.step.prev.props)0<=fe.indexOf(n)||("string"==typeof(t=Jo.Pick.choose(qe[n],null,c))&&"transform"!=n&&"+"!=t.substr(0,1)&&"-"!=t.substr(0,1)&&(t=(c.zimLastObj&&!zot(c.zimLastObj[n])?c.zimLastObj:c)[n]+Number(t.replace(/\s/g,""))),c.zimLastObj[n]=z?c.zimTweenOriginals[n]:t,z?(zot(qe[n])||(xe.step.prev.props[n]=t),"scaleX"!=n||zot(e)||(xe.step.prev.props.scaleX=e),"scaleY"!=n||zot(e)||(xe.step.prev.props.scaleY=e)):(zot(qe[n])||(xe.step.props[n]=t),"scaleX"!=n||zot(e)||(xe.step.props.scaleX=e),"scaleY"!=n||zot(e)||(xe.step.props.scaleY=e)))}}function jo(){Lt&&"function"==typeof Lt&&Lt(Yt||c)}function Lo(e){e.startCalled||(e.startCalled=!0,_t&&"function"==typeof _t&&_t(Rt||c))}function Do(e){c.latestTween=e,c.waiting?e.startTime=Date.now():e.startTime=Nt,e.zimLoop=a,c.animating||c.pauseAnimate(!0),Object.defineProperty(e,"percentComplete",{get:function(){return this.position/this.duration*100},set:function(e){this.setPosition(e*this.duration/100)}})}function _o(e){var t=[.4,.75,.9,.95],o=[.99,-.69,.53,.014],n=[1.18,.69,1,.96];return"ballisticIn"==e?e=zik(Jo.zimEase(t)):"ballisticOut"==e?e=zik(Jo.zimEase(t).reverse()):"ballisticInOut"==e?e=zik(Jo.zimEase(t,null,!0)):"snapIn"==e?e=zik(Jo.zimEase(o)):"snapOut"==e?e=zik(Jo.zimEase(o).reverse()):"snapInOut"==e?e=zik(Jo.zimEase(o,null,!0)):"slowmoIn"==e?e=zik(Jo.zimEase(n)):"slowmoOut"==e?e=zik(Jo.zimEase(n).reverse()):"slowmoInOut"==e&&(e=zik(Jo.zimEase(n,null,!0))),e}function Ro(){0<Jt&&(c.waiting=!1),$t&&"function"==typeof $t&&$t(eo)}function Yo(){0<Jt&&(c.waiting=!0),to&&"function"==typeof to&&to(oo)}function Xo(e){Eo(),0<l?(c.waiting=!0,(xe=c.zimTweens[X]=c.zimTween=createjs.Tween.get(c,{override:j.override}).wait(l,!0).call(function(){c.waiting=!1,l=0,No(xe),o&&"function"==typeof o&&o(zot(n)?c:n)})).timeScale=c.futureRate,e&&Vo(e,xe),Do(xe)):No(e)}function No(e){ro||(Kt=function(){for(var e in Q)if(L&&c.style)zot(Y[e])||R?wt[e]="transform"==e?c.style[e]:zum(c.style[e]):wt[e]=Y[e];else if(zot(Y[e])||R)if("."==e.substr(0,1)){for(var t=e.split("."),o=c,n=1;n<t.length;n++)o=o[t[n]];wt[e]=o}else wt[e]=c[e];else wt[e]=Y[e];return wt}(),ro=!0),c.set&&!R&&c.set(Y),(xe=c.zimTweens[X]=c.zimTween=createjs.Tween.get(c,j).call(Lo).to(Q,we,Ut).call(Yo).wait(Jt,!0).call(Ro).to(Kt,Ce,Ht).call(Go).wait(Ot,!0).call(Oo)).timeScale=c.futureRate,e&&Vo(e,xe),Uo(),Do(xe)}function Fo(e){Eo(),0<l?(c.waiting=!0,(xe=c.zimTweens[X]=c.zimTween=createjs.Tween.get(c,{override:j.override}).wait(l,!0).call(function(){l=0,c.waiting=!1,Ho(xe),o&&"function"==typeof o&&o(zot(n)?c:n)})).timeScale=c.futureRate,e&&Vo(e,xe),Do(xe)):Ho(e)}function Ho(e){c.set&&!R&&c.set(Y),(xe=c.zimTweens[X]=c.zimTween=createjs.Tween.get(c,j).call(Lo).to(Q,we,Ut).call(Go).wait(Ot,!0).call(Oo)).timeScale=c.futureRate,e&&Vo(e,xe),Uo(),Do(xe)}function Vo(e,t){t.zimIdSet=e.zimIdSet,t.zimObj=e.zimObj,t.zimTicker=e.zimTicker,t.zimExtraTickers=e.zimExtraTickers,t.requestID=e.requestID}function Go(){if(c.seriesTweens&&c.seriesTweens.shift(),c.seriesCalls&&c.seriesCalls.shift(),c.seriesParams&&c.seriesParams.shift(),!c.paused||"Sprite"==c.type){if(j.loop){if(!(0<It))return 0<Ot&&(c.waiting=!0),void jo();if(se<It)return 0<Ot&&(c.waiting=!0),jo(),void se++;z?c.set&&c.set(wt):c.set&&c.set(Q)}else z?c.set&&c.set(wt):c.set&&c.set(Q);var e;q?qo(X):c.seriesTweens&&0!=c.seriesTweens.length||c.pauseAnimate(!0,X),!j.loop&&B&&"function"==typeof B&&(e=zot(W)?c:W,B(e)),d&&"function"==typeof d&&d(h)}}function Uo(){xe.zimObj=Q,xe.zimTicker=no,xe.zimPaused=bo,ke&&(xe.zimIdSet=ke),Te&&(zot(Jo.idSets)&&(Jo.idSets={}),zot(Jo.idSets[Te])?Jo.idSets[Te]=[c]:Jo.idSets[Te].indexOf(c)<0&&Jo.idSets[Te].push(c)),Jo.animatedObjects||(Jo.animatedObjects=new Jo.Dictionary(!0)),Jo.animatedObjects.add(c,!0)}function qo(e,t){var o,n;c.tweenStates&&c.tweenStates[e]&&delete c.tweenStates[e],zot(c.zimTweens)||zot(c.zimTweens[e])||(c.zimX=null,c.zimY=null,function(e){if(c.zimBusy){for(var t in e)delete c.zimBusy[t];Jo.isEmpty(c.zimBusy)&&(c.zimBusy=null)}}(c.zimTweens[e].zimObj),c.zimTweens[e].paused=!0,Qo(e),!zot(o=c.zimTweens[e].zimIdSet)&&c.zimIdSets&&((n=c.zimIdSets[o])&&n.splice(n.indexOf(e),1),n&&0==n.length&&(delete c.zimIdSets[o],Jo.isEmpty(c.zimIdSets)&&delete c.zimIdSets)),"Pen"==c.type&&c.zimOnPath&&(c.stop(),c.zimOnPath=!1),delete c.zimTweens[e],c.zimLastObj=null,!t&&Jo.isEmpty(c.zimTweens)&&c.stopAnimate(null,null,null,!1,!0),c.zimTweens&&c.zimTweens[e]||c.zimIdSets&&c.zimIdSets[o||e]||Jo.idSets&&Jo.idSets[o||e]&&(Jo.idSets[o||e],0<=(t=Jo.idSets[o||e].indexOf(c))&&Jo.idSets[o||e].splice(t,1),Jo.idSets[o||e].length<=0&&(delete Jo.idSets[o||e],Jo.isEmpty(Jo.idSets)&&delete Jo.idSets)))}function Qo(o){!function(){var e=c.zimTweens[o].zimTicker;if(c.zimTweens[o].extraTickers)for(var t=0;t<c.zimTweens[o].extraTickers.length;t++)Jo.Ticker.remove(c.zimTweens[o].extraTickers[t]);c.zimTweens[o].requestID&&cancelAnimationFrame(c.zimTweens[o].requestID),e&&setTimeout(function(){e&&Jo.Ticker.remove(e),e=null},200)}()}function Zo(e,t){var o=c.zimTweens[e];(o.paused=t)!=o.zimPaused&&((o.zimPaused=t)?o.zimTicker&&(o.zimAnimateTimeout=setTimeout(function(){Jo.Ticker.remove(o.zimTicker)},200)):(o.startPaused=!1,clearTimeout(o.zimAnimateTimeout),o.zimTicker&&(o.zimTicker=Jo.Ticker.add(o.zimTicker,Ne))))}function Ko(e){for(var t=[],o=0;o<e.length;o++)c.zimIdSets&&!zot(c.zimIdSets[e[o]])?t=t.concat(c.zimIdSets[e[o]]):t.push(e[o]);return t}},Jo.stopAnimate=function(e,t){if(z_d("45.12"),zot(e)){if(Jo.animatedObjects)for(r=Jo.animatedObjects.length-1;0<=r;r--)Jo.animatedObjects.objects[r].stopAnimate(null,t)}else if(Array.isArray(e)||(e=[e]),Jo.idSets)for(var o=0;o<e.length;o++){var n=e[o];if(Jo.idSets[n])for(var r=Jo.idSets[n].length-1;0<=r;r--)Jo.idSets[n][r].stopAnimate(n,t)}},Jo.stopZimAnimate=function(e){z_d("45.1"),Jo.stopAnimate(e)},Jo.pauseAnimate=function(e,t){var o;if(z_d("45.22"),zot(e)&&(e=!0),zot(t)||"pauseOnBlur"==t){if(Jo.animatedObjects)for(o=Jo.animatedObjects.length-1;0<=o;o--)Jo.animatedObjects.objects[o].pauseAnimate(e,t)}else if(Array.isArray(t)||(t=[t]),Jo.idSets)for(var n=0;n<t.length;n++){var r=t[n];if(Jo.idSets[r])for(o=Jo.idSets[r].length-1;0<=o;o--)Jo.idSets[r][o].pauseAnimate(e,r)}},Jo.pauseZimAnimate=function(e,t){z_d("45.2"),Jo.pauseAnimate(e,t)},Jo.wiggle=function(i,l,a,s,c,u,d,e,h,p,g,f,m,t,z,y,o){var n;if(n=zob(Jo.wiggle,arguments,"target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker, wait, pauseOnBlur, endOnStart"))return n;if(z_d("45.25"),zot(i)||zot(l)||zot(s))return i;zot(c)&&(c=s),zot(a)&&(a=i[l]);var b=$o(u,null,40);zot(u)&&(u="s"==b?1:1e3),zot(d)&&(d=u),en(d,b,40),zot(p)&&(p="quadInOut"),zot(g)&&(g=!1),zot(f)&&(f=Jo.makeID()),zot(h)&&(h="both"),zot(m)&&(m="both"),zot(t)&&(t=!0),zot(z)&&(z=0),zot(o)&&(o=!0),en(e,b,40),zot(e)||(i.wiggleTimeout=setTimeout(function(){var e;i.stopAnimate(f),o&&((e={})[l]=Jo.Pick.choose(a),Jo.animate({target:i,obj:e,time:0})),i.dispatchEvent("wigglestop")},e*("s"==b?1e3:1)));var v,w,C,x=0;function k(){var e=!1,t=w&&w-Date.now()<=C?(e=!0,(w-Date.now())/("s"==b?1e3:1)*("negative"==h||"positive"==h?.5:1)):Jo.rand(Jo.Pick.choose(u),Jo.Pick.choose(d),!1),o={},n={};n[l]=Jo.Pick.choose(a),r="negative"==h||0==x&&"negative"==m?-Jo.rand(Jo.Pick.choose(s),Jo.Pick.choose(c),g):"positive"==h||0==x&&"positive"==m?Jo.rand(Jo.Pick.choose(s),Jo.Pick.choose(c),g):0==x?Jo.rand(Jo.Pick.choose(s),Jo.Pick.choose(c),g,!0):Jo.rand(Jo.Pick.choose(s),Jo.Pick.choose(c),g)*Jo.sign(v)*-1,e&&(r=0),o[l]=Jo.Pick.choose(a)+r,0==x&&(t/=2),v=r,x++;var r=i.futureRate;"negative"==h||"positive"==h?Jo.animate({target:i,obj:o,set:n,ease:p,time:2*t,wait:zik(z),rewind:!0,override:!1,call:k,id:f,ticker:!!i.stage,timeCheck:!1,pauseOnBlur:y}):Jo.animate({target:i,obj:o,ease:p,time:t,wait:zik(z),override:!1,call:k,id:f,ticker:!!i.stage,timeCheck:!1,pauseOnBlur:y}),r&&(i.futureRate=r)}return 0<e&&o&&(w=Date.now()+e*("s"==b?1e3:1),C=d*("s"==b?1e3:1)*("negative"==h||"positive"==h?2:1)),i.addTo&&!i.stage&&"Uniforms"==!i.type?i.added(k):k(),i},Jo.loop=function(t,o,n,e,r,i,l,a,s,c){if(f=zob(Jo.loop,arguments,"obj, call, reverse, interval, step, start, end, immediate, complete, completeParams"))return f;if(Jo.zimLoopCheck||z_d("45.3"),Jo.zimLoopCheck=!0,!zot(t)&&!zot(o)){zot(n)&&(n=!1),zot(e)&&(e=0),(zot(r)||r<=0)&&(r=1),zot(a)&&(a=!0),t.constructor===Number&&(t=Number(t)),t.constructor===String&&(t=String(t));var u,d,h,p,g,f=0===e&&s&&"function"==typeof s,m="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":t instanceof NodeList?"nodelist":"string"==typeof t?"string":t instanceof HTMLCollection?"htmlcollection":t.type&&"Dictionary"==t.type?"Dictionary":"invalid";if("container"!=m||t.addChild){if("number"==m||"string"==m||"array"==m||"nodelist"==m||"htmlcollection"==m||"Dictionary"==m){if("Dictionary"==m&&(g=Jo.copy(t.values),t=Jo.copy(t.objects)),u="number"==m?t:t.length,0==(h=y(u-1)))return!0;if(n)if(0===e){for(d=i;l<=d;d-=r)if(void 0!==(p="number"==m?o(d,h,i,l,t):"array"==m||"string"==m?o(t[d],d,h,i,l,t):"Dictionary"==m?o(t[d],g[d],d,h,i,l,t):o(t.item(d),d,h,i,l,t))&&"next"!=p)return p}else Jo.interval(e,function(e){if(d=e.count,a||d--,r&&(d*=r),d=i-d,"next"==(p="number"==m?o(d,h,i,l,t,e):"array"==m||"string"==m?o(t[d],d,h,i,l,t,e):"Dictionary"==m?o(t[d],g[d],d,h,i,l,t,e):o(t.item(d),d,h,i,l,t,e)))e.next();else if(void 0!==p)return e.clear(),p},h,a,null,null,s,c);else if(0===e){for(d=i;d<=l;d+=r)if(void 0!==(p="number"==m?o(d,h,i,l,t):"array"==m||"string"==m?o(t[d],d,h,i,l,t):"Dictionary"==m?o(t[d],g[d],d,h,i,l,t):o(t.item(d),d,h,i,l,t))&&"next"!=p)return p}else Jo.interval(e,function(e){if(d=e.count+i,a||d--,1!=r&&(d=d*r-i),"next"==(p="number"==m?o(d,h,i,l,t,e):"array"==m||"string"==m?o(t[d],d,h,i,l,t,e):"Dictionary"==m?o(t[d],g[d],d,h,i,l,t,e):o(t.item(d),d,h,i,l,t,e)))e.next();else if(void 0!==p)return e.clear(),p},h,a,null,null,s,c);return f&&s(c),!0}if("object"==m){u=0;var z=[];for(d in t)u++,z.push(d);if(0==(h=y(u-1)))return!0;if(n)if(0===e){for(d=i;l<=d;d-=r)if(void 0!==(p=o(z[d],t[z[d]],d,h,i,l,t))&&"next"!=p)return p}else Jo.interval(e,function(e){if(d=e.count,a||d--,r&&(d*=r),"next"==(p=o(z[d=i-d],t[z[d]],d,h,i,l,t,e)))e.next();else if(void 0!==p)return e.clear(),p},h,a,null,null,s,c);else if(0===e){for(d=i;d<=l;d+=r)if(void 0!==(p=o(z[d],t[z[d]],d,h,i,l,t))&&"next"!=p)return p}else Jo.interval(e,function(e){if(d=e.count+i,a||d--,1!=r&&(d=d*r-i),"next"==(p=o(z[d],t[z[d]],d,h,i,l,t,e)))e.next();else if(void 0!==p)return e.clear(),p},h,a,null,null,s,c);return f&&s(c),!0}if(0!=(h=y(t.numChildren-1))){if(n)if(0===e){for(d=i;l<=d;d-=r)if(void 0!==(p=o(t.getChildAt(d),d,h,i,l,t))&&"next"!=p)return p}else Jo.interval(e,function(e){if(d=e.count,a||d--,r&&(d*=r),d=i-d,"next"==(p=o(t.getChildAt(d),d,h,i,l,t,e)))e.next();else if(void 0!==p)return e.clear(),p},h,a,null,null,s,c);else if(0===e){for(d=i;d<=l;d+=r)if(void 0!==(p=o(t.getChildAt(d),d,h,i,l,t))&&"next"!=p)return p}else Jo.interval(e,function(e){if(d=e.count+i,a||d--,1!=r&&(d=d*r-i),"next"==(p=o(t.getChildAt(d),d,h,i,l,t,e)))e.next();else if(void 0!==p)return e.clear(),p},h,a,null,null,s,c);return f&&s(c),!0}}}function y(e){return zot(i)&&(i=n?e:0),zot(l)&&(l=n?0:e),n&&i<l||!n&&l<i||(i<0&&l)<0||e<i&&e<l?0:(i=Math.max(0,Math.min(i,e)),l=Math.max(0,Math.min(l,e)),Math.floor((n?i-l:l-i)/r)+1)}},Jo.scaleTo=function(e,t,o,n,r,i,l){if(c=zob(Jo.scaleTo,arguments,"obj, boundObj, percentX, percentY, type, boundsOnly, simple"))return c;if("AC"==e.type&&WW.zdf)return WW.zdf.ac("scaleTo",arguments),e;if(z_d("43"),zot(t)&&(t=WW.zdf&&WW.zdf.stage?WW.zdf.stage:null),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - scaleTo(): please provide an object (with setBounds) to scale"),e;if(zot(t)||!t.getBounds||!t.getBounds())return zog("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to"),e;zot(o)&&(o=-1),zot(n)&&(n=-1),-1==o&&-1==n&&(o=n=100,zot(r)&&(r="fill")),zot(r)&&(r="fit"),"smallest"==r?r="fit":"biggest"==r||"outside"==r||"largest"==r?r="fill":"both"!=r&&"stretch"!=r||(r="full"),zot(i)&&(i=!1),zot(l)&&(l=!1);var a,s,c=t.getBounds().width*o/100*(i?1:t.scaleX),i=t.getBounds().height*n/100*(i?1:t.scaleY);return"Stage"!=t.type&&"StageGL"!=t.type||(c=t.width*o/100,i=t.height*n/100),l?(a=e.getBounds().height,s=e.getBounds().width):(a=(l=Jo.boundsToGlobal(e)).height/e.scaleX,s=l.width/e.scaleY,(isNaN(a)||isNaN(s)||5e3<a)&&(a=e.getBounds().height,s=e.getBounds().width)),-1!=o&&-1!=n||"full"==r?"full"==r?(e.scaleX=-1!=o?c/s:e.scaleX,e.scaleY=-1!=n?i/a:e.scaleY):(r="fill"==r?Math.max(c/s,i/a):Math.min(c/s,i/a),Jo.sca(e,r)):-1==o?Jo.sca(e,i/a):Jo.sca(e,c/s),e},Jo.fit=function(e,t,o,n,r,i){if(g=zob(Jo.fit,arguments,"obj, left, top, width, height, type"))return g;if("AC"==e.type&&WW.zdf)return WW.zdf.ac("fit",arguments),e;if(z_d("46"),!zot(e)&&e.getBounds){if(e.getBounds()){if(zot(t)){if(!e.stage)return void zogy("zim methods - fit(): please add boundary dimensions or add obj to stage first");if(!e.stage.getBounds())return void zogy("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");o=t=0,n=e.stage.getBounds().width,r=e.stage.getBounds().height}!0===i?i="fit":!1===i&&(i="fill"),zot(i)&&(i="fit"),e.scaleX=e.scaleY=1;var l,a,s,c,u,d=n,h=r,p=e.getBounds().width,g=e.getBounds().height;return"full"==i?(e.scaleX=s=d/p,e.scaleY=c=h/g,l=d,a=h):("fit"==i?u=p/g<=d/h?h/g:d/p:"fill"==i&&(u=p/g<=d/h?d/p:h/g),s=c=u),l=p*(e.scaleX=s),a=g*(e.scaleY=c),e.x=(e.regX-e.getBounds().x)*s+t+(d-l)/2,e.y=(e.regY-e.getBounds().y)*c+o+(h-a)/2,{x:e.x,y:e.y,width:l,height:a,scale:u,scaleX:s,scaleY:c,bX:t,bY:o,bWidth:n,bHeight:r}}zogy("zim methods - fit(): please setBounds() on object")}},Jo.boundsCheck=!1,Jo.boundsToGlobal=function(e,t,o,n,r){if(Jo.boundsCheck||(z_d("40"),Jo.boundsCheck=!0),!zot(e)&&e.getBounds){if(zot(o)&&(o=!1),r&&!e.getBounds&&!e.getBounds())return e;var i,l,a,s=e.getBounds();if(s||!zot(t)){t&&(s=t),r=r&&r.type&&"Stage"!=r.type&&"StageGL"!=r.type?(i=e.localToLocal(s.x,s.y,r),l=e.localToLocal(s.x+s.width,s.y,r),a=e.localToLocal(s.x+s.width,s.y+s.height,r),e.localToLocal(s.x,s.y+s.height,r)):o?(i=e.globalToLocal(s.x,s.y),l=e.globalToLocal(s.x+s.width,s.y),a=e.globalToLocal(s.x+s.width,s.y+s.height),e.globalToLocal(s.x,s.y+s.height)):(i=e.localToGlobal(s.x,s.y),l=e.localToGlobal(s.x+s.width,s.y),a=e.localToGlobal(s.x+s.width,s.y+s.height),e.localToGlobal(s.x,s.y+s.height));o=Math.min(i.x,l.x,a.x,r.x),e=Math.min(i.y,l.y,a.y,r.y),s=Math.max(i.x,l.x,a.x,r.x),r=Math.max(i.y,l.y,a.y,r.y);return new createjs.Rectangle(o,e,s-o,r-e)}zogy("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)")}},Jo.resetBounds=function(e,t,o,n,r,i){var l,a,s,c;return(l=zob(Jo.resetBounds,arguments,"obj, a, b, c, d, margin"))?l:(z_d("40.5"),r=zot(n)?(s=t,c=a=0,o):(a=t,s=n,c=o,r),zot(r)&&(r=s),zot(t)?e.setBounds(null):e.setBounds(a,c,s,r),i&&(o=e.getBounds())&&e.setBounds(o.x-i,o.y-i,o.width+2*i,o.height+2*i),e)},Jo.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},Jo.duplicate=function(e,t){z_d("45.6");var o,n=e.clone(t);for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&null==n[o]&&"parent"!=o&&"zimTouch"!=o&&(n[o]=e[o]);return n},Jo.expand=function(e,t,o,n,r){var i,l;if(l=zob(Jo.expand,arguments,"obj, padding, paddingV, paddingRight, paddingBottom"))return l;if("AC"==e.type&&WW.zdf)return WW.zdf.ac("expand",arguments),e;if(z_d("50"),zot(e)||!e.getBounds||!e.getBounds())return zogy("zim methods - expand(): please provide object with bounds set"),e;zot(t)&&(t=20),zot(o)&&(o=t),l=zot(n)&&zot(r)?(i=n=t,r=o):(zot(n)&&(n=t),zot(r)&&(r=o),i=t,o);t=e.getBounds(),o=new Jo.Shape({style:!1});return o.graphics.f("rgba(0,0,0,.01)").r(t.x-i,t.y-l,t.width+i+n,t.height+l+r),e.hitArea=o,e},Jo.setSwipe=function(i,e){if(z_d("34"),!zot(i)&&i.on)return i.zimNoSwipe=!e||null,i instanceof createjs.Container&&function e(t){var o=t.numChildren;var n;for(var r=0;r<o;r++)(n=t.getChildAt(r)).zimNoSwipe=i.zimNoSwipe,n instanceof createjs.Container&&e(n)}(i),i},Jo.setMask=function(o,n,r){if(z_d("50.1"),zot(o)&&zogy("zim methods - setMask(): please provide obj"),zot(n))return e(),o;var i,l=o.stage||(WW.zdf?WW.zdf.stage:null);function e(){o.zimMask&&o.zimMask.parent&&o.zimMask.parent.removeChild(o.zimMask),o.zimMask=null,o.zimMaskTicker&&Jo.Ticker.remove(o.zimMaskTicker),o.mask=null}function t(){if(r&&(!l||!n.stage))return o;var e,t;i&&(i.dispose?i.dispose():n.removeChildAt(0)),i=null,o.zimMask=n.zimMask=i=n.shape.clone(),Jo.copyMatrix(i,n),n.addChildAt(i,0),i.alpha=0,o.parent&&(e=n.getConcatenatedMatrix().decompose(),t=o.parent.getConcatenatedMatrix().decompose(),i.scaleX=e.scaleX/t.scaleX,i.scaleY=e.scaleY/t.scaleY,i.rotation=(e.rotation||0)-(t.rotation||0),t=n.localToLocal(n.shape.x+n.regX,n.shape.y+n.regY,o.parent),i.x=t.x,i.y=t.y),o.mask=i}return o.zimMaskOriginal&&o.zimMaskOriginal!=n&&e(),zot(r)&&(r=!("Blob"!=n.type&&zot(n.zimDown)&&zot(n.transformControls)&&zot(n.zimTouch)&&zot(n.zimTweens)),n.zimMaskDynamic=r),(o.zimMaskOriginal=n).zimMaskApply=function(){o.zimMaskTicker&&Jo.Ticker.remove(o.zimMaskTicker),o.zimMaskTicker=Jo.Ticker.add(t)},n&&n.shape?(t(),r&&n.zimMaskApply()):(i=n,o.mask=i),o},Jo.outline=function(t,e,o,n){if(h=zob(Jo.outline,arguments,"obj, color, size, boundsOnly"))return h;if("AC"==t.type&&WW.zdf)return WW.zdf.ac("outline",arguments),t;if(z_d("47"),t.type&&"zimOultineShape"==t.type)return zon&&zogy("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),t;if(zot(t)||!t.getBounds)return zogy("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return zogy("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return zogy("zim methods - outline(): object should be on stage first"),t;if(zot(e)&&(e="brown"),zot(o)&&(o=2),o<=0)return t.ZIMoutlineShape&&t.ZIMoutlineShape.parent.removeChild(t.ZIMoutlineShape),t.ZIMoutlineShapeC&&t.ZIMoutlineShapeC.parent.removeChild(t.ZIMoutlineShapeC),void(t.ZIMoutlineShape=t.ZIMoutlineShapeC=null);var r=t.getBounds(),i=t.ZIMoutlineShape=t.ZIMoutlineShape||new Jo.Shape;i.type="zimOutlineShape";var l=t.ZIMoutlineShapeC=t.ZIMoutlineShapeC||new Jo.Shape;l.type="zimOutlineShape";var a=t.parent;t.outlineToggled=!0,t.outlineToggle=function(e){return!0===e?(t.ZIMoutlineShape.visible=!0,t.ZIMoutlineShapeC.visible=!0):!1===e?(t.ZIMoutlineShape.visible=!1,t.ZIMoutlineShapeC.visible=!1):(t.ZIMoutlineShape.visible=!t.ZIMoutlineShape.visible,t.ZIMoutlineShapeC.visible=!t.ZIMoutlineShapeC.visible),t.outlineToggled=t.ZIMoutlineShape.visible,t};var s=t.localToLocal(r.x,r.y,a),c=t.localToLocal(r.x+r.width,r.y,a),u=t.localToLocal(r.x+r.width,r.y+r.height,a),d=t.localToLocal(r.x,r.y+r.height,a),h=t.localToLocal(0,0,a),r=i.graphics.c(),a=l.graphics.c();r.s(e).ss(o).mt(s.x,s.y).lt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(s.x,s.y).cp(),n||(a.s("white").ss(o+2),a.mt(-11,0).lt(11,0),a.mt(0,-11).lt(0,11),a.s(e).ss(o),a.mt(-10,0).lt(10,0),a.mt(0,-10).lt(0,10),a.cp(),l.x=h.x,l.y=h.y,l.rotation=t.rotation,r.s("white").ss(o+2).dc(t.x,t.y,16),r.s(e).ss(o).dc(t.x,t.y,16)),t.parent.removeChild(i),t.parent.removeChild(l);o=t.parent.getChildIndex(t);return t.parent.addChildAt(l,o+1),t.parent.addChildAt(i,o+1),i.mouseEnabled=!1,l.mouseEnabled=!1,t},Jo.blendmodes=function(t,e,o){z_d("47.05"),zot(e)&&(e=1);var n=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];!1===o&&n.push("source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","copy","xor");var r=0,i=Jo.interval(e,function(){var e=n[r%n.length];r++,t.ble(e),zogb(e),t.stage&&t.stage.update()});return t.on("mousedown",function(){i.pause(!i.paused)}),t},Jo.STYLE=null,Jo.getStyle=function(e,t,o,n){Jo.STYLECHECK||(z_d("50.34"),Jo.STYLECHECK=!0);var r,i,l=["tap","change","hold","noTap","noChange","noHold","pos","addTo","center","centerReg","reg","mov","move","drag","transform","gesture","mouse","expand","outline","bounds","animate","wiggle","cache","cursor","uppercase","shadow"],a=WW.STYLE||Jo.STYLE,s=a,c=!1;for(i in zot(n)||(t=n,c=!(e=null)),a&&a.type&&"string"==typeof a.type&&(a.ttype=a.type,delete a.type),a)r=a[i],i.match(/^[(A-Z)]/)?(a.type||(a.type={}),a.type[i]?a.type[i]=Jo.merge(a.type[i],r):a.type[i]=r,delete a[i]):r.constructor!=={}.constructor||"group"==i||"type"==i||Jo.isPick(r)||-1!=l.indexOf(i)||(a.group||(a.group={}),a.group[i]?a.group[i]=Jo.merge(a.group[i],r):a.group[i]=r,delete a[i]);if(s=zot(s)?{}:Jo.copy(s),zot(o))o={};else for(m=0;m<l.length;m++)delete o[l[m]];var u,d,h,p=o,n=s.type;if(n&&delete s.type,!zot(t)&&!zot(s.group)){for(var g=t.split(","),f={},m=0;m<g.length;m++){var z=g[m].trim();zot(s.group[z])||(f=Jo.merge(f,s.group[z]))}delete s.group}for(u in c?(s={},zot(t)||zot(f)||(s=f)):(zot(e)||zot(n)||zot(n[e])||(s=Jo.merge(s,n[e])),zot(t)||zot(f)||(s=Jo.merge(s,f))),s)if(p[u])delete s[u];else if("ignore"!=(r=-1!=l.indexOf(u)||s.delayPick?s[u]:Jo.Pick.choose(s[u]))){for(h in r&&r.constructor==={}.constructor&&(r=Jo.copy(r,!0,!1)),s)(d=h.match(/^(.+)gColor$/))&&(s[d[1]+"ackgroundColor"]=s[h],delete s[h]);s[u]=r}else delete s[u];return(s=Jo.merge(s,p)).ttype&&!s.type&&(s.type=s.ttype,delete s.ttype),!1===s.style?{}:s},Jo.styleTransforms=function(t,o){var n,e=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","blendMode"];if(o){for(o.add&&t.addTo(),o.cursor&&t.cur&&t.cur(!0===o.cursor?"pointer":o.cursor),o.shadow&&t.sha&&t.sha(o.shadow.color,o.shadow.offsetX,o.shadow.offsetY,o.shadow.blur),o.addTo&&t.addTo(!0===o.addTo?null:o.addTo),n=0;n<e.length;n++)null!=o[e[n]]&&(t[e[n]]=Jo.Pick.choose(o[e[n]]));if(null==o.regX&&null==o.regY||t.reg(zot(o.regX)?DEFAULT:o.regX,zot(o.regY)?DEFAULT:o.regY),o.bounds&&o.bounds.constructor==={}.constructor&&t.setBounds(o.bounds.x||0,o.bounds.y||0,o.bounds.width||100,o.bounds.height||100),o.center&&t.center(!0===o.center?null:o.center),o.centerReg&&t.centerReg(!0===o.centerReg?null:o.centerReg),null!=o.reg&&(o.reg.constructor==={}.constructor?t.reg(Jo.Pick.choose(o.reg.x),Jo.Pick.choose(o.reg.y),o.reg.still):t.reg(o.reg)),null!=o.x&&(o.loc?null==o.loc.x&&(o.loc.x=o.x):o.loc={x:o.x}),null!=o.y&&(o.loc?null==o.loc.y&&(o.loc.y=o.y):o.loc={y:o.y}),o.loc&&(o.loc.constructor==={}.constructor?t.loc(Jo.Pick.choose(o.loc.x),Jo.Pick.choose(o.loc.y)):t.loc(Jo.Pick.choose(o.loc))),o.pos&&(o.pos.constructor==={}.constructor?t.pos(Jo.Pick.choose(o.pos.x),Jo.Pick.choose(o.pos.y),Jo.Pick.choose(o.pos.horizontal),Jo.Pick.choose(o.pos.vertical),Jo.Pick.choose(o.pos.container),Jo.Pick.choose(o.pos.index),o.pos.add,Jo.Pick.choose(o.pos.reg),Jo.Pick.choose(o.pos.regX),Jo.Pick.choose(o.pos.regY)):("left"!=(r=Jo.Pick.choose(o.pos))&&"top"!=r||t.pos(),"right"==r&&t.pos({horizontal:"right"}),"bottom"==r&&t.pos({vertical:"bottom"}),"rightbottom"!=r&&"bottomright"!=r||t.pos({horizontal:"right",vertical:"bottom"}),"center"==r&&t.center())),(o.mov||o.move)&&(o.move&&(o.mov=o.move),o.mov.constructor==={}.constructor?t.mov(Jo.Pick.choose(o.mov.x),Jo.Pick.choose(o.mov.y)):t.mov(Jo.Pick.choose(o.mov))),o.outline&&setTimeout(function(){t.outline(o.outline.constructor==={}.constructor?o.outline:null),t.stage&&t.stage.update()},20),o.drag&&t.drag(o.drag.constructor==={}.constructor?o.drag:{currentTarget:!0}),o.gesture&&t.gesture(o.gesture.constructor==={}.constructor?o.gesture:null),!1===o.mouse&&t.noMouse(),o.transform&&setTimeout(function(){t.transform(o.transform.constructor==={}.constructor?o.transform:null)},20),o.animate)for(Array.isArray(o.animate)||(o.animate=[o.animate]),n=0;n<o.animate.length;n++)!function(){var e=o.animate[n];e.constructor==={}.constructor&&setTimeout(function(){t.animate(e)},20)}();if(o.wiggle)for(Array.isArray(o.wiggle)||(o.wiggle=[o.wiggle]),n=0;n<o.wiggle.length;n++)!function(){var e=o.wiggle[n];e.constructor==={}.constructor&&setTimeout(function(){t.wiggle(e)},20)}();o.expand&&t.expand(!0===o.expand?null:o.expand),o.cache&&(o.cache.constructor==={}.constructor?o.cache.x?t.cache(Jo.Pick.choose(o.cache.x),Jo.Pick.choose(o.cache.y),Jo.Pick.choose(o.cache.x),Jo.Pick.choose(o.cache.y)):t.cache(Jo.Pick.choose(o.cache.width),Jo.Pick.choose(o.cache.height)):t.cache()),o.uppercase&&(t.text||t.label)&&(t.text?t.text=t.text.toUpperCase():t.label.text=t.label.text.toUpperCase()),o.tap&&t.tap&&t.tap(o.tap),o.change&&t.change&&t.change(o.change),o.hold&&t.hold&&t.hold(o.hold),o.noChange&&t.noChange&&t.noChange(),o.noTap&&t.noTap&&t.noTap(),o.noHold&&t.noHold&&t.noHold();var r=WW.STYLE||Jo.STYLE;!r||!0!==r.once&&r.once!=t.type||(WW.STYLE?WW.STYLE={}:Jo.STYLE={})}},Jo.Style={remembered:{},clear:function(){return WW.STYLE&&(WW.STYLE={}),Jo.STYLE&&(Jo.STYLE={}),Jo.Style},clearTypes:function(){return delete(WW.STYLE||Jo.STYLE).types,Jo.Style},clearGroups:function(){return delete(WW.STYLE||Jo.STYLE).groups,Jo.Style},remember:function(e){zot(e)&&(e="default");var t=(t=WW.STYLE||Jo.STYLE)||(zns?Jo.STYLE={}:WW.STYLE={});return Jo.Style.remembered[e]=Jo.copy(t,!0),Jo.Style},clearRemembered:function(e){return zot(e)?Jo.Style.remembered={}:delete Jo.Style.remembered[e],Jo.Style},recall:function(e){return zot(e)&&(e="default"),WW.STYLE?WW.STYLE=Jo.Style.remembered[e]:Jo.STYLE=Jo.Style.remembered[e],Jo.Style},add:function(e){var t=(t=WW.STYLE||Jo.STYLE)||(zns?Jo.STYLE={}:WW.STYLE={});return WW.STYLE?WW.STYLE=Jo.merge(t,e):Jo.STYLE=Jo.merge(t,e),Jo.Style},addType:function(e,t){var o=WW.STYLE||Jo.STYLE;return(o=o||(zns?Jo.STYLE={}:WW.STYLE={})).type||(o.type={}),o.type[e]=t,Jo.Style},addGroup:function(e,t){var o=WW.STYLE||Jo.STYLE;return(o=o||(zns?Jo.STYLE={}:WW.STYLE={})).group||(o.group={}),o.group[e]=t,Jo.Style},remove:function(e){var t=WW.STYLE||Jo.STYLE;return delete(t=t||(zns?Jo.STYLE={}:WW.STYLE={}))[e],Jo.Style},removeType:function(e){var t=WW.STYLE||Jo.STYLE;return(t=t||(zns?Jo.STYLE={}:WW.STYLE={})).type&&delete t.type[e],Jo.Style},removeGroup:function(e){var t=WW.STYLE||Jo.STYLE;return(t=t||(zns?Jo.STYLE={}:WW.STYLE={})).group&&delete t.group[e],Jo.Style}},Jo.PATH=null,Jo.TIME="seconds",Jo.TIMECHECK=!1,Jo.DIR="ltr",Jo.SEEDRAND=null,Jo.SEEDRANDCOUNT=0,Jo.ANIMATE=!0,Jo.OPTIMIZE=!1,Jo.ACTIONEVENT="mousedown",Jo.DEFAULTWIRE="value",Jo.KEYFOCUS=null,Jo.POSREG=!1,Jo.DRAGALL=!1,Jo.MOBILE="default",Jo.Ticker={stages:null,myUpdate:null,alwaysList:new Jo.Dictionary,list:new Jo.Dictionary,wire:new Jo.Dictionary,setFPS:function(e,t){zot(e)&&zot(t)?t=e=60:zot(e)?e=60:zot(t)&&(t=e),Jo.Ticker.framerate=createjs.Ticker.framerate=Jo.mobile()?e:t},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(e,t){z_d("30");var o=Jo.Ticker;return o.has(e,t)?e:(!zot(t)&&t.update||(t=WW.zdf.stage),zot(e)||"function"!=typeof e?void zogy("zim.Ticker.add() - only add functions"):(o.list.at(t)?o.list.at(t).push(e):o.list.add(t,[e]),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call)),o.framerate||o.setFPS(),e))},addWire:function(e,t){if(z_d("30"),zot(t[0]))return e;var o=Jo.Ticker;o.wire.add(e,t);var n=t[0][t[1]];return t[4]&&(n=t[4](n,"from")),t[3]&&(e[t[6]]=t[7]=n),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call)),o.framerate||o.setFPS(),e},rawID:{},raw:function(o){z_d("30");var n=Jo.makeID("letters",7);return function e(t){o(t),Jo.Ticker.rawID[n]=requestAnimationFrame(e)}(),n},removeRaw:function(e){cancelAnimationFrame(Jo.Ticker.rawID[e]),delete Jo.Ticker.rawID[e]},call:function(e){for(var t,o,n=Jo.Ticker,r=[],i=0;i<n.list.length;i++){t=n.list.objects[i],o=n.list.values[i];for(var l=0;l<o.length;l++)o[l](e);var a=!1;(n.alwaysList.at(t)||0<o.length&&(zot(n.update)&&!Jo.OPTIMIZE&&(zns||!WW.OPTIMIZE)||n.update))&&(a=!0),a&&r.indexOf(t)<0&&r.push(t)}for(i=n.wire.length-1;0<=i;i--){var s,c=n.wire.objects[i],u=n.wire.values[i];u&&((s=c[u[6]])!=u[7]&&(u[4]&&(s=u[4](s,"to",u[7])),u[0][u[1]]=u[7]=s,u[5]&&u[5](s),(t=u[0].stage)&&r.indexOf(t)<0&&r.push(t)),u[2]&&u[0]&&(s=u[0][u[1]],u[7]!=s&&(u[4]&&(s=u[4](s,"from",u[7])),c[u[6]]=u[7]=s,u[5]&&u[5](s),(t=c.stage)&&r.indexOf(t)<0&&r.push(t))))}if(0==n.list.length)for(i=0;i<n.alwaysList.length;i++)t=n.alwaysList.objects[i],r.indexOf(t)<0&&r.push(t);var d=r.length;for(i=0;i<d;i++)r[i].update()},always:function(e){z_d("30");var t=Jo.Ticker;t.framerate||t.setFPS(),!zot(e)&&e.update||(e=WW.zdf.stage),t.alwaysList.add(e,!0),t.ticker||(t.ticker=createjs.Ticker.on("tick",t.call))},alwaysOff:function(e){var t=Jo.Ticker;!zot(e)&&e.update||(e=WW.zdf.stage),t.alwaysList.remove(e)},remove:function(e){var t=Jo.Ticker;if(zot(e)||"function"!=typeof e)zogy("zim.Ticker - only remove functions");else{for(var o=0;o<t.list.length;o++){var n=t.list.values[o].indexOf(e);-1<n&&t.list.values[o].splice(n,1)}0<t.alwaysList.length||0<t.list.length||0<t.wire.length||(createjs.Ticker.off("tick",t.ticker),t.ticker=null)}},removeAll:function(e){for(var t,o=Jo.Ticker,n=0;n<o.list.length;n++)t=o.list.objects[n],!zot(e)&&e!==t||(o.list.values[n]=[]);0<o.alwaysList.length||0<o.list.length||0<o.wire.length||(createjs.Ticker.off("tick",o.ticker),o.ticker=null)},removeWire:function(e,t,o,n){var r=Jo.Ticker;if(zot(e)&&zot(t)&&zot(o)&&zot(n))r.wire.clear();else for(var i=r.wire.length-1;0<=i;i--){var l=r.wire.objects[i],a=r.wire.values[i];a&&(e&&l!=e||t&&a[0]!=t||o&&a[1]!=o||n&&a[6]!=n||(r.wire.objects.splice(i,1),r.wire.values.splice(i,1)))}0<r.alwaysList.length||0<r.list.length||0<r.wire.length||(createjs.Ticker.off("tick",r.ticker),r.ticker=null)},isUpdating:function(e){zot(e)&&(e=WW.zdf.stage);var t=!1,o=Jo.Ticker;return(o.alwaysList.at(e)||o.list&&o.list.values.at(e)&&0<o.list.values.at(e).length&&(zot(o.update)&&!Jo.OPTIMIZE&&(zns||!WW.OPTIMIZE)||o.update))&&(t=!0),t},has:function(e,t){return!zot(t)&&t.update||(t=WW.zdf.stage),Jo.Ticker.list&&Jo.Ticker.list.at(t)&&0<=Jo.Ticker.list.at(t).indexOf(e)},getFPS:function(){return createjs.Ticker.getMeasuredFPS()},dispose:function(e){for(var t,o=Jo.Ticker,n=0,r=o.list.length-1;0<=r;r--)t=o.list.objects[r],zot(e)||e===t?(o.list.remove(e),o.alwaysList.remove(e)):n+=o.list.values[r].length;if(!(0<o.alwaysList.length))return 0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null),!0}},Jo.Ticker.setFPS(),Object.defineProperty(Jo.Ticker,"update",{get:function(){return Jo.Ticker.myUpdate},set:function(e){var t=Jo.Ticker;"boolean"!=typeof e&&(e=null),t.myUpdate=e,!1===t.myUpdate&&(cancelAnimationFrame(t.ticker),t.alwaysList=new Jo.Dictionary)}}),Jo.Pages=function(z,y,e,t,b,o,n,r,i,l){var a;if(a=zob(Jo.Pages,arguments,"pages, transition, speed, transitionTable, holder, arrowDisableColor, continuous, style, group, inherit",this))return a;z_d("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=i;var l=!1===r?{}:Jo.getStyle(this.type,this.group,l),s=$o(e);if(zot(z)&&(z=null!=l.pages?l.pages:[]),this.pages=z,zot(y)&&(y=null!=l.transition?l.transition:"none"),zot(e)&&(e=null!=l.speed?l.speed:"s"==s?.2:200),zot(t)&&(t=null!=l.transitionTable?l.transitionTable:[]),this.transitionTable=t,zot(o)&&(o=null!=l.arrowDisableColor?l.arrowDisableColor:Jo.grey),this.arrowDisableColor=o,zot(n)&&(n=null!=l.continuous&&l.continuous),zot(b)&&(b=null!=l.holder?l.holder:null),zot(b)&&WW.zdf&&(b=WW.zdf.stage),b.getBounds&&b.getBounds()){this.speed=e,this.active=!0;var v=this;v.transitioning=!1;var w,C,x=b.getBounds().width,k=b.getBounds().height;"none"==y&&t==[]||S();for(var c,u,d,h,T=["left","right","up","down"],p=!0,g=0;g<z.length;g++)(h=z[g]).constructor!={}.constructor&&(h=z[g]={page:z[g]}),h.swipe&&(p=!1);for(g=0;g<z.length;g++)(h=z[g]).constructor!=={}.constructor&&(h=z[g]={page:z[g]}),p&&(u=z[g-1],d=z[g+1],n&&!u&&(u=z[z.length-1]),n&&!d&&(d=z[0]),h.swipe=[u?u.page:null,d?d.page:null]),B(h.page,h.swipe);var f,A=this.page=z[0]?z[0].page:null;zot(this.page)||(this.index=0),this.addChild(A),W(A),this.swipe=new Jo.Swipe(b);var P=!1,m=this.swipe.on("swipe",function(e){var t;v.active&&(!v.parent||"none"!=(t=e.currentTarget.direction)&&(e="","left"==t?e="right":"right"==t?e="left":"up"==t?e="down":"down"==t&&(e="up"),t=e,e=T.indexOf(t),c=A.zimSwipeArray[e],f=[c,t,null,null,!0],v.page=A,v.nextPage=c,v.direction=t,v.dispatchEvent("swipe"),setTimeout(function(){P||v.go(c,t,null,null,!0)},50)))});this.addPage=function(e,t){B(e,t),v.pages.push({page:e}),A?e.parent&&e.parent.removeChild(e):(A=v.page=e,v.addChild(A))},this.removePage=function(o){I(o),v.currentPage==o&&(v.removeChild(o),b.stage&&b.stage.update()),Jo.loop(v.pages,function(e,t){e.page!=o&&e!=o||v.pages.splice(t,1)},!0),o.zimSwipeArray=null},this.setSwipeArray=function(e,t){zot(t)&&(t=[]);t={page:e,swipe:t};t.page.zimSwipeArray=t.swipe||[]},this.pause=function(){P=!0},this.unpause=function(){P&&v.go(f[0],f[1],f[2],f[3],f[4])};var E=!0;this.go=function(e,t,o,n,r){if("number"==typeof e){var i=v.pages[e];if(zot(i))return;e=i.page}setTimeout(function(){P=!1},200);for(var l=[{x:x},{x:-x},{y:k},{y:-k}],i=[{x:x/2,alpha:0},{x:-x/2,alpha:0},{y:k/2,alpha:0},{y:-k/2,alpha:0}],a=y,s=v.speed,c=0;c<v.transitionTable.length;c++)if(v.transitionTable[c][0]==A&&v.transitionTable[c][1]==e){a=v.transitionTable[c][2],zot(v.transitionTable[c][3])||(s=v.transitionTable[c][3]);break}function u(e){e[0].uncache(),e[1].uncache(),v.transitioning=!1,v.dispatchEvent("pagetransitioned"),v.removeChild(v.lastPage),"fan"==o&&("right"==t||"down"==t?(v.lastPage.rotation=0,v.lastPage.regY=0,v.lastPage.mov(0,-v.lastPage.height)):(v.page.rotation=0,v.page.regY=0,v.page.mov(0,-v.lastPage.height))),v.removeChild(w),v.removeChild(C),W(A),E=!0}function d(e){v.removeChild(v.lastPage),Jo.animate(e.shift(),{alpha:0},v.speed/2,null,u,e)}if(zot(o)&&(o=a),zot(n)&&(n=s),v.speed=n,v.direction=t,""==e||null==e)v.page=A,v.dispatchEvent("nothing");else if("string"==typeof e)v.page=A,v.dispatchEvent(e);else if(e!=A){zot(t)&&(t="right");n=T.indexOf(t);if(E){E=!1,e.x=0,e.y=0,e.alpha=e.zimOriginalAlpha;var h,p;0<=["pixelDark","pixelLight","pixelZIM","bubbleDark","bubbleLight","bubbleZIM","lineDark","lineLight","lineZIM"].indexOf(o)&&(h=o,p=!0,o="slide");var g,f,m;for(0<=["explodeDark","explodeLight","explodeZIM"].indexOf(o)&&(g=o,p=!0,o="fade"),"Emitter"==o.type&&(o=(p=o).horizontal||o.vertical?"slide":"fade"),v.transitioning=!0,"slide"==o?(e.x=-(0|l[n].x),e.y=-(0|l[n].y),e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),v.addChild(e),v.addChild(A),Jo.animate(A,l[n],v.speed,null,u,[A,e]),Jo.animate(e,[{x:0},{x:0},{y:0},{y:0}][n],v.speed)):"reveal"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),v.addChild(e),v.addChild(A),Jo.animate(A,i[n],v.speed,null,u,[A,e])):"fade"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,v.addChild(e),v.addChild(A),Jo.animate(A,{alpha:0},v.speed,null,u,[A,e])):"black"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,v.addChild(e),v.addChild(A),w.alpha=0,v.addChild(w),Jo.animate(w,{alpha:1},v.speed/2,null,d,[w,A,e])):"clear"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=0,v.addChild(e),v.addChild(A),Jo.animate(A,{alpha:0},v.speed/2),Jo.animate(e,{alpha:1},v.speed/2,null,u,[A,e],v.speed/2)):"white"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,v.addChild(e),v.addChild(A),C.alpha=0,v.addChild(C),Jo.animate(C,{alpha:1},v.speed/2,null,d,[C,A,e])):"fan"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,"right"==t||"down"==t?(v.addChild(e),v.addChild(A),A.regY=A.height,A.mov(0,A.height),Jo.animate(A,{rotation:-90},v.speed,null,u,[A,e])):(v.addChild(A),v.addChild(e),e.regY=A.height,e.mov(0,A.height),e.rotation=-90,Jo.animate(e,{rotation:0},v.speed,null,u,[A,e]))):(v.transitioning=!1,v.addChild(e),v.removeChild(A),E=!0),p&&(l=n<2,h||"slide"==o?(m=h?("lineDark"==h||"lineLight"==h?f=new Jo.Rectangle(l?30:x+5,l?k+5:30,"lineDark"==h?Jo.dark:Jo.white).alp(.2):"lineZIM"==h?f=new Jo.Rectangle(l?50:x+5,l?k+5:50,[Jo.green,Jo.yellow,Jo.orange,Jo.pink,Jo.blue]).alp(.5):"pixelDark"==h||"pixelLight"==h?f=new Jo.Rectangle(40,40,Jo.clear,"pixelDark"==h?Jo.dark:Jo.white,2).alp(.7):"pixelZIM"==h?f=new Jo.Rectangle(40,40,[Jo.green,Jo.yellow,Jo.orange,Jo.pink,Jo.blue]).alp(.7):"bubbleDark"==h||"bubbleLight"==h?f=new Jo.Circle(30,Jo.clear,"bubbleDark"==h?Jo.dark:Jo.white,2).alp(.7):"bubbleZIM"==h&&(f=new Jo.Circle(30,[Jo.green,Jo.yellow,Jo.orange,Jo.pink,Jo.blue]).alp(.7)),f.centerReg({add:!1}),"lineDark"==h||"lineLight"==h||"lineZIM"==h?new Jo.Emitter({obj:f,life:.5,decayTime:.5,shrink:!1,force:0,gravity:0,width:0,startPaused:!0}):new Jo.Emitter({obj:f,num:6,life:.5,decayTime:.5,width:l?0:x,height:l?k:0,vertical:l,horizontal:!l,startPaused:!0})):p,i=[{x:0,y:k/2},{x:x,y:k/2},{x:x/2,y:0},{x:x/2,y:k}],l=[{x:x,y:k/2},{x:0,y:k/2},{x:x/2,y:k},{x:x/2,y:0}],m.centerReg(b).spurt(null,v.speed),m.x=i[n].x,m.y=i[n].y,Jo.animate(m,l[n],v.speed,null,function(){h&&m.dispose()})):!g&&"fade"!=o||((m=g?("explodeDark"==g||"explodeLight"==g?f=new Jo.Circle(150,"explodeDark"==g?Jo.dark:Jo.white).alp(.5):"explodeZIM"==g&&(f=new Jo.Circle(130,[Jo.green,Jo.yellow,Jo.orange,Jo.pink,Jo.blue]).alp(.7)),new Jo.Emitter({obj:f,num:5,gravity:0,force:{min:20,max:40},life:.5,shrink:!1,decayTime:.5,startPaused:!0})):p).centerReg(b).spurt(null,.35*v.speed),m.on("fizzed",function(){g&&m.dispose()})),b&&"Stage"!=b.type&&"StageGL"!=b.type&&m.particles&&b.shape&&m.particles.setMask(b.shape)),b&&b.shape&&m&&m.particles&&m.particles.setMask(b.shape),I(A),v.lastPage=A,v.page=e,v.index=-1,c=0;c<v.pages.length;c++)v.pages[c].page==v.page&&(v.index=c);"none"==o&&W(e),zot(r)&&(r=!1),v.fromSwipe=r,v.dispatchEvent("page"),A=e,v.setArrows(z.index),b.stage&&b.stage.update()}}},b&&b.shape&&(b.mouseChildren=!0,b.mouseEnabled=!0,v.setMask(b.shape)),this.resize=function(){x=b.getBounds().width,k=b.getBounds().height,"none"==y&&t==[]||S()},this.puff=function(e){for(var t=0;t<z.length;t++)v.addChild(z[t].page);v.addChild(A),0<e&&setTimeout(function(){v.settle()},e*("s"==s?1e3:1))},this.settle=function(){v.removeAllChildren(),v.addChild(A),v.dispatchEvent("puffed")},this.disable=function(){v.active=!1},this.enable=function(){v.active=!0},this.arrows={},this.setArrows=function(){var o,e;Jo.isEmpty(v.arrows)||(e=v.pages[v.index])&&e.swipe&&(o=e.swipe,e=[Jo.LEFT,Jo.RIGHT,Jo.UP,Jo.DOWN],Jo.loop(e,function(e,t){o[t]?Jo.loop(v.arrows[e],function(e){return!0===e.setDisabled?(e.activate(!1,v.arrowDisableColor),void(e.setDisabled=null)):void(e.enabled||e.activate(!0,e.arrowBackgroundColor))}):Jo.loop(v.arrows[e],function(e){return!1===e.setDisabled?(e.activate(!0,e.arrowBackgroundColor),void(e.setDisabled=null)):void(e.enabled&&e.activate(!1,v.arrowDisableColor))})}),v.stage&&v.stage.update())},v.added(function(e){var t;e.frame&&"full"==e.frame.scaling&&(Jo.globalManager||((t=Jo.globalManager=new Jo.Manager).frame=e.frame,t.event=e.frame.on("resize",function(){t.resize()})),Jo.globalManager.add(v))}),!1!==r&&Jo.styleTransforms(this,l),this.dispose=function(e,t,o){var n;return Jo.globalManager&&((n=Jo.globalManager).remove(v),0==Jo.globalManager.items.length&&(n.frame.off("resize",n.event),n.dispose(),Jo.globalManager=null)),v.swipe.off("swipe",m),v.swipe.dispose(),o||this.zimContainer_dispose(!0),!0}}else zogy("zim controls - Pages():\nholder object must have bounds set");function S(){(w=new createjs.Shape).graphics.f("black").r(0,0,x,k+1),(C=new createjs.Shape).graphics.f("white").r(0,0,x,k+1)}function B(e,t){zot(e)||(e.zimHTMLList=new Jo.Dictionary,I(e),e.zimSwipeArray=t||[],e.zimOriginalAlpha=e.alpha,e.parent&&e.parent.removeChild(h.page))}function W(e){if(!zot(e))for(e.removedHTML=!1,g=0;g<e.zimHTMLList.length;g++)e.addChildAt(e.zimHTMLList.values[g].obj,e.zimHTMLList.values[g].depth)}function I(e){if(!e.removedHTML){var t,o,n;for(e.removedHTML=!0,e.zimHTMLList.clear(),t=0;t<e.numChildren;t++)"TextArea"!=(n=e.getChildAt(t)).type&&"Loader"!=n.type&&"Tag"!=n.type||(o={obj:n,depth:e.getChildIndex(n)},e.zimHTMLList.add(n,o));for(t=e.numChildren-1;0<=t;t--)"TextArea"!=(n=e.getChildAt(t)).type&&"Loader"!=n.type&&"Tag"!=n.type||e.removeChild(n)}}},Jo.extend(Jo.Pages,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Arrow=function(e,t,o,n,r,i,l,a,s,c,u){var d;if(d=zob(Jo.Arrow,arguments,"backgroundColor, rollBackgroundColor, pages, direction, type, newPage, trans, speed, style, group, inherit",this))return d;z_d("71.2"),this.group=c;var h,p,g,f,c=!1===s?{}:Jo.getStyle("Arrow",this.group,u);zot(o)&&(o=null!=c.pages?c.pages:null),zot(n)&&(n=null!=c.direction?c.direction:"right"),zot(e)&&(e=null!=c.backgroundColor?c.backgroundColor:Jo.blue),this.arrowBackgroundColor=e,zot(t)&&(t=null!=c.rollBackgroundColor?c.rollBackgroundColor:Jo.blue.lighten(.2)),this.arrowRollBackgroundColor=t,zot(r)&&(r=null!=c.type?c.type:"triangle"),zot(i)&&(i=null!=c.newPage?c.newPage:null),zot(l)&&(l=null!=c.trans?c.trans:null),zot(a)&&(a=null!=c.speed?c.speed:null),"triangle"==r?(h=new Jo.Triangle(45,45,45,e,null,null,null,null,-7).rot(90),m=new Jo.Triangle(45,45,45,t,null,null,null,null,-7).rot(90)):"thick"==r?(h=new Jo.Shape,p=h.graphics.f(e).command,f="AhFBdIiWAAIAAi4ICWAAIAAh7IEhDWIkhDXg",h.p(f).reg(-4),m=new Jo.Shape,g=m.graphics.f(t).command,m.p(f).reg(-4)):"thin"==r?(h=new Jo.Shape,p=h.graphics.f(e).command,f="AhBCIIBZhbIjWAAIAAhVIDaAAIhdhfIA9g+IDDDFIAAAAIAAAAIjDDGg",h.p(f).reg(-4),m=new Jo.Shape,g=m.graphics.f(t).command,m.p(f).reg(-4)):"angle"==r&&(h=new Jo.Shape,p=h.graphics.f(e).command,f="AiNC5IC4i5Ii4i5IAxgxIDqDqIjqDrg",h.p(f).reg(-3),m=new Jo.Shape,g=m.graphics.f(t).command,m.p(f).reg(-3)),this.zimButton_constructor(50,50,"",Jo.clear,Jo.clear,null,null,null,null,null,null,null,null,null,null,null,h,m),this.type="Arrow";var m,z=this;function y(){var e=o.pages[o.index];if(e&&e.page&&e.page.zimSwipeArray){e=e.page.zimSwipeArray;return"left"==n?e[0]:"right"==n?e[1]:"up"==n?e[2]:"down"==n?e[3]:void 0}}this.activate=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=Jo.grey),!1===t||(e?!(z.enabled=!0)!==t&&("triangle"==r?(z.icon.color=z.arrowBackgroundColor,z.rollIcon.color=z.arrowRollBackgroundColor):(p.style=z.arrowBackgroundColor,g.style=z.arrowRollBackgroundColor)):(z.enabled=!1)!==t&&("triangle"==r?(z.icon.color=t,z.rollIcon.color=t):(p.style=t,g.style=t))),z},zot(o)||"Pages"!=o.type||(m=(zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",zot(o.arrows)&&(o.arrows={}),zot(o.arrows[n])&&(o.arrows[n]=[]),o.arrows[n].push(this),y()||this.activate(!1,o.arrowDisableColor),this.expand(),this.on(m,function(){var e;o.transitioning||(e=y())&&o.go(e,n,l,a)})),!1!==s&&Jo.styleTransforms(this,c),this.clone=function(){return z.cloneProps(new Jo.Arrow(e,t,o,n,r,i,l,a,s,this.group,u))}},Jo.extend(Jo.Arrow,Jo.Button,"clone","zimButton",!1),Jo.HotSpot=function(e,t,o,n,r,i,l,a,s,c){var u,d,h,p,g,f,m,z,y,b;if(h=zob(Jo.HotSpot,arguments,"obj, x, y, width, height, call, callOver, callOut, local, talk",this))return h;z_d("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",!zot(e)&&e.addChild?e instanceof createjs.Container!=0?zot(t)||zot(o)||zot(n)||zot(r)?zogy("zim controls - HotSpot():\nPlease pass in x, y, width, height"):(zot(s)&&(s=!0),u=(zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",d=n,h=r,f=s?(p=new Jo.Point(t,o),g=n,r):(p=e.globalToLocal(t,o),g=(f=e.globalToLocal(t+d,o+h)).x-p.x,f.y-p.y),(m=new Jo.Shape(n,r)).talk=zot(c)?"HotSpot":c,m.alpha=0,m.graphics.f("black").dr(0,0,g,f),m.x=p.x,m.y=p.y,m.cur("pointer"),m.expand(0),this.spot=m,"function"==typeof i&&(z=m.on(u,function(e){i(e)})),"function"==typeof l&&(y=m.on("mouseover",function(e){l(e)})),"function"==typeof a&&(b=m.on("mouseout",function(e){a(e)})),e.addChild(m),this.show=function(){m.alpha=.5,e.stage&&e.stage.update()},this.hide=function(){m.alpha=0,e.stage&&e.stage.update()},this.dispose=function(){return z&&m.off(u,y),y&&m.off("mouseover",y),b&&m.off("mouseout",b),e.removeChild(m),!(m=null)}):zogy("zim controls - HotSpot():\nObjects passed in should be Containers"):zogy("zim controls - HotSpot():\nPlease pass in container object for obj")},Jo.extend(Jo.HotSpot,Jo.Container,"dispose","zimContainer",!1),Jo.HotSpots=function(l,o,n){var e;if(e=zob(Jo.HotSpots,arguments,"spots, local, mouseDowns",this))return e;z_d("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",zot(o)&&(o=!0),zot(n)&&(n=!1);var a,r,i=(zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",s=this.hotSpots=[];zot(l)&&(l=[]);for(var t=0;t<l.length;t++)c(l[t]);function c(e){var t=null;if(!Array.isArray(e.rect)){if(!(t=e.rect))return void zogy("zim controls - HotSpots(): HotSpot "+e.page+" "+e.rect+" button does not exist");e.rect=[t.x,t.y,t.width||1,t.height||1]}(r=new Jo.HotSpot(e.page,e.rect[0],e.rect[1],e.rect[2],e.rect[3],e.call,e.callOver,e.callOut,o,e.talk)).zimHSpage=e.page,r.button=t,s.push(r),r.on(i,u),t&&zot(e.callOver)&&zot(e.callOut)&&(r.spot.mouseEnabled=!1,r.spot.mouseChildren=!1,t.zimHScall=e.call,t.zimHSEvent=t.on(i,u,!0),n||(t.zimHSMDEvent=t.on("mousedown",function(e){e.stopImmediatePropagation()})),t.cur&&t.cur("pointer"))}function u(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),WW.event&&(WW.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}this.add=this.addHotSpot=function(e,t,o,n,r,i){a={page:e,rect:t,call:o,callOver:n,callOut:r,talk:i},l.push(a),c(a)},this.show=function(){for(var e=0;e<s.length;e++)(r=s[e]).button||(r.spot.alpha=.2)},this.hide=function(){for(var e=0;e<s.length;e++)(r=s[e]).spot.alpha=0},this.remove=this.removeHotSpots=function(e,t){for(var o=l.length-1;0<=o;o--)a=l[o],r=s[o],t&&!Array.isArray(t)&&(t=[t.x,t.y,t.getBounds().width,t.getBounds().height]),(zot(e)&&zot(t)||zot(t)&&e==a.page||zot(e)&&Jo.arraysEqual(t,a.rect)||e==a.page&&Jo.arraysEqual(t,a.rect))&&(l.splice(o,1),r.button&&(r.button.off(i,r.button.zimHSEvent),r.button.zimHSEvent=null,n||(r.button.off("mousedown",r.button.zimHSMDEvent),r.button.zimHSMDEvent=null)),r.off(i,u),r.dispose(),s.splice(o,1))},this.dispose=function(){for(var e=0;e<s.length;e++)(r=s[e]).button&&(r.button.off(i,r.button.zimHSEvent),r.button.zimHSCall=null,r.button.zimHSEvent=null,n||(r.button.off("mousedown",r.button.zimHSMDEvent),r.button.zimHSMDEvent=null)),r.off(i,u),r.dispose();return!0}},Jo.extend(Jo.HotSpots,Jo.Container,"dispose","zimContainer",!1),Jo.Guide=function(n,r,i,t,o,e,l,a){var s;if(s=zob(Jo.Guide,arguments,"obj, vertical, pixels, hideKey, pixelKey, style, group, inherit",this))return s;z_d("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=l;var c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,a=!1===e?{}:Jo.getStyle(this.type,this.group,a);function A(e,t,o){var n=new Jo.Container({style:!1});return n.shape=new Jo.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,d,h),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px arial",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function P(e){var t,o;e?(t=n.globalToLocal(e.rawX/Jo.scaX,e.rawY/Jo.scaY),T=t):t={x:T.x,y:T.y},i?r?(o=Math.round(Math.abs(t.x-x.x)),z.label.text="x:"+Math.max(0,Math.min(o,Math.round(w))),z.y=Math.max(g,Math.min(t.y,m))):(o=Math.round(Math.abs(t.y-x.y)),z.label.text="y:"+Math.max(0,Math.min(o,Math.round(C))),z.x=Math.max(p,Math.min(t.x,f))):r?(o=Math.round(Math.abs(t.x-x.x)/w*100),z.label.text="x:"+Math.max(0,Math.min(o,100))+"%",z.y=Math.max(g,Math.min(t.y,m))):(o=Math.round(Math.abs(t.y-x.y)/C*100),z.label.text="y:"+Math.max(0,Math.min(o,100))+"%",z.x=Math.max(p,Math.min(t.x,f))),y&&y.update()}function E(){var e;v=!0,w=n.getBounds().width,C=n.getBounds().height,k=r?(e="ew-resize",new createjs.Rectangle(0,0,w,0)):(e="ns-resize",new createjs.Rectangle(0,0,0,C)),Jo.noDrag(x),setTimeout(function(){Jo.drag(x,k,null,e,e,null,null,!0)},500),y.mouseMoveOutside=!0,y.enableMouseOver(10),f=w-2*d/3,m=C-h-h,x.uncache();var t=x.graphics;r?(t.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,C),t.f().s("white").ss(2).mt(0,0).lt(0,C),t.s("#00c5af").sd([20,20]).mt(0,0).lt(0,C).sd(),x.cache(-10,0,20,C)):(t.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(w,0),t.f().s("white").ss(2).mt(0,0).lt(w,0),t.s("#d61fa0").sd([20,20]).mt(0,0).lt(w,0).sd(),x.cache(0,-10,w,20)),r?z.x=w:z.y=C,c.addChild(z)}function S(e){e=e||event,y&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&c.toggle(),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(c.pixels=!c.pixels))}zot(n)&&(n=WW.zdf?WW.zdf.stage:"stage"),zot(r)&&(r=null==a.vertical||a.vertical),"stage"==n||n.addChild&&n.getBounds&&n.getBounds()?(zot(i)&&(i=null!=a.pixels?a.pixels:!(zdf&&"full"==zdf.scaling)),zot(t)&&(t=null!=a.hideKey?a.hideKey:"G"),zot(o)&&(o=null!=a.pixelKey?a.pixelKey:"P"),c=this,p=(d=80)/6+d/2,g=2*(h=26),r?((z=A("#00c5af","white","white")).shape.regX=d+d/6,z.shape.regY=h/2,z.label.x=-d/2-d/6):((z=A("#d61fa0","white","white")).shape.regX=d/2,z.shape.regY=h+h/4,z.label.y=3*-h/4),"stage"!=n&&n.addChild(c),b=Jo.added(c,function(){"stage"==n?(y=c.stage,n=y):y=n.stage;{var e;y.frame&&"full"==y.frame.scaling&&(Jo.globalManager||((e=Jo.globalManager=new Jo.Manager).frame=y.frame,e.event=y.frame.on("resize",function(){e.resize()})),Jo.globalManager.add(c))}n.addChild(c),w=n.getBounds().width,C=n.getBounds().height,r?(z.y=C/2,z.label.text="x:"+(c.pixels?Math.round(70*w/100):"70%")):(z.x=w/2,z.label.text="y:"+(c.pixels?Math.round(70*C/100):"70%"));x=new Jo.Shape,c.addChild(x),r?x.x=.7*w:x.y=.7*C,v||(n.addChild(c),E());y.off("stagemousemove",u),u=y.on("stagemousemove",P),y.update()}),v=!1,T={x:0,y:0},Object.defineProperty(this,"pixels",{get:function(){return i},set:function(e){i=e,c.resize()}}),WW.addEventListener("keydown",S),this.toggled=!0,this.toggle=function(e){return!0===e?c.visible=c.toggled=!0:!1===e?c.visible=c.toggled=!1:(c.visible=!c.visible,c.toggled=c.visible),y&&(y.off("stagemousemove",u),c.visible&&(u=y.on("stagemousemove",P,c)),y.update()),c},!(this.resize=function(){return!!c&&(y&&(E(),P()),!0)})!==e&&Jo.styleTransforms(this,a),this.dispose=function(){return!!c&&(Jo.globalManager&&((e=Jo.globalManager).remove(c),0==Jo.globalManager.items.length&&(e.frame.off("resize",e.event),e.dispose(),Jo.globalManager=null)),Jo.noDrag(x),clearInterval(b),c.removeAllChildren(),WW.removeEventListener("keydown",S),c.parent&&c.parent.removeChild(c),!(c=null));var e}):zog("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())")},Jo.extend(Jo.Guide,Jo.Container,"clone","zimContainer",!1),Jo.Grid=function(r,i,l,t,o,n,a,e,s,c,u){var d;if(d=zob(Jo.Grid,arguments,"obj, color, pixels, hideKey, pixelKey, allowToggle, cache, numbers, style, group, inherit",this))return d;z_d("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=c;var h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,u=!1===s?{}:Jo.getStyle(this.type,this.group,u);function B(e,t,o){var n=new Jo.Container({style:!1});return n.shape=new createjs.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,f,m),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px arial",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function W(e){var t;e?(t=r.globalToLocal(e.rawX/Jo.scaX,e.rawY/Jo.scaY),A=t):t={x:A.x,y:A.y},l?(z.label.text="x:"+Math.max(0,Math.min(Math.round(t.x),Math.round(P))),z.x=Math.max(b,Math.min(t.x,w)),y.label.text="y:"+Math.max(0,Math.min(Math.round(t.y),Math.round(E)))):(z.label.text="x:"+Math.max(0,Math.min(Math.round(t.x/P*100),100))+"%",z.x=Math.max(b,Math.min(t.x,w)),y.label.text="y:"+Math.max(0,Math.min(Math.round(t.y/E*100),100))+"%"),y.y=Math.max(v,Math.min(t.y,C)),x&&x.update()}function I(){T=!0,r&&r.getBounds&&(P=r.getBounds().width,E=r.getBounds().height),x&&(x.mouseMoveOutside=!0,x.enableMouseOver(10)),w=P-2*f/3,C=E-m-m,S=h.grid=new Jo.Container({style:!1}),h.addChild(S);var e=new createjs.Shape;S.addChild(e);var t=e.graphics;t.s(i).ss(1);var o,n=new createjs.Shape;if(S.addChild(n),l){for(o=0;o<P/p;o++)t.mt(o*p,0).lt(o*p,E);for(o=0;o<E/p;o++)t.mt(0,o*p).lt(P,o*p);for(e.alpha=.3,(t=n.graphics).s(i).ss(1),o=0;o<P/(10*p);o++)t.mt(o*(10*p),0).lt(o*(10*p),E);for(o=0;o<E/(10*p);o++)t.mt(0,o*(10*p)).lt(P,o*(10*p))}else{for(o=1;o<21;o++)t.mt(o*P/20,0).lt(o*P/20,E);for(o=1;o<20;o++)t.mt(0,o*E/20).lt(P,o*E/20);for(e.alpha=.3,(t=n.graphics).s(i).ss(1),o=1;o<10;o++)t.mt(o*P/10,0).lt(o*P/10,E);for(o=1;o<10;o++)t.mt(0,o*E/10).lt(P,o*E/10)}t.s("#FFFFFF").ss(8),t.mt(P/2,E/2-40).lt(P/2,E/2+40),t.mt(P/2-40,E/2).lt(P/2+40,E/2),t.s("#000000").ss(4),t.mt(P/2,E/2-40).lt(P/2,E/2+40),t.mt(P/2-40,E/2).lt(P/2+40,E/2),t.s(i).ss(a?3:2),t.dr(0,0,P,E),n.alpha=.5,a&&S.cache(0,0,P,E),h.addChild(z),h.addChild(y),x&&x.update()}function M(e){e=e||event,x&&n&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&h.toggle(),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(h.removeChild(S),S=null,h.pixels=!h.pixels))}zot(r)&&(r=WW.zdf?WW.zdf.stage:"stage"),zot(i)&&(i=null!=u.color?u.color:Jo.black),"stage"==r||r.addChild&&r.getBounds&&r.getBounds()?(zot(l)&&(l=null!=u.pixels?u.pixels:!(zdf&&"full"==zdf.scaling)),zot(t)&&(t=null!=u.hideKey?u.hideKey:"G"),zot(o)&&(o=null!=u.pixelKey?u.pixelKey:"P"),zot(n)&&(n=null==u.allowToggle||u.allowToggle),zot(a)&&(a=null==u.cache||u.cache),zot(e)&&(e=null==u.numbers||u.numbers),p=10,(h=this).mouseChildren=!1,this.mouseEnabled=!1,f=80,m=26,(z=h.numbersX=B("#dddddd",i,"#333333")).shape.regX=f/2,z.shape.regY=-m/4,z.label.y=3*m/4,(y=h.numbersY=B("#dddddd",i,"#333333")).shape.regX=-f/6,y.shape.regY=m/2,y.label.x=f/2+f/6,e||(z.visible=!1,y.visible=!1),b=f/6+f/2,v=2*m,z.x=b,y.y=v,z.label.text="x:0",y.label.text="y:0","stage"!=r&&r.addChild(h),k=Jo.added(h,function(){"stage"==r?(x=h.stage,r=x):x=r.stage;{var e;x.frame&&"full"==x.frame.scaling&&(Jo.globalManager||((e=Jo.globalManager=new Jo.Manager).frame=x.frame,e.event=x.frame.on("resize",function(){e.resize()})),Jo.globalManager.add(h))}T||(I(),r.addChild(h));x.off("stagemousemove",g),g=x.on("stagemousemove",W),x.update()}),T=!1,A={x:0,y:0},Object.defineProperty(this,"pixels",{get:function(){return l},set:function(e){l=e,h.resize()}}),WW.addEventListener("keydown",M),this.toggled=!0,this.toggle=function(e){return!0===e?h.visible=h.toggled=!0:!1===e?h.visible=h.toggled=!1:(h.visible=!h.visible,h.toggled=h.visible),x.off("stagemousemove",g),h.visible&&(g=x.on("stagemousemove",W,h)),x&&x.update(),h},!(this.resize=function(){return!!h&&(h.removeChild(S),S=null,x&&(I(),W(),setTimeout(function(){h&&h.removeChild(S),S=null,I()},200)),!0)})!==s&&Jo.styleTransforms(this,u),this.dispose=function(){var e;return Jo.globalManager&&((e=Jo.globalManager).remove(h),0==Jo.globalManager.items.length&&(e.frame.off("resize",e.event),e.dispose(),Jo.globalManager=null)),clearInterval(k),h.removeAllChildren(),WW.removeEventListener("keydown",M),h.parent&&h.parent.removeChild(h),!(h=null)}):zog("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())")},Jo.extend(Jo.Grid,Jo.Container,"clone","zimContainer",!1),Jo.Wrapper=function(e,P,E,w,C,S,x,B,W,I,k,M,T,A,O,t,j,L,D,_,R,Y,o,n,r){var i;if(i=zob(Jo.Wrapper,arguments,"items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, minStretchFirst, style, group, inherit",this))return i;z_d("78.5"),this.group=n;r=!1===o?{}:Jo.getStyle("Wrapper",this.group,r);zot(P)&&(P=null!=r.width?r.width:300),zot(O)&&(O=null!=r.height?r.height:null),zot(E)&&(E=null!=r.spacingH?r.spacingH:null),zot(w)&&(w=null!=r.spacingV?r.spacingV:null),zot(C)&&(C=null!=r.wrapperType?r.wrapperType:"spacing"),zot(S)&&(S=null!=r.align?r.align:"left"),zot(x)&&(x=null!=r.valign?r.valign:"top"),zot(B)&&(B=null!=r.alignInner?r.alignInner:"left"),zot(W)&&(W=null!=r.valignInner?r.valignInner:"bottom"),zot(I)&&(I=null!=r.flip&&r.flip),zot(k)&&(k=null!=r.reverse&&r.reverse),zot(M)&&(M=null!=r.bottomFull&&r.bottomFull),zot(T)&&(T=null!=r.colSize?r.colSize:100),zot(A)&&(A=null!=r.rowSize?r.rowSize:null),zot(E)&&(E=0),zot(w)&&(w=0),zot(t)&&(t=null!=r.minSpreadNum?r.minSpreadNum:2),zot(j)&&(j=null!=r.minStretchNum?r.minStretchNum:3),zot(L)&&(L=null!=r.percentVoidH?r.percentVoidH:0),zot(D)&&(D=null!=r.offsetVoidH?r.offsetVoidH:0),zot(_)&&(_=null!=r.percentVoidV?r.percentVoidV:0),zot(R)&&(R=null!=r.offsetVoidV?r.offsetVoidV:0),zot(Y)&&(Y=null==r.minStretchFirst||r.minStretchFirst);var X,N,F=0,H=0,V=0,G=P;this.items=[],"spread"==C?X=!0:"stretch"==C&&(N=!0),this.zimContainer_constructor(P,200),this.type="Wrapper","middle"==S&&(S="center"),"middle"==x&&(x="center"),"middle"==B&&(B="center"),"middle"==W&&(W="center");var U,q=this;function Q(n,t,o,e,r,i,l,a){var s=Jo.Pick.choose(S),c=Jo.Pick.choose(X),u=Jo.Pick.choose(N),d=Jo.Pick.choose(B),h=Jo.Pick.choose(W);zot(s)&&(s="left"),zot(h)&&(h="top"),zot(d)&&(d="left"),U&&n.reverse();var p,g,f,m,z,y,b,v,w,C,x,k,T=0,A=!1;r?((M||U)&&n.reverse(),m=G%r,z=G/2+l/100*G,y=0,b=Math.floor(G/r),0!=q.rows&&a&&(A=!0),Jo.loop(n,function(e,t){var o;T=0,y="right"==d?r*t+0+r-e.wrapWidth:"center"==d||"middle"==d?r*t+0+(r-e.wrapWidth)/2:r*t+0,f=e.x,e.pos(y),k=e.x-f,e.centerX+=k,e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight),"center"==s||"middle"==s?(o=Math.floor(G/r)-n.length,T+=(m+(o?o*r:0))/2):"right"==s&&(o=Math.floor(G/r)-n.length,T+=m+(o?o*r:0)),e.mov(T),e.centerX+=T}),"center"==s&&A&&(n.length+b)%2!=0&&(T=(z<=G/2?-1:1)*r/2,Jo.loop(n,function(e){e.mov(T),e.centerX+=T}))):c||u?(c?v=n.length?(G-e)/(n.length+1):0:u&&(v=0<n.length-1?(G-e)/(n.length-1):0),n.length<j&&a&&(Y||0<q.rows)&&(v=0==q.rows?E:V,A=!0),V=v,C=0,(M||U)&&n.reverse(),Jo.loop(n,function(e,t){T=0,f=e.x,e.pos(v*(t+(c?1:0))+C),k=e.x-f,e.centerX+=k,A||(e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight),e.mov(T),e.centerX+=T),C+=e.wrapWidth}),A&&(x=c?v:0,k=T=0,Jo.loop(n,function(e){var t;"right"==s?(f=e.x,e.pos(x,null,Jo.RIGHT),k=e.x-f,x+=e.wrapWidth+v):"center"==s&&(t=(G-(C+(n.length-1)*v))/2-(c?v:0),f=e.x,e.pos(x+t,null,Jo.RIGHT),k=e.x-f,x+=e.wrapWidth+v),e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight),e.mov(T),e.centerX+=k+T},!0))):"center"==s?Jo.loop(n,function(e){T=((M||U?0:P)-t.x)/2,(c||u)&&(e.marginLeft&&(T+=e.marginLeft),e.marginRight&&(T-=e.marginRight)),e.mov(T),e.centerX+=T}):(M||U)&&"left"==s?(w=n[n.length-1].marginLeft,Jo.loop(n,function(e){T=-t.x+(w||0),c&&(T+=H),e.mov(T),e.centerX+=T})):M||U||"right"!=s?c&&c&&Jo.loop(n,function(e){T=H*("right"==s?-1:1),e.mov(T),e.centerX+=T}):(w=n[n.length-1].marginRight,Jo.loop(n,function(e){T=P-t.x-(w||0),c&&(T-=H),e.mov(T),e.centerX+=T})),i&&(p=(.5+l/100)*G,g=P*i/100,Jo.loop(n,function(e){r||u||c?"right"==s?e.centerX>G-p&&e.mov(g):"center"==s?Math.round(e.centerX)==Math.round(G/2+l/100*G)?e.mov(g/2):Math.round(e.centerX)>Math.round(G/2+l/100*G)&&e.mov(g):e.centerX>p&&e.mov(g):M||U||"right"!=s?M||U||"center"!=s?(M||U)&&"right"==s?e.centerX>G-p&&e.mov(g):(M||U)&&"center"==s?e.centerX>G/2+l/100*G&&e.mov(g):e.centerX>p&&e.mov(g):e.centerX>P/2+l/100*G?e.mov(g/2):e.mov(-g/2):e.centerX<P-p&&e.mov(-g)})),c&&(H=(F+=v)/(q.rows+1)),"center"==h?Jo.loop(n,function(e){e.mov(0,(o-e.wrapHeight)/2*(M?-1:1))}):M||"bottom"!=h?M&&"top"==h&&Jo.loop(n,function(e){e.mov(0,-(o-e.wrapHeight)+(e.marginTop||0))}):Jo.loop(n,function(e){e.mov(0,o-e.wrapHeight-(e.marginBottom||0))}),U=Jo.Pick.choose(I)}this.add=function(e){return this.addAt(e,this.numChildren-1),q},this.addAt=function(e,o){return zot(e)||((zot(o)||o<0)&&(o=0),Array.isArray(e)||(e=[e]),Jo.loop(e,function(e,t){q.addChildAt(e,o+t)}),q.resize()),q},this.remove=function(e){return zot(e)?q.removeAllChildren():(Array.isArray(e)||(e=[e]),Jo.loop(e,function(e){e&&e.removeFrom&&e.removeFrom()},!0)),q.resize(),q},this.convert=function(e,t){var o=[];return e.loop(function(e){o.push(e),t&&e.cache()}),q.add(o),e.removeFrom(),q},this.resize=function(e,t){if(!q.preventResize){zot(e)||(P=e),zot(t)||(O=t),this.items2D=[],this.items=[],V=H=F=0,zot(L)&&(L=0),zot(D)&&(D=0);var i=Jo.Pick.choose(L),l=Jo.Pick.choose(D);G=P*(100-i)/100,this.setBounds(G,200);var a=0,s=0,c=0;q.cols=0,q.rows=0;var u=[],d=[0],h=null,p=0,g=null,f=Jo.Pick.choose(T);"column"!=C&&(f=null);var m,z,y=Jo.Pick.choose(A),b=0;"series"==I.type&&(I.index=0),U=Jo.Pick.choose(I),Jo.loop(this,function(e,t){M||U?e.pos(a+(e.marginRight||0),s+(e.marginTop||0),Jo.RIGHT,U?Jo.TOP:Jo.BOTTOM):e.pos(a+(e.marginLeft||0),s+(e.marginTop||0)),b++,g=e.boundsToGlobal();var o,n=q.globalToLocal(g.x,g.y),r=q.globalToLocal(g.x+g.width,g.y+g.height);m=M||U?q.globalToLocal(g.x,g.y):q.globalToLocal(g.x+g.width,g.y+g.height),e.wrapHeight=r.y-n.y,e.wrapWidth=r.x-n.x,i&&(o=q.globalToLocal(g.x+e.wrapWidth/2,g.y+e.wrapHeight/2),e.centerX=o.x,e.centerY=o.y,o=null),z=f?f*b:M||U?G-m.x+(e.marginLeft||0)+E:m.x+(e.marginRight||0)+E,Math.round(z)-E>G&&(Q(u,h,c,p,f,i,l,!1),(p=0)==q.cols&&(q.cols=t),a=0,s+=c+(y?0:Jo.Pick.choose(w)),c=0,y=Jo.Pick.choose(A),i=Jo.Pick.choose(L),l=Jo.Pick.choose(D),b=0,q.items2D.push(Jo.copy(u)),q.rows++,d.push(s),u=[],M||U?e.pos(a+(e.marginRight||0),s+(e.marginTop||0),Jo.RIGHT,U?Jo.TOP:Jo.BOTTOM):e.pos(a+(e.marginLeft||0),s+(e.marginTop||0)),i&&(g=e.boundsToGlobal(),o=q.globalToLocal(g.x+e.wrapWidth/2,g.y+e.wrapHeight/2),e.centerX=o.x,e.centerY=o.y,o=null),b++,f?z=0:(z=(e.marginLeft||0)+e.wrapWidth+(e.marginRight||0)+Jo.Pick.choose(E),m.x=M||U?G-((e.marginRight||0)+e.wrapWidth):(e.marginLeft||0)+e.wrapWidth)),u.push(e),p+=e.wrapWidth,a=z,c=y||Math.max(c,e.wrapHeight+(e.marginTop||0)+(e.marginBottom||0)),h=new Jo.Point(m.x,s+c)},(!k||!M)&&(k||M)),0<q.numChildren&&(0==q.cols&&(q.cols=q.numChildren),q.items2D.push(Jo.copy(u)),d.push(s),Q(u,h,c,p,f,i,l,!0),q.rows+=1);var o,n=Jo.Pick.choose(x);zot(n),M&&(o=s+c-200,Jo.loop(this,function(e){e.mov(0,o)}),q.items2D.reverse(),Jo.loop(q.items2D,function(e){e.reverse()}));var r,v,e=Jo.Pick.choose(_),t=Jo.Pick.choose(R);return zot(e)||(zot(t)&&(t=0),r=(n=s+c)*e/100,v=n/2+t/100*n,Jo.loop(d,function(e,t){if(v<=e)return Jo.loop(q.items2D,function(e){Jo.loop(e,function(e){e.mov(0,r)})},null,1,t),"break"})),zot(O)||("bottom"==x?(o=O-(s+c),Jo.loop(this,function(e){e.mov(0,o)})):"center"!=x&&"middle"!=x||(o=(O-(s+c))/2,Jo.loop(this,function(e){e.mov(0,o)}))),q.setBounds(null),(g=q.getBounds())&&q.setBounds(0,g.y,P,g.height),Jo.loop(q.items2D,function(e){Jo.loop(e,function(e){q.items.push(e)})}),this.stage&&this.stage.update(),q}},this.setProps=function(e){return Jo.setProps(this.items,e),this},Object.defineProperty(q,"spacingH",{get:function(){return E},set:function(e){E=e,this.resize()}}),Object.defineProperty(q,"spacingV",{get:function(){return w},set:function(e){w=e,this.resize()}}),Object.defineProperty(q,"wrapperType",{get:function(){return C},set:function(e){X="spread"==e,N="stretch"==e,C=e,this.resize()}}),Object.defineProperty(q,"align",{get:function(){return S},set:function(e){"middle"==(S=e)&&(S="center"),this.resize()}}),Object.defineProperty(q,"valign",{get:function(){return x},set:function(e){"middle"==(x=e)&&(x="center"),this.resize()}}),Object.defineProperty(q,"alignInner",{get:function(){return B},set:function(e){"middle"==(B=e)&&(B="center"),this.resize()}}),Object.defineProperty(q,"valignInner",{get:function(){return W},set:function(e){"middle"==(W=e)&&(W="center"),this.resize()}}),Object.defineProperty(q,"colSize",{get:function(){return T},set:function(e){T=e,"column"==C&&this.resize()}}),Object.defineProperty(q,"rowSize",{get:function(){return A},set:function(e){A=e,this.resize()}}),Object.defineProperty(q,"flip",{get:function(){return I},set:function(e){I=e,this.resize()}}),Object.defineProperty(q,"reverse",{get:function(){return k},set:function(e){k=e,this.resize()}}),Object.defineProperty(q,"bottomFull",{get:function(){return M},set:function(e){M=e,this.resize()}}),Object.defineProperty(q,"percentVoidH",{get:function(){return L},set:function(e){L=e,this.resize()}}),Object.defineProperty(q,"offsetVoidH",{get:function(){return D},set:function(e){D=e,this.resize()}}),Object.defineProperty(q,"percentVoidV",{get:function(){return _},set:function(e){_=e,this.resize()}}),Object.defineProperty(q,"offsetVoidV",{get:function(){return R},set:function(e){R=e,this.resize()}}),zot(e)||q.add(e),!1!==o&&Jo.styleTransforms(this,r),this.clone=function(){return q.cloneProps(new Jo.Wrapper(e,P,E,w,C,S,x,B,W,I,k,M,T,A,O,t,j,L,D,_,R,Y,this.style,this.group))}},Jo.extend(Jo.Wrapper,Jo.Container,"clone","zimContainer",!1),Jo.LabelWords&&Jo.extend(Jo.LabelWords,Jo.Wrapper,"clone","zimWrapper",!1),Jo.Tile=function(i,d,h,e,t,l,s,c,o,n,p,g,f,m,u,r,a,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L){var D;if(D=zob(Jo.Tile,arguments,"obj, cols, rows, spacingH, spacingV, unique, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, exact, scaleToH, scaleToV, scaleToType, backgroundColor, backgroundPadding, backgroundPaddingH, backgroundPaddingV, backing, backdropColor, backdropPadding, backdropPaddingH, backdropPaddingV, mat, style, group, inherit",this))return D;z_d("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=j;L=!1===O?{}:Jo.getStyle(this.type,this.group,L);zot(i)&&(i=null!=L.obj?L.obj:new Jo.Circle),zot(d)&&(d=null!=L.cols?L.cols:1121),zot(h)&&(h=null!=L.rows?L.rows:1121),1121==d&&1121==h?d=h=3:1121==d?d=1:1121==h&&(h=1),zot(l)&&(l=null!=L.unique&&L.unique),zot(s)&&(s=null!=L.width?L.width:null),zot(c)&&(c=null!=L.height?L.height:null),zot(p)&&(p=null!=L.colSize?L.colSize:null),zot(g)&&(g=null!=L.rowSize?L.rowSize:null),zot(s)||(p=null),zot(c)||(g=null),zot(e)&&(e=null!=L.spacingH?L.spacingH:null),zot(t)&&(t=null!=L.spacingV?L.spacingV:null);var _=e,R=t;!zot(e)&&zot(p)&&zot(s)||(e=0),!zot(t)&&zot(g)&&zot(c)||(t=0),zot(o)&&(o=null!=L.squeezeH&&L.squeezeH),zot(n)&&(n=null!=L.squeezeV&&L.squeezeV),zot(f)&&(f=null!=L.align?L.align:"left"),zot(m)&&(m=null!=L.valign?L.valign:"top"),zot(u)&&(u=null!=L.count?L.count:l&&Array.isArray(i)?i.length:null),0===u&&(u=null,zon&&zogy("ZIM Tile() - count parameter of 0 is ignored - see docs")),zot(r)&&(r=null!=L.mirrorH&&L.mirrorH),zot(a)&&(a=null!=L.mirrorV&&L.mirrorV),zot(z)&&(z=null==L.snapToPixel||L.snapToPixel),z&&(i&&i.stage?i.stage.snapToPixelEnabled=!0:"undefined"!=typeof elem&&WW.zdf&&(WW.zdf.stage.snapToPixelEnabled=!0)),zot(y)&&(y=null!=L.clone?L.clone:!l&&null),null==y&&(y="function"!=typeof i||"series"==i.type),zot(b)&&(b=null==L.events||L.events),zot(w)&&(w=null!=L.scaleToH?L.scaleToH:null),zot(C)&&(C=null!=L.scaleToV?L.scaleToV:null),zot(x)&&(x=null!=L.scaleToType?L.scaleToType:null),zot(k)&&(k=null!=L.backgroundColor?L.backgroundColor:null),zot(T)&&(T=null!=L.backgroundPadding?L.backgroundPadding:0),zot(A)&&(A=null!=L.backgroundPaddingH?L.backgroundPaddingH:zot(k)?0:T),zot(P)&&(P=null!=L.backgroundPaddingV?L.backgroundPaddingV:zot(k)?0:T),zot(E)&&(E=null!=L.backing?L.backing:null),zot(S)&&(S=null!=L.backdropColor?L.backdropColor:null),zot(B)&&(B=null!=L.backdropPadding?L.backdropPadding:0),zot(W)&&(W=null!=L.backdropPaddingH?L.backdropPaddingH:zot(S)?0:B),zot(I)&&(I=null!=L.backdropPaddingV?L.backdropPaddingV:zot(S)?0:B),(I||W)&&(B=!0),zot(v)&&(v=null!=L.exact?L.exact:null),zot(M)&&(M=null!=L.mat&&L.mat);var Y=this;Y.cols=d=Math.round(d),Y.rows=h=Math.round(h),Y.spacingH=e,Y.spacingV=t,Y.squeezeH=o,Y.squeezeV=n;var X,N="function"==typeof f,F="function"==typeof m;Y.align=N?"left":f,Y.valign=F?"top":m,Y.mirrorH=r,Y.mirrorV=a;var H,V,G,U,q,Q,Z,K,J,$,ee,te,oe,ne,re=0,ie=!(Y.items=[]);e:for(var le=0;le<h;le++)for(var ae=0;ae<d;ae++){if(re++,!zot(u)&&u<re)break e;"string"==typeof(X=l?i[re-1]:Jo.Pick.choose(i))&&(X=WW.asset(X).centerReg({add:!1}).clone()),zot(X)&&(X=new Jo.Container(0,0,0,0)),y&&(0==le&&0==ae||(X=X.clone(v))),b&&X.on("change",function(e){var t=new createjs.Event("change");t.item=e.currentTarget,Y.dispatchEvent(t)}),Y.items.push(X),"AC"==X.type&&(ie=!0),X.tileNum=re-1,X.tileCol=ae,X.tileRow=le}function se(){Y.removeAllChildren(),H=[],V=[],G=[],U=[],q=[],J=K=Z=Q=0,$=[],ee=[],te=[],ne=[],oe=[],Y.items&&Y.items.length||(Y.items=[]),u=Y.items.length;for(var e,t,o,n,r=0,i=0,l=0;l<u;l++)i=Math.floor(l/Y.cols),e=l%Y.cols,zot(H[i])&&(H[i]=[]),zot(Y.items[l])&&(Y.items[l]=new Jo.Container(0,0,0,0)),H[i][e]=Y.items[l];Y.rows=Math.max(1,H.length),Y.cols=Math.max(1,zot(H[0])?0:H[0].length);e:for(i=0;i<Y.rows;i++)for($.push([]),ee.push([]),ne.push([]),g&&zot(c)&&(t=Jo.Pick.choose(g)),l=0;l<Y.cols;l++){if(r++,!zot(u)&&u<r)break e;(a=H[i][l]).snapToPixel=z,Y.addChild(a),$[i].push(a.scaleX),ee[i].push(a.scaleY),p&&zot(s)&&(o=Jo.Pick.choose(p)),0==i&&oe.push(Jo.Pick.choose(f));var a=a.boundsToGlobal(null,null,null,Y);p&&zot(s)||(o=Math.abs(a.width)),g&&zot(c)||(t=Math.abs(a.height)),ne[i][l]=[o,t],zot(U[l])&&(U[l]=0),zot(q[i])&&(q[i]=0),o>U[l]&&(U[l]=o),t>q[i]&&(q[i]=t),zot(V[i])&&(V[i]=0),zot(G[l])&&(G[l]=0),V[i]+=o,G[l]+=t,V[i]>Q&&(Q=V[i]),G[l]>Z&&(Z=G[l]),zot(te[l])&&(te[l]=0),te[l]++}if(!1===Y.squeezeH)for(l=0;l<U.length;l++)n=U[l],K+=n;if(!1===Y.squeezeV)for(l=0;l<q.length;l++)n=q[l],J+=n}ie&&zon&&zogy("ZIM Tile - assets must have dimensions for Tile"),se();var ce,ue,de,he,pe,ge,fe,me,ze,ye,be=K,ve=J,we=1,Ce=1;function xe(e,t){var o,n;Y.normalized&&Y.resetOriginalReg(),!zot(S)&&B&&(e-=Math.max(2*W,0),t-=Math.max(2*I,0)),e<=0&&(e=null),t<=0&&(t=null),ce=zot(e)||"full"!=Y.squeezeH?zot(e)?0<K?K+(Y.cols-1)*Y.spacingH:Q+(Y.cols-1)*Y.spacingH:w?e:Math.max(Q+(Y.cols-1)*Y.spacingH,e):e,ue=zot(t)||"full"!=Y.squeezeV?zot(t)?0<J?J+(Y.rows-1)*Y.spacingV:Z+(Y.rows-1)*Y.spacingV:C?t:Math.max(Z+(Y.rows-1)*Y.spacingV,t):t,Y.setBounds(0,0,ce,ue),we=(ce-(Y.cols-1)*_)/be,Ce=(ue-(Y.rows-1)*R)/ve,de=[],he=[];var r,i,l,a=[];for(le=0;le<H.length;le++)for(o=H[le],ae=n=0;ae<o.length;ae++){X=o[ae],0==le&&(de[ae]=0,zot(t)||("full"==Y.squeezeV?he[ae]=1<te[ae]?(t-G[ae])/(te[ae]-1):0:Y.squeezeV?he[ae]=1<te[ae]?Math.max(Y.spacingV,(t-G[ae])/(te[ae]-1)):0:he[ae]=1<te[ae]?Math.max(Y.spacingV,(ue-G[ae])/(te[ae]-1)):0),Y.squeezeV?"center"==Y.valign||"middle"==Y.valign?a[ae]=(ue-(G[ae]+(te[ae]-1)*(zot(t)?Y.spacingV:he[ae])))/2:"bottom"==Y.valign?a[ae]=ue-(G[ae]+(te[ae]-1)*(zot(t)?Y.spacingV:he[ae])):a[ae]=0:a[ae]=0),0==ae&&(zot(e)||(i="full"==Y.squeezeH?1<o.length?(e-V[le])/(o.length-1):0:Y.squeezeH?1<o.length?Math.max(Y.spacingH,(e-V[le])/(o.length-1)):0:1<o.length?Math.max(Y.spacingH,(ce-V[le])/(o.length-1)):0),r=Y.squeezeH?"center"==Y.align||"middle"==Y.align?(ce-(V[le]+(o.length-1)*(zot(e)?Y.spacingH:i)))/2:"right"==Y.align?ce-(V[le]+(o.length-1)*(zot(e)?Y.spacingH:i)):0:0,l=Jo.Pick.choose(m)),f=oe[ae];var s=ne[le][ae][0],c=ne[le][ae][1];Y.mirrorH&&ae%2==1&&(X.scaleX=-$[le][ae]),X.pos(n,null),!Y.squeezeH&&N?!zot(e)||"center"!=f&&"middle"!=f?zot(e)&&"right"==f&&(X.x+=U[ae]-X.width):X.x+=(U[ae]-X.width)/2:Y.squeezeH?!zot(e)||"center"!=Y.align&&"middle"!=Y.align?zot(e)&&"right"==Y.align&&(X.x+=s-X.width):X.x+=(s-X.width)/2:!zot(e)||"center"!=Y.align&&"middle"!=Y.align?zot(e)&&"right"==Y.align&&(X.x+=U[ae]-X.width):X.x+=(U[ae]-X.width)/2,Y.mirrorV&&le%2==1&&(X.scaleY=-ee[le][ae]),X.pos(null,de[ae]),!Y.squeezeV&&F?!zot(t)||"center"!=l&&"middle"!=l?zot(t)&&"bottom"==l&&(X.y+=q[le]-X.height):X.y+=(q[le]-X.height)/2:Y.squeezeV?!zot(t)||"center"!=Y.valign&&"middle"!=Y.valign?zot(t)&&"bottom"==Y.valign&&(X.y+=c-X.height):X.y+=(c-X.height)/2:!zot(t)||"center"!=Y.valign&&"middle"!=Y.valign?zot(t)&&"bottom"==Y.valign&&(X.y+=q[le]-X.height):X.y+=(q[le]-X.height)/2,!0!==Y.squeezeH&&zot(e)?n+=U[ae]+(zot(e)?Y.spacingH:i):n+=s+(zot(e)?Y.spacingH:i),X.x+=r,X.y+=a[ae],!0!==Y.squeezeV&&zot(t)?de[ae]+=q[le]+(zot(t)?Y.spacingV:he[ae]):de[ae]+=c+(zot(t)?Y.spacingV:he[ae])}Y.normalized&&Y.normalize()}function ke(e){for(var t,o=[],n=0;n<e.length;n++)n%Y.cols==0&&(t=[],o.push(t)),t.push(e[n]);return o}function Te(e){for(var t=[],o=0;o<Y.cols;o++)t.push([]);for(o=0;o<e.length;o++)t[o%Y.cols][Math.floor(o/Y.cols)]=e[o];return t}function Ae(l){var a,s,c,u,e;l&&(me&&me.removeFrom(),M&&M.removeFrom()),(!zot(k)||E||w||C)&&(l||!w&&!C||(ze=[],ye=[]),l&&!zot(k)||(pe=[]),l||zot(k)||(fe=[]),!l&&E&&(ge=[]),a=(p?_:0)/2,s=(g?R:0)/2,u=0,Jo.loop(Y.items2D,function(e,i){Jo.loop(e,function(e,t){var o,n,r=black;zot(k)||(l&&!zot(k)?(r=fe[u],c=pe[u].siz(U[t]*we-(p?_:0)+2*A,q[i]*Ce-(g?R:0)+2*P).loc(a,s,Y,0)):(r=zik(k),fe.push(k),c=new Jo.Rectangle({width:U[t]*we-(p?_:0)+2*A,height:q[i]*Ce-(g?R:0)+2*P,color:r,style:!1,scaleDimensions:!1,strokeObj:{ignoreScale:!0},group:"background"}).loc(a,s,Y,0),pe.push(c)),e.pos(0,0,f,m,c).addTo(Y)),a=c.x+c.width+_,(w||C)&&(l?(o=ze[u],n=ye[u]):(o=zik(w)||100,n=zik(C)||100,ze.push(o),ye.push(n)),e.scaleTo(c,o,n,x).pos(0,0,f,m,c).addTo(Y)),E&&(n=l?ge[u]:zik(E).clone(null,!1),ge.push(n),n.pos(0,0,f,m,c).addTo(Y)),u++}),a=(p?_:0)/2,s+=c.height+R}),E&&!zot(k)&&Jo.loop(ge,function(e){e.addTo(Y,pe.length)},!0),zot(k)?(Jo.loop(pe,function(e){e.dispose()},!0),fe=pe=null):(Y.backgrounds=pe,Y.backgroundColors=fe),zot(k)||!p&&!g||(Y.loop(function(e){e.mov(p?-_/2:0,g?-R/2:0)}),e=Y.getBounds(),Y.setBounds(e.x,e.y,e.width-(p?_:0)*d,e.height-(g?R:0)*h),e=Y.getBounds()),E&&(Y.backings=ge)),M&&(Y.mat=M).center(Y,0),S&&(e=Y.getBounds(),(me=Y.backdrop=new Jo.Rectangle({width:e.width+2*W,height:e.height+2*I,color:S,style:!1,group:"backdrop"})).center(Y,0),Y.loop(function(e){e.mov(Math.max(0,W),Math.max(I,0))}),Y.setBounds(0,0,e.width+2*Math.max(0,W),e.height+2*Math.max(I,0)))}xe(s,c),this.setProps=function(e){return Jo.setProps(this.items,e),this},this.itemUnderPoint=function(o,n,r){if(zot(r)&&(r=!0),!zot(o)&&!zot(n)){var e=Y.globalToLocal(o,n);o=e.x,n=e.y;var i=0,t=Jo.loop(U,function(e,t){return i+=e+Y.spacingH,!((!r||"vertical"==r)&&o>i-Y.spacingH&&o<i)&&(o<i-Y.spacingH/2?t:void 0)});if(!1!==t&&(!0===t&&(t=d-1),!(o<0||ce<o||n<0||ue<n))){var l=0,e=Jo.loop(q,function(e,t){var o=zot(c)?Y.spacingV:he[ae];return!((!r||"horizontal"==r)&&l-o<n&&n<l)&&(n<(l+=e+o)-o/2?t:void 0)});if(!1!==e)return!0===e&&(e=h-1),Y.items2D[e][t]}}},this.remake=function(e){return zot(e)||(Y.items=e),se(),xe(s,c),Ae(!0),Y},this.resize=function(e,t){return zot(e)&&(e=s),zot(t)&&(t=c),xe(s=e,c=t),Ae(!0),Y},Object.defineProperty(this,"items2D",{get:function(){return ke(Y.items)},set:function(){zon&&zogy("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){return Te(Y.items)},set:function(){zon&&zogy("Tile() - items2DCols is read only")}}),Object.defineProperty(this,"current",{get:function(){var n=[];return Jo.loop(Y.items,function(e){var t=e.getBounds(),o=e.x-e.regX+t.x+t.width/2,t=e.y-e.regY+t.y+t.height/2,t=Y.hitTestGrid(Y.width,Y.height,Y.cols,Y.rows,o,t,null,null,Y.spacingH,Y.spacingV,!0,"open");null!=t&&(n[t[0]]=e)}),n},set:function(){zon&&zogy("Tile() - current is read only")}}),Object.defineProperty(this,"current2D",{get:function(){return ke(Y.current)},set:function(){zon&&zogy("Tile() - current2D is read only")}}),Object.defineProperty(this,"current2DCols",{get:function(){return Te(Y.current)},set:function(){zon&&zogy("Tile() - current2DCols is read only")}}),Ae(),!1!==O&&Jo.styleTransforms(this,L),this.clone=function(e){if(zot(e)&&l&&(e=!0),e){var t,o,n=[];k&&(t=[]),E&&(o=[]);for(var r=0;r<Y.items.length;r++)n.push(Y.items[r].clone(!0)),k&&t.push(fe[r]),E&&o.push(ge[r].clone(!0))}return Y.cloneProps(new Jo.Tile(e&&n?Jo.series(n):i.clone?i.clone():i,Y.cols,Y.rows,Y.spacingH,Y.spacingV,!e&&l,s,c,Y.squeezeH,Y.squeezeV,p,g,f,m,Y.items.length,Y.mirrorH,Y.mirrorV,z,!e&&y,b,e,w,C,x,e&&t?Jo.series(t):k,T,A,P,e&&o?Jo.series(o):E&&E.clone?E.clone():E,S,B,W,I,M&&M.clone?M.clone():M,this.style,this.group))}},Jo.extend(Jo.Tile,Jo.Container,"clone","zimContainer",!1),Jo.Pack=function(o,n,i,d,h,p,g,l,r,t,a,s,c,u,f,e,m,z,y,b,v,w,C,x,k,T){var A;if(A=zob(Jo.Pack,arguments,"width, height, items, spacingH, spacingV, flatten, direction, lock, backgroundColor, align, valign, lastAlign, paddingH, paddingV, dragOrder, dragColor, dragThickness, dragDashed, reverse, funnel, showPacking, order, container, style, group, inherit",this))return A;z_d("66.52"),this.group=k;T=!1===x?{}:Jo.getStyle("Pack",this.group,T);zot(o)&&(o=null!=T.width?T.width:500),zot(n)&&(n=null!=T.height?T.height:500),this.zimContainer_constructor(o,n),this.type="Pack",zot(i)&&(i=null!=T.items?T.items:[new Jo.Rectangle(400,300,Jo.orange),new Jo.Rectangle(400,200,Jo.purple),new Jo.Rectangle(500,300,Jo.blue)]),zot(d)&&(d=null!=T.spacingH?T.spacingH:10),zot(h)&&(h=null!=T.spacingV?T.spacingV:10),zot(p)&&(p=null!=T.flatten?T.flatten:"top"),zot(g)&&(g=null!=T.direction?T.direction:"horizontal"),zot(l)&&(l=null!=T.lock?T.lock:"auto"),zot(r)&&(r=null!=T.backgroundColor?T.backgroundColor:Jo.clear),zot(t)&&(t=null!=T.align?T.align:"center"),zot(a)&&(a=null!=T.valign?T.valign:"center"),zot(s)&&(s=null!=T.lastAlign?T.lastAlign:"horizontal"==g?"left":"top"),zot(c)&&(c=null!=T.paddingH?T.paddingH:0),zot(u)&&(u=null!=T.paddingV?T.paddingV:0),zot(f)&&(f=null!=T.dragOrder&&T.dragOrder),zot(e)&&(e=null!=T.dragColor?T.dragColor:Jo.white),zot(m)&&(m=null!=T.dragThickness?T.dragThickness:2),zot(z)&&(z=null==T.dragDashed||T.dragDashed),zot(y)&&(y=null!=T.reverse&&T.reverse),zot(b)&&(b=null!=T.funnel&&T.funnel),zot(v)&&(v=null!=T.showPacking&&T.showPacking),zot(w)&&(w=null!=T.order?T.order:null);var P=this;P.funnel=b;var E=i.length,S=o-2*c,B=n-2*u,W=50;!1===p&&(p=NONE);var I=this.backing=new Rectangle({width:o,height:n,color:r,scaleDimensions:!1}).addTo(this);if(P.items=Jo.copy(i),i.length<=0)return this;if(1==i.length)return M(i[0]),O(i[0]),this;function M(e){e.scaleTo(I,100-c/S*100*2,100-u/B*100*2),e.scale*=P.scale,e.scale<0&&(e.scale=.05)}function O(e){e.pos("center"!=t&&"middle"!=t?c:0,"center"!=a&&"middle"!=a?u:0,t,a,I).addTo(P)}function j(e){var o=[];Jo.loop(e,function(e,t){o[t]=P.items[e]}),i=[],Jo.loop(o,function(e){e&&i.push(e)})}var L,D,_,R,Y,X,N,F,H,V,G,U,q,Q,Z=P.content=new Jo.Container;function K(e){Z.rotation=0;var t=n;n=o,o=t;t=B;B=S,S=t;t=h;h=d,d=t;t=u;u=c,c=t,"right"==p?p="bottom":"center"!=p&&"none"!=p&&(p="top"),"bottom"==s?s="left":"center"!=s&&"middle"!=s&&(s="right"),I.dispose(),I=new Rectangle(o,n,r).center(P),e?("horizontal"==l?l="vertical":"vertical"==l&&(l="horizontal"),Jo.loop(i,function(e,t){var o=new Jo.Container(e.height,e.width);e.rotation+=90,e.pos(0,0,"top","left",o),i[t]=o})):("horizontal"==l?l="vertical":"vertical"==l&&(l="horizontal"),Z.rotation-=90,Jo.loop(i,function(e,t){var o=e,e=e.getChildAt(0).addTo(Z).sca(o.scale);o.dispose(),i[t]=e}))}Jo.loop(i,function(e,t){e.zpRotation=e.rotation,e.zpIndex=t}),w&&j(w),"vertical"==g&&K(!0);var J,$,ee,te=l;function oe(e){"auto"==l&&(l="horizontal"),L=Math.ceil(Math.sqrt(E)),D=Math.ceil(E/L),H=F=N=0,q=U=G=V=Q=X=Y=null,le(e,L,D),function e(t,o,n){t.scale=1;if(20<N++)return void(Q&&Q.clear());var r=!1;if(t.height>B){if(_=o+1,R=Math.ceil(E/_),o==X&&"vertical"==l){if(!(F<H))return t;_=G,R=q,r=!0}}else if(t.height<=B&&(_=Math.max(o-1,1),R=Math.ceil(E/_),o==X&&"horizontal"==l)){if(!(F<H))return t;_=G,R=q,r=!0}X=Y;Y=L;L=_;D=R;Jo.loop(i,function(e){p==NONE&&e.surrogate?(i.splice(i.indexOf(e),1),e.dispose()):e.siz(null,B)},!0);le(i,L,D);H=F;G=V;q=U;F="auto"==te||"horizontal"==l&&Math.round(t.width)==S||"vertical"==l&&Math.round(t.height)==B?t.width*t.height:0;V=L;U=D;if(r)return Q&&Q.clear(),O(t),void(P.stage&&P.stage.update());v?(Q=timeout(1,function(){e(t,L,D)}),O(t),P.stage&&P.stage.update(),t.sca(1)):(t.sca(1),e(t,L,D))}(Z,L)}function ne(){var e,t,o;M(Z),O(Z),"none"==p&&(Jo.loop(i,function(e){e.surrogate?(i.splice(i.indexOf(e),1),e.dispose()):e.bot()},!0),e=D*L-E,"none"==p&&0<e&&(t=Z.getChildAt(Z.numChildren-1),"horizontal"!=g||y||"left"==s?"horizontal"==g&&y&&"right"!=s?(o=t.x+(t.getBounds().x-t.regX)*t.scaleX,Jo.loop(L-e,function(e){Z.getChildAt(Z.numChildren-e-1).mov("left"==s?-o:-o/2)})):"vertical"!=g||y||"right"==s?"vertical"==g&&y&&"left"!=s&&(o=Z.getBounds().width-t.x,Jo.loop(L-e,function(e){Z.getChildAt(Z.numChildren-e-1).mov("right"==s?o:o/2)})):(o=t.x,Jo.loop(L-e,function(e){Z.getChildAt(Z.numChildren-e-1).mov("left"==s?-o:-o/2)})):(o=Z.getBounds().width-(t.x+(t.getBounds().x-t.regX)*t.scaleX+t.width),Jo.loop(L-e,function(e){Z.getChildAt(Z.numChildren-e-1).mov(s==RIGHT?o:o/2)})))),"vertical"==g&&(K(!1),M(Z),O(Z)),P.cols=L,P.rows=D,P.iterations=N-2,P.currentItems=i,P.dispatchEvent("change")}function re(){var o,t,n,r;ie(),ee=Math.min(30,"horizontal"==g?Z.height/D/3*P.scale*Z.scale:Z.width/L/3*P.scale*Z.scale),J?J.siz(ee,ee).reg("center"):J=P.beacon=new Jo.Rectangle({width:ee,height:ee,borderColor:e,borderWidth:m,scaleDimensions:!1}).reg("center").rot(45),$=$||(P.ghost=new Jo.Rectangle({width:100,height:100,borderColor:e,borderWidth:m,dashed:z,scaleDimensions:!1}).reg("center")),P.mdEvent=P.on("mousedown",function(e){n=e.target,J.top(),o=null,i.indexOf(n)<0||(r=P.localToGlobal(P.getBounds().x,P.getBounds().y),e=n.boundsToGlobal(),P.ghost.siz(e.width,e.height).reg("center").loc(e.x+$.width/2,e.y+$.height/2,C||P.stage),$.diffX=P.stage.frame.mouseX-$.x,$.diffY=P.stage.frame.mouseY-$.y,t=Z.getChildIndex(n),P.stage.update())}),P.pmEvent=P.on("pressmove",function(){var e,t;$.parent&&(t=P.stage.frame,$.loc(t.mouseX-$.diffX,t.mouseY-$.diffY,C||P.stage),e=P.getObjectUnderPoint(($.x-r.x)/P.scaleX,($.y-r.y)/P.scaleY,1),0<=i.indexOf(e)&&(t=e.boundsToGlobal(),o="horizontal"==g?$.x>=t.x+t.width/2?(J.loc(t.x+t.width+d/2*P.scaleX*Z.scaleX,t.y+t.height/2,C||P.stage),Z.getChildIndex(e)+(y?0:1)):(J.loc(t.x-d/2*P.scaleX*Z.scaleX,t.y+t.height/2,C||P.stage),Z.getChildIndex(e)+(y?1:0)):$.y>=t.y+t.height/2?(J.loc(t.x+t.width/2,t.y+t.height+h/2,C||P.stage),Z.getChildIndex(e)+(y?0:1)):(J.loc(t.x+t.width/2,t.y-h/2,C||P.stage),Z.getChildIndex(e)+(y?1:0))),P.stage.update())}),P.puEvent=P.on("pressup",function(){$.parent&&(null!=o&&(t<o&&o--,o!=t&&(n.level=o,i=[],Z.loop(function(e,t){i.push(e.rot(e.zpRotation||0).sca(1))}),l=te,"vertical"==g&&K(!0),oe(i),ne())),$.removeFrom(),J.removeFrom(),P.stage.update())})}function ie(){P.mdEvent&&P.off("mousedown",P.mdEvent),P.pmEvent&&P.off("pressmove",P.pmEvent),P.puEvent&&P.off("pressup",P.puEvent),J&&J.removeFrom(),$&&$.removeFrom()}function le(e,t,o){var n=0;Jo.loop(e,function(e,t){e.siz(null,W),n+=e.width});var r=n/E,i=e;E%t!=0&&p==NONE&&Jo.loop(t-E%t,function(){var e=new Jo.Rectangle(r,W,grey);e.surrogate=!0,i.push(e)});var l,a,e=new Tile(i,t,o,0,0,!0),s=[],c=Jo.copy(e.items2D);"none"!=p&&t*o!=E&&1<c.length&&("bottom"==p?(l=P.funnel?Math.floor((t*o-E)/2):Math.ceil((t*o-E)/2),Jo.loop(l,function(e){c[o-1].unshift(c[o-2].pop())})):(a=t*o-E,Jo.loop(c,function(e,t,o){t!=o-1&&Jo.loop(e.splice(-a,a),function(e){c[t+1].unshift(e)},!0)}),l=P.funnel?Math.floor((t*o-E)/2):Math.ceil((t*o-E)/2),Jo.loop(l,function(e){c[0].push(c[1].shift())}))),Jo.loop(c,function(e,t,o){var n=0;Jo.loop(e,function(e){n+=e.width});var r=(S-d*(e.length-1))/n;Jo.loop(e,function(e){e.scale*=r});var i=Jo.copy(e);(y&&"horizontal"==g||!y&&"vertical"==g)&&i.reverse();e=new Tile(i,e.length,1,d,0,!0);y&&e.loop(function(e){e.bot()}),s.push(e)}),e.dispose();var u=0;return Z.loc(I,null,P),Z.removeAllChildren(),Jo.loop(s,function(e){e.loc(0,u,Z),u+=e.height+h,e.loop(function(e,t,o){e.addTo(Z).ord(-(o-t))},!0)}),Jo.loop(s,function(e){e.dispose()},!0),M(Z),Z}oe(i),ne(),f&&P.added(re),P.getOrder=function(e){var t,o;return zot(e)&&(e=!1),e&&(t||(t=P.pane=new Jo.Pane({displayClose:!1,container:P.stage,width:Math.min(500,P.stage.width-20),height:Math.min(500,P.stage.height-20),draggable:!0}),(o=P.textArea=new Jo.TextArea(Math.min(400,P.stage.width-70),Math.min(400,P.stage.height-70))).centerReg(t)),t.show(),o.text=JSON.stringify(P.order)),P.order},this.setOrder=function(e){return j(e),oe(i),ne(),P},this.addAt=function(e,o){return zot(e)||(zot(o)&&(o=P.items.length),Array.isArray(e)||(e=[e]),Jo.loop(e,function(e,t){P.items.push(e),e.zpIndex=P.items.length-1,P.currentItems.splice(o+t,0,e)}),oe(P.currentItems),ne()),P},this.removeAt=function(e,t){zot(e)&&(e=1),zot(t)&&(t=P.items.length);e=P.currentItems.splice(t,e);return Jo.loop(e,function(e){e=P.items.indexOf(e);P.items.splice(e,1)}),oe(P.currentItems),ne(),P},Object.defineProperty(P,"order",{get:function(){var t=[];return Z.loop(function(e){t.push(e.zpIndex)}),t},set:function(e){P.setOrder(e)}}),Object.defineProperty(P,"lock",{get:function(){return te},set:function(e){e!=te&&(l=e,oe(i),ne(),f&&re())}}),Object.defineProperty(P,"direction",{get:function(){return g},set:function(e){e!=g&&(g=e,Z.rotation=0,i=[],Z.loop(function(e,t){i.push(e.rot(e.zpRotation||0).sca(1))}),"vertical"==g&&K(!0),oe(i),ne(),f&&re())}}),Object.defineProperty(P,"spacing",{get:function(){return"vertical"==g?h:d},set:function(e){d=h=e,oe(i),ne()}}),Object.defineProperty(P,"outerWidth",{get:function(){return o},set:function(e){o!=e&&(S=(o=e)-2*c,I&&(I.widthOnly=o,I.center(P)),oe(i),ne(),f&&re())}}),Object.defineProperty(P,"outerHeight",{get:function(){return n},set:function(e){n!=e&&(B=(n=e)-2*u,I&&(I.heightOnly=n,I.center(P)),oe(i),ne(),f&&re())}}),Object.defineProperty(P,"flatten",{get:function(){return p},set:function(e){p!=e&&(p=e,oe(i),ne())}}),Object.defineProperty(P,"dragOrder",{get:function(){return f},set:function(e){e?re():(ie(),P.stage&&P.stage.update())}}),!1!==x&&Jo.styleTransforms(this,T),this.dispose=function(e){return f&&ie(),P.items=null,P.currentItems=null,e||this.zimContainer_dispose(!0),!0},this.clone=function(){return P.cloneProps(new Jo.Pack(o,n,Jo.copy(i,!0),d,h,p,g,l,r,t,a,s,c,u,f,e,m,z,y,b,v,Jo.copy(P.order),C,this.style,this.group))}},Jo.extend(Jo.Pack,Jo.Container,["dispose","clone"],"zimContainer",!1),Jo.Beads=function(i,n,e,l,r,a,s,c,u,d,h,p,t,o,g){var f;if(f=zob(Jo.Beads,arguments,"path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit",this))return f;z_d("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=t;t=!1===o?{}:Jo.getStyle(this.type,this.group,g);zot(c)&&(c=null!=t.onTop&&t.onTop),zot(u)&&(u=null!=t.showControls&&t.showControls),zot(d)&&(d=null==t.visible||t.visible),zot(h)&&(h=null==t.interactive||t.interactive),zot(i)&&(i=null!=t.path?t.path:new Jo.Blob({color:null,borderWidth:3,borderColor:Jo.blue})),i.visible=d,i.interactive=h,i.toggle(u),i.onTop=c,zot(n)&&(n=null!=t.obj?t.obj:new Jo.Circle(10)),zot(e)&&(e=null!=t.count?t.count:10),zot(l)&&(l=null!=t.angle?t.angle:null),zot(r)&&(r=null!=t.startPercent?t.startPercent:0),zot(a)&&(a=null!=t.endPercent?t.endPercent:100),zot(s)&&(s=null!=t.percents?t.percents:null);g=a<r?100+a:a;if(zot(s)){var m="Squiggle"==i.type?(g-r)/(e-1):(g-r)/(e-(r!=g%100?1:0));s=[];for(var z=r-m,y=0;y<e;y++)s.push(z+m),100<(z+=m)&&(z-=100)}zot(p)&&(p=null==t.clone||t.clone);var b,v=this;for(v.count=e,v.percents=s,v.items=[],y=0;y<e;y++)b=Jo.Pick.choose(n),p&&0!=y&&(b=b.clone()),b.beadNum=y,b.startPercent=s[y],v.items.push(b);v.path=i.addTo(v),v.beads=(new Jo.Container).addTo(v,c?0:null),v.beads.type="BeadsContainer",this.resize=function(){for(var e=i.segmentRatios,t=i.segmentPoints,o=0;o<v.count;o++){var n,r=i.getCurvePoint(Math.max(0,Math.min(.9999,s[o]/100)),e,t,!0);r&&((n=v.beads.globalToLocal(r.x,r.y))&&v.items[o].loc(n,null,v.beads).rot(zot(l)?180<r.angle?r.angle-360+i.rotation:r.angle+i.rotation:l))}return this},v.resize(),h&&(i.on("pressmove",v.resize),i.on("update",v.resize)),!1!==o&&Jo.styleTransforms(this,t),this.dispose=function(e){return e||this.zimContainer_dispose(!0),v.items=[],!0},this.clone=function(e){if(e)for(var t=[],o=0;o<v.items.length;o++)t.push(v.items[o].clone(!0));return v.cloneProps(new Jo.Beads(i.clone(),e?Jo.series(t):n.clone?n.clone():n,v.count,l,r,a,s,c,u,d,h,p,this.style,this.group))}},Jo.extend(Jo.Beads,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Layout=function(x,k,T,e,A,P,t,E,o,n,r,i){var l;if(l=zob(Jo.Layout,arguments,"holder, regions, lastMargin, lastMarginMin, backgroundColor, vertical, showRegions, scalingObject, hideKey, style, group, inherit",this))return l;z_d("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=r;i=!1===n?{}:Jo.getStyle(this.type,this.group,i);if(zot(x)&&(x=null!=i.holder?i.holder:null),zot(E)&&(E=null!=i.scalingObject?i.scalingObject:null),!zot(x)&&x.getBounds)if((E=zot(E)?x:E).getBounds&&E.getBounds()){var S,B=E.getBounds();x.setBounds(0,0,B.width,B.height),zot(T)&&(T=null!=i.lastMargin?i.lastMargin:0),zot(e)&&(e=null!=i.lastMarginMin?i.lastMarginMin:0),zot(P)&&(P=null==i.vertical||i.vertical),zot(A)&&(A=null!=i.backgroundColor?i.backgroundColor:""),zot(o)&&(o=null!=i.hideKey?i.hideKey:"B"),zot(t)&&(t=null!=i.showRegions?i.showRegions:null),t&&(S=new Jo.Shape);var W,I=this.backing=new Jo.Shape,M=this;if(this.active=!0,zot(k)&&(k=null!=i.regions?Jo.copy(i.regions):null),!zot(k)){Jo.loop(k,function(e,t){e instanceof createjs.DisplayObject&&(k[t]={obj:e}),k[t].object&&(k[t].obj=k[t].object,delete k[t].object)}),this.regions=k;var O=0,j="minWidth",L="width",D="height",_="marginLeft",R="marginMinLeft",Y="maxHeight";P&&(j="minHeight",L="height",D="width",_="marginTop",R="marginMinTop",Y="maxWidth");for(var X,N=[],F=0,a=0;a<k.length;a++){if(!(W=k[a]).obj||!W.obj.getBounds())return void zogy("Layout(): each region object must have an object with setBounds() set");W[j]||(W[j]=0),W[L]||(W[L]=0),W.backgroundColor||(W.backgroundColor=""),W.given=0,W.maxGiven=0,"auto"==W[_]?(N[a]=!0,F++,W[R]?W[_]=W[R]:delete W[_]):W[_]&&W[R]&&W[_]<W[R]&&(W[_]=W[R]),zot(W[_])&&(W[_]=1e-4),W[Y]||(W[Y]=100),P?(W.align||(W.align="middle"),W.valign||(0==a?W.valign="top":a==k.length-1?W.valign="bottom":W.valign="middle",1==k.length&&(W.valign="middle"))):(W.valign||(W.valign="top"),W.align||(0==a?W.align="left":a==k.length-1?W.align="right":W.align="middle",1==k.length&&(W.align="middle"))),W[L]&&(W[j]=0),O+=W[L]+W[_]}"auto"==T?(N[k.length]=!0,T=e||0):T&&e&&T<e&&(T=e),100<(O+=T)?zogy("Layout(): cannot fit regions into 100% bounds"):(X=100-O,H(),this.resize=function(){if(M.active){for(B=E.getBounds(),x.setBounds(0,0,B.width,B.height),I.graphics.clear(),""!=A&&(V(I,A,0,0,B.width,B.height),I.graphics.r(0,0,B.width,B.height)),s=0;s<k.length;s++)(W=k[s]).maxGiven=0,W.marginGiven=0;for(var e,t,o,n,r,i=!0,l=X;i;){for(e=!(i=!1),s=0;s<k.length;s++)0<(W=k[s]).given&&0==W.maxGiven&&(t=W.obj.getBounds()[L],o=W.obj.getBounds()[D],n=W.given*B[L]/100,(r=W[Y]*B[D]/100)<o/t*n&&"Window"!=W.obj.type?(W.maxGiven=t/o*r*100/B[L],l-=W.maxGiven):e=!1);if(e)break;for(var a=0,s=0;s<k.length;s++)0==(W=k[s])[L]&&0==W.maxGiven&&(a+=W.obj.getBounds()[L]);for(s=0;s<k.length;s++)0==(W=k[s])[L]&&0==W.maxGiven&&(W.given=W.obj.getBounds()[L]/a*l)}var c=!0;if(0<(W=k[0]).maxGiven?W.maxGiven<W[j]&&(W[L]=W[j],c=!1):0<W.given&&W.given<W[j]&&(W[L]=W[j],c=!1),0<(W=k[k.length-1]).maxGiven?W.maxGiven<W[j]&&(W[L]=W[j],c=!1):0<W.given&&W.given<W[j]&&(W[L]=W[j],c=!1),!c){for(s=O=0;s<k.length;s++)W=k[s],O+=W[L]+W[_];return 100<(O+=T)?void zogy("zim display - Layout(): cannot fit regions into 100% bounds"):(X=100-O,H(),void M.resize())}var u=!0,d=0,h=0;for(s=0;s<k.length;s++)d+=(W=k[s])[_],0<W[L]?h+=W[L]:0<W.maxGiven?h+=W.maxGiven:0<W.given&&(h+=W.given),0==W[L]&&(u=!1);if(u||e){var p=100-h-(d+=T);if(d-=T+k[0][_],0!=p&&0!=d)for(s=0;s<k.length;s++)0!=s&&((W=k[s]).marginGiven=W[_]/d*(d+p))}if(0<F){var g=0,f=0;for(s=0;s<k.length;s++)0<(W=k[s]).marginGiven?f+=W.marginGiven:f+=W[_],W.marginGiven=0,g+=.05<W[_]?W[_]:0;var m=(f-g)/F;for(s=0;s<N.length;s++)N[s]&&k[s]&&((W=k[s]).marginGiven=(W[R]||0)+m)}var z,y,b,v,w,C=0;for(S&&S.graphics&&(w=S.graphics).c(),s=0;s<k.length;s++)0<(W=k[s]).marginGiven?C+=W.marginGiven*B[L]/100:C+=W[_]*B[L]/100,t=(t=0<W[L]?W[L]:0<W.maxGiven?W.maxGiven:0<W.given?W.given:0)*B[L]/100,o=W[Y]*B[D]/100,z=(B[D]-o)/2,y=P?("Wrapper"==W.obj.type&&W.obj.resize(o),"Window"==W.obj.type&&W.obj.resize(o,t),"Region"==W.obj.type&&W.obj.setBounds(o,t),Jo.fit(W.obj,z,C,o,t)):("Wrapper"==W.obj.type&&W.obj.resize(t),"Window"==W.obj.type&&W.obj.resize(t,o),"Region"==W.obj.type&&W.obj.setBounds(t,o),Jo.fit(W.obj,C,z,t,o)),"top"==W.valign?W.obj.y=y.bY:"bottom"==W.valign&&(W.obj.y=y.bY+y.bHeight-y.height),"left"==W.align?W.obj.x=y.bX:"right"==W.align&&(W.obj.x=y.bX+y.bWidth-y.width),S&&S.graphics&&(w.s("white").ss(2).r(y.bX,y.bY,y.bWidth,y.bHeight),w.s("#ff8203").sd([20,20]).r(y.bX,y.bY,y.bWidth,y.bHeight).sd()),(v=b=0)!=C&&C+t!=B[L]||(P?v=1:b=1),o==B[D]&&(P?b=1:v=1),""!=W.backgroundColor&&(V(I,W.backgroundColor,y.bX,y.bY,y.bWidth+b,y.bHeight+v),I.graphics.r(y.bX,y.bY,y.bWidth+b,y.bHeight+v)),C+=t,W.obj.ZIMoutlineShape&&W.obj.outline()}},this.resize(),S&&x.addChild(S),x.addChildAt(I,0),WW.addEventListener("keydown",s),this.disable=function(){M.active=!1,WW.removeEventListener("keydown",s),S&&(S.alpha=0)},this.enable=function(){M.active=!0,WW.addEventListener("keydown",s),M.resize(),S&&(S.alpha=1)},this.removeShape=function(){S&&(S.graphics.clear(),S.dispose(),S=null,S=!1),WW.removeEventListener("keydown",s)},this.toggled=!0,this.toggle=function(e){return S.visible=!0===e||!1!==e&&!S.visible,M.toggled=S.visible,M},!(this.addShape=function(e){M.removeShape(),S=e,WW.addEventListener("keydown",s),x.addChild(S),M.resize()})!==n&&Jo.styleTransforms(this,i),E.added?E.added(c):c(E),this.dispose=function(){var e;return M.resize=null,Jo.globalManager&&((e=Jo.globalManager).remove(M),0==Jo.globalManager.items.length&&(e.frame.off("resize",e.event),e.dispose(),Jo.globalManager=null)),M.backing&&M.backing.dispose(),M.backing=null,M.removeShape(),!0})}}else zog("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");else zog("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");function H(){for(var e=0,t=0;t<k.length;t++)((W=k[t]).given=0)==W[L]&&(e+=W.obj.getBounds()[L]);for(t=0;t<k.length;t++)0==(W=k[t])[L]&&(W.given=W.obj.getBounds()[L]/e*X)}function V(e,t,o,n,r,i){"GradientColor"==t.type?e.graphics.lf(t.colors,t.ratios,o,n,o,n+i):"RadialColor"==t.type?e.graphics.rf(t.colors,t.ratios,o+r/2,n+i/2,0,o+r/2,n+i/2,Math.max(r/2,i/2)):"BitmapColor"==t.type?e.graphics.bf(t.image,t.repetition,t.matrix):e.graphics.f(W.backgroundColor)}function s(e){e=e||event,S&&String.fromCharCode(e.keyCode)==o.toUpperCase()&&(M.toggle(),S.stage&&S.stage.update())}function c(e){var t;e&&e.frame&&"full"==e.frame.scaling&&(Jo.globalManager||((t=Jo.globalManager=new Jo.Manager).frame=e.frame,t.event=e.frame.on("resize",function(){t.resize()})),Jo.globalManager.add(M))}},Jo.extend(Jo.Layout,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Jo.Accessibility=function(u,e,o,t,n,h,p,r,i,l,a,s,c,d,g){var f;if(f=zob(Jo.Accessibility,arguments,"appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",this))return f;z_d("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",zot(u)&&(u="application"),zot(t)&&(t=!1),zot(n)&&(n=2),zot(h)&&(h=WW.zdf),zot(p)&&(p=!Jo.mobile()),zot(r)&&(r=!1);var m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,F,H=$o(i);function V(e){var t=e.currentTarget.boundsToGlobal(),o=t.x+t.width/2,t=t.y+t.height/2;(e.stageX/Jo.scaX<o-5||e.stageX/Jo.scaX>o+5||e.stageY/Jo.scaY<t-5||e.stageY/Jo.scaY>t+5?q:U)()}function G(){I&&(I.innerHTML="")}function U(){var e,t;E=!0,J(),I&&I.setAttribute("aria-hidden",!1),Jo.ACTIONEVENT="click",zns||(WW.ACTIONEVENT="click"),h.stage.removeChild(k),A&&(y.alwaysHighlight=!1),h.stage.update();for(var o=0;o<b.length;o++)(t=(e=b[o]).obj.zimTabTag).disabled=!1,e.title=e.title.replace(/\s\(use arrow keys\)/,""),t.setAttribute("aria-label",e.title),t.addEventListener("focus",Q)}function q(){E=!1;for(var e=0;e<b.length;e++)b[e].obj.zimTabTag.disabled=!1;J(),r&&function(){for(var e=0;e<w.length;e++){var t=w[e];t.zimObject&&("Loader"==t.zimObject.type||"TextArea"==t.zimObject.type||"Tag"==t.zimObject.type)||(w[e].style.left="-2000px")}}()}function Q(e){var t=e.currentTarget,e=t.zimObject;v=e.zimTabIndex,e.focus=!0;e=new createjs.Event("change");e.title=t.getAttribute("aria-label"),y.dispatchEvent(e)}function Z(e){E=!1,e.target.focusTab.focus()}function K(){(zot(E)||E?U:q)()}function J(){P=!0,B.removeEventListener("focus",K),W.removeEventListener("focus",K),M.removeEventListener("focus",Z),O.removeEventListener("focus",Z),M.parentNode&&(M.parentNode.removeChild(M),O.parentNode.removeChild(O)),j.removeEventListener("focus",Z),L.removeEventListener("focus",Z),j.parentNode&&(j.parentNode.removeChild(j),L.parentNode.removeChild(L));for(var e=0;e<S.length;e++)S[e][0].off("mousedown",S[e][1])}function $(e){var t=e.currentTarget;if("RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type)for(var o=0;o<t.zimTabParent.buttons.length;o++){var n=t.zimTabParent.buttons[o];n.zimTabTag.setAttribute("aria-label",n.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(t.zimTabParent.index==n.tabIndex?" - currently selected.":" - currently not selected."))}y.tabIndex=e.currentTarget.zimTabIndex,y.activatedObject=t}function ee(e){return e.talk||("TextArea"==e.type||"RadioButtons"==e.type||"Tabs"==e.type||"Pad"==e.type?e.type:"Waiter"==e.type?"Waiter active - please wait":e.text?e.type+" - "+("a"==e.text||"A"==e.text?"eh":e.text):e.type+("Dial"==e.type||"Slider"==e.type||"ColorPicker"==e.type||"Stepper"==e.type?" (use arrow keys)":"")+("TextArea"==e.type?" (press ENTER to edit)":""))}function te(e){var t=e.obj;e.title=e.title.replace(/\.$/,""),"RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type?e.title=e.title+(t.tabIndex==t.zimTabParent.index?" - currently selected":" - currently not selected"):"CheckBox"==t.type?e.title=e.title+(t.checked?" - currently checked":" - currently not checked"):"Stepper"==t.type?e.title=e.title+" - currently displaying "+t.value:"Slider"==t.type||"Dial"==t.type?e.title=e.title+" - currently at "+Jo.decimals(t.value,y.decimals):"ColorPicker"==t.type?e.title=e.title+" - currently at "+t.selectedColor:"TextArea"==t.type?e.title=e.title+(""!=t.tag.value?"":" - placeholder: "+t.tag.placeholder):"Indicator"==t.type?e.title=e.title+" - currently "+(0<=t.index?"at "+(t.index+1)+" of "+t.num:"not indicating"):"TextInput"==t.type&&(e.title=e.title+(""!=t.htmlTag.value?"":" - placeholder: "+t.htmlTag.placeholder)),e.title+="."}function oe(e,t,o,n,r){var i,l;if(n&&(i=n.obj),n&&("TextArea"==i.type||"Loader"==i.type))return(l=i.tag).setAttribute("aria-label",t),i&&l.setAttribute("aria-hidden",!i.stage),"before"==r?o.parentNode.insertBefore(l,o):o.parentNode.insertBefore(l,o.nextSibling),"TextArea"==i.type?l.style.zIndex=3:l.style.zIndex=-5,l.zimObject=i,n.obj.zimTabTag=l,w.push(l),l;if(n&&"TextInput"==i.type)return(l=i.htmlTag).setAttribute("aria-label",t),i&&l.setAttribute("aria-hidden",!i.stage),"before"==r?o.parentNode.insertBefore(l,o):o.parentNode.insertBefore(l,o.nextSibling),l.style.zIndex=-5,l.zimObject=i,n.obj.zimTabTag=l,w.push(l),l;if(!n||"Dial"!=i.type&&"Slider"!=i.type&&"Stepper"!=i.type&&"ColorPicker"!=i.type)l=document.createElement("div"),i&&(l.zimObject=i),l.innerHTML="tag",l.setAttribute("role",p?"application":"button"),"android"==A&&l.addEventListener("click",function(){i.dispatchEvent("click")});else{var a,s,c=[];if("Dial"==i.type||"Slider"==i.type)for(var u=i.step<=0?(i.max-i.min)/20:i.step,d=i.min;d<i.max;d+=u)c.push(i.min+d);else"Stepper"==i.type?c=i.stepperArray:"ColorPicker"==i.type&&(c=i.colors);for((l=document.createElement("select")).disabled=!0,l.zimObject=i,l.addEventListener("change",function(e){!E&&"android"==!A||(e.currentTarget.zimObject.zimTabParent.valueEvent=e.target.value,h.stage.update())}),l.size=1,d=0;d<c.length;d++)a=c[d],(s=document.createElement("option")).setAttribute("aria-label",a),s.innerHTML=a,l.add(s),a==i.zimTabParent.value&&s.setAttribute("selected","selected");l.setAttribute("role","button")}return l.setAttribute("id",e),l.setAttribute("tabindex",0),l.setAttribute("aria-label",t),i&&l.setAttribute("aria-hidden",!i.stage),"before"==r?o.parentNode.insertBefore(l,o):o.parentNode.insertBefore(l,o.nextSibling),l.style.position="absolute",n?(o=(i=n.obj).boundsToGlobal(),h.retina?(l.style.left=h.x+o.x*h.scale/z+"px",l.style.top=h.y+o.y*h.scale/z+"px",l.style.width=o.width*h.scale/z+"px",l.style.height=o.height*h.scale/z+"px"):(l.style.left=h.x+o.x*h.scale+"px",l.style.top=h.y+o.y*h.scale+"px",l.style.width=o.width*h.scale+"px",l.style.height=o.height*h.scale+"px"),n.obj.zimTabTag=l):(l.style.left="-1000px",l.style.top=h.y+"px"),l.style.overflow="hidden",l.style.zIndex=-5,l.style.fontSize="20px",l.style.color="rgba(0,0,0,.01)",w.push(l),l}function ne(e){e.ctrlKey?re(e.shiftKey?-1:1):(e.shiftKey?y.tab(-1):y.tab(1),e.preventDefault())}function re(e){_=!1,zid(T+(1==e?"SuffixTab":"PrefixTab")).focus(),h.stage.removeChild(d),h.stage.update(),y.tabIndex=-1}zot(i)&&(i="s"==H?.7:700),zot(l)&&(l="brown"),zot(a)&&(a=3),zot(s)&&(s=5),zot(c)&&(c=.8),zot(g)&&(g=.8),zot(d)?(m=new Jo.Shape({style:!1})).mouseEnabled=!1:d.mouseEnabled&&(d.mouseEnabled=!1),void 0===h&&(h=WW.zdf),zot(h)?zon&&zogy("Accessibility - needs a Frame"):(z=h.retina&&WW.devicePixelRatio||1,(y=this).cycle=t,y.decimals=n,y.alwaysHighlight=r,y.AHTime=i,y.AHColor=l,y.AHBorderWidth=a,y.AHBorderPadding=s,y.AHAlpha=c,y.AHObjectScale=g,v=b=-1,w=[],C=[],x={RadioButtons:"option",Tabs:"tab",Pad:"key"},T=h.canvas.id,A=Jo.mobile(),P=!1,E=null,S=[],Object.defineProperty(this,"tabOrder",{get:function(){return b},set:function(e){var t,o;for(B&&B.removeEventListener("focus",G),W&&W.removeEventListener("focus",G),i=0;i<w.length;i++)w[i].parentElement&&(w[i].outerHTML="");for(w=[],i=0;i<C.length;i++)(t=b[i])&&C[i][0].off("mousedown",C[i][1]);C=[],b=[];var n=[];D=h.shim?document.body:h.canvas,N=!1;for(var r=0,i=0;i<e.length;i++){if("HotSpots"==(t=e[i]).type&&(e.splice.apply(e,[i,1].concat(t.hotSpots)),t=t.hotSpots[0]),"HotSpot"==t.type&&(t=t.spot),t.constructor=={}.constructor){if(!(o=t.obj)||!o.getStage)continue;t.title||(t.title=ee(o))}else t={obj:o=t,title:ee(t)};if("RadioButtons"==o.type||"Tabs"==o.type||"Pad"==o.type){var l=[];r--;for(var a=0;a<o.buttons.length;a++){r++;var s=o.buttons[a],c={obj:s,title:t.title+" - "+x[o.type]+": "+("a"==s.text||"A"==s.text?"eh":s.text)};l.push(c),s.zimTabParent=o,s.zimTabParent.zimAccessibility=y,s.zimTabIndex=i+r,s.tabIndex=a,s.zimAccessibility=y,te(c),D=oe(T+"Tab"+(i+r),c.title,D,c),C.push([s,s.on("mousedown",$)]),P||S.push([s,s.on("mousedown",V)])}n=n.concat(l)}else o.zimTabIndex=i+r,o.zimTabParent=o,te(t),o.zimAccessibility=y,C.push([o,o.on("mousedown",$)]),P||S.push([o,o.on("mousedown",V)]),n.push(t),D=oe(T+"Tab"+(i+r),t.title,D,t)}(B=y.startAppTag=oe(T+"PrefixTab",u+" start",h.shim?document.body:h.canvas,null,"before")).addEventListener("focus",G),P||(B.addEventListener("focus",K),(M=oe(T+"noAriaTab","",B,null,"before")).setAttribute("aria-hidden",!0),M.focusTab=B,M.addEventListener("focus",Z),(j=oe(T+"noAriaTab","",B)).setAttribute("aria-hidden",!0),j.focusTab=B,j.addEventListener("focus",Z)),D=oe(T+"BufferTab","",D),A&&D.setAttribute("aria-hidden",!0),D=W=y.endAppTag=oe(T+"SuffixTab",u+" end",D),W.addEventListener("focus",G),P||(W.addEventListener("focus",K),D=O=oe(T+"noAriaTab","",W),O.setAttribute("aria-hidden",!0),O.focusTab=W,O.addEventListener("focus",Z),(L=oe(T+"noAriaTab","",W,null,"before")).setAttribute("aria-hidden",!0),L.focusTab=W,L.addEventListener("focus",Z)),b=n}}),Object.defineProperty(this,"tabIndex",{get:function(){return v},set:function(e){var t,o,n,r,i;function l(){if(v&&-1<v)b&&b[v]&&(b[v].obj.focus=!1);else for(var e=0;e<b.length;e++)b[e].obj.focus=!1}function a(){l(),_=!1,y.AHObject&&h.stage.removeChild(y.AHObject),y.alwaysHighlightShape&&h.stage.removeChild(y.alwaysHighlightShape),h.stage.update(),v=-1}F&&(e<0||e>=b.length?a():(e!=v&&l(),(t=b[e].obj).stage?(v=e,t.focus=!0,R=!(_=!0),y.changeTitle(t),t.zimTabTag.focus(),setTimeout(function(){t.zimTabTag.focus();var e=new createjs.Event("change");e.title=t.zimTabTag.getAttribute("aria-label"),y.dispatchEvent(e)},150),!y.alwaysHighlight||E&&A||(y.AHObject?(k=y.AHObject,r=Jo.boundsToGlobal(t),y.AHObject.alp(y.AHAlpha).addTo(h.stage,null,!1),y.AHObject.fit(r.x,r.y,r.width,r.height),y.AHObject.sca(y.AHObject.scaleX*y.AHObjectScale),0<y.AHTime&&(X=setTimeout(function(){h.stage.removeChild(y.AHObject),h.stage.update()},y.AHTime*("s"==H?1e3:1)))):(k=m,i=t.getBounds(),o=t.localToGlobal(i.x-5,i.y-5),n=t.localToGlobal(i.x+i.width+5,i.y-5),e=t.localToGlobal(i.x+i.width+5,i.y+i.height+5),r=t.localToGlobal(i.x-5,i.y+i.height+5),(i=m.graphics).clear(),i.s(y.AHColor).ss(y.AHBorderWidth).mt(o.x-y.AHBorderPadding,o.y-y.AHBorderPadding).lt(n.x+y.AHBorderPadding,n.y-y.AHBorderPadding).lt(e.x+y.AHBorderPadding,e.y+y.AHBorderPadding).lt(r.x-y.AHBorderPadding,r.y+y.AHBorderPadding).lt(o.x-y.AHBorderPadding,o.y-y.AHBorderPadding).cp(),m.alpha=y.AHAlpha,0<y.AHTime&&(X=setTimeout(function(){h.stage.removeChild(m),h.stage.update()},y.AHTime*("s"==H?1e3:1)))),h.stage.addChild(k),h.stage.update())):a()))}}),Object.defineProperty(this,"aria",{get:function(){return E},set:function(e){(E=e)&&U()}}),"android"==A&&(Jo.ACTIONEVENT="click",zns||(WW.ACTIONEVENT="click")),zot(e)?setTimeout(function(){var t;-1==b&&(b=[],t=[],Jo.loop(h.stage,function(e){e.type&&t.push(e)}),y.tabOrder=t,zot(o)||(y.tabIndex=o))},50):(b=[],y.tabOrder=e,zot(o)||(y.tabIndex=o)),R=!(_=!1),Y=h.on("keydown",function(e){var t,o;9==e.keyCode&&(!function(){for(var e=!1,t=0;t<w.length;t++)if(document.activeElement==w[t]){e=!0;break}return!(document.activeElement!=h.canvas&&!e)}()&&(_=!1,-1!=y.tabIndex&&(y.tabIndex=-1)),_?ne(e):(t=e,h.shiftKey||zid(T+"PrefixTab")!=document.activeElement&&h.canvas!=document.activeElement?!h.shiftKey||zid(T+"SuffixTab")!=document.activeElement&&zid(T+"BufferTab")!=document.activeElement||(0<b.length&&(b[0].obj.focus=!0),_=R=!0,ne(t)):(0<b.length&&(b[b.length-1].obj.focus=!0),_=R=!0,ne(t)))),_&&0<b.length&&0<=y.tabIndex&&13==e.keyCode&&(t=(o=b[y.tabIndex]).obj,o&&t.stage&&(e=new createjs.Event("mousedown"),o=new createjs.Event("click"),e.fromEnter=o.fromEnter=!0,"Pane"==t.type?(t.backdrop.dispatchEvent(e),t.backdrop.dispatchEvent(o)):(t.dispatchEvent(e),t.dispatchEvent(o))))}),this.tab=function(e){if(clearTimeout(X),k&&h.stage.removeChild(k),zot(e)&&(e=1),0!=b.length){for(var t=0;t<b.length;t++)if((i=b[t].obj).focus){i.focus=!1;for(var o=t+e,n=(o+1e4*b.length)%b.length,r=b[n],i=r.obj,l=0,a=!1;!i.stage||!(!i.zimTabParent&&(zot(i.enabled)||i.enabled)||i.zimTabParent&&(zot(i.zimTabParent.enabled)||i.zimTabParent.enabled));)if(l++,n=((o+=e)+100*b.length)%b.length,i=b[n].obj,l==b.length){a=!0;break}if(a||!y.cycle&&o!=n&&!R)return void re(e);R=!1,y.tabIndex=n;break}}else re(e)},N=!(this.changeTitle=function(e,t,o){var n,r;"number"!=typeof e&&(e=e.zimTabIndex),zot(e)||(o&&zot(t)?y.tabIndex=e:(r=(n=b[e]).obj,zot(t)&&(t=r.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),n.title=t,te(n),r.zimTabTag.setAttribute("aria-label",n.title),o&&(y.tabIndex=e)))}),this.talk=function(e){N||((I=oe(T+"TalkTab","",W)).setAttribute("role","alert"),N=!0),I.removeAttribute("role"),I.setAttribute("aria-label",e),I.setAttribute("role","alert");var t=new createjs.Event("change");t.title=e,y.dispatchEvent(t)},this.resize=function(e){if(zot(e))for(var t=0;t<b.length;t++)o(b[t].obj);else"number"!=typeof e&&(e=e.zimTabIndex),e<0||(!(e=b[e].obj).stage&&k&&e==y.currentObject&&(h.stage.removeChild(k),h.stage.update()),o(e));function o(e){var t,o;"TextArea"!=e.type&&"Loader"!=e.type?(t=e.boundsToGlobal(),o=e.zimTabTag,h.retina?(o.style.left=h.x+t.x*h.scale/z+"px",o.style.top=h.y+t.y*h.scale/z+"px",o.style.width=t.width*h.scale/z+"px",o.style.height=t.height*h.scale/z+"px"):(o.style.left=h.x+t.x*h.scale/z/z+"px",o.style.top=h.y+t.y*h.scale/z/z+"px",o.style.width=t.width*h.scale/z/z+"px",o.style.height=t.height*h.scale/z/z+"px"),o.setAttribute("aria-hidden",!e.stage),o.hidden=!e.stage):e.resize()}},Object.defineProperty(this,"currentObject",{get:function(){return b[v]&&b[v].obj?b[v].obj:null},set:function(e){for(var t=0;t<b.length;t++)if(b[t].obj==e){y.tabIndex=t;break}}}),F=!0,Object.defineProperty(this,"enabled",{get:function(){return F},set:function(e){F=e}}),this.dispose=function(){m&&m.graphics.clear(),y.tabOrder=[];for(var e=0;e<w.length;e++)w[e].parentElement&&(w[e].outerHTML="");B&&(B.removeEventListener("focus",G),B.removeEventListener("focus",K),B.parentNode&&(B.outerHTML="")),M&&(M.removeEventListener("focus",Z),M.parentNode&&(M.outerHTML="")),j&&(j.removeEventListener("focus",Z),j.parentNode&&(j.outerHTML="")),D&&D.parentNode&&(D.outerHTML=""),W&&(W.removeEventListener("focus",G),W.removeEventListener("focus",K),W.parentNode&&(W.outerHTML="")),O&&(O.removeEventListener("focus",Z),O.parentNode&&(O.outerHTML="")),L&&(L.removeEventListener("focus",Z),L.parentNode&&(L.outerHTML="")),y.removeAllEventListeners(),h.off("keydown",Y)})},Jo.extend(Jo.Accessibility,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Jo.TextureActive=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f){if(m=zob(Jo.TextureActive,arguments,"width, height, color, color2, angle, borderColor, borderWidth, corner, interactive, animated, backingOrbit, pattern, scalePattern, style, group, inherit",this))return m;z_d("35.2"),this.group=g;var m=!1===p?{}:Jo.getStyle("TextureActive",this.group,f);zot(e)&&(e=(null!=m.width?m:WW.zdf).width),zot(t)&&(t=(null!=m.height?m:WW.zdf).height),zot(s)&&(s=null==m.interactive||m.interactive),zot(c)&&(c=null==m.animated||m.animated),zot(o)&&(o=null!=m.color?m.color:null),zot(n)&&(n=null!=m.color2?m.color2:null),zot(r)&&(r=null!=m.angle?m.angle:null),zot(i)&&(i=null!=m.borderColor?m.borderColor:null),zot(l)&&(l=null!=m.borderWidth?m.borderWidth:null),i<0||l<0?i=l=null:null!=i&&null==l&&(l=1),zot(a)&&(a=null!=m.corner?m.corner:10),zot(u)&&(u=null==m.backingOrbit||m.backingOrbit),zot(d)&&(d=null!=m.pattern?m.pattern:null),zot(h)&&(h=null!=m.scalePattern?m.scalePattern:null),this.zimPage_constructor(e,t,o,n,r,d,h,null,p,g,f),this.type="TextureActive",a&&(this.backing.corner=a),zot(l)||(this.backing.borderWidth=l),zot(i)||(this.backing.borderColor=i),!l&&zot(i)||(this.backing.siz(this.width-l,this.height-l),this.backing.center()),this.backing.mouseChildren=!1,this.interactive=s,this.animated=c,this.backingOrbit=u,!1!==p&&Jo.styleTransforms(this,m),this.dispose=function(e,t,o){this.textureActives&&this.textureActives.remove(this),o||this.zimPage_dispose(!0)},this.clone=function(){return this.cloneProps(new Jo.TextureActive(e,t,o,n,r,i,l,a,s,c,u,d,h,p,this.group,f))}},Jo.extend(Jo.TextureActive,Jo.Page,["clone","dispose"],"zimPage",!1),Jo.TextureActive.makeLogo=function(e,t){zot(e)&&(e="light");var o="dark"!=e,n=o?Jo.light:Jo.dark,r=o?Jo.dark:Jo.light,i=o?Jo.white:Jo.black,l=o?Jo.black:Jo.white,a=new Jo.Container(400,100),e=WW.zdf.makeIcon(n,r,[n,n,n,n,n]).ske(0,30).scaleTo(a,100,100).center(a),i=new Jo.Rectangle((400-e.width)/2+4,70,new Jo.GradientColor([o?n:i,o?i:n,o?n:i],-70),l,.5).addTo(a),l=i.clone().pos(0,0,"right","bottom",a);return new Jo.Label({text:"Texture",size:50,color:r,variant:!0}).scaleTo(i,75,75).center(i),new Jo.Label({text:"Active",size:50,color:r,variant:!0}).scaleTo(i,72,72).center(l),t?a:a.noMouse()},Jo.TextureActive.makeBacking=function(e,t,o,n){zot(e)&&(e=800),zot(t)&&(t=600),zot(o)&&(o="CANVAS WINDOW"),zot(n)&&(n=Jo.light);t=new Jo.Container(e,t);return t.icon=WW.zdf.makeIcon({box:black}).sca(2),t.label=new Jo.Label({text:o,size:25,color:n,align:"center"}).reg("center"),t.tile=new Jo.Tile({obj:[t.icon,t.label],rows:2,spacingV:24,unique:!0,align:CENTER}).scaleTo(t,50,70).center(t),t.tile.items[1].mov(0,10),t},Jo.TextureActives=function(e,c,v,w,C,x,u,k,T,A,t,o,n,r,i,l,a,s){var d;if(d=zob(Jo.TextureActives,arguments,"actives, threejs, zimThree, renderer, scene, camera, controls, layers, near, far, ignoreList, toggleKey, color, outerColor, damp, style, group, inherit",this))return d;z_d("35.4"),this.group=a;var P,E,l=!1===l?{}:Jo.getStyle("TextureActives",this.group,s),s="ZIM TextureActives - need a ZIM Frame";if(zot(e)&&zot(e[0])){if(!WW.zdf)return void zogy(s);E=WW.zdf,P=WW.zdf.stage}else if(zot(e)||zot(e[0])||zot(e[0].stage)){if(!WW.zdf)return void zogy(s);E=WW.zdf,P=WW.zdf.stage}else P=e[0].stage,E=P.frame;zot(e)&&(e=null!=l.actives?l.actives:null),zot(c)&&(c=null!=l.threejs?l.threejs:null),zot(v)&&(v=null!=l.zimThree?l.zimThree:null),zot(w)&&(w=null!=l.renderer?l.renderer:null),zot(C)&&(C=null!=l.scene?l.scene:null),zot(x)&&(x=null!=l.camera?l.camera:null),zot(u)&&(u=null!=l.controls?l.controls:null),zot(k)&&(k=null!=l.layers?l.layers:[]),Array.isArray(k)||(k=[k]),zot(T)&&(T=null!=l.near?l.near:void 0),zot(A)&&(A=null!=l.far?l.far:void 0),zot(t)&&(t=null!=l.ignoreList?l.ignoreList:[]),Array.isArray(t)||(t=[t]),zot(o)&&(o=null!=l.toggleKey?l.toggleKey:"t"),zot(n)&&(n=null!=l.color?l.color:Jo.darker),zot(r)&&(r=null!=l.outerColor?l.outerColor:"black"),zot(i)&&(i=null!=l.damp?l.damp:null);var S=this;Jo.TAM||(Jo.TAM=new Jo.TextureActivesManager(P,o,i),w&&w.domElement&&w.domElement.addEventListener("mousedown",function(e){e.preventDefault()})),S.manager=Jo.TAM,this.ignoreList=t,this.raycast=!0,this.renderer=w,this.layers=k,this.animated=!1,this.interactive=!1,this.actives=[];var B=!(this.threeMeshes=[]);function h(e){zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t,o,d,h,n,p,r,g,f,m,z,y,i=0;function l(e){if(S.raycast){var t,o;m?(t=e.target,y.identity().extractRotation(t.matrixWorld),z.ray.origin.setFromMatrixPosition(t.matrixWorld),z.ray.direction.set(0,0,-1).applyMatrix4(y),e.data&&"left"==e.data.handedness?e.pointerId=2:e.pointerId=1):(o=!v||v.resizeEvent?(o=w.domElement.getBoundingClientRect(),{x:(e.clientX-o.x)/o.width*2-1,y:1-(e.clientY-o.y)/o.height*2}):{x:e.clientX/d*2-1,y:1-e.clientY/h*2},z.setFromCamera(o,x));var n,r,i,l=z.intersectObjects(C.children);for(f=null,r=0;r<l.length;r++)if(n=l[r].object,!(-1<S.ignoreList.indexOf(n))){if(-1<S.threeMeshes.indexOf(n))if(n.material&&Array.isArray(n.material))i=n.material[l[r].face.materialIndex];else{if(!n.material)break;i=n.material}if(i&&i.map&&i.map.source&&i.map.source.data&&i.map.source.data.isTextureActive&&i.userData.ta_content){f=n;var a,s=i.userData.ta_content;S.pointerData.mousedown=!0,b(s,l[r],i.userData.ta_flipped),createjs.handleRemotePointer(S.pointerData.x,S.pointerData.y,"down",e,P,e.pointerId),u&&u.maxAzimuthAngle&&s&&(s.backingOrbit?(a=s.globalToLocal(E.mouseX,E.mouseY),(c=s.backing)&&s.getObjectUnderPoint(a.x,a.y,1)!=c?u.enableRotate=!1:u.enableRotate=!0):u.enableRotate=!1);var c=new createjs.Event("raydown");c.mesh=S.mesh=n,c.material=S.material=i,c.textureActive=S.textureActive=s,c.intersect=S.intersect=l[r],S.dispatchEvent(c);break}break}}}function a(e){var t;S.raycast&&(S.pointerData.mousedown=!1,u&&u.maxAzimuthAngle&&(u.enableRotate=!0),f&&((t=new createjs.Event("rayup")).mesh=S.mesh,t.material=S.material,t.textureActive=S.textureActive,t.intersect=S.intersect,S.dispatchEvent(t)),f=null,m&&(e.data&&"left"==e.data.handedness?e.pointerId=2:e.pointerId=1),createjs.handleRemotePointer(null,null,"up",e,P,e.pointerId))}function s(e,t){if(S.raycast){var o,n;m?(o=e.target,y.identity().extractRotation(o.matrixWorld),z.ray.origin.setFromMatrixPosition(o.matrixWorld),z.ray.direction.set(0,0,-1).applyMatrix4(y),e.pointerId="left"==t?2:1):(n=!v||v.resizeEvent?(n=w.domElement.getBoundingClientRect(),{x:(e.clientX-n.x)/n.width*2-1,y:1-(e.clientY-n.y)/n.height*2}):{x:e.clientX/d*2-1,y:1-e.clientY/h*2},z.setFromCamera(n,x));var r,i,l=!1;if(f)0<(c=z.intersectObject(f)).length&&((i=f).material&&Array.isArray(i.material)?r=i.material[c[0].face.materialIndex]:i.material&&(r=i.material),r&&(b(a=r.userData.ta_content,c[0],r.userData.ta_flipped),createjs.handleRemotePointer(S.pointerData.x,S.pointerData.y,"move",e,P,e.pointerId),l=!0,(s=new createjs.Event("raymove")).mesh=p=S.mesh=i,s.material=g=S.material=r,s.textureActive=S.textureActive=a,s.intersect=S.intersect=c[0],S.dispatchEvent(s)));else for(var a,s,c=z.intersectObjects(C.children),u=0;u<c.length;u++)if(i=c[u].object,!(-1<S.ignoreList.indexOf(i))){if(-1<S.threeMeshes.indexOf(i))if(i.material&&Array.isArray(i.material))r=i.material[c[u].face.materialIndex];else{if(!i.material)break;r=i.material}if(r&&r.map&&r.map.source&&r.map.source.data&&r.map.source.data.isTextureActive&&r.userData.ta_content){b(a=r.userData.ta_content,c[u],r.userData.ta_flipped),createjs.handleRemotePointer(S.pointerData.x,S.pointerData.y,"move",e,P,e.pointerId),l=!0,(s=new createjs.Event("raymove")).material=g=S.material=r,s.mesh=p=S.mesh=i,s.textureActive=S.textureActive=a,s.intersect=S.intersect=c[u],S.dispatchEvent(s);break}break}l||(g=p=null),Jo.TAM.setActive(S,l)}}function b(e,t,o){var n;e&&e.getBounds&&(n=e.getBounds(),o=o?n.width-t.uv.x*n.width:t.uv.x*n.width,n=(1-t.uv.y)*n.height,n=e.localToGlobal(o,n),S.pointerData.x=n.x,S.pointerData.y=n.y)}return Jo.loop(e,function(e){S.actives.indexOf(e)<0&&(S.actives.push(e),e.cache(),e.textureActives=S,(e.canvas.content=e).interactive&&(t=!0,e.canvas.isTextureActive=!0),e.animated&&(o=!0),i++)}),t&&!S.interactive&&(S.interactive=!0,0<i&&(B||(B=!0,S.pointerCheck||(S.pointerCheck=Jo.TAM.addPointer(S)),S.pointerData={x:E.mouseX,y:E.mouseY,mousedown:!1},d=window.innerWidth,h=window.innerHeight,r=n=-1,g=p=-2,S.overInterval=Jo.interval(.05,function(){var e;p&&p!=n||g&&g!=r?((e=new createjs.Event("rayover")).mesh=S.mesh=p,(e.material=S.material=g).userData&&(e.textureActive=S.textureActive=g.userData.ta_content),e.intersect=S.intersect,S.dispatchEvent(e),u&&!u.screenSpacePanning&&(u.activeLook=!1)):(!p&&n||!g&&r)&&((e=new createjs.Event("rayout")).mesh=n,(e.material=r).userData&&(e.textureActive=r.userData.ta_content),e.intersect=S.intersect,S.dispatchEvent(e),u&&!u.screenSpacePanning&&(u.activeLook=!0)),n=p,r=g}),z=S.raycaster=new c.Raycaster(void 0,void 0,T,A),0<k.length&&Jo.loop(k,function(e){z.layers.set(e)}),S.XR=WW.XR=!1,y=new c.Matrix4,S.doLcDown=function(e){m=!0,l(e)},S.doLcUp=function(e){m=!0,a(e)},S.doLcMove=function(e){m=!0,s(e,"left")},S.doRcDown=function(e){m=!0,l(e)},S.doRcUp=function(e){m=!0,a(e)},S.doRcMove=function(e){m=!0,s(e,"right")},(e=S.controllerLeft=w.xr.getController(0)).addEventListener("selectstart",S.doLcDown),e.addEventListener("selectend",S.doLcUp),e.addEventListener("move",S.doLcMove),(e=S.controllerRight=w.xr.getController(1)).addEventListener("selectstart",S.doRcDown),e.addEventListener("selectend",S.doRcUp),e.addEventListener("move",S.doRcMove),S.doPointerDown=function(e){m=!1,l(e)},window.addEventListener("pointerdown",S.doPointerDown),S.doPointerUp=function(e){m=!1,a(e)},window.addEventListener("pointerup",S.doPointerUp),S.doPointerMove=function(e){m=!1,s(e)},window.addEventListener("pointermove",S.doPointerMove)))),o&&!S.animated&&(S.animated=!0),i}h(e),Jo.TAM.updateTile(S,S.actives),Jo.TAM.color=n,Jo.TAM.outerColor=r,E.canvas.style.display="none",this.add=function(e){return 0<h(e)&&Jo.TAM.updateTile(S,S.actives),S},this.remove=function(e){zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var o=0;return Jo.loop(e,function(e){var t;!createjs.remoteQueue||0<=(t=createjs.remoteQueue.indexOf(e))&&createjs.remoteQueue.splice(t,1),0<=(t=S.actives.indexOf(e))&&(S.actives.splice(t,1),o++),e.textureMap&&delete e.textureMap.userData.ta_content,0<=(t=S.threeMeshes.indexOf(e))&&S.threeMeshes.splice(t,1)},!0),0<o&&Jo.TAM.updateTile(S,S.actives),S},S.addMesh=function(o,e){if(zot(e)||o.layers.enable(e),o.material){if(!(S.threeMeshes.indexOf(o)<0))return S;S.threeMeshes.push(o),e=Array.isArray(o.material)?o.material:[o.material],o.onBeforeRender=function(){o.userData.ta_viewID&&clearTimeout(o.userData.ta_viewID),o.userData.ta_viewID=setTimeout(function(){o.userData.ta_view=!1,createjs.remoteQueue&&Jo.loop(o.userData.ta_content,function(e){e=createjs.remoteQueue.indexOf(e);0<=e&&createjs.remoteQueue.splice(e,1)},!0)},100),o.userData.ta_view||(o.userData.ta_view=!0,Jo.loop(o.userData.ta_content,function(e){createjs.remoteQueue.indexOf(e)<0&&createjs.remoteQueue.push(e)}))},o.userData.ta_content=[],Jo.loop(e,function(e){var t;e&&e.map&&e.map.source&&e.map.source.data&&e.map.source.data.content&&(t=e.map.source.data.content,o.userData.ta_content.push(t),(t.mesh=o).textureActive=!0,(e.userData.ta_content=t).textureMaps||(t.textureMaps=[]),t.textureMaps.indexOf(e.map)<0&&t.textureMaps.push(e.map),(t.animated||t.interactive)&&(createjs.remoteQueue||(createjs.remoteQueue=[])))})}return S},S.dispose=function(){S.raycast=!1,window.addEventListener("pointerdown",S.doPointerDown),window.removeEventListener("pointerup",S.doPointerUp),window.removeEventListener("pointermove",S.doPointerMove),S.controllerLeft.removeEventListener("selectstart",S.doLcDown),S.controllerLeft.removeEventListener("selectend",S.doLcUp),S.controllerLeft.removeEventListener("move",S.doLcMove),S.controllerRight.removeEventListener("selectstart",S.doRcDown),S.controllerRight.removeEventListener("selectend",S.doRcUp),S.controllerRight.removeEventListener("move",S.doRcMove),u&&(u.enableRotate=!0,u.enabled=!0),Jo.loop(S.actives,function(e){e.dispose()}),Jo.TAM.remove(S),Jo.TAM.count<1&&(Jo.TAM.dispose(),Jo.TAM=null),S.material=S.mesh=S.content=S.intersect=null}},Jo.extend(Jo.TextureActives,createjs.EventDispatcher,"dispose"),Jo.TextureActivesManager=function(r,e,t){z_d("35.6");var i=this;this.type="TextureActivesManager",i.color=darker,i.outerColor=black;var o=!1;i.toggleKey=e||"t",!zot(t)&&!0!==t||(t=.2);var l=i.objects=new Jo.Dictionary(!0),n=r.frame,a=new Jo.Proportion({baseMin:1e3,baseMax:9e3,targetMin:-.1,targetMax:-.05,clamp:!1});i.backing=new Jo.Rectangle(100,100,black).addTo(r,0);var s=[];i.updateTile=function(e,t,o){o||l.add(e,t);var n=[];s=[],Jo.loop(l,function(e,t){Jo.loop(t,function(e){n.push(e),e.loop(function(e){"Scrambler"!=e.type&&"List"!=e.type&&"Window"!=e.type||s.push(e)})})}),n.length<0&&(t=i.message=new Jo.Rectangle(W,H,Jo.yellow),new Jo.Label("No TextureActives Added").center(t),n.push(t)),i.tile?(i.tile.cols=n.length,i.tile.remake(n)):i.tile=new Jo.Tile(n,n.length,1,20,0,!0).addTo(r),i.backing.scaleTo(i.tile,100,100,"full").siz(null,r.height,!0),i.swiper&&(i.swiper.sensitivity=Jo.constrain(a.convert(i.tile.width),-.1,-.01))},this.addPointer=function(e){var t=[];return Jo.loop(l,function(e){t.indexOf(e.renderer.domElement)<0&&t.push(e.renderer.domElement)}),t.indexOf(e)<0&&t.push(e.renderer.domElement),createjs.remotePointers?createjs.remotePointers=t:createjs.addRemotePointers(r,t),!0};var c=!(this.setActive=function(e,t){(e.active=t)||Jo.loop(l,function(e){if(e.active)return!1})&&(r.mouseInBounds=!1)}),u=this.nav=new Jo.Panel({width:200,height:80,titleBar:"TextureActives",draggable:!0,close:!0}).pos(50,50,RIGHT,BOTTOM),d=this.slider=new Jo.Slider({min:0,max:100,damp:!0}).scaleTo(u,80);d.on("mousedown",function(){c=!0,i.swiper.enabled=!1,p()}),d.on("pressup",function(){i.swiper.immediate(d.value),i.swiper.enabled=!0,g(),c=!1}),u.on("close",function(){i.hide(),u.addTo()});var h=0;function p(){o||(o=!0,Jo.loop(s,function(e){e.enabled=!1}))}function g(){o&&(o=!1,Jo.loop(s,function(e){e.enabled=!0,e.update()}))}this.ticker=Jo.Ticker.add(function(){i.tile.x=-d.value*(i.tile.width-W)/100,!o||c||0==h||100==h||0!=d.value&&100!=d.value||g(),h=d.value}),u.add(d,0,!0),u.removeFrom(),Jo.Ticker.remove(i.ticker),i.swiper=new Jo.Swiper({swipeOn:i.backing,target:d,property:"value",sensitivity:i.tile?Jo.constrain(a.convert(tile.width),-.1,-.01):-.1,damp:t}),i.backing.on("mousedown",function(){h=-100,p()}),i.swiper.on("swipestop",g),i.toggled=!1;var f=n.color,m=n.outerColor;this.show=function(){if(!i.toggled)return n.color=i.color,n.outerColor=i.outerColor,i.toggled=!0,Jo.Ticker.add(i.ticker),u.addTo(),Jo.loop(l,function(e){e.lastRaycast=e.raycast,e.raycast=!1,e.renderer.domElement.style.display="none"}),createjs.remoteQueue&&Jo.loop(i.tile.items,function(e){createjs.remoteQueue.indexOf(e)<0&&createjs.remoteQueue.push(e)}),n.canvas.style.display="block",createjs.removeRemotePointers(r),this},this.hide=function(){if(i.toggled){n.color=null==f||null==f?null:f,n.outerColor=null==m||null==m?null:m,i.toggled=!1,Jo.Ticker.remove(i.ticker),u.removeFrom();var t=[];return Jo.loop(l,function(e){e.raycast=e.lastRaycast,e.renderer.domElement.style.display="block",t.push(e.renderer.domElement)}),createjs.remoteQueue&&(createjs.remoteQueue=[],Jo.loop(i.tile.items,function(e){e.mesh&&(e.mesh.userData.ta_view=!1)})),n.canvas.style.display="none",createjs.addRemotePointers(r,t),this}},i.toggle=function(e){return zot(e)&&(e=!i.toggled),e&&!i.toggled?i.show():!e&&i.toggled&&i.hide(),this},i.keyEvent=n.on("keydown",function(e){e.key==i.toggleKey&&(i.toggled?i.hide():i.show())}),i.remove=function(e){l.remove(e),i.updateTile(null,null,!0)},i.dispose=function(){Jo.loop(l,function(e){e.dispose()}),i.hide(),u.dispose(),n.off("keydown",i.keyEvent),i.backing.removeAllEventListeners(),i.backing.dispose(),i.objects.dispose(),i.tile.dispose(),i.objects=i.tile=u=null}},Jo.extend(Jo.TextureActivesManager,createjs.EventDispatcher),Jo.Manager=function(e){z_d("75");var o,n,r=this;this.type=e,this.items=[],this.add=function(e){return Array.isArray(e)?r.items=r.items.concat(e):r.items.push(e),r},this.remove=function(e){if(r){if(e)for(Array.isArray(e)||(e=[e]),o=e.length-1;0<=o;o--){n=e[o];var t=r.items.indexOf(n);-1!=t&&r.items.splice(t,1)}else r.items=[];return r}},this.resize=function(e){if(r){if(e)for(Array.isArray(e)||(e=[e]),o=e.length-1;0<=o;o--)(n=e[o]).resize||-1==r.items.indexOf(n)?n.resize():r.items.splice(r.items.indexOf(n),1);else for(o=r.items.length-1;0<=o;o--)r.items[o].resize?r.items[o].resize():r.items.splice(o,1);return r}},this.toggle=function(e,t){if(r){if(t)for(Array.isArray(t)||(t=[t]),o=t.length-1;0<=o;o--)(n=t[o]).resize||-1==r.items.indexOf(n)?n.toggle(e):r.items.splice(r.items.indexOf(n),1);else for(var o=r.items.length-1;0<=o;o--)r.items[o].resize?r.items[o].toggle(e):r.items.splice(o,1);return r}},this.dispose=function(e){if(r){if(r.resize=null,e)for(Array.isArray(e)||(e=[e]),o=e.length-1;0<=o;o--)n=e[o],-1!=r.items.indexOf(n)&&r.items.splice(r.items.indexOf(n)),n.dispose&&n.dispose();else{for(o=r.items.length-1;0<=o;o--)r.items[o].resize?r.items[o].dispose():r.items.splice(o,1);r.items=null}return!0}}},Jo.ResizeManager=function(){z_d("75.5"),Jo.Manager.call(this,"ResizeManager")},Jo.ResizeManager.prototype=new Jo.Manager,Jo.ResizeManager.prototype.constructor=Jo.ResizeManager,Jo.TransformManager=function(e,n){z_d("75.7");var a=this;function t(e){!localStorage||e&&!e.pressup||a.savePersist(e)}this.type="TransformManager",this.persistID=n,this.items=[],this.add=function(e){for(var t,o,n=[],n=Array.isArray(e)?e:[e],r=!1,i=0;i<n.length;i++)(o=n[i]).transformControls&&(o.originalVisible=o.transformControls.visible),o.toggle&&o.toggle(!1),0==a.items.length&&0==i&&(r=!0),"Blob"==o.type||"Squiggle"==o.type?(a.persistID||r&&(r=!1,o.controlsVisible=!0,a.currentObject=o),o.on("change",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,a.dispatchEvent(t)}),o.on("controlsshow",function(e){var t=new createjs.Event("transformshow");a.currentObject=t.transformObject=e.target,a.dispatchEvent(t)}),o.on("controlshide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,a.currentObject=null,a.dispatchEvent(t)}),o.on("update",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,a.dispatchEvent(t)})):"Connectors"==o.type?(a.persistID||r&&(r=!1,a.currentObject=o),o.on("connection",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType="connection",a.dispatchEvent(t)})):"Pack"==o.type?(a.persistID||r&&(r=!1,a.currentObject=o),o.on("change",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType="change",a.dispatchEvent(t)})):(t=o.transformControls,a.persistID||r&&"Layer"!=o.type&&(r=!1,o.originalVisible&&(t.show(),a.currentObject=o)),o.on("transformed",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.transformType,a.dispatchEvent(t)}),o.on("transformshow",function(e){var t=new createjs.Event("transformshow");a.currentObject=t.transformObject=e.target,a.dispatchEvent(t)}),o.on("transformhide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,a.currentObject=null,a.dispatchEvent(t)}));a.items=a.items.concat(e),a.persist&&!zot(a.persistID)&&a.persist(a.persistID)},this.remove=function(e){if(zot(e))a.items=[];else{Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){o=e[t],a.currentObject==o&&(a.currentObject=null),o.transformedEvent&&(o.off("transformed",o.transformedEvent),o.transformedEvent=null),"Blob"==o.type||"Squiggle"==o.type?o.controlsVisible=!1:o.transformControls&&o.transformControls.remove();var o=a.items.indexOf(o);-1!=o&&a.items.splice(o,1)}n&&a.savePersist()}},this.show=function(e){if(!zot(e)){if("Blob"==e.type||"Squiggle"==e.type)e.controlsVisible||(e.controlsVisible=!0);else{var t=e.transformControls;if(!t||t.visible)return;t.show()}a.currentObject=e}},this.hide=function(e){zot(e)||(a.currentObject==e&&(a.currentObject=null),"Blob"==e.type||"Squiggle"==e.type?e.controlsVisible&&(e.controlsVisible=!1):(e=e.transformControls)&&!e.visible&&e.hide())},this.hideAll=function(e){for(var t,o=0;o<a.items.length;o++)(t=a.items[o])&&(t.transformControls||t.update)?a.items[o]!=e&&("Blob"==t.type||"Squiggle"==t.type?t.controlsVisible&&(t.controlsVisible=!1):(t=a.items[o].transformControls).visible&&t.hide()):a.items.splice(o);a.currentObject=null},this.resize=function(){if(a){for(var e,t=0;t<a.items.length;t++)(e=a.items[t])&&(e.transformControls||e.update)?"Blob"==e.type||"Squiggle"==e.type?e.update():e.transformControls.resize():a.items.splice(t);n&&a.savePersist()}},zot(e)||a.add(e);var o="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(e){var n,r;if(zot(e)&&zon)zogy(o);else{a.persistID=e;var i=0;if(localStorage&&localStorage[e]){var l=a.persistData=JSON.parse(localStorage[e]);if(l.length==a.items.length)for(r=0;r<a.items.length;r++)l[r].controls&&(a.currentObject=a.items[r]),!l[r]||"Blob"!=l[r].type&&"Squiggle"!=l[r].type?l[r]&&"Connectors"==l[r].type?(a.items[r].setSteps(l[r].steps),a.items[r].loc(l[r].x,l[r].y),a.items[r].sca(l[r].scale),++i==l.length&&setTimeout(function(){a.dispatchEvent("persistcomplete")},100)):l[r]&&"Pack"==l[r].type?(a.items[r].setOrder(l[r].order),a.items[r].outerWidth=l[r].outerWidth,a.items[r].outerHeight=l[r].outerHeight,++i==l.length&&setTimeout(function(){a.dispatchEvent("persistcomplete")},100)):l[r]&&(zot(a.items[r].transformControls)?function(){var t=n=a.items[r],o=l[r];Jo.interval(50,function(e){t.transformControls&&(t.transformControls.setData(o),t.dispatchEvent("persistset"),++i==l.length&&(setTimeout(function(){t==a.currentObject&&a.currentObject.toggle(!0),a.dispatchEvent("persistcomplete")},100),e.clear()))},20,null,null,"ms")}():(a.items[r].transformControls.setData(l[r]),function(){var t=n=a.items[r];Jo.interval(50,function(e){t.dispatchEvent("persistset"),++i==l.length&&(setTimeout(function(){t==a.currentObject&&a.currentObject.toggle(!0),a.dispatchEvent("persistcomplete")},100),e.clear())},20,null,null,"ms")}())):(a.items[r].points.length!=l[r].points.length&&(a.items[r].points=l[r].points),a.items[r].setData(l[r]),a.items[r]==a.currentObject&&a.currentObject.toggle(!0),++i==l.length&&setTimeout(function(){a.dispatchEvent("persistcomplete")},100))}for(r=0;r<a.items.length;r++)(n=a.items[r]).transformedEvent||("Blob"==n.type||"Squiggle"==n.type?(n.transformedEvent=n.on("change",function(e){e.pressup=!0,t(e)}),n.transformedUEvent=n.on("update",function(e){e.pressup=!0,t(e)}),n.transformedSEvent=n.on("controlsshow",function(e){e.pressup=!0,t(e)}),n.transformedHEvent=n.on("controlshide",function(e){e.pressup=!0,t(e)})):"Connectors"==n.type?n.transformedEvent=n.on("connection",function(e){e.pressup=!0,t(e)}):"Pack"==n.type?n.transformedEvent=n.on("change",function(e){e.pressup=!0,t(e)}):(n.transformedEvent=n.on("transformed",t),n.transformedSEvent=n.on("transformshow",t),n.transformedHEvent=n.on("transformhide",t)))}},this.savePersist=function(){for(var e=[],t=0;t<a.items.length;t++){var o=a.items[t];"Blob"==o.type||"Squiggle"==o.type?o.recordData&&e.push(o.recordData()):"Connectors"==o.type?e.push({type:o.type,x:o.x,y:o.y,scale:o.scale,steps:o.getSteps()}):"Pack"==o.type?e.push({type:o.type,outerWidth:o.outerWidth,outerHeight:o.outerHeight,order:o.getOrder()}):o.transformControls&&o.transformControls.recordData&&e.push(o.transformControls.recordData())}a.persistData=e,localStorage[a.persistID]=JSON.stringify(e)},this.clearPersist=function(e){zot(e)&&zon?zogy(o):(a.persistData=null,localStorage&&localStorage.removeItem(e))},this.stopPersist=function(){for(var e=0;e<a.items.length;e++){var t=a.items[e];t.transformedEvent&&("Blob"==t.type||"Squiggle"==t.type?(t.off("change",t.transformedEvent),t.off("update",t.transformedUEvent),t.off("controlsshow",t.transformedSEvent),t.off("controlshide",t.transformedHEvent)):"Connectors"==t.type?t.off("connection",t.transformedEvent):"Pack"==t.type?t.off("change",t.transformedEvent):(t.off("transformed",t.transformedEvent),t.off("transformshow",t.transformedSEvent),t.off("transformhide",t.transformedHEvent)),t.transformedEvent=null,t.transformedUEvent=null,t.transformedSEvent=null,t.transformedHEvent=null)}a.persistData=null},zot(n)||a.persist(n),this.dispose=function(e,t){if(zot(e)&&(e=!0),a.removeAllEventListeners(),a.persistID&&e&&a.stopPersist(),t)for(var o=0;o<a.items.length;o++){var n=a.items[o];("Blob"==n.type||"Squiggle"==n.type?n:n.transformControls).dispose()}}},Jo.extend(Jo.TransformManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Jo.GuideManager=function(){z_d("77"),Jo.Manager.call(this,"GuideManager")},Jo.GuideManager.prototype=new Jo.Manager,Jo.GuideManager.prototype.constructor=Jo.GuideManager,Jo.GridManager=function(){z_d("79"),Jo.Manager.call(this,"GridManager")},Jo.GridManager.prototype=new Jo.Manager,Jo.GridManager.prototype.constructor=Jo.GridManager,Jo.LayoutManager=function(){z_d("81"),Jo.Manager.call(this,"LayoutManager")},Jo.LayoutManager.prototype=new Jo.Manager,Jo.LayoutManager.prototype.constructor=Jo.LayoutManager,Jo.SelectionSet=function(e){z_d("81.5"),this.type="SelectionSet",zot(e)&&(e=[]),this.selections=e,this.clear=function(){this.selections=[]},this.isSelected=function(e){return 0<=this.selections.indexOf(e)},this.add=function(e,t,o,n){if(!zot(e)&&(zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),!(0<=this.selections.indexOf(e)))){if(this.selections.push(e),!zot(o)){Array.isArray(o)||(o=[o]);for(var r=0;r<=o.length;r++)o[r].add(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),r=0;r<=n.length;r++)n[r].remove(e,t)}},this.remove=function(e,t,o,n){if(!zot(e)){zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||this.selectionManager.setCurrent(this),t||this.clear();var r=this.selections.indexOf(e);if(zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),t?0<=r&&this.selections.splice(r,1):this.clear(),!zot(o)){Array.isArray(o)||(o=[o]);for(var i=0;i<=o.length;i++)o[i].remove(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),i=0;i<=n.length;i++)n[i].add(e,t)}},this.toggle=function(e,t,o,n){this.isSelected(e)?this.remove(e,t,o,n):this.add(e,t,o,n)},this.dispose=function(){return this.clear(),!(this.selections=null)}},Jo.SelectionManager=function(o,e,t){z_d("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",zot(o)&&(o=[]),zot(t)&&(t=!0),Array.isArray(o)||(o=[o]),this.sets=o,this.multipleKey=e,this.multipleSets=t,this.multiple=!1;for(var n=this,r=0;r<o.length;r++)o[r].selectionManager=this;this.clear=function(){this.currentSet=null;for(var e=0;e<o.length;e++)o[e].clear()},this.setCurrent=function(e){this.currentSet=e;for(var t=0;t<o.length;t++)o[t]!=e&&(this.multipleSets||o[t].clear())};t=new createjs.Event("keydown");this.eventRemove=t.remove,this.keydownEvent=function(e){e.remove=n.eventRemove,n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,n.dispatchEvent(e),90==e.keyCode&&(n.ctrlKey||n.metaKey)&&n.dispatchEvent("undo")},WW.addEventListener("keydown",this.keydownEvent),this.keyupEvent=function(e){n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,e.remove=n.eventRemove,n.dispatchEvent(e)},WW.addEventListener("keyup",this.keyupEvent),this.dispose=function(){this.clear(),WW.removeEventListener("keydown",this.keydownEvent),WW.removeEventListener("keyup",this.keyupEvent)}},Jo.extend(Jo.SelectionManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Jo.Bind=function(e,t,p,o,g,n,f,r){var i;if(i=zob(Jo.Bind,arguments,"connection, bindType, master, masterFilter, couple, smartDecimals, report, setDefault",this))return i;z_d("81.8"),this.type="Bind";var m=this;function z(r,e,t){var o,i=[];if(zot(e)&&zot(t)){if("from"==r&&m.bindType!=Jo.LOCALSTORAGE)return Jo.loop(m.bindings,function(e){e.filter&&i.push(e.filter)}),[i,"full"];o=m.ids}else zot(e)||Array.isArray(e)||(e=[e]),zot(t)||Array.isArray(t)||(t=[t]),e&&(o=[],Jo.loop(e,function(e){"string"==typeof e?o.indexOf(e)<0&&o.push(e):(e=m.objIDs.at(e))&&Jo.loop(e,function(e){o.indexOf(e)<0&&o.push(e)})}));var n,l,a={};return o?(l=t,Jo.loop(o,function(o){var n,e=m.bindings[o];e&&(e.filter&&i.push(e.filter),n=e.obj,Jo.loop(l||e.props,function(e){var t=m.toIDs[e];t&&0<=t.indexOf(o)&&("from"==r?(a[o]||(a[o]=[]),a[o].push(e)):(a[o]||(a[o]={}),"number"==typeof(t=n[e])&&m.smartDecimals&&(t=1<t?Jo.decimals(t,1):Jo.decimals(t,2)),a[o][e]=Jo.copy(t)))}))})):t&&(n=[],Jo.loop(t,function(o){Jo.loop(m.toIDs[o],function(e){var t=m.bindings[e];n.indexOf(e)<0&&(t.filter&&i.push(t.filter),n.push(e));t=t.obj;"from"==r?(a[e]||(a[e]=[]),a[e].push(o)):(a[e]||(a[e]={}),"number"==typeof(t=t[o])&&m.smartDecimals&&(t=1<t?Jo.decimals(t,1):Jo.decimals(t,2)),a[e][o]=Jo.copy(t))})})),[i,a]}zot(e)&&localStorage&&zot(c)&&(zot(t)||t==Jo.LOCALSTORAGE)?(e="zimBind",t=Jo.LOCALSTORAGE):e&&e.match(/\/|\./)?(zot(t)&&(t=Jo.GET),e.match(/\?/)?e+="&":e+="?"):e&&zot(t)&&(t=Jo.LOCALSTORAGE),zot(n)&&(n=!0),t!=Jo.LOCALSTORAGE||localStorage||(zon&&zogy("Bind() - no localStorage"),m.error="error - no localStorage"),this.connection=e,this.bindType=t,this.master=p,this.masterFilter=o,this.smartDecimals=n,zot(f)&&(f=!1),c&&!r||(c=this),Object.defineProperty(m,"default",{get:function(){return m==c},set:function(e){e||c!=m?e&&(c=m):c=null}}),this.bindType==Jo.POST&&(m.ajax=new Jo.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new Jo.Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(o,e,t,n,r){if(zot(t)||zot(e)||zot(o))return m;if(m.bindings[o]){if(m.bindings[o].obj!=e)return zon&&zogy("Bind() - id can be used with only one object"),m}else{m.ids.indexOf(o)<=0&&m.ids.push(o),m.bindings[o]={obj:e,props:[]},zot(r)||"function"!=typeof r||(m.bindings[o].filter=r);var i=m.objIDs.at(e);i?i.indexOf(o)<0&&i.push(o):m.objIDs.add(e,[o])}Array.isArray(t)||t.constructor=={}.constructor||(t=[t]);var l=m.bindings[o].props;function a(e,t,o){zot(e[t])?e[t]=[o]:e[t].indexOf(o)<0&&e[t].push(o)}return Array.isArray(t)?Jo.loop(t,function(e){a(m.toIDs,e,o),a(m.fromIDs,e,o),l.indexOf(e)<0&&l.push(e)}):Jo.loop(t,function(e,t){t!=Jo.BOTH&&t!=Jo.TO||a(m.toIDs,e,o),t!=Jo.BOTH&&t!=Jo.FROM||a(m.fromIDs,e,o),l.indexOf(e)<0&&l.push(e)}),f&&b("Bind Report: ADD ["+o+"]",(t?" "+t:"")+(n?" "+n:"")),m.bindType==Jo.LOCALSTORAGE?(m.from(null,o,t,n),m.data&&!Jo.isEmpty(m.data)||m.to(o,t)):(y("bind",null,[r],m.data,n),m.applyData()),m},this.updatefilter=function(e,t){e=m.bindings[e];return e&&(zot(t)?e.filter&&delete e.filter:"function"==typeof t&&(e.filter=t)),m},this.remove=function(e,t,o,n,r,i){var l,a;zot(e)||Array.isArray(e)||(e=[e]),zot(e)||(l=[],a=[],Jo.loop(e,function(e){("string"==typeof e?l:a).push(e)})),zot(t)||Array.isArray(t)||(t=[t]),zot(r)&&(r=!0),0==(e=l.concat(a)).length&&(e=null);var s=z("from",e,t),e=y("remove",n,s[0],s=s[1],o);if("stop"!=e){n=Jo.copy(s);return zot(t)||0==t.length?(0<l.length&&Jo.loop(l,function(e){d(e,!0)}),0<a.length&&Jo.loop(a,function(e){(l=m.objIDs.at(e))&&0<l.length&&Jo.loop(l,function(e){d(e,!1)}),m.objIDs.remove(e)})):(l=[],Jo.loop(s,function(o,e){var n=m.bindings[o].props;Jo.loop(e,function(e){var t=n.indexOf(e);0<=t&&n.splice(t,1),u(e,o)}),0==n.length&&l.push(o)}),0<l.length&&m.remove(l)),r&&(r="type="+m.bindType+"&",m.bindType==Jo.LOCALSTORAGE?(m.to(),c("success")):m.bindType==Jo.GET?(e=JSON.stringify(n),g&&(e=Jo.couple(e)),Jo.async(m.connection+r+"remove="+e,c,"callbackRemove")):m.bindType==Jo.POST?m.ajax.post(m.connection+r,n,c,"remove"):(m.bindType,Jo.SOCKET)),m}function c(e){i&&"function"==typeof i&&(g&&(e=Jo.couple(e)),i(e)),f&&b("Bind Report: REMOVE"+(o?" ["+o+"]":""),e)}function u(e,t){var o,n=m.fromIDs[e];n&&(0<=(o=n.indexOf(t))&&n.splice(o,1),0==n.length&&delete m.fromIDs[e]),(n=m.toIDs[e])&&(0<=(o=n.indexOf(t))&&n.splice(o,1),0==n.length&&delete m.toIDs[e])}function d(t,e){var o=m.bindings[t].obj,n=m.bindings[t].props,r=m.objIDs.at(o),i=r.indexOf(t);0<=i&&r.splice(i,1),e&&0==r.length&&a.push(o),0<=(i=m.ids.indexOf(t))&&m.ids.splice(i,1),Jo.loop(n,function(e){u(e,t)}),delete m.bindings[t]}},this.stopProcess=!1,this.stop=function(){m.stopped=!0};var a=function(){var e=this;e.stop=function(){e.stopped=!0}};function y(t,e,o,n,r){var i=new a,l=null!=n&&!Jo.isEmpty(n)&&m.data;return s(i,r)?["stop",n]:(m.masterFilter&&"function"==typeof m.masterFilter&&(n=m.data=m.masterFilter(n,t,r,i)),"stop"==Jo.loop(o,function(e){if("function"==typeof e){if(s(i,r))return"stop";n=m.data=e(n,t,r,i)}})||s(i,r)?["stop",n]:(e&&"function"==typeof e&&(n=m.data=e(n,t,r,i)),s(i,r)?["stop",n]:(l&&!m.data&&zon&&zogy("Bind()"+(t?" ["+t+"]":"")+(r?" ["+r+"]":"")+" - warning, a filter may not have returned data"),["go",n])))}function s(e,t){return(m.stopped||e.stopped)&&(b("STOP"+(t?" ["+t+"]":""),e.stopped?"process stopped":"bind stopped"),e.stopped?e.stop=null:m.stopped=!1,1)}function b(e,t){(m==c?zogl:zogd)(e,t)}return this.to=function(e,t,o,n,r,i,l,a){if(u=zob(m.to,arguments,"targets, props, extra, filter, smartDecimals, call, lock, unique"))return u;var s=z("to",e,t),c=y("to",n,s[0],s=s[1],o);if(s=c[1],"stop"!=c[0]){if(m.bindType==Jo.LOCALSTORAGE)localStorage[m.connection]=JSON.stringify(s),h(s);else{var u,d="type="+m.bindType+"&";if(!s||Jo.isEmpty(s))return m;m.bindType==Jo.GET?(u=s,Jo.isJSON(u)||(u=JSON.stringify(u)),g&&(u=Jo.couple(u)),f&&b("Bind Report: TO [bindings]",u),u=Jo.urlEncode(u),e=zot(m.master)?"":"&master="+Jo.urlEncode(p),t=zot(l)?"":"&lock="+Jo.urlEncode(l),n=zot(a)?"":"&unique="+Jo.urlEncode(a),c=zot(o)?"":"&extra="+Jo.urlEncode(o),c=m.connection+d+"command=to&data="+u+e+t+n+c,f&&b("Bind Report: TO [url]",c),Jo.async(c,h,"callbackTo")):m.bindType==Jo.POST&&(m.ajax.master=p,m.ajax.couple=g,m.ajax.lock=l,m.ajax.unique=a,f&&b("Bind Report: TO [bindings]",s),m.ajax.post(m.connection+d,s,"to",o,h))}return m}function h(e){g&&(e=Jo.decouple(e)),i&&"function"==typeof i&&i(e),f&&b("Bind Report: TO"+(o?" ["+o+"]":" -"),e)}},this.toLock=function(e,t,o,n,r,i){var l;if(l=zob(m.toLock,arguments,"targets, props, extra, filter, smartDecimals, call"))return l;if("localstorage"==m.bindType.toLowerCase())return m.to(e,t,o,n,r,i),m;var a=Jo.makeID();return m.from(function(){m.to(e,t,o,n,r,i,a)},e,t,o,n,a),m},this.toUnique=function(e,t,o,n,r,i){var l;return(l=zob(m.toUnique,arguments,"targets, props, extra, filter, smartDecimals, call"))?l:(m.to(e,t,o,n,r,i,null,!0),m)},this.toggleReport=function(e){return f=zot(e)?!f:e,m},f&&b("Bind Report: CREATE ["+t.toUpperCase()+"]",e+(p?" "+p:"")),this.report=function(){var e="Bind {DATA} Report:",t=Jo.copy(m.data);return(m==c?zogl:zogd)(e,t),e="Bind {BINDINGS} Report:",t=Jo.copy(m.bindings),(m==c?zogl:zogd)(e,t),m},this.from=function(o,e,t,n,r,i){if(c=zob(m.from,arguments,"call, targets, props, extra, filter, lock"))return c;var l=(a=z("from",e,t))[0],a=a[1],s=y("fromTo",r,l,a,n);if(a=s[1],"stop"!=s[0]){var c,u="type="+m.bindType+"&";return m.bindType==Jo.LOCALSTORAGE?(localStorage[m.connection]&&null!=localStorage[m.connection]||(localStorage[m.connection]="{}"),m.data=JSON.parse(localStorage[m.connection]),d(m.data)):m.bindType==Jo.GET?(c=a,Jo.isJSON(c)||(c=JSON.stringify(c)),g&&(c=Jo.couple(c)),f&&b("Bind Report: FROM [bindings]",c),c=Jo.urlEncode(c),e=zot(m.master)?"":"&master="+Jo.urlEncode(p),t=zot(i)?"":"&lock="+Jo.urlEncode(i),s=zot(n)?"":"&extra="+Jo.urlEncode(n),s=m.connection+u+"data="+c+"&command=from"+e+t+s,f&&b("Bind Report: FROM [url]",s),Jo.async(s,d,"callbackFrom")):m.bindType==Jo.POST&&(m.ajax.master=p,m.ajax.couple=g,m.ajax.lock=i,f&&b("Bind Report: FROM [bindings]",a),m.ajax.post(m.connection+u,a,"from",n,d)),m}function d(e){var t;m.data=e,g&&(m.data=Jo.decouple(m.data)),zot(i)||(t=JSON.stringify(m.data)),"stop"!=y("from",r,l,m.data,n)[0]&&(e=!1,!zot(i)&&t==JSON.stringify(m.data)||(e=!0,m.applyData()),f&&b("Bind Report: FROM"+(n?" ["+n+"]":" -"),e?m.data:"data not applied in toLock()"),o&&"function"==typeof o&&o(m.data))}},this.applyData=function(){return Jo.loop(m.data,function(e,t){var o;m.bindings[e]&&(o=m.bindings[e].obj,Jo.loop(t,function(e,t){o[e]=t}))}),m},this.clear=function(){return m.bindType==Jo.LOCALSTORAGE&&localStorage.removeItem(m.connection),m},this.removeAllBindings=function(e,t){var o;function n(e){t&&"function"==typeof t&&t(e),f&&b("Bind Report: REMOVEALL",e)}return zot(e)&&(e=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new Jo.Dictionary(!0),this.toIDs={},this.fromIDs={},e&&(o="type="+m.bindType+"&",m.bindType==Jo.LOCALSTORAGE?(m.clear(),n("success")):m.bindType==Jo.GET?(e=zot(m.master)?"":"&master="+encodeURI(p),Jo.async(m.connection+o+"command=removeAll"+e,n,"callbackRemoveAll")):m.bindType==Jo.POST&&(m.ajax.master=p,m.ajax.post(m.connection+o,{},"removeAll",null,n,"removeAll"))),m},m},Jo.Swipe=function(t,e,o,n,r){var i,l,a,s,c,u,d,h,p,g,f,m;if(i=zob(Jo.Swipe,arguments,"obj, distance, duration, isometric, overrideNoSwipe",this))return i;z_d("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",!zot(t)&&t.on?(zot(e)&&(e=30),l=$o(o),zot(o)&&(o="s"==l?.08:80),this.distance=e,this.duration=o,this.active=!0,p=this,m=t.on("mousedown",function(o){function e(){var e,t=new createjs.Event("swipe");t.obj=p.obj,t.stageX=o.stageX/Jo.scaX,t.stageY=o.stageY/Jo.scaY,t.rawX=o.rawX/Jo.scaX,t.rawY=o.rawY/Jo.scaY,t.swipeX=t.swipeY=0,p.direction="none",n?(Math.abs(u-a)>p.distance||Math.abs(d-s)>p.distance)&&(270<=(e=(360+(e=180*Math.atan2(d-s,u-a)/Math.PI))%360)&&e<360?(t.swipeY=-1,p.direction="up"):0<=e&&e<90?(t.swipeX=1,p.direction="right"):90<=e&&e<180?(t.swipeY=1,p.direction="down"):180<=e&&e<270&&(t.swipeX=-1,p.direction="left")):Math.abs(u-a)>Math.abs(d-s)?(u-a>p.distance&&(t.swipeX=1,p.direction="right"),a-u>p.distance&&(t.swipeX=-1,p.direction="left")):(d-s>p.distance&&(t.swipeY=1,p.direction="down"),s-d>p.distance&&(t.swipeY=-1,p.direction="up")),p.dispatchEvent(t)}!p.active||!r&&o.target.zimNoSwipe||(p.obj=o.target,u=a=o.stageX/Jo.scaX,d=s=o.stageY/Jo.scaY,c=!0,p.dispatchEvent("swipedown"),clearTimeout(h),h=setTimeout(function(){c&&(e(),c=!1)},p.duration*("s"==l?1e3:1)),g=t.on("pressmove",function(e){u=e.stageX/Jo.scaX,d=e.stageY/Jo.scaY}),f=t.on("pressup",function(){c&&(e(),c=!1,clearTimeout(h))}))}),this.disable=function(){p.active=!1},this.enable=function(){p.active=!0},this.dispose=function(){m&&t.off("mousedown",m),g&&t.off("pressmove",g),f&&t.off("pressup",f)}):zogy("zim controls - Swipe():\nPlease pass in object")},Jo.extend(Jo.Swipe,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Jo.Swiper=function(e,t,o,n,r,i,l,a,s,c,u,d,h){var p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I;if(p=zob(Jo.Swiper,arguments,"swipeOn, target, property, sensitivity, swiperType, min, max, damp, integer, factor, loop, pauseTime, otherSwiper",this))return p;function M(){v=!1,f.off("stagemousemove",g.moveEvent),f.off("stagemouseup",g.upEvent),g.dispatchEvent("swipeup")}function O(){v=!1,g.dispatchEvent("swipeup")}function j(e){E=!0,b=e.target.stage,k=(f.parent||f).localToGlobal(f.x,f.y),v=!0,"radial"==r?(A=e.stageX/Jo.scaX,P=e.stageY/Jo.scaY,C=Math.atan2(P-k.y,A-k.x)*Jo.DEG):m="horizontal"==r?e.stageX/Jo.scaX:e.stageY/Jo.scaY,z=g.target[g.property],g.dispatchEvent("swipedown")}function L(e){if(v){if("radial"==r){g.diff=Jo.dist(A,P,e.stageX/Jo.scaX,e.stageY/Jo.scaY),x=Math.atan2(e.stageY/Jo.scaY-k.y,e.stageX/Jo.scaX-k.x)*Jo.DEG;var t=Jo.sign(C-x);if(180<Math.abs(x-C))return void(v=!1);g.diff=g.diff*t;t=Math.max(10,Jo.dist(k.x,k.y,e.stageX/Jo.scaX,e.stageY/Jo.scaY));g.diff*=(T-t)/T}else g.diff=m-("horizontal"==r?e.stageX/Jo.scaX:e.stageY/Jo.scaY);h&&(Math.abs(g.diff)<Math.abs(h.diff)?(g.override=!0,h.override=!1):(g.override=!1,h.override=!0)),g.override||(0<Math.abs(g.diff)&&(g.swiperMoving=!0),y=z-g.diff*g.sensitivity*c,zot(i)||zot(l)||!u?(zot(i)||(y=Math.max(y,i)),zot(l)||(y=Math.min(y,l))):(y=((t=y)+1e4*(l-i)-i)%(l-i)+i,Math.abs(t-y)>.8*Math.abs(l-i)&&(g.immediate(y),m="horizontal"==r?e.stageX/Jo.scaX:e.stageY/Jo.scaY,z=g.target[g.property])),g.desiredValue=y,g.dispatchEvent("swipemove"))}}function D(){f.off("mousedown",g.downEvent),f.off("pressmove",g.moveEvent),f.off("pressup",g.upEvent),w.off("mouseupplus",g.upEvent2)}function _(){f.canvas?(f.off("stagemousedown",g.downEvent),f.off("stagemousemove",g.moveEvent),f.off("stagemouseup",g.upEvent),w.off("mouseupplus",g.upEvent2)):D(),Jo.Ticker.remove(g.swiperTicker)}z_d("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",!zot(e)&&e.getStage&&e.stage?zot(t)||(zot(n)&&(n=1),zot(r)&&(r="horizontal"),zot(a)&&(a=.1),!1===a&&(a=1),zot(s)&&(s=!1),zot(c)&&(c=1),zot(u)&&(u=!1),p=$o(d),zot(d)&&(d="s"==p?.2:200),f=e,y=(g=this).desiredValue=t[o],this.target=t,this.property=o,this.sensitivity=n,v=!1,g.min=i,g.max=l,w=WW.zdf||e.stage?e.stage.frame:{},f.canvas?(b=f,g.downEvent=f.on("stagemousedown",function(e){v=!0,j(e),g.moveEvent=f.on("stagemousemove",L),g.upEvent=f.on("stagemouseup",M),g.upEvent2=w.on("mouseupplus",M)})):(b=f.stage,D(),g.downEvent=f.on("mousedown",j),g.moveEvent=f.on("pressmove",L),g.upEvent=f.on("pressup",O),g.upEvent2=w.on("mouseupplus",O)),T=Math.sqrt(Math.pow(f.width,2)+Math.pow(f.height,2)),E=!1,S=new Jo.Damp(g.target[g.property],a),W=B=y,g.swiperTicker=Jo.Ticker.add(function(){y==B?y!=W&&(g.pauseTimeout&&g.pauseTimeout.clear(),W=y,g.pauseTimeout=Jo.timeout(d,function(){v&&g.dispatchEvent("swipepause"),g.pauseTimeout=null})):(W=null,B=y,g.pauseTimeout&&g.pauseTimeout.clear()),g.swiperMoving&&(g.target[g.property]=s?Math.round(S.convert(y)):S.convert(y),E&&!v&&Math.abs(g.target[g.property]-y)<Math.abs(n)/2&&(g.swiperMoving=!1,E=!1,g.target[g.property]=y,g.immediate(g.target[g.property]),g.dispatchEvent("swipestop")))},b),this.immediate=function(e){S.immediate(e),g.target[g.property]=s?Math.round(e):e,g.desiredValue=y=e},I=!0,Object.defineProperty(g,"enabled",{get:function(){return I},set:function(e){I!=e&&(e?(f.canvas?g.downEvent=f.on("stagemousedown",g.downEvent):(g.downEvent=f.on("mousedown",g.downEvent),g.moveEvent=f.on("pressmove",g.moveEvent),g.upEvent=f.on("pressup",g.upEvent),g.upEvent2=w.on("mouseupplus",g.upEvent2)),g.immediate(g.target[g.property]),g.swiperTicker=Jo.Ticker.add(g.swiperTicker,b)):_(),I=Boolean(e))}}),Object.defineProperty(g,"desiredValue",{get:function(){return y},set:function(e){g.swiperMoving=!0,y=e}}),Object.defineProperty(g,"damp",{get:function(){return a},set:function(e){a=e,S.damp=a}}),this.dispose=function(){_(),S=null,g.swiperTicker=null}):zogy("zim.Swiper() - please provide container on stage")},Jo.extend(Jo.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Jo.MotionController=function(i,l,e,a,t,n,r,s,c,o,u,d,h,p,g,f,m,z,y,b,v,w,C,x){if(A=zob(Jo.MotionController,arguments,"target, type, speed, axis, boundary, map, diagonal, damp, flip, orient, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBoundary, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup, rotate, mouseOutside",this))return A;z_d("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var k,T=this,A="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(zot(f)){if(!WW.zdf)return void zogy(A);k=f=WW.zdf.stage}else if(zot(f.stage)){if(!WW.zdf)return void zogy(A);k=WW.zdf.stage}else k=f.stage;var P=k.frame;zot(o)||(C=o),zot(i)&&(i=new Jo.Container(1,1,null,null,!1));var E,S="Accelerator"==i.type;zot(e)&&(e="pressmove"==l?20:7),zot(l)||"DPad"!=l.type||(E=l,l="manual",zot(a)&&(a=E.axis),"all"==a&&(a="both"),E.on("change",function(){T.convert(i.x+E.dirX*e,i.y+E.dirY*e)})),(zot(l)||"mousemove"!=l&&"pressmove"!=l&&"pressdrag"!=l&&"keydown"!=l&&"gamebutton"!=l&&"gamestick"!=l&&"swipe"!=l&&"follow"!=l&&"manual"!=l)&&(l="mousedown"),zot(a)&&(a=S?"horizontal":"both"),"keydown"==l&&zot(n)&&(n=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==l&&zot(n)&&(n=d?[14,15,Jo.GamePad.RT,Jo.GamePad.LT]:[14,15,12,13]),"gamestick"==l&&zot(n)&&(n=d?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==l&&zot(n)&&(n=[0,0,1,1]),zot(r)&&(r=!0),"horizontal"!=a&&"vertical"!=a||(r=!1),!zot(s)&&!0!==s||(s="keydown"==l||"gamebutton"==l?1:"pressmove"==l?.5:.1),!1===s&&(s=1),zot(d)&&(d=!1),zot(h)&&(h=.4*e),zot(p)&&(p=4),zot(g)&&(g=.2),zot(z)&&(z=!0),k.mouseMoveOutside=z,zot(y)&&(y=[]),Array.isArray(y)||(y=[y]),"Pen"!=i.type||i.move?y.push(i):y.push(i,i.paper),t&&t.getBounds&&(y?-1==y.indexOf(t)&&y.push(t):y=[t]),(i.motionController=this).mousedownIncludes=y,f&&f.backing&&this.mousedownIncludes.push(f.backing),zot(w)&&(w=.3),t&&"Blob"!=t.type&&(i.x=Jo.constrain(i.x,t.x,t.x+t.width),i.y=Jo.constrain(i.y,t.y,t.y+t.height)),T.dampKeyup=w,this.dirX=0,this.dirY=0,this.speed=e,this.turnSpeed=h,this.axis=a,this.target=i,this.moveThreshold=p,this.stickThreshold=g,this.boundary=t,i.zimMCStartAngle=i.rotation;var B,W,I,M=T.speed,O=T.speed,j=0;T.rotation=i.zimMCStartAngle,S?(I=!(W=f.getBounds())||"vertical"==a&&!W.height||"vertical"!=a&&!W.width?1e3:"vertical"==a?W.height:W.width,zot(b)&&(b=0),zot(v)&&(v=100),zot(this.target.percentSpeed)&&(this.target.percentSpeed=(v-b)/2),T.x=I/2,T.y=I/2,B=new Jo.Proportion(0,I,b,v)):(T.x=this.target.x,T.y=this.target.y);var L,D,_,R,Y,X,N,F,H,V,G,U,q=T.scaleX=i.scaleX,Q=T.scaleY=i.scaleY,Z=!1,K=!1;if("keydown"==l||"gamebutton"==l){for(X=0;X<4;X++)Array.isArray(n[X])||(n[X]=[n[X]]);var J,$,ee,te,oe=[0,0,0,0],ne=[],re=["X","X","Y","Y"],ie=[-1,1,-1,1],le={dirX:0,dirY:0};"keydown"==l?J=P.on("keydown",ce):$=(F=T.gamepad=new Jo.GamePad).on("buttondown",ce),zot(u)&&("keydown"==l?ee=P.on("keyup",ue):te=F.on("buttonup",ue)),H={rotation:0,speedX:T.speed,speedY:T.speed};var ae=Jo.Ticker.add(function(){var e,t,o;d?he(le):(t=T.speed,o=T.speed,"both"==T.axis&&0!=le.dirX&&0!=le.dirY&&(t=(e=fe(le.dirX,le.dirY)).speedX,o=e.speedY),"horizontal"!=T.axis&&"both"!=T.axis||(T.x+=t*le.dirX),"vertical"!=T.axis&&"both"!=T.axis||(T.y+=o*le.dirY),pe())},k)}else if("mousedown"==l||"mousemove"==l)L=k.on("stage"+l,function(e){var t;if(k=e.target.stage,!x&&T.boundary&&"Blob"==!T.boundary.type?n=T.boundary:!x&&f&&f.boundsToGlobal&&(n=f.boundsToGlobal()),!n||!((t={x:e.stageX/Jo.scaX,y:e.stageY/Jo.scaY}).x<n.x||t.x>n.x+n.width||t.y<n.y||t.y>n.y+n.height)){if("mousedown"==l){if(Array.isArray(T.mousedownIncludes)||(T.mousedownIncludes=[T.mousedownIncludes]),T.mousedownIncludes.indexOf(f)<0)for(X=0;X<f.numChildren;X++){var o=f.getChildAt(X);if(-1==T.mousedownIncludes.indexOf(o)&&o.mouseEnabled&&o.hitTestPoint&&o.hitTestPoint(e.stageX/Jo.scaX,e.stageY/Jo.scaY))return}T.dispatchEvent("mousedown")}var n=f.globalToLocal(z?e.rawX/Jo.scaX:e.stageX/Jo.scaX,z?e.rawY/Jo.scaY:e.stageY/Jo.scaY);T.x=n.x,T.y=n.y,pe()}});else if("pressmove"==l||"pressdrag"==l||"follow"==l)"Pen"==i.type&&(i.write=!1),L=k.on("stagemousedown",function(e){var t;if("Pen"==i.type&&i.draggingCheck&&zogb(),!x&&T.boundary&&"Blob"==!T.boundary.type?t=T.boundary:!x&&f&&f.boundsToGlobal&&(t=f.boundsToGlobal()),(!t||!((r={x:e.stageX/Jo.scaX,y:e.stageY/Jo.scaY}).x<t.x||r.x>t.x+t.width||r.y<t.y||r.y>t.y+t.height))&&(!T.boundary||"Blob"!=T.boundary.type||"pressmove"!=l&&"pressdrag"!=l||(r={x:e.stageX/Jo.scaX,y:e.stageY/Jo.scaY},T.boundary.shape.hitTestPoint(r.x,r.y)))&&("pressdrag"!=l||i.hitTestPoint(e.stageX/Jo.scaX,e.stageY/Jo.scaY))){K=!1,Array.isArray(T.mousedownIncludes)||(T.mousedownIncludes=[T.mousedownIncludes]);var o=!1;for(T.mouseDownIncludes&&(Y=k.getObjectUnderPoint(e.stageX,e.stageY,1)),X=0;X<T.mousedownIncludes.length;X++)Y&&T.mousedownIncludes[X].hitTestPoint&&T.mousedownIncludes[X].hitTestPoint(e.stageX/Jo.scaX,e.stageY/Jo.scaY)&&T.mousedownIncludes[X].contains(Y)&&(o=!0);if(!o)for(X=0;X<f.numChildren;X++){var n=f.getChildAt(X);if(-1==T.mousedownIncludes.indexOf(n)&&n.mouseEnabled&&n.hitTestPoint&&n.hitTestPoint(e.stageX/Jo.scaX,e.stageY/Jo.scaY))return}var r=f.globalToLocal(z?e.rawX/Jo.scaX:e.stageX/Jo.scaX,z?e.rawY/Jo.scaY:e.stageY/Jo.scaY);"follow"!=l&&"pressdrag"!=l&&T.immediate("both"==a||"horizontal"==a?r.x:null,"both"==a||"vertical"==a?r.y:null),pe(),T.dispatchEvent("mousedown"),Z=!0,T.moveX=z?e.rawX/Jo.scaX:e.stageX/Jo.scaX,T.moveY=z?e.rawY/Jo.scaY:e.stageY/Jo.scaY,D=k.on("stagemousemove",function(e){T.moveX=z?e.rawX/Jo.scaX:e.stageX/Jo.scaX,T.moveY=z?e.rawY/Jo.scaY:e.stageY/Jo.scaY,"follow"!=l&&de()}),R&&Jo.Ticker.remove(R),"follow"==l&&(R=Jo.Ticker.add(de)),"Pen"==i.type&&(i.write=!0,i.paper.noMouse(),i.zimDragCheck=!0)}}),_=k.on("stagemouseup",function(){"Pen"==i.type&&(i.write=!1,i.paper.mouse(),i.zimDragCheck=!1,K&&i.stopCheck()),R&&Jo.Ticker.remove(R),k.off("stagemousemove",D),Z=!1});else if("gamestick"==l){for(F=this.gamepad=new Jo.GamePad,X=0;X<4;X++)Array.isArray(n[X])||(n[X]=[n[X]]);H={rotation:i.zimMCStartAngle,speedX:T.speed,speedY:T.speed};var se=F.on("data",function(e){for(le={dirX:0,dirY:0},X=0;X<n[0].length;X++)if(N=e.axes[n[0][X]],Math.abs(N)>T.stickThreshold){le.dirX=N;break}for(X=0;X<n[2].length;X++)if(N=e.axes[n[2][X]],Math.abs(N)>T.stickThreshold){le.dirY=N;break}d?he(le):(T.x+=T.speed*le.dirX,T.y+=T.speed*le.dirY,pe())})}else"swipe"==l&&(V=new Jo.Swiper(k,T,"x",.8),G=new Jo.Swiper(k,T,"y",.8,!1),U=V.on("swipemove",function(){pe()}));function ce(e){var t,o="keydown"==l?e.keyCode:e.buttonCode;for(X=0;X<4;X++)if(-1<n[X].indexOf(o))return r||"both"!=T.axis||(le.dirX=le.dirY=0),le["dir"+re[X]]=ie[X],oe[X]=1,0==(t=ne.indexOf(X))?void 0:(0<t&&ne.splice(t,1),void ne.unshift(X))}function ue(e){var t,o="keydown"==l?e.keyCode:e.buttonCode;for(X=0;X<4;X++)if(-1<n[X].indexOf(o))return(oe[X]=0)<=(t=ne.indexOf(X))&&ne.splice(t,1),void("both"!=T.axis||r?le["dir"+re[X]]=-oe[2*Math.floor(X/2)]+oe[2*Math.floor(X/2)+1]:0<ne.length?(le["dir"+re[X]]=0,t=ne[0],le["dir"+re[t]]=ie[t]):le.dirX=le.dirY=0)}function de(){var e=f.globalToLocal(T.moveX,T.moveY);T.x=e.x,T.y=e.y,pe(),"Pen"==i.type&&!K&&i.drawing&&(K=!0)}function he(e){H.rotation+=e.dirX*T.turnSpeed,T.rotation=H.rotation,H.speedX=Math.sin(H.rotation*Math.PI/180)*T.speed*-e.dirY,H.speedY=-Math.cos(H.rotation*Math.PI/180)*T.speed*-e.dirY,T.x+=H.speedX,T.y+=H.speedY}function pe(){var e,t=fe(T.x-(S?T.target.percentSpeed:T.target.x),T.y-(S?T.target.percentSpeed:T.target.y));M=t.speedX,O=t.speedY,C&&(zot(t.angle)||(T.rotation=t.angle+i.zimMCStartAngle),zot(T.rotation)?T.rotation=T.target.rotation:(T.rotation+=j,e=ge(T.rotation),t=T.target.rotation=ge(T.target.rotation),180<Math.abs(e-t)&&(e<t?t-=360:e-=360),T.dampR.immediate(t),T.target.rotation=t,T.rotation=e))}function ge(e){return(e%360+360)%360}function fe(e,t){var o,n=T.speed,r=T.speed,i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return 0<i&&(n=Math.abs(e)/i*T.speed,r=Math.abs(t)/i*T.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:r,angle:o}}var me=this.x,ze=this.y,ye=this.x,be=this.y,ve=this.x=S?I/2:this.target.x,we=this.y=S?I/2:this.target.y;this.dampX=new Jo.Damp(ve,s),this.dampY=new Jo.Damp(we,s),this.dampR=new Jo.Damp(this.target.rotation,s);var Ce,xe=0,ke=0,Te=Jo.Ticker.add(function(){var e,t,o,n;i.draggingCheck||("manual"==l&&pe(),T.boundary&&"Blob"!=T.boundary.type&&(T.x=Jo.constrain(T.x,T.boundary.x,T.boundary.x+T.boundary.width),T.y=Jo.constrain(T.y,T.boundary.y,T.boundary.y+T.boundary.height)),"horizontal"!=T.axis&&"both"!=T.axis||(T.dirX=Jo.sign(T.x-ve),Math.abs(T.x-ve)<M?ve=T.x:ve+=T.dirX*M,le&&0==le.dirX&&(e=T.boundary?T.boundary.width/2:k.width/2,t=T.x-(T.x-e)*(S?T.dampKeyup:0),ve=t,T.x=ve),S&&W&&W.width?T.target.percentSpeed=B.convert(T.dampX.convert(ve)):T.target.x=T.dampX.convert(ve)),"vertical"!=T.axis&&"both"!=T.axis||(T.dirY=Jo.sign(T.y-we),Math.abs(T.y-we)<O?we=T.y:we+=Jo.sign(T.y-we)*O,le&&0==le.dirY&&(e=T.boundary?T.boundary.height/2:k.height/2,o=T.y-(T.y-e)*(S?T.dampKeyup:0),we=o,T.y=we),S&&W&&W.height?T.target.percentSpeed=B.convert(T.dampY.convert(we)):T.target.y=T.dampY.convert(we)),T.boundary&&"Blob"==T.boundary.type&&(T.boundary.shape.hitTestPoint(T.target.x,T.target.y)?(me=T.target.x,ze=T.target.y):(T.target.x=T.x=me,T.target.y=T.y=ze,T.immediate(me,ze))),"pressmove"==l&&Z&&T.dispatchEvent("pressing"),1==s?(T.movingX=0!=Math.round(ye-T.x),T.movingY=0!=Math.round(be-T.y),ye=T.x,be=T.y):(T.movingX=Math.abs(ve-(S?T.target.percentSpeed:T.target.x))>T.moveThreshold,T.movingY=Math.abs(we-(S?T.target.percentSpeed:T.target.y))>T.moveThreshold),!T.moving||T.movingX||T.movingY?T.moving||!T.movingX&&!T.movingY||T.dispatchEvent("startmoving"):T.dispatchEvent("stopmoving"),T.moving=T.movingX||T.movingY,T.moving&&T.dispatchEvent("moving"),T.dirX==xe&&T.dirY==ke||(o=new createjs.Event("change"),T.dirX!=xe?(n=["left",null,"right"],o.dir=n[T.dirX+1],xe=T.dirX,i.zimMCStartAngle||"horizontal"!=c&&"both"!=c||(T.scaleX=i.scaleX=T.dirX?Math.abs(i.scaleX)*T.dirX:i.scaleX,j=0!=q&&-1==Math.round(T.scaleX/q)?180:0)):(n=["up",null,"down"],o.dir=n[T.dirY+1],ke=T.dirY,i.zimMCStartAngle||"vertical"!=c&&"both"!=c||(T.scaleY=i.scaleY=T.dirY?-Math.abs(i.scaleY)*T.dirY:i.scaleY,j=0!=Q&&-1==Math.round(T.scaleY/Q)?180:0)),T.dispatchEvent(o)),C&&!zot(T.rotation)&&(T.target.rotation=T.dampR.convert(T.rotation)))},k);this.immediate=function(e,t,o){return!zot(e)&&T.dampX&&(T.dampX.immediate(e),T.x=S?T.target.percentSpeed=ve=e:T.target.x=ve=e,V&&V.immediate(e)),!zot(t)&&T.dampY&&(T.dampY.immediate(t),T.y=S?T.target.percentSpeed=we=t:T.target.y=we=t,G&&G.immediate(t)),!zot(o)&&T.dampR&&(T.dampR.immediate(o),T.rotation=T.target.rotation=o),me=T.x,ze=T.y,T},this.convert=function(e,t){zot(e)||(T.x=e),zot(t)||(T.y=t),pe()},Object.defineProperty(T,"pausingSpeed",{get:function(){return T.speed},set:function(e){T.speed=e}}),this.paused=!1,this.pause=function(e,t,o){return zot(e)&&(e=!0),zot(t)&&(t=0),zot(o)&&(o=!1),e?(Ce=T.speed,0<t?(Jo.animate({target:T,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){T.speed=0,T.paused=!0,T.enabled=!1,T.immediate(T.target.x,T.target.y),T.dispatchEvent("pause")}}),o&&(Z=!1,D&&k.off("stagemousemove",D),R&&Jo.Ticker.remove(R),"Pen"==i.type&&(i.write=!1,i.zimDragCheck=!1),_&&k.off("stagemouseup",_),K&&i.stopCheck(),"keydown"==l?ee&&P.off("keyup",ee):te&&F.off("buttonup",te))):(T.speed=0,T.paused=!0,T.enabled=!1,T.immediate(T.target.x,T.target.y),setTimeout(function(){T.dispatchEvent("pause")},10))):(T.enabled=!0,0<t?Jo.animate({target:T,obj:{pausingSpeed:Ce},ticker:!1,time:t,call:function(){T.speed=Ce,T.paused=!1}}):(T.speed=Ce,T.paused=!1)),T};var Ae=!0;function Pe(){"keydown"==l?(P.off("keydown",J),P.off("keyup",ee),Jo.Ticker.remove(ae)):"gamebutton"==l?(F.off("buttondown",$),F.off("buttonup",te),Jo.Ticker.remove(ae)):"gamestick"==l?F.off("data",se):"swipe"==l?(V.enabled=!1,G.enabled=!1,V.off("swipemove",U)):"mousedown"==l||"mousemove"==l?k.off("stage"+l,L):"pressmove"==l&&(k.off("stagemousedown",L),k.off("stagemousemove",D),k.off("stagemouseup",_)),Jo.Ticker.remove(Te)}Object.defineProperty(T,"enabled",{get:function(){return Ae},set:function(e){Ae!=e&&(e?("keydown"==l?(J=P.on("keydown",J),ee=ee&&P.on("keyup",ee),ae=Jo.Ticker.add(ae,k)):"gamebutton"==l?($=F.on("buttondown",$),te=te&&F.on("buttonup",te),ae=Jo.Ticker.add(ae,k)):"gamestick"==l?se=F.on("data",se):"swipe"==l?(V.enabled=!0,G.enabled=!0,U=U&&V.on("swipemove",U)):"mousedown"==l||"mousemove"==l?L=k.on("stage"+l,L):"pressmove"==l&&(L=k.on("stagemousedown",L),D=D&&k.on("stagemousemove",D),_=_&&k.on("stagemouseup",_)),Te=Jo.Ticker.add(Te,k),T.paused=!1):(Pe(),T.paused=!0),Ae=Boolean(e))}}),this.dispose=function(){Pe(),F&&F.dispose(),V&&V.dispose(),G&&V.dispose()}},Jo.extend(Jo.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),Jo.GamePad=function(){if(z_d("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zogy("zim.GamePad() - no browser support"));var r;WW.addEventListener("gamepadconnected",e),this.currentIndex=0;var i=this;function e(e){var t;i.connected=!0,t="gamepadconnected",e=e,(t=new createjs.Event(t)).index=e.gamepad.index,t.id=e.gamepad.id,t.buttons=e.gamepad.buttons,t.axes=e.gamepad.axes,i.dispatchEvent(t);var o=navigator.getGamepads()[i.currentIndex];i.lastData=[];for(var n=0;n<o.buttons.length;n++)i.lastData[n]=o.buttons[n].pressed;!function e(){if(r=requestAnimationFrame(e),i.data=navigator.getGamepads()[i.currentIndex],i.data){for(var t,o=i.buttons=[],n=0;n<i.data.buttons.length;n++)o[n]=i.data.buttons[n].pressed,o[n]!=i.lastData[n]&&(i.lastData[n]=o[n],(t=o[n]?new createjs.Event("buttondown"):new createjs.Event("buttonup")).buttonCode=n,t.button=l[n],i.dispatchEvent(t));(t=new createjs.Event("data")).axes=i.axes=i.data.axes,t.buttons=i.buttons,i.dispatchEvent(t)}}()}var t=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(i.connected||e(),clearInterval(t))},500);function o(e){e.gamepad.index==i.currentIndex&&(cancelAnimationFrame(r),i.connected=!1,i.dispatchEvent("gamepaddisconnected"))}WW.addEventListener("gamepaddisconnected",o),this.dispose=function(){WW.removeEventListener("gamepadconnected",e),WW.removeEventListener("gamepaddisconnected",o),cancelAnimationFrame(r),clearInterval(t),i.connected=!1}};var l=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"];for(z_i=0;z_i<l.length;z_i++)Jo.GamePad[l[z_i]]=z_i;var b,w,t=["LSX","LSY","RSX","RSY"];for(z_i=0;z_i<t.length;z_i++)Jo.GamePad[t[z_i]]=z_i;for(Jo.extend(Jo.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),Jo.Portal=function(t,o){var e,n,r,i,l;if(e=zob(Jo.Portal,arguments,"obj, lands",this))return e;function a(){o.setChildIndex(i,0),i=l,l=o.getChildAt(o.numChildren-2),o.setChildIndex(l,o.numChildren-1),i.setMask(null),l.setMask(t),t.stage.update()}z_d("69.96"),!zot(t)&&t.stage&&(this.type="Portal",n=this,(r=o&&o.numChildren&&0<o.numChildren)&&(i=o.getChildAt(o.numChildren-1),l=o.getChildAt(o.numChildren-2),o.setChildIndex(l,o.numChildren-1),l.setMask(t)),t.on(Jo.mobile()?"mousedown":"mouseover",function(){n._enabled&&(r&&a(),n.dispatchEvent("enter"))}),t.on(Jo.mobile()?"pressup":"mouseout",function(){n._enabled&&n.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(e){!zot(e)&&e.stage||!zon?l.setMask(t):zogy("zim.Portal() - please provide a Display Object to act as the portal")}}),Object.defineProperty(this,"currentLand",{get:function(){return i},set:function(e){if(o.contains(e))for(;e!=i;)a()}}),Object.defineProperty(this,"nextLand",{get:function(){return l},set:function(){zon&&zogy("zim.Portal() - nextLand is read only - remake Portal to change")}}),this._enabled=!0,Object.defineProperty(n,"enabled",{get:function(){return n._enabled},set:function(e){n._enabled=e}}))},Jo.extend(Jo.Portal,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),WW.zimContactListener=null,Jo.Timeline=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g){var f;if(f=zob(Jo.Timeline,arguments,"objects, width, startPaused, barColor, buttonColor, themeColor, corner, ticks, damp, loop, noLoop, call, style, group, inherit",this))return f;z_d("69.971"),this.group=p;var p=!1===h?{}:Jo.getStyle("Timeline",p,g),m=this.stage||zimDefaultFrame.stage,z=m.frame,y=m.width,b=m.height;zot(o)&&(o=null!=p.startPaused&&p.startPaused),zot(c)&&(c=null==p.loop||p.loop),zot(u)&&(u=null!=p.noLoop&&p.noLoop),zot(n)&&(n=null!=p.barColor?p.barColor:Jo.tin),zot(r)&&(r=null!=p.buttonColor?p.buttonColor:Jo.light),zot(i)&&(i=null!=p.themeColor?p.themeColor:Jo.purple),zot(t)&&(t=null!=p.width?p.width:.5*y),zot(a)&&(a=null==p.ticks||p.ticks),zot(s)&&(s=null!=p.damp&&p.damp),zot(l)&&(l=null!=p.corner?p.corner:5);this.zimContainer_constructor(t,50,null,null,!1),this.type="Timeline";var v=this,w=e,C=Jo.toBW(z.color);if(zot(w)){if(!Jo.animatedObjects||!Jo.animatedObjects.objects)return zogy("ZIM Timeline - add Timeline after animated objects"),v;w=Jo.copy(Jo.animatedObjects.objects)}Array.isArray(w)||(w=[w]);var x=Date.now(),k=0;Jo.loop(w,function(e){e.pauseAnimate(),e.tweenEndTime&&e.tweenEndTime>k&&(k=e.tweenEndTime)});var T=Math.ceil((k-x)/1e3),g=this.backing=new Jo.Rectangle(t,50,n,null,null,l).alp(.8).addTo(v),r="#000000"==C?0:1,e=this.shade=new Jo.Rectangle(50-r,50-2*r,black,null,null,[l,0,0,l]).alp(.7).pos(r,r,LEFT,TOP,v),l=this.shade2=new Jo.Rectangle(50-r,50-2*r,black,null,null,[0,l,l,0]).alp(.7).pos(r,r,RIGHT,TOP,v),r=new Jo.Container(50,50).alp(.9);new Jo.Rectangle(7,24,white).center(r).mov(-6),new Jo.Rectangle(7,24,white).center(r).mov(6);var A=v.controls=new Jo.Button({icon:new Jo.Triangle(30,30,30,white).reg(null,16).rot(90).alp(.9),toggleIcon:r.reg("center"),downBackgroundColor:Jo.purple.darken(.2),width:50,height:50,corner:25}).scaleTo(g,null,70).center(e).addTo(v).expand(10).tap(function(){R.pauseAnimate(!A.toggled)});o||A.toggle();e=new Jo.Container(50,50).reg("center").alp(.8).expand(10);new Rectangle(24,5,Jo.white).center(e).mov(0,-8),new Rectangle(24,5,Jo.white).center(e),new Rectangle(24,5,Jo.white).center(e).mov(0,8);var P=!0,E=v.menu=new Jo.Button({icon:e,downBackgroundColor:Jo.purple.darken(.2),width:50,height:50,corner:25}).scaleTo(g,null,70).center(l).addTo(v).tap(function(){_.show(),P&&_.loc(v.x,v.y).mov(v.width-_.width/2,-_.height/2-10)});function S(e){R.rate=e,F.speed=e,v.trailInterval.time=H.convert(F.speed);try{localStorage&&(localStorage.zim_tl=JSON.stringify(F))}catch(e){}}function B(e){R.ticks.vis(e),R.labels.vis(e),m.update(),F.labels=e;try{localStorage&&(localStorage.zim_tl=JSON.stringify(F))}catch(e){}}function W(e){c=e,F.looping=e;try{localStorage&&(localStorage.zim_tl=JSON.stringify(F))}catch(e){}}function I(t){Jo.loop([A,E],function(e){e.backgroundColor=t,e.toggleBackgroundColor=t,e.rollBackgroundColor=t.lighten(.2),e.rollToggleBackgroundColor=t.lighten(.2),e.downBackgroundColor=t.darken(.2)}),_.backing.color=t,M.slider.bar.color=t,m.update(),F.color=t;try{localStorage&&(localStorage.zim_tl=JSON.stringify(F))}catch(e){}return this}this.setThemeColor=I;var M=Jo.List.slider("speed",0,2,1,S,.1),O=Jo.List.checkBox("labels",!1,B),j=Jo.List.checkBox("loop",!1,W),L=Jo.List.checkBox("trails",!1,function(e){v.trails&&(v.trailInterval.pause(),v.trails.dispose(),v.trails=null,Y.dispose(),Y=null),e&&(R.percentComplete=0,setTimeout(function(){N()},50)),F.trailing=e;try{localStorage&&(localStorage.zim_tl=JSON.stringify(F))}catch(e){}}),D=Jo.List.colorPicker("color",Jo.purple,new Jo.ColorPicker({colors:[Jo.purple,Jo.pink,Jo.red,Jo.orange,Jo.brown,Jo.green,Jo.blue,Jo.grey,Jo.black],cols:9}),I),g=this.title=new Jo.Container(300,25).noMouse();new Jo.Rectangle(500,70,Jo.black.toAlpha(.4)).pos(0,-45,CENTER,TOP,g),this.icon=z.makeIcon({edges:"white",box:faint,slats:["white","white","white","white","white"]}).alp(.6).scaleTo(g,null,140).pos(7,-10,"left","center",g),new Jo.Label({text:"Z  I  M  -  T  I  M  E  L  I  N  E",color:"white"}).alp(.6).sca(.47).loc(51,-4,g),new Jo.Line(219,1,"white").alp(.6).center(g).mov(8,3);l=this.list=new Jo.List({width:300,height:260,backdropColor:clear,borderWidth:-1,shadowColor:-1,viewNum:6,padding:12,scrollBarV:!1,list:[M,O,j,L,D],swipe:!1});M.slider.bar.color=Jo.purple,l.tabs.mov(0,8);var _=v.pane=new Jo.Pane({width:l.width,height:l.height+40,backgroundColor:Jo.purple,backdropColor:Jo.faint,draggable:!0,corner:8,content:l,resets:!1});_.contentContainer.mov(0,20),_.backing.on("pressmove",function(){P=!1},null,!0),g.scaleTo(_.contentContainer,100).pos(0,2,"center","top",_.contentContainer).setMask(_.backing);var R=v.slider=new Jo.Slider({min:0,max:T,inside:!0,barColor:n,barWidth:50,barLength:t-100-12,tickColor:C.toAlpha(.8),damp:s,useTicks:!0,tickScale:1,tickStep:.1,semiTicks:4,semiTickScale:1,useLabels:!0,labelColor:C.toAlpha(.8)}).center(v,1);R.bar.dye(Jo.faint),R.value=0,R.ticks.mov(0,-20),R.bar.widthOnly=R.bar.width+14,new Jo.Triangle({color:Jo.dark}).alp(.3).scaleTo(R.button,70,90,"full").center(R.button),R.animate({props:{value:R.max},time:R.max,ease:"linear",startPaused:o,loop:!0,loopWait:.5,loopWaitCall:function(){c||(R.pauseAnimate(),A.toggle(!1),R.value=R.max),Y&&v.trailInterval.pause(),d&&"function"==typeof d&&d()},loopCall:function(){Jo.loop(w,function(e){e.percentComplete=0})}}),R.bar.on("mousedown",function(){R.latestTween.percentComplete=R.value/R.max*100});var Y,X=!0;function N(){v.trails||(Y=new Jo.Container(y,b).addTo(m,0).cache(),v.trails=new Jo.Bitmap(Y.cacheCanvas).addTo(m,1),v.trailInterval.pause(!1))}R.button.on("mousedown",function(){X=R.animating,R.pauseAnimate()}),R.button.on("pressup",function(){X&&R.pauseAnimate(!1),R.latestTween.percentComplete=R.value/R.max*100}),v.keyEvent=z.on("keydown",function(e){" "==e.key&&(A.toggled?(A.toggle(!1),R.pauseAnimate(!0)):(A.toggle(!0),R.pauseAnimate(!1)))}),v.tickerID=Jo.Ticker.add(function(){var o=Math.min(100,v.slider.value/T*100)-.01;Jo.loop(w,function(e){var t=x+o/100*(k-x)-e.tweenStartTime;u&&(e.percentComplete=Math.max(0,Math.min(100,t/(e.tweenEndTime-e.tweenStartTime)*100))),e.percentComplete=t/(e.tweenEndTime-e.tweenStartTime)*100})}),v.trailInterval=Jo.interval(.05,function(){R.animating&&0<M.slider.value&&(Jo.loop(w,function(e){e=e.clone().addTo(Y).alp(.05);e.color=clear,e.borderColor=C}),Y.updateCache("source-over"),Y.disposeAllChildren())}),v.trailInterval.pause();var F,H=new Jo.Proportion(.1,2,.1,.01);try{localStorage&&(F=(F=localStorage.zim_tl)||JSON.stringify({speed:1,labels:a,looping:!1,trailing:!1,color:purple}),S((F=JSON.parse(F)).speed),M.slider.value=F.speed,M.stepper.value=F.speed,B(F.labels),O.checkBox.checked=F.labels,W(F.looping),j.checkBox.checked=F.looping,I(F.color),D.colorPicker.selectedColor=F.color,D.swatch.color=F.color,D.colorLabel.text=F.color.toUpperCase(),F.trailing&&N(),L.checkBox.checked=F.trailing,v.trailInterval.time=H.convert(F.speed))}catch(e){}this.pos(0,20,"center","bottom"),i!=Jo.purple&&I(i),!(this.dispose=function(e,t,o){return Jo.Ticker.remove(v.tickerID),z.off("keydown",v.keyEvent),o||this.zimContainer_dispose(!0),!0})!==h&&Jo.styleTransforms(this,p)},Jo.extend(Jo.Timeline,Jo.Container,"dispose","zimContainer",!1),Jo.BlurEffect=function(t,o,n,r,e,i){var l;if(l=zob(Jo.BlurEffect,arguments,"blurX, blurY, quality, style, group, inherit",this))return l;z_d("69.972"),this.group=e;e=!1===r?{}:Jo.getStyle("BlurEffect",e,i);zot(t)&&(t=null!=e.blurX?e.blurX:10),zot(o)&&(o=null!=e.blurY?e.blurY:10),zot(n)&&(n=null!=e.quality?e.quality:1);var a=function(){return arguments}(t,o,n);this.veeObj={blurX:a[0],blurY:a[1],quality:a[2]},t=zik(t),o=zik(o),n=zik(n),this.createjsBlurFilter_constructor(t,o,n),this.type="BlurEffect",this.clone=function(e){return new Jo.BlurEffect(e||!Jo.isPick(a[0])?t:a[0],e||!Jo.isPick(a[1])?o:a[1],e||!Jo.isPick(a[2])?n:a[2],r,this.group,i)}},Jo.extend(Jo.BlurEffect,createjs.BlurFilter,"clone","createjsBlurFilter",!1),Jo.GlowEffect=function(t,o,n,r,i,l,a,s,e,c,u,d){var h;if(h=zob(Jo.GlowEffect,arguments,"color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",this))return h;z_d("69.9725"),this.group=u;u=!1===c?{}:Jo.getStyle("GlowEffect",u,d);zot(t)&&(t=null!=u.color?u.color:Jo.white),zot(o)&&(o=null!=u.alpha?u.alpha:1),zot(n)&&(n=null!=u.blurX?u.blurX:30),zot(r)&&(r=null!=u.blurY?u.blurY:30),zot(i)&&(i=null!=u.strength?u.strength:1),zot(l)&&(l=null!=u.quality?u.quality:1),zot(a)&&(a=null!=u.inner&&u.inner),zot(s)&&(s=null!=u.knockout&&u.knockout),zot(e)&&(e=null!=u.hideObject&&u.hideObject);var p=function(){return arguments}(t,o,n,r,i,l,a,s,e);this.veeObj={color:p[0],alpha:p[1],blurX:p[2],blurY:p[3],strength:p[4],quality:p[5],inner:p[6],knockout:p[7],hideObject:p[8]},n=zik(n),r=zik(r),l=zik(l),t=zik(t),this.alpha=zik(o),this.strength=zik(i),this.inner=zik(a),this.knockout=zik(s),this.hideObject=zik(e),this.createjsBlurFilter_constructor(n,r,l),this.type="GlowEffect",this.usesContext=!0,this.applyFilter=function(e,t,o,n,r,i,l,a){if((this.alpha<=0||this.strength<=0)&&!this.knockout)return!0;void 0===l&&(l=t),void 0===a&&(a=o);var s=(i=i||e).getImageData(l,a,n,r).data,c=document.createElement("canvas");c.width=n,c.height=r;for(var u=c.getContext("2d",{willReadFrequently:!0}),e=u.getImageData(0,0,n,r),d=e.data,h=this.inner,p=this._red,g=this._green,f=this._blue,m=0,z=d.length;m<z;m+=4){var y=m+3,b=s[y];h?255!==b&&(d[m]=p,d[m+1]=g,d[m+2]=f,d[y]=255-b):0!==b&&(d[m]=p,d[m+1]=g,d[m+2]=f,d[y]=b)}u.putImageData(e,0,0);var v=this.strength;if(0<v){this.createjsBlurFilter_applyFilter(u,0,0,n,r),255<v&&(v=255);for(var w=1;w<v;w++)u.drawImage(c,0,0)}n=this.alpha;return n<0?n=0:1<n&&(n=1),r=this.knockout?h?"source-in":"source-out":this.hideObject?h?"source-in":"copy":h?"source-atop":"destination-over",i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=n,i.globalCompositeOperation=r,i.drawImage(c,l,a),i.restore(),!0},Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(e){e=Jo.convertColor(e,"hexNumber"),this._red=e>>16&255,this._green=e>>8&255,this._blue=255&e}}),this.color=t,this.clone=function(e){return new Jo.GlowFilter(e||!Jo.isPick(p[0])?t:p[0],e||!Jo.isPick(p[1])?o:p[1],e||!Jo.isPick(p[2])?n:p[2],e||!Jo.isPick(p[3])?r:p[3],e||!Jo.isPick(p[4])?l:p[4],e||!Jo.isPick(p[5])?i:p[5],e||!Jo.isPick(p[6])?a:p[6],e||!Jo.isPick(p[7])?s:p[7],e||!Jo.isPick(p[8])?s:p[8],c,this.group,d)}},Jo.extend(Jo.GlowEffect,createjs.BlurFilter,["clone","applyFilter"],"createjsBlurFilter",!1),Jo.ShadowEffect=function(t,o,n,r,i,l,a,s,c,u,d,h,e,p){var g;if(g=zob(Jo.ShadowEffect,arguments,"distance, angle, color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",this))return g;z_d("69.973"),this.group=e;e=!1===h?{}:Jo.getStyle("ShadowEffect",e,p);zot(t)&&(t=null!=e.distance?e.distance:10),zot(o)&&(o=null!=e.angle?e.angle:45),zot(n)&&(n=null!=e.color?e.color:Jo.black),zot(r)&&(r=null!=e.alpha?e.alpha:.4),zot(i)&&(i=null!=e.blurX?e.blurX:15),zot(l)&&(l=null!=e.blurY?e.blurY:15),zot(a)&&(a=null!=e.strength?e.strength:1),zot(s)&&(s=null!=e.quality?e.quality:1),zot(c)&&(c=null!=e.inner&&e.inner),zot(u)&&(u=null!=e.knockout&&e.knockout),zot(d)&&(d=null!=e.hideObject&&e.hideObject);var f=function(){return arguments}(t,o,n,r,i,l,a,s,c,u,d);this.veeObj={distance:f[0],angle:f[1],color:f[2],alpha:f[3],blurX:f[4],blurY:f[5],strength:f[6],quality:f[7],inner:f[8],knockout:f[9],hideObject:f[10]},i=zik(i),l=zik(l),0===i&&0===l&&(i=1),s=zik(s),n=zik(n),t=zik(t),o=zik(o);var m=this;function z(e,t){t*=Jo.RAD;m._offsetX=Math.cos(t)*e,m._offsetY=Math.sin(t)*e}this.alpha=zik(r),this.strength=zik(a),this.inner=zik(c),this.knockout=zik(u),this.hideObject=zik(d),this.createjsBlurFilter_constructor(i,l,s),this.type="ShadowEffect",this.usesContext=!0,Object.defineProperty(this,"angle",{get:function(){return o},set:function(e){o=e=(e%360+360)%360,z(t,e)}}),this.angle=o,Object.defineProperty(this,"distance",{get:function(){return t},set:function(e){z(t=e,o)}}),this.distance=t,Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(e){e=Jo.convertColor(e,"hexNumber"),this._red=e>>16&255,this._green=e>>8&255,this._blue=255&e}}),this.color=n,this.applyFilter=function(e,t,o,n,r,i,l,a){if((this.alpha<=0||this.strength<=0)&&!this.knockout&&!this.hideObject)return!0;void 0===l&&(l=t),void 0===a&&(a=o);var s=(i=i||e).getImageData(l,a,n,r).data,c=document.createElement("canvas");c.width=n,c.height=r;for(var u=c.getContext("2d",{willReadFrequently:!0}),e=u.getImageData(0,0,n,r),d=e.data,h=this.inner,p=this._red,g=this._green,f=this._blue,m=0,z=d.length;m<z;m+=4){var y=m+3,b=s[y];h?255!==b&&(d[m]=p,d[m+1]=g,d[m+2]=f,d[y]=255-b):0!==b&&(d[m]=p,d[m+1]=g,d[m+2]=f,d[y]=b)}u.putImageData(e,0,0);var v=this.strength;if(0<v){this.createjsBlurFilter_applyFilter(u,0,0,n,r),255<v&&(v=255);for(var w=1;w<v;w++)u.drawImage(c,0,0)}n=this.alpha;return n<0?n=0:1<n&&(n=1),r=this.knockout?h?"source-in":"source-out":this.hideObject?h?"source-in":"copy":h?"source-atop":"destination-over",i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=n,i.globalCompositeOperation=r,i.drawImage(c,l+this._offsetX,a+this._offsetY),i.restore(),!0},this.getBounds=function(e){var t=this.createjsBlurFilter_getBounds(e),o=this._offsetX,e=this._offsetY;return 0!==o&&(o<0?(t.x+=o,t.width+=-o):t.width+=o),0!==e&&(e<0?(t.y+=e,t.height+=-e):t.height+=e),t},this.clone=function(e){return new Jo.ShadowFilter(e||!Jo.isPick(f[0])?t:f[0],e||!Jo.isPick(f[1])?o:f[1],e||!Jo.isPick(f[2])?n:f[2],e||!Jo.isPick(f[3])?r:f[3],e||!Jo.isPick(f[4])?i:f[4],e||!Jo.isPick(f[5])?l:f[5],e||!Jo.isPick(f[6])?s:f[6],e||!Jo.isPick(f[7])?a:f[7],e||!Jo.isPick(f[8])?c:f[8],e||!Jo.isPick(f[9])?u:f[9],e||!Jo.isPick(f[10])?d:f[10],h,this.group,p)}},Jo.extend(Jo.ShadowEffect,createjs.BlurFilter,["clone","getBounds","applyFilter"],"createjsBlurFilter",!1),Jo.ThresholdEffect=function(t,o,n,r,i,l,e,a){var s;if(s=zob(Jo.ThresholdEffect,arguments,"redValue, greenValue, blueValue, passColor, failColor, style, group, inherit",this))return s;z_d("69.9735"),this.group=e;e=!1===l?{}:Jo.getStyle("BlurEffect",e,a);zot(t)&&(t=null!=e.redValue?e.redValue:128),zot(o)&&(o=null!=e.greenValue?e.greenValue:128),zot(n)&&(n=null!=e.blueValue?e.blueValue:128),zot(r)&&(r=null!=e.passColor?e.passColor:Jo.white),zot(i)&&(i=null!=e.failColor?e.failColor:0),Jo.convertColor(r);var c=function(){return arguments}(t,o,n,r,i);this.veeObj={redValue:c[0],greenValue:c[1],blueValue:c[2],passColor:c[3],failColor:c[4]},this.redValue=t=zik(t),this.greenValue=o=zik(o),this.blueValue=n=zik(n),r=zik(r),i=zik(i),-1!=r&&(r=Jo.convertColor(r,"hexnumber")),-1!=i&&(i=Jo.convertColor(i,"hexnumber"));var u=r,d=i;this.createjsFilter_constructor(),this.type="ThresholdEffect",Object.defineProperty(this,"passColor",{get:function(){return u},set:function(e){-1!=(r=zik(e))&&(r=Jo.convertColor(r,"hexnumber")),u=r}}),Object.defineProperty(this,"failColor",{get:function(){return d},set:function(e){-1!=(i=zik(e))&&(i=Jo.convertColor(i,"hexnumber")),d=i}}),this.clone=function(e){return new Jo.ThresholdEffect(e||!Jo.isPick(c[0])?t:c[0],e||!Jo.isPick(c[1])?o:c[1],e||!Jo.isPick(c[2])?n:c[2],e||!Jo.isPick(c[3])?r:c[3],e||!Jo.isPick(c[4])?i:c[4],l,this.group,a)}},Jo.extend(Jo.ThresholdEffect,createjs.Filter,"clone","createjsFilter",!1),Jo.ThresholdEffect.LUM_R=.213,Jo.ThresholdEffect.LUM_G=.715,Jo.ThresholdEffect.LUM_B=.072,Jo.ThresholdEffect.prototype._applyFilter=function(e){for(var t=e.data,o=this.redValue,n=this.greenValue,r=this.blueValue,i=this.passColor,l=this.failColor,a=0,s=t.length;a<s;a+=4)(-1==o||t[a]>=o)&&(-1==n||t[a+1]>=n)&&(-1==r||t[a+2]>=r)?-1!=i&&(-1!=o&&(t[a]=i>>16),-1!=n&&(t[a+1]=i>>8&255),-1!=r&&(t[a+2]=255&i)):-1!=l&&(-1!=o&&(t[a]=l>>16),-1!=n&&(t[a+1]=l>>8&255),-1!=r&&(t[a+2]=255&l));return!0},Jo.ColorEffect=function(t,o,n,r,i,l,a,s,c,e,u){var d;if(d=zob(Jo.ColorEffect,arguments,"redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset, style, group, inherit",this))return d;z_d("69.9735"),this.group=e;e=!1===c?{}:Jo.getStyle("ColorEffect",e,u);zot(t)&&(t=null!=e.redMultiplier?e.redMultiplier:1),zot(o)&&(o=null!=e.greenMultiplier?e.greenMultiplier:1),zot(n)&&(n=null!=e.blueMultiplier?e.blueMultiplier:1),zot(r)&&(r=null!=e.alphaMultiplier?e.alphaMultiplier:1),zot(i)&&(i=null!=e.redOffset?e.redOffset:0),zot(l)&&(l=null!=e.greenOffset?e.greenOffset:0),zot(a)&&(a=null!=e.blueOffset?e.blueOffset:0),zot(s)&&(s=null!=e.alphaOffset?e.alphaOffset:0);var h=function(){return arguments}(t,o,n,r,i,l,a,s);this.veeObj={redMultiplier:h[0],greenMultiplier:h[1],blueMultiplier:h[2],alphaMultiplier:h[3],redOffset:h[4],greenOffset:h[5],blueOffset:h[6],alphaOffset:h[7]},t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),l=zik(l),a=zik(a),s=zik(s),this.createjsColorFilter_constructor(t,o,n,r,i,l,a,s),this.type="ColorEffect",this.clone=function(e){return new Jo.ColorEffect(t,o,n,r,i,l,a,s,e||!Jo.isPick(h[0])?t:h[0],e||!Jo.isPick(h[1])?o:h[1],e||!Jo.isPick(h[2])?n:h[2],e||!Jo.isPick(h[2])?r:h[3],e||!Jo.isPick(h[2])?i:h[4],e||!Jo.isPick(h[2])?l:h[5],e||!Jo.isPick(h[2])?a:h[6],e||!Jo.isPick(h[2])?s:h[7],c,this.group,u)}},Jo.extend(Jo.ColorEffect,createjs.ColorFilter,"clone","createjsColorFilter",!1),Jo.MultiEffect=function(r,i,l,a,t,e,o){var n;if(n=zob(Jo.MultiEffect,arguments,"hue, saturation, brightness, contrast, style, group, inherit",this))return n;z_d("69.974"),this.group=e;e=!1===t?{}:Jo.getStyle("MultiEffect",e,o);zot(r)&&(r=null!=e.hue?e.hue:0),zot(i)&&(i=null!=e.saturation?e.saturation:0),zot(l)&&(l=null!=e.brightness?e.brightness:0),zot(a)&&(a=null!=e.contrast?e.contrast:0);var s=function(){return arguments}(r,i,l,a);this.veeObj={hue:s[0],saturation:s[1],brightness:s[2],contrast:s[3]},r=zik(r),this.createjsColorMatrixFilter_constructor((new createjs.ColorMatrix).adjustColor(l,a,i,r)),this.type="MultiEffect",this.adjustColor=function(e,t,o,n){zot(r)||(r=zik(e)),zot(i)||(i=zik(t)),zot(l)||(l=zik(o)),zot(a)||(a=zik(n)),this.matrix.reset().adjustColor(e,t,o,n)},Object.defineProperty(this,"brightness",{get:function(){return l},set:function(e){l=zik(e),this.matrix.reset().adjustColor(l,a,i,r)}}),Object.defineProperty(this,"contrast",{get:function(){return a},set:function(e){a=zik(e),this.matrix.reset().adjustColor(l,a,i,r)}}),Object.defineProperty(this,"saturation",{get:function(){return i},set:function(e){i=zik(e),this.matrix.reset().adjustColor(l,a,i,r)}}),Object.defineProperty(this,"hue",{get:function(){return r},set:function(e){r=zik(e),this.matrix=(new createjs.ColorMatrix).adjustColor(l,a,i,r),this.applyFilter()}}),this.clone=function(e){return new Jo.MultiEffect(e||!Jo.isPick(s[0])?r:s[0],e||!Jo.isPick(s[0])?i:s[0],e||!Jo.isPick(s[0])?l:s[0],e||!Jo.isPick(s[0])?a:s[0],t,this.group,o)}},Jo.extend(Jo.MultiEffect,createjs.ColorMatrixFilter,"clone","createjsColorMatrixFilter",!1),Jo.AlphaEffect=function(t,o,e,n,r,i){var l;if(l=zob(Jo.AlphaEffect,arguments,"mask, dynamic, boundary, style, group, inherit",this))return l;z_d("69.9745"),this.group=r;r=!1===n?{}:Jo.getStyle("AlphaEffect",r,i);zot(t)&&(t=null!=r.mask?r.mask:null),zot(o)&&(o=null!=r.dynamic?r.dynamic:null),zot(e)&&(e=null!=r.boundary?r.boundary:null),this.alphaMask=t;var a=this;o&&(a.alphaMask.cacheCanvas||a.alphaMask.cache(),this.ticker=Jo.Ticker.add(function(){a.alphaMask.updateCache()}));var s=function(){return arguments}(t);this.veeObj={mask:s[0]},"Bitmap"==(t=zik(t)).type?t=t.image:t.cache&&(t=(e?t.cache(e.x,e.y,e.width,e.height):t.cache()).cacheCanvas),this.createjsAlphaMaskFilter_constructor(t),this.type="AlphaEffect",this.clone=function(e){return new Jo.AlphaEffect(e||!Jo.isPick(s[0])?t:s[0],o,n,this.group,i)}},Jo.extend(Jo.AlphaEffect,createjs.AlphaMaskFilter,"clone","createjsAlphaMaskFilter",!1),Jo.Pixel=function(r,t,o,n,i,l,a,s,c,u,d,e,h){var p;if(p=zob(Jo.Pixel,arguments,"obj, amount, amountY, blur, dynamic, blendmode, boundary, expand, amountFactor, blurFactor, style, group, inherit",this))return p;z_d("69.9747"),this.group=e;e=!1===d?{}:Jo.getStyle("Pixel",e,h);zot(r)&&(r=null!=e.obj?e.obj:null),zot(t)&&(t=null!=e.amount?e.amount:.5),zot(o)&&(o=null!=e.amountY?e.amountY:null);var g=!1;null==o&&(g=!0,o=t),zot(n)&&(n=null!=e.blur?e.blur:0),zot(i)&&(i=null!=e.dynamic&&e.dynamic),zot(l)&&(l=null!=e.blendmode?e.blendmode:null),zot(a)&&(a=null!=e.boundary?e.boundary:new Jo.Boundary(r.getBounds())),zot(s)&&(s=null!=e.expand?e.expand:0),zot(c)&&(c=null!=e.amountFactor?e.amountFactor:.6),zot(u)&&(u=null!=e.blurFactor?e.blurFactor:.6);var f=function(){return arguments}(r,t,o,n,l,c,u);this.veeObj={obj:f[0],amount:f[1],amountY:f[2],blur:f[3],blendmode:f[4],amountFactor:f[5],blurFactor:f[6]},r=zik(r),t=zik(t),o=zik(o),n=zik(n),l=zik(l),c=zik(c),u=zik(u),s&&(!Array.isArray(s)||1==s.length?a.contract(-s):2==s.length?a.contract(-s[0],-s[1]):a.contract(-s[0],-s[1],-s[2],-s[3]));var m=Jo.constrain(10*c,0,10),z=Jo.constrain(10*u,0,10),y=this,b=Math.pow(Math.E,-t*m),v=Math.pow(Math.E,-o*m),w=Math.pow(Math.E,-n*z);zot(r)&&(r=new Jo.Tile(new Jo.Circle(20,[Jo.green,Jo.blue,Jo.yellow,Jo.pink,Jo.purple]),5,5,5,5));var C=document.createElement("canvas"),x=C.getContext("2d"),k=document.createElement("canvas"),T=k.getContext("2d"),A=w;this.update=function(){r.cacheCanvas&&w==A?r.updateCache(l):(r.cache(a.x,a.y,a.width,a.height,w),A=w);var e=r.width,t=r.height,o=r.width*b,n=r.height*v;C.width=e,C.height=t,k.width=e,k.height=t,T.msImageSmoothingEnabled=!1,T.mozImageSmoothingEnabled=!1,T.webkitImageSmoothingEnabled=!1,T.imageSmoothingEnabled=!1,x.drawImage(r.cacheCanvas,0,0,o,n),T.drawImage(C,0,0,o,n,-s*r.scale,-s*r.scale,k.width+2*s*r.scaleX,k.height+2*s*r.scaleY)},this.update(),this.zimBitmap_constructor(k),i&&(this.dynamicTicker=Jo.Ticker.add(function(){y.update()})),Object.defineProperty(this,"amount",{get:function(){return t},set:function(e){t=e,b=Math.pow(Math.E,-t*m),g&&(v=Math.pow(Math.E,-t*m),o=t),y.update()}}),Object.defineProperty(this,"amountX",{get:function(){return t},set:function(e){t=e,g=!1,b=Math.pow(Math.E,-t*m),y.update()}}),Object.defineProperty(this,"amountY",{get:function(){return o},set:function(e){o=e,g=!1,v=Math.pow(Math.E,-o*m),y.update()}}),Object.defineProperty(this,"amountFactor",{get:function(){return c},set:function(e){c=e,m=Jo.constrain(10*c,0,10),b=Math.pow(Math.E,-t*m),v=Math.pow(Math.E,-o*m),y.update()}}),Object.defineProperty(this,"blur",{get:function(){return n},set:function(e){n=e,w=Math.pow(Math.E,-n*z),y.update()}}),Object.defineProperty(this,"blurFactor",{get:function(){return u},set:function(e){u=e,z=Jo.constrain(10*u,0,10),w=Math.pow(Math.E,-n*z),y.update()}}),Object.defineProperty(this,"dynamic",{get:function(){return i},set:function(e){i!=e&&((i=e)?y.dynamicTicker?y.dynamicTicker=Jo.Ticker.add(y.dynamicTicker):y.dynamicTicker=Jo.Ticker.add(y.update):y.dynamicTicker&&Jo.Ticker.remove(y.dynamicTicker))}}),!(this.dispose=function(){y.dynamicTicker&&Jo.Ticker.remove(y.dynamicTicker),this.zimBitmap_dispose()})!==d&&Jo.styleTransforms(this,e),this.clone=function(e){return y.cloneProps(new Jo.Pixel(e||!Jo.isPick(f[0])?r:f[0],e||!Jo.isPick(f[1])?t:f[1],e||!Jo.isPick(f[2])?o:f[2],e||!Jo.isPick(f[3])?n:f[3],i,e||!Jo.isPick(f[4])?l:f[4],a,s,e||!Jo.isPick(f[5])?c:f[5],e||!Jo.isPick(f[6])?u:f[6],d,this.group,h))}},Jo.extend(Jo.Pixel,Jo.Bitmap,["clone","dispose"],"zimBitmap",!1),Jo.Parallax=function(e,t,l,o,n,r,a){var i;if(i=zob(Jo.Parallax,arguments,"layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",this))return i;if(z_d("68"),this.type="Parallax",zot(o))if(e&&e[0]&&e[0].obj&&e[0].obj.stage)o=e[0].obj.stage;else{if(!WW.zdf)return;o=WW.zdf.stage}l=!!zot(l),zot(n)&&(n=!1),zot(r)&&(r=!1);var s=o.getBounds().width,c=o.getBounds().height;o.mouseMoveOutside=r;var u=this;u.stageEvent=o.on("stagemousemove",function(e){u.mouseX=e.rawX/Jo.scaX,u.mouseY=e.rawY/Jo.scaY});var d=zot(t)?.1:t;this.addLayer=function(e){if(!(zot(e.obj)||zot(e.prop)||zot(e.propChange))){var t={obj:e.obj,prop:e.prop};t[t.prop]=e.propChange,zot(e.input)&&(e.input="mouseX"),t.input=e.input,t.split=zot(e.split)?!("mouseX"!=e.input||!l):e.split;var o=zot(e.inMin)?0:e.inMin,n=zot(e.inMax)?"mouseX"==e.input||"scrollX"==e.input?s:c:e.inMax,r=zot(e.factor)?1:e.factor,i=!zot(e.integer)&&e.integer;return t["p_"+t.prop]=new Jo.ProportionDamp(o,n,0,t[t.prop],d,r,i,a),"scale"==t.prop?t["s_"+t.prop]=t.obj.scaleX:"frame"==t.prop?t["s_"+t.prop]=t.obj.currentFrame:t["s_"+t.prop]=t.obj[t.prop],zot(e.immediate)||t["p_"+t.prop].immediate(e.immediate),p.push(t),u}},this.removeLayer=function(e){if(!zot(e)){var t=p[e];return t["p_"+t.prop].dispose(),p.splice(e,1),u}},this.immediate=function(e){for(var t,o=0;o<p.length;o++)(t=p[o])["p_"+t.prop].immediate(e[o]);return u},this.dispose=function(){return o.off("stagemousemove",u.stageEvent),p=null,l&&Jo.Ticker.remove(h),!0},e=zot(e)?[]:e;for(var h,p=[],g=0;g<e.length;g++)this.addLayer(e[g]);l&&(h=Jo.Ticker.add(function(){u.step()},o),n&&Jo.Ticker.remove(h)),this.step=function(e){for(var t,o,n=0;n<p.length;n++)t=p[n],zot(e)?"mouseX"==t.input?o=u.mouseX:"mouseY"==t.input?o=u.mouseY:"scrollX"==t.input?o=Jo.scrollX():"scrollY"==t.input&&(o=Jo.scrollY()):o=e,"scale"==t.prop?t.obj.scaleX=t.obj.scaleY=t["s_"+t.prop]+t["p_"+t.prop].convert(o):"frame"==t.prop?t.obj.gotoAndStop(t["s_"+t.prop]+t["p_"+t.prop].convert(o)):(t.obj[t.prop]=t["s_"+t.prop]+t["p_"+t.prop].convert(o),t.split&&(t.obj[t.prop]-=t[t.prop]/2));return u},u.paused=n,u.pause=function(e){return zot(e)&&(e=!0),u.paused!=e&&(u.paused=e,h&&(e?Jo.Ticker.remove(h):h=Jo.Ticker.add(h))),u},Object.defineProperty(u,"damp",{get:function(){return d},set:function(e){var t;d=e;for(var o=0;o<p.length;o++)(t=p[o])["p_"+t.prop].damp=d}})},Jo.Flipper=function(o,n,e,l,a,t,s,r,i,c,u,d,h,p){if(g=zob(Jo.Flipper,arguments,"front, back, interactive, time, vertical, flipped, easeRoot, frontPress, backPress, reverse, continuous, style, group, inherit",this))return g;z_d("68.5"),this.group=h;var g=!1===d?{}:Jo.getStyle("Flipper",this.group,p);zot(o)&&(o=null!=g.front?g.front:WW.zdf.makeIcon().sca(2)),zot(n)&&(n=null!=g.back?g.back:new Jo.Page(o.width,o.height,Jo.dark)),this.front=o,this.back=n,t&&(f=o,o=n,n=f);var h=Math.max(o.width,n.width),f=Math.max(o.height,n.height);this.zimContainer_constructor(h,f),this.type="Flipper";f=$o(l);zot(l)&&(l=null!=g.time?g.time:"s"==f?.2:200),zot(a)&&(a=null!=g.vertical&&g.vertical),zot(e)&&(e=null!=g.interactive&&g.interactive),zot(t)&&(t=null!=g.flipped&&g.flipped),zot(s)&&(s=null!=g.easeRoot?g.easeRoot:"quad"),zot(r)&&(r=null==g.frontPress||g.frontPress),zot(i)&&(i=null==g.backPress||g.backPress),zot(c)&&(c=null!=g.reverse&&g.reverse),zot(u)&&(u=null!=g.continuous&&g.continuous),this.flipped=t;var m,z=this;function y(e,t,o,n){if(zot(o)&&(o=1),o*=c?-1:1,u&&(o=c?-1:1),zot(n)&&(n=l),z.flipped=!z.flipped,z.dispatchEvent("flip"),0==n)return z.removeAllChildren(),t.scale=t.oScale,t.skewX=t.skewY=0,t.centerReg(z),void z.dispatchEvent("flipped");var r,i;a?(r={skewX:-90*o,scaleY:e.oScale/2},i={skewX:0,scaleY:t.oScale},t.ske(90*o,0).sca(t.oScale,t.oScale/2)):(r={skewY:-90*o,scaleX:e.oScale/2},i={skewY:0,scaleX:t.oScale},t.ske(0,90*o).sca(t.oScale/2,t.oScale)),e.animate({props:r,time:l,ease:s+"In",call:function(){e.removeFrom(),t.centerReg(z).animate({props:i,time:l,ease:s+"Out",call:function(){z.dispatchEvent("flipped")}})}})}o.centerReg(this),(r&&!t||i&&t)&&((m=e&&o.backing?o.backing:o).on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){y(o,n)}),m.cur()),(i&&!t||r&&t)&&((m=e&&n.backing?n.backing:n).on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){y(n,o,-1)}),m.cur()),o.oScale=o.scale,n.oScale=n.scale,o.flipper=z,(o.other=n).flipper=z,n.other=o,e||(o.mouseChildren=n.mouseChildren=!1),this.flip=function(e,t){e!=z.flipped&&(z.flipped?y(n,o,-1,t):y(o,n,1,t))},t&&(z.flipped=!1,z.flip(!0,0)),!1!==d&&Jo.styleTransforms(this,g),this.clone=function(){return z.cloneProps(new Jo.Flipper(o.clone(),n.clone(),e,l,a,t,s,r,i,c,u,d,this.group,p))}},Jo.extend(Jo.Flipper,Jo.Container,"clone","zimContainer"),Jo.Book=function(m,z,y,n,b,v,w,C,e){var t;if(t=zob(Jo.Book,arguments,"width, height, pages, startPage, rollUp, radius, backgroundColor, arrows, handleHTML",this))return t;z_d("68.7"),zot(m)&&(m=WW.zdf?WW.zdf.stage.width:1024),zot(z)&&(z=WW.zdf?WW.zdf.stage.height:768),this.zimContainer_constructor(m,z),this.type="Book",zot(y)&&(y=[]),zot(n)&&(n=0),zot(b)&&(b=!0),zot(w)&&(w=Jo.darker),zot(C)&&(C=!0),zot(e)&&(e=!0),this.handleHTML=e;var x,k,o,T=$o(),A=this;function r(e){if(!zot(e)&&e.addChild)for(e.removedHTML=!1,o=0;o<e.zimHTMLList.length;o++)e.addChildAt(e.zimHTMLList.values[o].obj,e.zimHTMLList.values[o].depth)}function i(e){if(!e.removedHTML&&e.addChild){var t,o,n;for(e.removedHTML=!0,e.zimHTMLList.clear(),t=0;t<e.numChildren;t++)"TextArea"!=(n=e.getChildAt(t)).type&&"Loader"!=n.type&&"Tag"!=n.type||(o={obj:n,depth:e.getChildIndex(n)},e.zimHTMLList.add(n,o));for(t=e.numChildren-1;0<=t;t--)"TextArea"!=(n=e.getChildAt(t)).type&&"Loader"!=n.type&&"Tag"!=n.type||e.removeChild(n)}}function P(){A.handleHTML&&(A.pages[A.page]&&r(A.pages[A.page]),A.pages[A.page-1]&&r(A.pages[A.page-1]))}function E(){A.handleHTML&&(A.pages[A.page]&&i(A.pages[A.page]),A.pages[A.page-1]&&i(A.pages[A.page-1]))}0!=y.length&&(A.backing=new Jo.Rectangle(m-2,z-2,w),Jo.loop(y,function(e,t){"string"==typeof e&&(y[t]=Jo.asset(e)),y[t].zimBookIndex=t,(e=e).addChild&&(e.zimHTMLList=new Jo.Dictionary,A.handleHTML&&i(e))}),A.added(function(e){k=(x=e).frame;var l,a,s,c,u,d,t,r=A.peel=new Jo.Shape;function i(e){A._currentPage=e,A.removeAllChildren(),A.backing.loc(1,1,A),A.setMask(A.backing),r.addTo(A),r.c().f(Jo.black).dr(0,0,0,0),A.moving=!1,y[e-1]?l=y[e-1].reg(0,0).rot(0).loc(0,0,A).setMask(null):0<e&&t.reg(0,0).rot(0).loc(0,0,A).setMask(null),a=(y[e-2]||new Jo.Rectangle(m/2,z,w)).reg(m/2,z).loc(0,z,A).rot(-90).setMask(null),s=(y[e-3]||new Jo.Rectangle(m/2,z,w)).reg(0,0).rot(0).loc(0,0,A).setMask(r),y[e]?(c=y[e].rot(0).reg(0,0).pos(0,0,Jo.RIGHT,Jo.TOP,A).setMask(null),y[e+1]?u=A.backNext=y[e+1].reg(0,z).loc(m,z,A).rot(90).setMask(null):(u=A.backNext=new Jo.Rectangle(m/2,z,w).reg(0,z).loc(m,z,A).rot(90).setMask(null),t=u),d=y[e+2]?A.backPrev=y[e+2].reg(0,0).rot(0).pos(0,0,Jo.RIGHT,Jo.TOP,A).setMask(r):A.backPrev=new Jo.Rectangle(m/2,z,w).reg(0,0).rot(0).pos(0,0,Jo.RIGHT,Jo.TOP,A).setMask(r)):x.update()}A._currentPage=n,i(n),Object.defineProperty(A,"directPage",{get:function(){return A._currentPage},set:function(e){E(),e=n%2==1?2*Math.floor(e/2)+1:2*Math.ceil(e/2),e=Jo.constrain(e,0,A.pages.length-1),A.currentW=0,A.currentH=0,A.lastPage=Jo.constrain(A._currentPage),e!=A.page&&(e>A.page?(A.direction="right",A.pageNext=d.zimBookIndex,u.reg(0,0),d.setMask(null)):(A.direction="left",A.pageNext=a.zimBookIndex,a.reg(0,0),s.setMask(null)),i(e),A.moving=!1,h=!1,A.currentW=0,A.currentH=0,P())}});var h=!1;function o(){A.stageEvent=x.on("stagemousedown",function(){var t,o,e,n;A.hitTestPoint(k.mouseX,k.mouseY)&&(A.moving||((e=A.globalToLocal(k.mouseX,k.mouseY)).x<0||e.x>m||e.y<0||e.y>z||0<v&&Jo.dist(e,new Jo.Point(0,z))>v&&Jo.dist(e,new Jo.Point(m,z))>v||("right"==(n=e.x>m/2?"right":"left")&&A._currentPage>=y.length-1||"left"==n&&A._currentPage<=1||(A.moving=!0,"right"==n?(c.addTo(A),u.addTo(A),d.addTo(A),A.pageNext=d.zimBookIndex):(l.addTo(A),a.addTo(A),s.addTo(A),A.rolledUp&&f(0,0,"right"),A.pageNext=a.zimBookIndex),E(),A.direction=n,A.dispatchEvent("rollpress"),A.moveEvent=x.on("stagemousemove",function(){p&&(p.clear(),p=null);var e=A.globalToLocal(k.mouseX,k.mouseY);t="right"==n?m-e.x:e.x,o=z-e.y+t,A.currentW=t=Jo.constrain(t,0,m/2),A.currentH=o=Jo.constrain(o,0,z),f(t,o,n)}),A.upEvent=x.on("stagemouseup",function(){x.off("stagemousemove",A.moveEvent),h||g(0,0,n)},null,!0)))))})}{var p;A.currentW=0,A.currentH=0,A.moving=!1,o(),!(A.rollUp=function(e,t,o,n,r){var i;A.moving||"right"==o&&A._currentPage>=y.length-1||"left"==o&&A._currentPage<=1||("right"==o?(c.addTo(A),u.addTo(A),d.addTo(A)):(A.rolledUp&&f(0,0,"right"),l.addTo(A),a.addTo(A),s.addTo(A)),A.moving=!0,zot(n)&&(n="s"==T?.5:5e-4),zot(r)&&(r=null),A.animate({props:{currentW:e,currentH:t},time:n,ease:r,call:function(){Jo.Ticker.remove(i),A.moving=!1,f(e,t,o)}}),i=Jo.Ticker.add(function(){f(A.currentW,A.currentH,o)}))})!==b&&((A.rolledUp=!0)===b&&(b="s"==T?1:.001),p=Jo.timeout(b,function(){A.rollUp(60,130,"right",.5),A.dispatchEvent("rollup")}))}function g(e,t,o,n){A.moving=!0,A.rolledUp=!1,zot(n)&&(n="s"==T?.7:7e-4),A.animate({props:{currentW:0,currentH:0},time:n,call:function(){Jo.Ticker.remove(r),f(0,0,o),A.moving=!1,P(),A.dispatchEvent("rolldown")}});var r=Jo.Ticker.add(function(){f(A.currentW,A.currentH,o)})}function f(e,t,o){var n;"right"==o?(r.c().mt(m,z).lt(m-e,z).lt(m,z-t).cp(),n=Math.atan2(e,t),u.loc(m-(e+e*Math.cos(2*n)),z-e*Math.sin(2*n)).rot(2*n*Jo.DEG),!h&&m/2<=e&&z<=t&&function(){E(),h=!0,A.moving=!0,A.moveEvent&&x.off("stagemousemove",A.moveEvent),A.upEvent&&x.off("stagemouseup",A.upEvent),A.currentW=0,A.currentH=0,A.lastPage=Jo.constrain(A._currentPage),A.direction="right",A.pageNext=d.zimBookIndex,A.dispatchEvent("pageanimate"),A.animate({ease:"quadOut",props:{currentW:m/2},time:.3,timeUnit:"s",call:function(){Jo.Ticker.remove(e),u.reg(0,0),d.setMask(null),i(A._currentPage+2),A.moving=!1,h=!1,A.currentW=0,A.currentH=0,P(),A.dispatchEvent("page")}});var e=Jo.Ticker.add(function(){r.c().mt(m,z).lt(m/2,z).lt(m-A.currentW,0).lt(m,0).cp()});u.reg(m/2,z).loc(m/2,z,A).animate({props:{rotation:0},time:.3,ease:"quadOut",timeUnit:"s"})}()):(r.c().mt(0,z).lt(e,z).lt(0,z-t).cp(),n=Math.atan2(e,t),a.loc(e+e*Math.cos(2*n),z-e*Math.sin(2*n)).rot(2*-n*Jo.DEG),!h&&m/2<=e&&z<=t&&function(){E(),h=!0,A.moving=!0,A.moveEvent&&x.off("stagemousemove",A.moveEvent),A.upEvent&&x.off("stagemouseup",A.upEvent),A.currentW=0,A.currentH=0,A.lastPage=Jo.constrain(A._currentPage),A.direction="left",A.pageNext=a.zimBookIndex,A.dispatchEvent("pageanimate"),A.animate({ease:"quadOut",props:{currentW:m/2},time:.3,timeUnit:"s",call:function(){Jo.Ticker.remove(e),a.reg(0,0),s.setMask(null),i(A._currentPage-2),A.moving=!1,h=!1,A.currentW=0,A.currentH=0,P(),A.dispatchEvent("page")}});var e=Jo.Ticker.add(function(){r.c().mt(0,z).lt(m/2,z).lt(A.currentW,0).lt(0,0).cp()});a.reg(0,z).loc(m/2,z,A).animate({props:{rotation:0},time:.3,timeUnit:"s",ease:"quadOut"})}()),x.update()}A.rollDown=function(e,t,o,n){A.moving||"right"==o&&A._currentPage>=y.length-1||"left"==o&&A._currentPage<=1||g(0,0,o,n)},C&&(!0===C&&(C=.2),A.keydown=k.on("keydown",function(e){39==e.keyCode?A.nextPage(C):37==e.keyCode&&A.prevPage(C)}));A.changeFrame=function(e){return A.stageEvent&&x.off("stagemousedown",A.stageEvent),A.moveEvent&&x.off("stagemousemove",A.moveEvent),A.upEvent&&x.off("stagemouseup",A.upEvent),x=(k=e).stage,o(),A},P()}),A.nextPage=function(e){if(zot(A.rollUp))return setTimeout(function(){A.nextPage(e)},10),A;A.moving||A.rollUp(m/2+.1,z+.1,"right",e,"quadIn")},A.prevPage=function(e){if(zot(A.rollUp))return setTimeout(function(){A.prevPage(e)},10),A;A.moving||A.rollUp(m/2+.1,z+.1,"left",e,"quadIn")},A.gotoPage=function(o,n){if(zot(A.rollUp))return setTimeout(function(){A.gotoPage(o,n)},10),A;o=Jo.constrain(o,0,A.pages.length-1),zot(n)&&(n="s"==T?.3:300);var r=n+("s"==T?.35:350);A.pageInterval=Jo.interval(r,function(e){var t=!1;A._currentPage<o?A.nextPage(n):A._currentPage>o?A.prevPage(n):t=!0,A.dispatchEvent("pageturn"),e.count==e.total-1&&(t?(P(),A.dispatchEvent("pagedone")):Jo.timeout(r,function(){P(),A.dispatchEvent("pagedone")}))},Math.floor(Math.abs(o-A._currentPage)/2+1),!0)},Object.defineProperty(A,"page",{get:function(){return A._currentPage},set:function(e){A.gotoPage(e,"s"==T?.1:100)}}),Object.defineProperty(A,"pages",{get:function(){return y},set:function(){zon&&zogy("Book() - pages is read only")}}),this.dispose=function(e,t,o){return A.stageEvent&&x.off("stagemousedown",A.stageEvent),A.moveEvent&&x.off("stagemousemove",A.moveEvent),A.upEvent&&x.off("stagemouseup",A.upEvent),A.keydown&&k.off("keydown",A.keydown),A.removeFrom(),o||this.zimContainer_dispose(!0),!0})},Jo.extend(Jo.Book,Jo.Container,["clone","dispose"],"zimContainer"),Jo.Scrambler=function(a,r,i,e,t,o,n,l,s,c,u,d,h,p){var g;if(g=zob(Jo.Scrambler,arguments,"tile, keys, keyProperty, scramble, time, wait, num, shadowColor, shadowBlur, swap, swapLock, style, group, inherit",this))return g;z_d("67.35"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Scrambler",this.group=h;h=!1===d?{}:Jo.getStyle(this.type,this.group,p);zot(a)&&(a=null!=h.tile?h.tile:a),zot(r)&&(r=null!=h.keys?h.keys:null),zot(i)&&(i=null!=h.keyProperty?h.keyProperty:null),zot(e)&&(e=null==h.scramble||h.scramble),zot(t)&&(t=null!=h.time?h.time:0),zot(o)&&(o=null!=h.wait?h.wait:0),zot(n)&&(n=null!=h.num?h.num:1),zot(l)&&(l=null!=h.shadowColor?h.shadowColor:"rgba(0,0,0,.3)"),zot(s)&&(s=null!=h.shadowBlur?h.shadowBlur:5),zot(c)&&(c=null!=h.swap&&h.swap),zot(u)&&(u=null!=h.swapLock&&h.swapLock),u&&(c=!0),zot(a)&&(a=new Jo.Tile(new Jo.Rectangle(100,100,Jo.series(Jo.silver,Jo.tin,Jo.grey,Jo.dark,Jo.darker)),5,1,5)),a.addTo(this);var f=this;f.tile=a,f.complete=!0;var m=$o(t);$o(o);var z,y,b,v=(a.width+a.spacingH)/a.cols,w=(a.height+a.spacingV)/a.rows,C=WW.zdf,x=Jo.makeID(null,10),k=!1,T=!1;function A(e){var n=e.target;n.stopAnimate();var e=n.boundsToGlobal(),r=a.hitTestGrid(a.width,a.height,a.cols,a.rows,e.x+e.width/2,e.y+e.height/2,null,null,a.spacingH,a.spacingV,null,"open");zot(r)||Jo.loop(a,function(e){var t,o;e!=n&&!1!==e.paused&&(t=e.boundsToGlobal(),zot(t=a.hitTestGrid(a.width,a.height,a.cols,a.rows,t.x+t.width/2,t.y+t.height/2,null,null,a.spacingH,a.spacingV,null,"open"))||(r[2]==t[2]&&(e.x>=n.x&&e.x<=n.x+v/2||e.x<=n.x&&e.x>=n.x-v/2)&&(o=e.x,e.top().ord(-1),e.animate({props:{x:z},time:.2,id:x,timeUnit:"seconds",call:function(){T||(e.dragPaused=!1),c&&!f.complete&&f.test()&&(f.complete=!0,f.dispatchEvent("complete"))}}),z=o),r[1]==t[1]&&(e.y>=n.y&&e.y<=n.y+w/2||e.y<=n.y&&e.y>=n.y-w/2)&&(o=e.y,e.top().ord(-1),e.animate({props:{y:y},time:.201,override:!1,id:x,timeUnit:"seconds",call:function(){T||(e.dragPaused=!1),c&&!f.complete&&f.test()&&(f.complete=!0,f.dispatchEvent("complete"))}}),y=o)))},!0)}function P(){a.loop(function(e){e.locked||e.animating||(e.dragPaused=!1)})}a.pointers={},a.on("mousedown",function(e){if(!T){var t;T=!0,t=e.target,a.loop(function(e){e!=t&&(e.dragPaused=!0)}),f.myDownCheck=!0,b=e.target;var o="id"+Math.abs(e.pointerID+1);if(a.pointers[o]=!0,z=e.target.x,y=e.target.y,u){var r=a.current;if(f.testItem(e.target,r.indexOf(e.target)))return e.target.noMouse(),e.target.noDrag(),e.target.locked=!0,f.myDownCheck=T=!1,void P()}-1!=l&&0<s&&(o=new createjs.Shadow(l,3,3,s),e.target.backing?e.target.backing.shadow=o:e.target.shadow=o),C&&(f.scrmu||(f.scrmu=C.on("mouseupplusonly",function(e){var t;f.myDownCheck&&(f.myDownCheck=!1,(t=Jo.loop(a.pointers,function(e,t){return t}))||(a.pointers.id0=!0),n(e={target:b,pointerID:e.pointerID?t:-1}))}))),f.upEvent&&a.off("pressup",f.upEvent),f.upEvent=a.on("pressup",function(e){var t="id"+Math.abs(e.pointerID+1);a.pointers[t]&&n(e)}),c||(f.moveEvent&&a.off("pressmove",f.moveEvent),f.moveEvent=a.on("pressmove",function(e){A(e)}))}function n(e){var t,o,n="id"+Math.abs(e.pointerID+1);a.pointers[n]&&(delete a.pointers[n],o=!0,f.moveEvent&&a.off("pressmove",f.moveEvent),u&&(t=e.target.boundsToGlobal(),o=!zot(n=a.hitTestGrid(a.width,a.height,a.cols,a.rows,t.x+t.width/2,t.y+t.height/2,null,null,a.spacingH,a.spacingV,null,"open"))&&(t=r[n[0]],e.target!=t&&!f.testItem(t,n[0]))),c&&o&&A(e),e.target.dragPaused=!0,e.target.animate({props:{x:z,y:y},time:.1,id:x,timeUnit:"seconds",pauseOnBlur:!1,call:i,params:e}))}function i(e){!f.complete&&f.test()&&(f.complete=!0,f.dispatchEvent("complete")),-1!=l&&0<s&&(e.target.backing?e.target.backing.shadow=null:e.target.shadow=null),f.mySownCheck=T=!1,P(),e.target.dragPaused=!1}}),this.test=function(){var e=a.current;return Jo.loop(e,function(e,t){return!zot(e)&&(!!f.testItem(e,t)&&void 0)})},this.testItem=function(e,t){if(!zot(e)){if(zot(t)&&(t=a.current.indexOf(e)),r){if((zot(i)?e.key:e[i])!=r[t])return!1}else if(a.items[t]!=e)return!1;return!0}},this.update=function(){return a.noDrag(),a.drag({boundary:a,singleTouch:!0}),this},this.starts=[];var E=[];Jo.loop(a.rows*a.cols,function(e){E.push(e)});var S=E.slice();function B(e,t){f.upEvent&&a.off("pressup",f.upEvent),f.moveEvent&&a.off("pressmove",f.moveEvent),a.noDrag(),0<t+e&&f.noMouse()}function W(r,i,l){Jo.stopAnimate(x),Jo.loop(a.items,function(e,t,o){var n=f.starts[r[t]];i?e.animate({props:{x:n.x,y:n.y},time:i,ease:l?"quadInOut":"quadOut",wait:l,timeUnit:"seconds",id:x}):(e.loc(n),f.stage?e.drag({boundary:a,singleTouch:!0}):t==o-1&&f.added(function(){a.drag({boundary:a,singleTouch:!0})}))})}a.loop(function(e){e.mouseChildren=!1,f.starts.push({x:e.x,y:e.y})}),this.inactive=!1,this.scramble=function(o,e,n){return k||(k=!0,f.myDownCheck=!1,zot(e)&&(e=0),zot(o)&&(o=0),!zot(n)&&0!=o||(n=1),B(o,e),0==o?t():Jo.timeout(e,function(){0<o?Jo.interval(o/n,t,n,!0):t()}),setTimeout(function(){f.complete=!1,a.loop(function(e){e.mouse(),e.locked=!1}),f.mouse(),a.drag({boundary:a,singleTouch:!0}),T=!1},"s"==m?1e3*(e+o):e+o)),f;function t(){for(var e=!0,t=0;e&&t<50;)t++,Jo.shuffle(E),e=Jo.loop(E,function(e,t){e=a.getChildAt(e);if(r){if((zot(i)?e.key:e[i])!=r[t])return!1}else if(a.items[t]!=e)return!1});W(E,o/n),Jo.timeout(o+.1,function(){f.dispatchEvent("scrambled"),k=!1})}},e?f.scramble(t,o,n):f.added(function(){a.drag({boundary:a,singleTouch:!0})}),this.solve=function(e,t,o){zot(o)&&(o=!0),zot(t)&&(t=0),zot(e)&&(e=0),t+e==0&&o&&f.noMouse(),setTimeout(function(){E=S.slice(),B(e,t),W(E,e,0)},"s"==m?1e3*t:t),o||setTimeout(function(){f.mouse(),a.drag({boundary:a,singleTouch:!0})},"s"==m?1e3*(t+e):t+e)},this._enabled=!0,Object.defineProperty(f,"enabled",{get:function(){return f._enabled},set:function(e){zt(f,e),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!f.stage||f.stage.update()}}),Object.defineProperty(f,"order",{get:function(){var t=[];return Jo.loop(a.current,function(e){return!!e&&void t.push(e.tileNum)})&&t.length==E.length?E=t:E},set:function(e){var t=[];Jo.loop(e,function(e){t.push(a.items[e])}),a.remake(t),a.stage&&a.stage.update()}}),!(this.dispose=function(e,t,o){return f.scrmu&&C.off("mouseupplus",f.scrmu),a.removeAllEventListeners(),o||(f.zimContainer_dispose(!0),f.stage&&f.stage.update()),!0})!==d&&Jo.styleTransforms(this,h),this.clone=function(){return f.cloneProps(new Jo.Scrambler(a.clone(),r,i,e,t,o,n,l,s,c,u,d,f.group,p))}},Jo.extend(Jo.Scrambler,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Scroller=function(e,t,o,n,r,i,l,a,s,c,u){var d;if(d=zob(Jo.Scroller,arguments,"backing, speed, direction, horizontal, gapFix, stage, container, backing2, style, group, inherit",this))return d;z_d("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=c;var h,p,g,f,m,z,y,b,v,w,u=!1===s?{}:Jo.getStyle(this.type,this.group,u);zot(e)&&(e=null!=u.backing?u.backing:null),zot(e)||!zot(h=this.backing1=e)&&h.getBounds&&(p=zot(a)?this.backing2=e.clone(!0):a,zot(n)&&(n=null==u.horizontal||u.horizontal),zot(r)&&(r=null!=u.gapFix?u.gapFix:0),zot(l)&&(l=null!=u.container?u.container:null),zot(i)&&(i=null!=u.stage?u.stage:null),g=this,zot(t)&&(t=null!=u.speed?u.speed:1),this.speed=t,f=this.baseSpeed=this.speed,zot(o)&&(o=null!=u.direction?u.direction:1),this.direction=o,o=n?h.scaleX:h.scaleY,"AC"!=h.type?h.getBounds()?i||h.stage?h.parent?(h.parent.addChildAt(p,h.parent.getChildIndex(h)),i=i||h.stage,zot(l)&&(l=i),l.getBounds()?(m=h.getBounds().width*o-r,z=h.getBounds().height*o-r,n?p.x=m:p.y=z,v=!1,w=Jo.Ticker.add(function(){y||(y=l.getBounds().width,b=l.getBounds().height);if(0==g.speed||0==g.direction)return;n?(h.x-=g.speed*g.direction,h.x<p.x?p.x=h.x+m:p.x=h.x-m,0<g.direction*g.speed?p.x<0&&h.x<p.x?h.x=p.x+m:h.x<0&&p.x<h.x&&(p.x=h.x+m):p.x>y&&p.x>h.x?p.x=h.x-m:h.x>y&&h.x>p.x&&(h.x=p.x-m)):(h.y-=g.speed*g.direction,h.y<p.y?p.y=h.y+z:p.y=h.y-z,0<g.direction*g.speed?p.y<0&&h.y<p.y?h.y=p.y+z:h.y<0&&p.y<h.y&&(p.y=h.y+z):p.y>b&&p.y>h.y?p.y=h.y-z:h.y>b&&h.y>p.y&&(h.y=p.y-z))},i),this.paused=!1,this.pause=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=0),e?(f=g.speed,0<t?(v=!0,Jo.animate({target:g,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){g.speed=0,g.paused=!0,v=!1,g.dispatchEvent("pause")}})):(v=!1,g.speed=0,g.paused=!0,setTimeout(function(){g.dispatchEvent("pause")},10))):(v=!1,0<t?Jo.animate({target:g,obj:{pausingSpeed:f},ticker:!1,time:t,call:function(){g.speed=f,g.paused=!1,v=!1}}):(g.speed=f,g.paused=!1)),g},Object.defineProperty(g,"percentSpeed",{get:function(){return 0==g.baseSpeed?NaN:g.speed/g.baseSpeed*100},set:function(e){v||g.paused||(g.speed=g.baseSpeed*e/100)}}),Object.defineProperty(g,"pausingSpeed",{get:function(){return 0==g.baseSpeed?NaN:g.speed/g.baseSpeed*100},set:function(e){g.speed=g.baseSpeed*e/100}}),Object.defineProperty(g,"percentComplete",{get:function(){return n?h.x<0&&h.x>p.x?-h.x/h.width*100:(-p.x/p.width*100+1e9)%100:h.y<0&&h.y>p.y?-h.y/h.height*100:(-p.y/p.height*100+1e9)%100},set:function(e){e=(e+1e9)%100,n?(h.x=-e*h.width/100,p.x=h.x+m):(h.y=-e*h.height/100,p.y=h.y+z)}}),!1!==s&&Jo.styleTransforms(this,u),this.dispose=function(){return Jo.Ticker.remove(w),!0}):zogy("zim display - Scroller(): please setBounds() on container or stage if no container")):zogy("ZIM Scroller(): please add object to container or stage before adding to Scroller"):zogy("ZIM Scroller(): please pass in stage parameter or add backing objects to stage to start"):zogy("ZIM Scroller(): please setBounds() on backing objects"):zogy("ZIM Scroller(): please provide Pic() with dimensions for backing objects"))},Jo.extend(Jo.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),Jo.Dynamo=function(n,e,t,o,r,i,l,a,s,c,u,d){var h;if(h=zob(Jo.Dynamo,arguments,"sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",this))return h;z_d("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=u;var p,g,f,m,z,y,b,v,w,C,x,d=!1===c?{}:Jo.getStyle(this.type,this.group,d);zot(n)&&(n=null!=d.sprite?d.sprite:null),zot(n)||0!=(p=this.frames=n.parseFrames(t,o,r,!0)).length&&(this.totalFrames=p.length,null==o&&(n.frame=0),g=0,zot(e)&&(e=null!=d.speed?d.speed:30),zot(l)&&(l=null==d.reversible||d.reversible),f=this.baseSpeed=this.speed=e,zot(i)&&(i=null!=d.update&&d.update),zot(a)&&(a=null!=d.flip?d.flip:null),zot(a)&&0==l&&(a=!0),m=this,b=Date.now(),x=!1,m.scaleX=n.scaleX,m.scaleY=n.scaleY,function e(){var t,o;z=requestAnimationFrame(e),y=p[g].s,0!=m.speed&&0!=y&&(w=1e3/Math.abs(m.speed)*y,v=Date.now(),w<v-b&&(b=v,o=!1,(t=m.frame+(0<m.speed||!l?1:-1))>=p.length&&(o=!0,t=0),t<0&&(o=!0,t=p.length-1),m.frame=t,a&&(m.speed<0?n.scaleX=-m.scaleX:n.scaleX=m.scaleX),s&&(m.speed<0?n.scaleY=-m.scaleY:n.scaleY=m.scaleY),o&&m.dispatchEvent("loop"),m.dispatchEvent("change"),i&&n.stage&&n.stage.update(),zot(C)||C!=m.frame||(x=!1,m.speed=0,m.paused=!0,m.dispatchEvent("pause"))))}(),this.paused=!1,this.pause=function(e,t,o){if(zot(e)&&(e=!0),e!=m.paused)return zot(t)&&(t=0),e?(f=m.speed,void 0===o?0<t?(x=!0,Jo.animate({target:m,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){x=!1,m.speed=0,m.paused=!0,m.dispatchEvent("pause")}})):(x=!1,m.speed=0,m.paused=!0,setTimeout(function(){m.dispatchEvent("pause")},10)):(x=!0,C=o)):(C=null,0<t?(x=!0,Jo.animate({target:m,obj:{pausingSpeed:f},ticker:!1,time:t,call:function(){x=!1,m.speed=f,m.paused=!1}})):(x=!1,m.speed=f,m.paused=!1)),m},Object.defineProperty(m,"frame",{get:function(){return g},set:function(e){g=Math.round(e)%p.length;e=p[g];zot(e)||(n.frame=e.f)}}),Object.defineProperty(m,"percentSpeed",{get:function(){return 0==m.baseSpeed?NaN:x||m.paused?f/m.baseSpeed*100:m.speed/m.baseSpeed*100},set:function(e){x||m.paused?f=m.baseSpeed*e/100:m.speed=m.baseSpeed*e/100}}),Object.defineProperty(m,"pausingSpeed",{get:function(){return 0==m.baseSpeed?NaN:m.speed/m.baseSpeed*100},set:function(e){m.speed=m.baseSpeed*e/100}}),!1!==c&&Jo.styleTransforms(this,d),this.dispose=function(){cancelAnimationFrame(z)})},Jo.extend(Jo.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),Jo.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var a=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){for(var t=Array.isArray(e)?e:[e],o=0;o<t.length;o++)a.items.indexOf(t[o])<0&&a.items.push(t[o]);return a},e&&this.add(e),this.remove=function(e){for(var t,o=Array.isArray(e)?e:[e],n=0;n<o.length;n++)0<=(t=a.items.indexOf(o[n]))&&a.items.splice(t,1);return a},this.pause=function(t,e,o){if(zot(t)&&(t=!0),t!=a.paused){var n=[];if(t){zot(o)||(e=null);for(var r=!1,i=0;i<a.items.length;i++)(zot(e)||!zot(o)||a.items[i].totalFrames)&&(!a.items[i].totalFrames||zot(e)&&zot(o))||(a.items[i].pause(!0,e,o),r=!0,n[i]=1,a.items[i].on("pause",function(){a.paused||(l(),a.paused=!0,a.dispatchEvent("pause"))},null,!0));r||(l(),a.paused=!0,setTimeout(function(){a.dispatchEvent("pause")},10))}else a.paused=!1,l()}function l(){for(var e=0;e<a.items.length;e++)1!=n[e]&&a.items[e].pause(t)}},Object.defineProperty(a,"percentSpeed",{get:function(){return a._percentSpeed},set:function(e){a._percentSpeed=e;for(var t=0;t<a.items.length;t++)a.items[t].percentSpeed=e}}),this.dispose=function(){for(var e=0;e<a.items.length;e++)a.items[e].dispose();return!(a.items=null)}},Jo.extend(Jo.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),Jo.Emitter=function(h,p,g,l,e,s,t,o,n,r,i,a,c,u,d,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j){var L;if(L=zob(Jo.Emitter,arguments,"obj, width, height, interval, num, life, fade, shrink, warm, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, focusWarm, style, group, inherit",this))return L;z_d("69.9"),this.type="Emitter",this.group=O;O=!1===M?{}:Jo.getStyle(this.type,this.group,j);zot(h)&&(h=null!=O.obj?O.obj:[new Jo.Circle(20,Jo.pink),new Jo.Circle(20,Jo.green),new Jo.Circle(20,Jo.blue)]),zot(p)&&(p=null!=O.width?O.width:300),zot(g)&&(g=null!=O.height?O.height:300);var D=$o(l);zot(l)&&(l=null!=O.interval?O.interval:"s"==D?.02:20),"number"==typeof l&&(l=Math.max("s"==D?.01:10,l)),zot(e)&&(e=null!=O.num?O.num:1),zot(a)&&(a=null!=O.trace&&a.size),zot(u)&&(u=null!=O.traceShiftX?O.traceShiftX:0),zot(d)&&(d=null!=O.traceShiftY?O.traceShiftY:0),en(s,D),zot(s)&&(s=null!=O.life?O.life:"s"==D?1:1e3),zot(t)&&(t=null==O.fade||O.fade),zot(o)&&(o=null!=O.shrink?O.shrink:!a),zot(n)&&(n=null!=O.warm?O.warm:null),en(r,D),zot(r)&&(r=null!=O.decayTime?O.decayTime:"s"==D?1:1e3),zot(c)&&(c=null!=O.traceFadeTime?O.traceFadeTime:r),zot(f)&&(f=null!=O.angle?O.angle:{min:0,max:360}),zot(m)&&(m=null!=O.force?O.force:5),zot(z)&&(z=null!=O.gravity?O.gravity:9.8),zot(y)&&(y=null!=O.wind?O.wind:0),zot(b)&&(b=null!=O.layers?O.layers:"top"),zot(p)&&(p=null!=O.width?O.width:100),zot(g)&&(g=null!=O.height?O.height:100),zot(C)&&(C=null!=O.horizontal&&O.horizontal),zot(x)&&(x=null!=O.vertical&&O.vertical),zot(k)&&(k=null!=O.sink?O.sink:null),!zot(k)&&zot(T)&&(T=null!=O.sinkForce?O.sinkForce:10),zot(P)&&(P=null!=O.events&&O.events),zot(E)&&(E=null!=O.startPaused&&O.startPaused),zot(S)&&(S=null==O.pool||O.pool),zot(B)&&(B=null!=O.poolMin?O.poolMin:0),zot(W)&&(W=null!=O.particles?O.particles:new Jo.Container),zot(I)&&(I=null==O.focusWarm||O.focusWarm),"shape"==h.type&&(I=!1),W.type="Particles",(W.emitter=this).zimContainer_constructor(p,g,null,null,!1),this.type="Emitter";var _=this;this.regX=p/2,this.regY=g/2,_.obj=h,_.particles=W,_.interval=l,_.num=e,_.life=s,_.fade=t,_.shrink=o,_.decayTime=r,_.decayStart=i,_.trace=a,_.traceFadeTime=c,_.traceShiftX=u,_.traceShiftY=d,_.angle=f,_.emitterForce=m,_.gravity=z,_.wind=y,_.layers=b,_.animation=v,_.random=w,_.horizontal=C,_.vertical=x,_.sink=k,_.sinkForce=T,_.events=P,_.startEmitterPaused=_.emitterPaused=E,_.pool=S,_.poolMin=B,_.particlesEmitted=0;var R,Y,X=[],N=0,F=0;function H(e){if(_.events&&V("fizzed",e),(e.trace?e.getChildAt(0):e).endSpurt&&(V("spurtfizzed",e),_.spurting=!1),_.pool&&"end"!=e.pooled)return e.pooled||(e.pooled=!0,X&&X.push(e)),void(e.visible=!1);_.removeChild(e),_.trace&&e.uncache(),e=null}function V(e,t){zot(t)||((e=new createjs.Event(e)).particle=t.trace?t.getChildAt(0):t,_.dispatchEvent(e))}function G(e){_.pauseEmitter(),_.spurtCount=_.spurtNum=null,zot(e)||(V("spurted",e),e.endSpurt=!0)}Jo.added(_,function(e){_.emitterPaused=null,_.on("added",function(){Jo.loop(_.particles,function(e){e.visible=!1}),_.particles.addTo(_.parent)}),Y=e,zot(A)&&(A=!Y.isWebGL&&Jo.mobile());A&&(Y.snapToPixelEnabled=!0);{function r(){var c,u,d=Jo.isPick(_.life)?Jo.Pick.getMinMax(_.life).max:_.life;function e(e,t){return e-t}zot(d)&&(d="s"==D?1:1e3),_.startEmitterPaused?_.pauseEmitter():(h=Array.isArray(_.obj)?_.obj:[_.obj]).length<=0||(c=Array.isArray(_.interval)?(_.interval.sort(e),_.interval[0]):_.interval.constructor=={}.constructor?_.interval.min:_.interval,u=Array.isArray(_.num)?(_.num.sort(e),_.num[_.num.length-1]):_.num.constructor=={}.constructor?_.num.max:_.num,Jo.loop(Jo.Pick.choose(_.num),function(){var o,n;0<_.decayTime&&(e={},_.shrink&&(e.scale=0),_.fade&&(e.alpha=0)),_.pool&&0<X.length&&F>=Math.max(_.poolMin,d/c*u+15)?((o=X[N++%X.length]).visible=!0,(n=o.trace?o.getChildAt(0):o).emitShape&&(t=n.template,n.graphics.c().s(t.s?Jo.Pick.choose(t.s):null).ss(t.ss?Jo.Pick.choose(t.ss):null).sd(t.sd?Jo.Pick.choose(t.sd):null,t.offset?Jo.Pick.choose(t.offset):null)),o.trace&&o.cacheCanvas&&o.updateCache(),"top"==_.layers?n.emitShape?o.addTo(W,null,!1):o.addTo(W,W.numChildren-1,!1):(n.emitShape,o.addTo(W,"bottom"==_.layers?0:Jo.rand(W.numChildren),!1)),_.trace||o.reg("center"),o.scaleX=1,o.scaleY=1,o.alpha=o.originalAlpha,n.scaleX=n.originalScaleX,n.scaleY=n.originalScaleY,n.rotation=n.originalRotation,n.color=n.originalColor,n.endSpurt=!1):(F++,_.trace&&((o=new Jo.Container(p,g,null,null,!1)).trace=!0),"shape"==(r=Jo.Pick.choose(Jo.shuffle(h)[0])).type?(t=r,(n=new Jo.Shape(1,1,null,null,null,!1)).emitShape=!0,n.template=t,n.graphics.s(t.s?Jo.Pick.choose(t.s):null).ss(t.ss?Jo.Pick.choose(t.ss):null).sd(t.sd?Jo.Pick.choose(t.sd):null,t.offset?Jo.Pick.choose(t.offset):null),_.trace?n.addTo(o,null,!1):"top"==_.layers?n.addTo(W,null,!1):n.addTo(W,"bottom"==_.layers?0:Jo.rand(W.numChildren),null,!1)):((n=r.clone()).centerReg||zimify(n),_.trace?n.centerReg(o).loc(-1e3,-1e3):"top"==_.layers?n.centerReg(W):n.centerReg(W,"bottom"==_.layers?0:Jo.rand(W.numChildren))),_.trace&&("top"==_.layers?o.addTo(W,null,!1):o.addTo(W,"bottom"==_.layers?0:Jo.rand(W.numChildren),!1),o.cache(_.traceShiftX,_.traceShiftY,(Y?Y.width:1200)+2*_.traceShiftX,(Y?Y.height:1e3)+2*_.traceShiftY)),_.trace||(o=n),o.particle=n,o.originalAlpha=o.alpha,n.originalAlpha=n.alpha,n.originalScaleX=n.scaleX,n.originalScaleY=n.scaleY,n.originalRotation=n.rotation,n.originalColor=n.color),_.currentParticle=n,_.particlesEmitted++,o.particleNormal=!0,o.particleDecaying=!1,o.particleFizzing=!1;var e=Jo.Pick.choose(_.angle),t=Jo.Pick.choose(_.emitterForce),r=t*Math.cos(e*Math.PI/180),e=t*Math.sin(e*Math.PI/180);n.info={position:{x:_.x,y:_.y},velocity:{x:r,y:e},sink:zot(_.sinkForce)?null:zik(_.sinkForce)},_.horizontal&&(n.info.position={x:_.x-_.regX+Jo.rand(0,_.width),y:_.y-_.regY+(_.vertical?_.height/2:0)}),_.vertical&&(n.info.position={x:_.x-_.regX+(_.horizontal?_.width/2:0),y:_.y-_.regY+Jo.rand(0,_.height)}),n.emitShape?n.graphics.mt(n.info.position.x,n.info.position.y):(n.x=n.info.position.x,n.y=n.info.position.y),n.alpha=n.originalAlpha,"Sprite"==n.type&&(a=Math.floor(Math.random()*n.totalFrames),n.run({startFrame:a,endFrame:a})),_.random&&Jo.loop(_.random,function(e,t){t=Jo.Pick.choose(t);"scale"==e?n.sca(t):"frame"==e&&n.run?n.run({startFrame:t,endFrame:t}):("x"==e?n.info.position.x=_.horizontal||_.vertical?t:t+p/2:"y"==e&&(n.info.position.y=_.horizontal||_.vertical?t:t+g/2),"x"!=e&&"y"!=e||!n.emitShape||n.graphics.mt(n.info.position.x,n.info.position.y),n[e]=t,n.emitShape&&(n.x=0,n.y=0))}),A&&!n.emitShape&&"Pic"!=n.type&&"Bitmap"!=n.type&&"Sprite"!=n.type&&n.cache(n.getBounds().x-10,n.getBounds().y-10,n.getBounds().width+20,n.getBounds().height+20);var i,l,a=!n.emitShape&&_.shrink,s=(o||n).life=zik(_.life);_.traceFadeTime=Math.min(s,_.traceFadeTime),_.decayTime=Math.min(s,_.decayTime),0<_.decayTime&&(_.fade||a||_.trace&&0<_.traceFadeTime)?(_.trace&&0<_.traceFadeTime&&o.animate({obj:{alpha:0},time:_.traceFadeTime,wait:s-_.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:H,override:!0,id:"decay"}),(_.fade||a)&&(l={},_.fade&&(l.alpha=0),a&&(l.scaleX=0,l.scaleY=0),n.animate({obj:l,time:_.decayTime,wait:zot(_.decayStart)?s-_.decayTime:_.decayStart,waitedCall:function(e){e.parent!=_&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(e){var t;_.events&&V("decayed",e),e.endSpurt&&V("spurtdecayed",e),_.trace&&0<_.traceFadeTime||(zot(_.decayStart)||_.decayStart+_.decayTime>_.life?e.parent&&H(e.parent.trace?e.parent:e):(t=o,Jo.timeout(s-(_.decayStart+_.decayTime),function(){H(t)})))},override:!1,id:"decay"}))):(o.life=_.life,0<_.life&&((i=o).timeOut=Jo.timeout(_.life,function(){H(i)}))),_.events&&V("emitted",o),l=n,zot(_.spurtCount)&&zot(_.spurtNum)||(_.spurtCount++,_.spurtCount>=_.spurtNum&&G(l)),_.animation&&(l=Jo.Pick.choose(_.animation),Array.isArray(l)?Jo.loop(l,function(e){zot(e.override)&&(e.override=!1),n.animate(Jo.copy(e))}):(zot(l.override)&&(l.override=!1),n.animate(Jo.copy(l))))}))}function i(){Jo.loop(W,function(e){var t;e.trace&&(e=(t=e).getChildAt(0));var o,n,r=e.info,i=0,l=0;zot(_.sink)||(o=_.particles.localToGlobal(r.position.x,r.position.y),n=_.sink.parent&&_.sink.parent.localToGlobal?_.sink.parent.localToGlobal(_.sink.x,_.sink.y):new createjs.Point(Jo.Pick.choose(_.sink.x),Jo.Pick.choose(_.sink.y)),n=Jo.angle(o.x,o.y,n.x,n.y),i=r.sink*Math.cos(n*Math.PI/180),l=r.sink*Math.sin(n*Math.PI/180));i=_.wind+i,l=_.gravity+l;r.velocity.x+=i*a,r.velocity.y+=l*a,r.position.x+=r.velocity.x*a*100,r.position.y+=r.velocity.y*a*100,e.emitShape?e.graphics.lt(r.position.x,r.position.y):(e.x=r.position.x,e.y=r.position.y),_.trace&&t&&t.cacheCanvas&&t.updateCache(e.emitShape?null:"source-over")})}var a;Y&&(e=_.parent.getChildIndex(_),_.parent.addChildAt(W,e),C||x||_.centerReg(null,null,!1),_.zimInterval=Jo.interval(_.interval,r,null,!0,!0),a=0,R=_.emitterTicker=Jo.Ticker.add(i,Y),a=1/Jo.Ticker.framerate,_.focusWarm=I,_.doWarm=function(e){var t;!zot(e)&&!0!==e||(t=s.max||(Array.isArray(s)?Jo.arrayMinMax(s).max:zik(s)),o=l.min||(Array.isArray(l)?Jo.arrayMinMax(l).min:zik(l)),e=Math.min(200,Math.round(t/o)));var o=_.pool;_.pool=!1;var n=Math.round(l*Jo.Ticker.framerate);Jo.loop(Math.round(e*l*Jo.Ticker.framerate),function(e){e%n==0&&r(),Jo.loop(W,function(e){e.warmTick?e.warmTick++:e.warmTick=1,e.warmTick/Jo.Ticker.framerate>e.life&&H(e)}),i()}),Jo.loop(W,function(e){var t;e.zimTweens&&(100<=(t=e.warmTick/Jo.Ticker.framerate/e.life*100)&&(e.alpha=0),e.percentComplete=t)}),_.pool=o},n&&_.doWarm(n))}}),_.particles.noMouse(),Object.defineProperty(_,"interval",{get:function(){return l},set:function(e){l=e,_.zimInterval&&(_.zimInterval.time=l)}}),this.removeFrom=function(){_.parent&&_.parent.removeChild(_),_.particles.removeFrom()},this.spurting=!1,this.spurt=function(e,t,o){var n;return(n=zob(_.spurt,arguments,"num, time, restart"))?n:(zot(t)||(Jo.timeout(Jo.Pick.choose(t),function(){G(_.currentParticle)},!0),_.spurting=!0),zot(e)||(_.spurtNum=Jo.Pick.choose(e),_.spurtCount=0,_.spurting=!0),_.pauseEmitter(!1,o,null,!0),_)},this.clearPool=function(){Jo.loop(_.particles,function(e){e.pooled="end",e.visible||_.removeChild(e)},!0),N=F=0,X=[]},_.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(e,t,o,n){if(_.startEmitterPaused=null,zot(e)&&(e=!0),zot(t)&&(t=!1),zot(o)&&(o=!1),e){if(_.emitterPaused)return _;o&&(R&&Jo.Ticker.remove(R),Jo.loop(_.particles,function(e){e.pauseAnimate(),e.trace&&e.getChildAt(0).pauseAnimate(),e.timeOut&&e.timeOut.pause()})),_.zimInterval.pause(),_.emitterPaused=!0}else{if(!_.emitterPaused)return _;t&&(Jo.loop(_.particles,function(e){e.stopAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseAnimate()}),_.removeAllChildren()),Y&&R&&!Jo.Ticker.has(Y,R)&&(Jo.Ticker.add(R,Y),Jo.loop(_.particles,function(e){e.pauseAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseAnimate(!1)})),_.zimInterval&&_.zimInterval.pause(!1,n),_.emitterPaused=!1}return _},!(this.resize=function(e,t){zot(e)||(p=e),zot(t)||(g=t),_.setBounds(0,0,p,g),C||x||_.centerReg(),_.clearPool()})!==M&&Jo.styleTransforms(this,O),this.clone=function(e){e=Array.isArray(_.obj)||_.obj.constructor=={}.constructor?Jo.copy(_.obj):_.obj.clone?_.obj.clone(e):_.obj;return _.cloneProps(new Jo.Emitter(e,p,g,_.interval,_.num,_.life,_.fade,_.shrink,n,_.decayTime,_.decayStart,_.trace,_.traceFadeTime,_.traceShiftX,_.traceShiftY,_.angle,_.emitterForce,_.gravity,_.wind,_.layers,_.animation,Jo.copy(_.random),_.horizontal,_.vertical,_.sink,_.sinkForce,A,_.events,E,_.pool,_.poolMin,W,I,M,_.group,j))},this.dispose=function(){return _.zimInterval&&_.zimInterval.clear(),R&&Jo.Ticker.remove(R),Jo.loop(X,function(e){e&&e.dispose()}),W&&W.dispose&&W.dispose(),_.currentParticle&&_.currentParticle.dispose&&_.currentParticle.dispose(),h&&Array.isArray(h)?Jo.loop(h,function(e){e.dispose&&e.dispose()}):h&&h.dispose&&h.dispose(),!(W=_.currentParticle=_.particles=h=_.obj=X=_.poolList=null)}},Jo.extend(Jo.Emitter,Jo.Container,"clone","zimContainer",!1),Jo.Generator=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w){if(C=zob(Jo.Generator,arguments,"color, strokeColor, strokeWidth, draw, stamp, setup, maxCount, boundary, drawCount, drawPause, drawSpacebarPause, startX, startY, cache, recordLinePoints, frame, seed, output, outputType, style, group, inherit",this))return C;z_d("69.92"),this.group=v;var C=!1===b?{}:Jo.getStyle("Generator",this.group,w);zot(f)&&(f=null!=C.frame?C.frame:WW.zdf);var x=f.stage;zot(e)&&(e=null!=C.color?C.color:null),zot(t)&&(t=null!=C.strokeColor?C.strokeColor:Jo.white),zot(o)&&(o=null!=C.strokeWidth?C.strokeWidth:1),zot(l)&&(l=null!=C.maxCount?C.maxCount:1e3),zot(a)&&(a=null!=C.boundary?C.boundary:new Jo.Boundary(0,0,x.width,x.height)),zot(s)&&(s=null!=C.drawCount?C.drawCount:1),zot(c)&&(c=null==C.drawPause||C.drawPause),zot(u)&&(u=null==C.drawSpacebarPause||C.drawSpacebarPause),zot(d)&&(d=null!=C.startX?C.startX:x.width/2),zot(h)&&(h=null!=C.startY?C.startY:x.height/2),zot(p)&&(p=null!=C.cache&&C.cache);var v=this.drawing=new Jo.Container(a.x,a.y,a.width,a.height).addTo(x),k=this.shape=new Jo.Shape(a.width,a.height).addTo(v);this.drawCount=s,zot(c)&&(c=!0),p&&k.cache(a.x,a.y,a.width,a.height),this.zimContainer_constructor(a.x,a.y,a.width,a.height),this.type="Generator";var T,A=this;A.draw=null,z&&(A.drawCount=10,!zot(r)&&zot(n)&&(n=r),r=null,T=new Jo.Loader,A.outputNum=0,A.outputName=!0===z?"gen_":z.match(/_$/)?z:z+"_"),this.color=e,this.strokeColor=t,this.strokeWidth=o;var P=d,E=h;this.fill=function(e){return A.color=e,A.currentColor=zik(A.color),k.f(A.currentColor),this},this.stroke=function(e,t){return zot(e)||(A.strokeColor=e,A.currentStrokeColor=zik(A.strokeColor),k.s(A.currentStrokeColor)),zot(t)||(A.strokeWidth=t,A.currentStrokeWidth=zik(A.strokeWidth),k.ss(A.currentStrokeWidth)),this},this.noStroke=function(){return A.strokeColor=A.currentStrokeColor=null,A.strokeWidth=A.currentStrokeWidth=null,k.s(),k.ss(1),this},k.matrix=k.getMatrix(),this.translate=function(e,t){zot(e)&&(e=0),zot(t)&&(t=0),e=zik(e),t=zik(t);var o=k.matrix.transformPoint(e,t);return P=o.x,E=o.y,k.mt(P,E),k.matrix.translate(e,t),this},this.rotate=function(e){return zot(e)&&(e=0),e=zik(e),k.matrix.rotate(e),this},this.scale=function(e,t){return zot(e)&&(e=1),zot(t)&&(t=e),e=zik(e),t=zik(t),k.matrix.scale(e,t),this},this.setScale=this.scale,this.skew=function(e,t){return zot(e)&&(e=0),zot(t)&&(t=0),e=zik(e),t=zik(t),k.matrix.skew(e,t),this},g&&(A.linePoints=[]),this.line=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),("zero"==g||"nonzero"==g&&e&&t)&&A.linePoints.push([e,t]),A.translate(e,t);t=k.matrix.transformPoint(o,n);return P=t.x,E=t.y,k.lt(P,E),g&&A.linePoints.push([P,E]),k.matrix.translate(o,n),this},this.arc=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),e=zik(e),t=zik(t),o=zik(o),o=Math.abs(o),zot(n)&&(n=0),zot(r)&&(r=180),n=zik(n),r=zik(r),zot(i)&&(i=!1),i=zik(i),A.translate(e,t);var l=k.matrix.transformPoint(0,0);k.decomp||(k.decomp={}),k.matrix.decompose(k.decomp);e=(Math.abs(k.decomp.scaleX)+Math.abs(k.decomp.scaleY))/2,t=k.decomp.rotation||0,e*=o;return k.mt(l.x+e*Math.cos((n+t)*Math.PI/180),l.y+e*Math.sin((n+t)*Math.PI/180)),k.a(l.x,l.y,e,(n+t)*Math.PI/180,(r+t)*Math.PI/180,i),this},this.curve=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=50),zot(r)&&(r=100),zot(i)&&(i=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),A.translate(e,t);t=k.matrix.transformPoint(o,n),o=k.matrix.transformPoint(r,i),n=o.x,o=o.y;return k.qt(t.x,t.y,n,o),k.matrix.translate(r,i),this},this.bezier=function(e,t,o,n,r,i,l,a){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=50),zot(r)&&(r=-50),zot(i)&&(i=-50),zot(l)&&(l=100),zot(a)&&(a=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),l=zik(l),a=zik(a),A.translate(e,t);o=k.matrix.transformPoint(o,n),n=k.matrix.transformPoint(r,i),r=k.matrix.transformPoint(l,a),i=r.x,r=r.y;return k.bt(o.x,o.y,n.x,n.y,i,r),k.matrix.translate(l,a),this},this.rectangle=function(e,t,o,n,r,i,l,a){if(zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=o),e=zik(e),t=zik(t),o=zik(o),n=zik(n),!(r||i||l||a)){A.translate(e,t);var s=k.matrix.transformPoint(0,0),c=k.matrix.transformPoint(o,0),u=k.matrix.transformPoint(o,n),d=k.matrix.transformPoint(0,n);return k.mt(s.x,s.y).lt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(s.x,s.y).lt(c.x,c.y),k.mt(s.x,s.y),this}zot(r)&&(r=0),zot(i)&&(i=r),zot(l)&&(l=r),zot(a)&&(a=r),r=zik(r),i=zik(i),l=zik(l),a=zik(a);var h=(o<n?o:n)/2,p=0,g=0,f=0,m=0;r<0&&(r*=p=-1),(h=Math.abs(h))<r&&(r=h),i<0&&(i*=g=-1),h<i&&(i=h),l<0&&(l*=f=-1),h<l&&(l=h),a<0&&(a*=m=-1),h<a&&(a=h),A.translate(e,t),k.decomp||(k.decomp={}),k.matrix.decompose(k.decomp);var z=(Math.abs(k.decomp.scaleX)+Math.abs(k.decomp.scaleY))/2,u=o<0?-1:1,d=n<0?-1:1,c=k.matrix.transformPoint(o-i*u,0),s=k.matrix.transformPoint(o+i*g*u,-i*g*d),h=k.matrix.transformPoint(o,i*d),e=k.matrix.transformPoint(o,n-l*d),t=k.matrix.transformPoint(o+l*f*u,n+l*f*d),g=k.matrix.transformPoint(o-l*u,n),f=k.matrix.transformPoint(a*u,n),o=k.matrix.transformPoint(-a*m*u,n+a*m*d),m=k.matrix.transformPoint(0,n-a*d),n=k.matrix.transformPoint(0,r*d),d=k.matrix.transformPoint(-r*p*u,-r*p*d),u=k.matrix.transformPoint(r*u,0);return k.mt(c.x,c.y).at(s.x,s.y,h.x,h.y,i*z).lt(e.x,e.y).at(t.x,t.y,g.x,g.y,l*z).lt(f.x,f.y).at(o.x,o.y,m.x,m.y,a*z).lt(n.x,n.y).at(d.x,d.y,u.x,u.y,r*z).cp(),this},this.circle=function(e,t,o,n,r){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=100),zot(r)&&(r=!0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),o=Math.abs(o),A.translate(e,t);var i=k.matrix.transformPoint(0,0);k.decomp||(k.decomp={}),k.matrix.decompose(k.decomp);e=(Math.abs(k.decomp.scaleX)+Math.abs(k.decomp.scaleY))/2,t=k.decomp.rotation||0,e*=o;return A.circleHeight=2*e,"number"==typeof n&&0<=n&&n<100?(n=360*n/100/2,k.mt(i.x+e*Math.cos((-n-90+t)*Math.PI/180),i.y+e*Math.sin((-n-90+t)*Math.PI/180)),k.a(i.x,i.y,e,(-n-90+t)*Math.PI/180,(n-90+t)*Math.PI/180,!1),r&&k.cp(),A.circleHeight=e-Math.cos(n*Math.PI/180)*e):(k.mt(i.x+e,i.y),k.a(i.x,i.y,e,0,2*Math.PI)),this},this.elipse=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=50),e=zik(e),t=zik(t),o=zik(o),n=zik(n),A.translate(e,t);var r=k.matrix.transformPoint(-o/2,-n/2);k.decomp||(k.decomp={}),k.matrix.decompose(k.decomp);e=k.decomp.scaleX,t=k.decomp.scaleY;return k.de(r.x,r.y,o*e,n*t),this},this.poly=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=5),zot(r)&&(r=0),zot(i)&&(i=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),o=Math.abs(o),A.translate(e,t);i=k.matrix.transformPoint(0,0);k.decomp||(k.decomp={}),k.matrix.decompose(k.decomp);e=(Math.abs(k.decomp.scaleX)+Math.abs(k.decomp.scaleY))/2,t=k.decomp.rotation||0,e*=o;return k.dp(i.x,i.y,e,n,r,t),this},this.closePath=this.close=this.cp=function(){return k.cp(),this},this._noise=new Jo.Noise(m),this.noise=function(){return 1==arguments.length?(this._noise.simplex1D.apply(null,arguments)+1)/2:2==arguments.length?(this._noise.simplex2D.apply(null,arguments)+1)/2:3==arguments.length?(this._noise.simplex3D.apply(null,arguments)+1)/2:4==arguments.length?(this._noise.simplex4D.apply(null,arguments)+1)/2:void 0},this.stack=[],this.colorStrokeStack=[],this.push=function(){return A.stack.push(k.matrix.clone()),A.colorStrokeStack.push([A.color,A.strokeColor,A.strokeWidth,A.currentColor,A.currentStrokeColor,A.currentStrokeWidth]),this},this.pop=function(){k.matrix=A.stack.pop()||k.matrix;var e=A.colorStrokeStack.pop()||[A.color,A.strokeColor,A.strokeWidth,A.currentColor,A.currentStrokeColor,A.currentStrokeWidth];return A.color=e[0],A.strokeColor=e[1],A.strokeWidth=e[2],A.currentColor=e[3],A.currentStrokeColor=e[4],A.currentStrokeWidth=e[5],k.f(A.currentColor).s(A.currentStrokeColor).ss(A.currentStrokeWidth),k.mt(k.matrix.x,k.matrix.y),this},this.blit=function(){return k.updateCache("source-over"),k.c(),this},this.step=function(){return A.draw&&I(),this},zot(A.color)||this.fill(A.color),!zot(A.strokeColor)&&A.strokeWidth?this.stroke(A.strokeColor,A.strokeWidth):A.noStroke(),this.translate(P,E),"function"==typeof i&&(this.setup=i,Jo.timeout(.01,function(){i(0,A.count,A),p&&k.updateCache(),x.update()}));var S=0;function B(){T.save({content:x,filename:A.outputName+Jo.decimals(A.outputNum,null,null,6),type:y}),A.outputNum++}function W(e){A.stampNum++;e=Jo.loop(A.maxCount,function(e,t){if(A.paused)return A.pausedCount=e,!1;if(A.changeCount)return A.changeCount=!1;t=r(S=e+1,t,A,A.stampNum);return A.currentColor=zik(A.color),k.f(A.currentColor),A.currentStrokeColor=zik(A.strokeColor),k.s(A.currentStrokeColor),A.currentStrokeWidth=zik(A.strokeWidth),k.ss(A.currentStrokeWidth),z&&(x.update(),B()),t||void 0},null,null,e);p&&k.updateCache(),e&&A.dispatchEvent("complete"),x.update()}function I(){A.iterator++,A.iterator%Math.ceil(A.drawCount)==0&&(A.count++,A.draw(A.count,A.maxCount,A),p&&A.blit(),A.currentColor=zik(A.color),k.f(A.currentColor),A.currentStrokeColor=zik(A.strokeColor),k.s(A.currentStrokeColor),A.currentStrokeWidth=zik(A.strokeWidth),k.ss(A.currentStrokeWidth),A.dispatchEvent("drawing"),x.update(),z&&B()),A.maxCount&&A.count>=A.maxCount&&(A.dispatchEvent("complete"),Jo.Ticker.remove(A.ticker))}this.maxCount=l,this.resetup=function(e){return zot(e)&&(e=!0),S=0,e&&A.shape.c(),zot(A.color)||this.fill(A.color),!zot(A.strokeColor)&&A.strokeWidth?this.stroke(A.strokeColor,A.strokeWidth):A.noStroke(),this.reset(),this.setup&&(i(0,A.count,A),p&&k.updateCache(),x.update()),this},this.stampNum=0,"function"==typeof r&&(this.stamp=r,Jo.timeout(.015,function(){W(0)})),this.restamp=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=!0),S=0,e&&A.shape.c(),t&&A.resetup(e),W(0),this},this.reset=function(){return this.fill(e),!zot(t)&&o?this.stroke(t,o):this.noStroke(),k.matrix.identity(),this.translate(d,h),this},this.clear=function(){return this.shape.c(),this},z&&(x.update(),B()),A.iterator=0,"function"==typeof n&&(this.draw=n,i?setTimeout(function(){A.ticker=Jo.Ticker.add(I)},100):this.ticker=Jo.Ticker.add(I),A.generatorPaused=!1,c&&(A.pauseEvent=x.on("stagemousedown",function(){A.count>=A.maxCount||A.pauseTimeout||(Jo.Ticker.has(A.ticker)?(Jo.Ticker.remove(A.ticker),A.generatorPaused=!0,A.dispatchEvent("generatorpaused")):(A.ticker=Jo.Ticker.add(A.ticker),A.generatorPaused=!1,A.dispatchEvent("generatorunpaused")))})),u&&(A.pauseSpacebarEvent=f.on("keydown",function(e){A.count>=A.maxCount||A.pauseTimeout||20==e.keyCode&&(Jo.Ticker.has(A.ticker)?(Jo.Ticker.remove(A.ticker),A.generatorPaused=!0,A.dispatchEvent("generatorpaused")):(A.ticker=Jo.Ticker.add(A.ticker),A.generatorPaused=!1,A.dispatchEvent("generatorunpaused")))}))),this.redraw=function(e,t){return zot(e)&&(e=!0),A.reset(),zot(t)&&(t=!0),A.ticker&&Jo.Ticker.remove(A.ticker),A.iterator=0,A.count=0,e&&A.shape.c(),t?(A.resetup(e),setTimeout(function(){A.ticker&&(A.ticker=Jo.Ticker.add(A.ticker))},100)):A.ticker&&(A.ticker=Jo.Ticker.add(A.ticker)),this},this.paused=!1,this.pause=function(e,t){if(zot(e)&&(e=!0),!(A.count>=A.maxCount)){if(e==this.paused)return this;this.paused=e,this.pauseTimeout&&this.pauseTimeout.clear(),this.paused?A.ticker&&Jo.Ticker.remove(A.ticker):A.ticker?A.ticker=Jo.Ticker.add(A.ticker):W(A.pausedCount,A.maxCount),setTimeout(function(){x.update()},20),t&&(this.pauseTimeout=Jo.timeout(t,function(){A.pause(!A.paused),A.pauseTimeout=null})),A.dispatchEvent(A.paused?"paused":"unpaused")}},this.outOfBounds=function(e,t){zot(e)&&(e=0),zot(t)&&(t=e);var o=A.shape.stage;if(o)return A.currentX>o.width-e||A.currentX<0+e||A.currentY>o.height-t||A.currentY<0+t},this.stop=function(){A.pause(),A.pauseEvent&&x.off("stagemousedown",A.pauseEvent),A.pauseSpaceEvent&&f.off("keydown",A.pauseSpaceEvent)},Object.defineProperty(this,"count",{get:function(){return S},set:function(e){S=e,A.stamp&&(A.changeCount=!0,setTimeout(function(){W(S,A.maxCount)}))}}),Object.defineProperty(this,"currentX",{get:function(){return P},set:function(){zon&&zogy("Generator() - currentX is read only")}}),Object.defineProperty(this,"currentY",{get:function(){return E},set:function(){zon&&zogy("Generator() - currentY is read only")}}),this.clone=function(){return A.cloneProps(new Jo.Generator(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,b,A.group,w))},!(A.dispose=function(e,t,o){return A.pause(),A.ticker&&Jo.Ticker.remove(A.ticker),A.pauseEvent&&x.off("stagemousedown",A.pauseEvent),A.pauseSpacebarEvent&&f.off("keydown",A.pauseSpacebarEvent),A._noise&&(A._noise=null),A.shape&&A.shape.dispose(),A.drawing&&A.drawing.dispose(),A.shape=A.drawing=null,o||A.zimContainer_dispose(),!0})!==b&&Jo.styleTransforms(this,C)},Jo.extend(Jo.Generator,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.Pen=function(m,z,y,t,b,v,w,C,x,n,r,e,i,l,o,a,s,c,u,d,h,p,g,f,k,T,A,P,E,S){if(B=zob(Jo.Pen,arguments,"size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, move, onTop, deleteable, doubleClickDelete, holdDelete, immediateStop, lineAlpha, lineBlendMode, frame, dashed, pullColor, pullThickness, style, group, inherit",this))return B;z_d("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=E;var B=!1===P?{}:Jo.getStyle(this.type,this.group,S);zot(y)&&(y=null!=B.penType?B.penType:"line");var W={size:2,color:Jo.dark,spread:{min:5,max:20},borderColor:Jo.darker,borderWidth:0},I={line:{size:2},kitetail:{size:{min:5,max:20},color:Jo.series(Jo.pink,Jo.blue,Jo.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:Jo.green,size:3,spread:{min:10,max:30}},hair:{color:[Jo.pink,Jo.blue],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:[Jo.dark,Jo.darker,Jo.grey]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};zot(I[y])&&(y="line"),zot(m)&&(m=(null!=B.size?B:zot(I[y].size)?W:I[y]).size),zot(z)&&(z=(null!=B.color?B:zot(I[y].color)?W:I[y]).color),zot(t)&&(t=null!=B.damp?B.damp:.5),!1===t&&(t=1),zot(b)&&(b=(null!=B.spread?B:zot(I[y].spread)?W:I[y]).spread),zot(v)&&(v=(null!=B.borderColor?B:zot(I[y].borderColor)?W:I[y]).borderColor),zot(w)&&(w=(null!=B.borderWidth?B:zot(I[y].borderWidth)?W:I[y]).borderWidth),zot(C)&&(C=null!=B.end?B.end:Jo.isPick(m)||Jo.isPick(z)||"line"!=y?"butt":"round"),zot(i)&&(i=null!=B.cropScale?B.cropScale:1),zot(r)&&(r=null==B.cache||B.cache),zot(l)&&(l=null!=B.undo?B.undo:0),zot(o)&&(o=null==B.undoKeys||B.undoKeys),zot(a)&&(a=null==B.move||B.move),zot(c)&&(c=null==B.deleteable||B.deleteable),zot(u)&&(u=null==B.doubleClickDelete||B.doubleClickDelete),zot(d)&&(d=null==B.holdDelete||B.holdDelete),zot(s)&&(s=null==B.onTop||B.onTop),zot(h)&&(h=null!=B.immediateStop?B.immediateStop:"both"),zot(p)&&(p=null!=B.lineAlpha?B.lineAlpha:1),zot(g)&&(g=null!=B.lineBlendMode?B.lineBlendMode:"normal"),zot(x)&&(x=null!=B.paper?B.paper:new Jo.Container),zot(n)&&(n=null!=B.nib?B.nib.clone():null),zot(f)&&(f=null!=B.frame?B.frame:WW.zdf),zot(k)&&(k=null!=B.dashed?B.dashed:null),!0===k&&(k=[3,100]),zot(T)&&(T=null!=B.pullColor?B.pullColor:null),zot(A)&&(A=null!=B.pullThickness?B.pullThickness:1);var M=this;this.dampX=new Jo.Damp(null,t),this.dampY=new Jo.Damp(null,t);var O=!0;this.drawing=!1,this.immediateStop=h,this.undoLevels=l,this.undoKeys=o,this.move=a,this.draggable=!0,this.lineAlpha=p,this.lineBlendMode=g;var j,L,D,_,R,Y=M.shape=new Jo.Shape,X=f.stage.width,N=f.stage.height;function F(e){var t=e.frame;M.ppdEvent&&M.off("drawing",M.ppdEvent),M.ppsEvent&&M.off("stop",M.ppsEvent),M.ppmEvent&&e.off("stagemousedown",M.ppmEvent),M.pullShape||(M.pullShape=new Jo.Shape),M.ppdEvent=M.on("drawing",function(){setTimeout(function(){var e=x.localToGlobal(M.drawX,M.drawY);M.pullShape.c().s(T).ss(M.pullThickness).mt(t.mouseX,t.mouseY).lt(e.x,e.y)},10)}),M.ppsEvent=M.on("stop",function(){M.pullShape.removeFrom(),M.pullShape.c()}),M.ppmEvent=e.on("stagemousedown",function(){M.pullShape.addTo(e),M.immediate(t.mouseX,t.mouseY),M.motionController&&M.motionController.immediate(t.mouseX,t.mouseY)})}M.paperNum=0,M.sizeScale=1,M.spreadScale=1,M.sizeFactor=1,M.spreadFactor=1,M.pullThickness=A,M.stop=function(){},this.added(function(e){function t(e){M.drawing&&(M.nib.x=e.stageX/Jo.scaX,M.nib.y=e.stageY/Jo.scaY)}R=e,M.paper=x,X=M.stage.width,N=M.stage.height,zot(n)?M.stageDown=R.on("stagemousedown",function(e){M.dispatchEvent("start")}):M.zimDown?M.nib=n.addTo(M):(M.nib=n.addTo(M.parent,M.parent.getChildIndex(M)),M.nib.x=M.x,M.nib.y=M.y,M.nib.mouseEnabled=!1,M.stageDown=R.on("stagemousedown",function(e){R=e.target.stage,M.nibEvent=R.on("stagemousemove",t),M.dispatchEvent("start")}),M.stageUp=R.on("stagemouseup",function(){R.off("stagemousemove",M.nibEvent)})),M.zimDragCheck=!1,M.stop=function(){M.stopCheck(!0)},M.infinite=!1,M.stopCheck=function(e){if(e)M.drawing=!1,M.infinite=!1;else{if(M.infinite)return;if(M.zimDragCheck)return;if(!M.immediateStop&&M.drawing)return}M.immediate(M.x,M.y),setTimeout(function(){var e,t;M.drawing||(r?(Y.cache(-(X*i-X)/2,-(N*i-N)/2,X*i,N*i),e=x.bitmap=new Jo.Bitmap(Y.cacheCanvas).reg((X*i-X)/2,(N*i-N)/2).addTo(x),Y.graphics.clear(),Y.uncache(),Y.top()):e=Y,0<M.undoLevels&&(t={paper:x,line:e},l.push(t),l.length>M.undoLevels&&l.shift(),M.dispatchEvent("recordUndo")),r||(Y=(new Jo.Shape).clone().addTo(x)),M.lastSegment=e,(M.lastSelected=e).alpha=M.lineAlpha,e.blendMode=M.lineBlendMode,e.paper=x,M.dispatchEvent("stop"),M.dispatchEvent("change"))},M.immediateStop||e?0:50)};var p,g,f=0;M.dampX.immediate(M.x),M.dampY.immediate(M.y),M.lastX=M.lastMidX=M.drawX=M.x,M.lastY=M.lastMidY=M.drawY=M.y,M.ticker=Jo.Ticker.add(function(){if(M.parent){var e=M.dampX.convert(O?M.x:M.finishX),t=M.dampY.convert(O?M.y:M.finishY),o=M.parent.localToLocal(e,t,Y);if(Math.abs(M.lastX-e)+Math.abs(M.lastY-t)<1)return M.drawing&&(M.drawing=!1,M.zimDown?(M.x=M.lastX=M.lastMidX=O?M.x:M.finishX,M.y=M.lastY=M.lastMidY=O?M.y:M.finishY):(M.x=M.finishX=M.lastX=M.lastMidX=e,M.y=M.finishY=M.lastY=M.lastMidY=t),M.stopCheck(),p=g=null),M.lastX=M.lastMidX=e,M.lastY=M.lastMidY=t,void(x&&(c=x.localToLocal(0,0,M.parent),M.lastMidX-=c.x,M.lastMidY-=c.y));var n=Jo.Pick.choose(m)*M.sizeScale*M.sizeFactor,r=Jo.Pick.choose(b)*M.spreadScale*M.spreadFactor;M.drawing||(H=[],x.getChildIndex(Y)!=x.numChildren-1&&Y.top()),M.drawing=!0,M.dispatchEvent("drawing");var i,l,a,s=M.parent.localToLocal(M.lastX,M.lastY,Y),c=(x||M.parent).localToLocal(M.lastMidX,M.lastMidY,Y);if("splatter"==y)for(var u=0;u<=3;u++){var d=Jo.rand(360)*Math.PI/180,h=r,d={x:e+h*Math.cos(d),y:t+h*Math.sin(d)},d=M.parent.localToLocal(d.x,d.y,Y);Y.graphics.mt(d.x,d.y).f(Jo.Pick.choose(z)).dc(d.x,d.y,n/2)}else"grass"==y||"hair"==y||"city"==y?("grass"!=y&&"hair"!=y||(i=M.lastX+(e-M.lastX)/2,a=M.lastY+(t-M.lastY)/2,l=M.parent.localToLocal(i,a,Y),Y.graphics.s(Jo.Pick.choose(z)).ss(n,C).mt(l.x,l.y).lt(l.x+Jo.rand(-r/4,r/4),"hair"==y?l.y+r:l.y-r)),("grass"==y||"hair"==y||"city"==y&&f%3==0)&&Y.graphics.s(Jo.Pick.choose(z)).ss(n,C).mt(o.x,o.y).lt(o.x+("city"==y?0:Jo.rand(-r/4,r/4)),"hair"==y?l.y+r:o.y-r),f++):("kitetail"==y&&Y.graphics.s(Jo.Pick.choose(z)).ss(n,C),a="barbwire"==y?(Y.graphics.s(Jo.Pick.choose(z)).ss(n,C),i=M.lastX+(e-M.lastX)/2+Jo.rand(-r,r),M.lastY+(t-M.lastY)/2+Jo.rand(-r,r)):(i=M.lastX+(e-M.lastX)/2,M.lastY+(t-M.lastY)/2),l=M.parent.localToLocal(i,a,Y),"line"!=y&&Y.graphics.qt(s.x,s.y,l.x,l.y));0<w&&"line"!=y&&(i=M.lastX+(e-M.lastX)/2,a=M.lastY+(t-M.lastY)/2,l=M.parent.localToLocal(i,a,Y),Y.graphics.s(Jo.Pick.choose(v)).ss(Jo.Pick.choose(w)).mt(c.x,c.y).qt(s.x,s.y,l.x,l.y),"splatter"==y&&Y.graphics.es()),"splatter"==y?Y.graphics.f(Jo.Pick.choose(z)):"kitetail"!=y&&("line"==y?!Jo.isPick(z)&&n==g||((a=Jo.Pick.choose(z))==p&&n==g||Y.graphics.s(a).ss(n,C),p=a,g=n):Y.graphics.s(Jo.Pick.choose(z)).ss(n,C)),"grass"!=y&&"hair"!=y&&"city"!=y&&"splatter"!=y&&Y.graphics.mt(c.x,c.y).qt(s.x,s.y,l.x,l.y),k&&Y.graphics.sd(k),M.lastX=e,M.lastY=t,l&&(M.lastMidX=l.x,M.lastMidY=l.y),M.drawX=M.lastMidX||0,M.drawY=M.lastMidY||0}}),zot(T)||F(R),M.mouseChildren=!1}),l=[];var H=[];this.saveState=function(e,t,o){var n="Container"==e.type?"paper":"line",r={paper:M.paper};r[n]=e,r[n+"Transform"]={x:e.x,y:e.y,r:e.rotation,a:e.alpha,rX:e.regX,rY:e.regY,sX:e.scaleX,sY:e.scaleY,skX:e.skewX,skY:e.skewY,v:e.visible},zot(t)||zot(o)||t==o||(r.startLayer=t,r.endLayer=o),l.push(r),M.dispatchEvent("recordUndo"),l.length>M.undoLevels&&l.shift()};var V,G,U={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};function q(e,t){for(var o,n=l.length-1;0<=n;n--)if(l[n][e]==t&&l[n][e+"Transform"]){o=l[n][e+"Transform"];break}o=o||Jo.copy(U),t.x=o.x,t.y=o.y,t.alpha=o.a,t.rotation=o.r,t.regX=o.rX,t.regY=o.rY,t.scaleX=o.sX,t.scaleY=o.sY,t.skewX=o.skX,t.skewY=o.skY,t.visible=o.v,"line"==e&&r&&(t.regX=(X*i-X)/2,t.regY=(N*i-N)/2)}this.undo=function(){var e=l.pop();if(e){if(H.push(e),e.clear){for(var t=0;t<e.clear.length;t++)e.paper.addChild(e.clear[t]);e.paper.addChild(Y)}else e.line&&e.lineTransform?(zot(e.startLayer)||(Y.top(),e.paper.setChildIndex(e.line,D)),q("line",e.line)):e.line?e.line.removeFrom():e.paperTransform&&q("paper",e.paper);M.lastPaper=M.paper,e.paper!=M.paper&&(M.paper=e.paper,M.dispatchEvent("paperChange")),M.dispatchEvent("change"),M.dispatchEvent("undo"),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!M.stage||M.stage.update()}},this.redo=function(){var e,t,o=H.pop();o&&(l.push(o),o.clear?(o.paper.removeAllChildren(),o.paper.addChild(Y)):o.line&&o.lineTransform?(zot(o.endLayer)||(Y.top(),o.paper.setChildIndex(o.line,_)),t=o.lineTransform,e=o.line):o.line?o.line.addTo(o.paper):o.paperTransform&&(t=o.paperTransform,e=o.paper),e&&(e.x=t.x,e.y=t.y,e.alpha=t.a,e.rotation=t.r,e.regX=t.rX,e.regY=t.rY,e.scaleX=t.sX,e.scaleY=t.sY,e.skewX=t.skX,e.skewY=t.skY,e.visible=t.v),M.lastPaper=M.paper,o.paper!=M.paper&&(M.paper=o.paper,M.dispatchEvent("paperChange")),M.dispatchEvent("change"),M.dispatchEvent("redo"),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!M.stage||M.stage.update())},M.ctrlKey=!1,M.shiftKey=!1,M.ctrlKeyCheck=!1,M.zimkeydownEvent=function(e){M.ctrlKey=e.ctrlKey,M.shiftKey=e.shiftKey,17==e.keyCode&&a&&!M.ctrlKeyCheck&&(M.ctrlKeyCheck=!0,x.noDrag(),x.drag({onTop:s,all:!0})),M.undoLevels<=0||M.undoKeys&&(e.ctrlKey&&(e.shiftKey&&90==e.keyCode||89==e.keyCode)?M.redo():e.ctrlKey&&90==e.keyCode&&M.undo(),f&&f.ctrlKey&&M.write&&(M.lastWrite=M.write,M.write=!1))},WW.addEventListener("keydown",M.zimkeydownEvent),M.zimkeyupEvent=function(e){17==e.keyCode&&a&&M.ctrlKeyCheck&&(M.ctrlKeyCheck=!1,x.noDrag(),x.drag({onTop:s})),e.ctrlKey||(M.ctrlKey=!1),e.shiftKey||(M.shiftKey=!1),f&&!f.ctrlKey&&0==M.write&&(M.write=M.lastWrite)},WW.addEventListener("keyup",M.zimkeyupEvent),Object.defineProperty(this,"paper",{get:function(){return x},set:function(e){"Container"==e.type&&(x=e,Y.addTo(x,0,!1),x.shape=Y,M.dampX.immediate(M.x),M.dampY.immediate(M.y),M.lastX=M.lastMidX=M.finishX=M.x,M.lastY=M.lastMidY=M.finishY=M.y,"barbwire"==y&&Y.graphics.s(Jo.Pick.choose(z)).ss(Jo.Pick.choose(m)*M.sizeScale*M.sizeFactor,C),Y.graphics.mt(M.x,M.y),x.parent||x.addTo(M.parent,M.parent.getChildIndex(M)),zot(x.paperNum)&&(x.paperNum=++M.paperNum,c&&x.on("mousedown",function(e){M.lastSelected=e.target,M.nibEvent&&M.stage.off("stagemousemove",M.nibEvent);var t=e.target.paper;t&&(t!=M.paper&&(M.paper=t,M.dispatchEvent("paperChange")),M.shiftKey&&(M.ctrlKey?M.clear():(e.target.visible=!1,0<M.undoLevels&&M.saveState(e.target),M.dispatchEvent("change"))))}),u&&x.on("dblclick",function(e){e.target.visible=!1,0<M.undoLevels&&M.saveState(e.target)}),u&&x.hold(function(e){e.target.visible=!1,0<M.undoLevels&&M.saveState(e.target)}),a&&(x.on("mousedown",function(e){R=e.target.stage,M.draggingCheck=!0,M.shiftKey&&c||(j=e.stageX/Jo.scaX,L=e.stageY/Jo.scaY,Y.top(),D=x.getChildIndex(e.target))}),x.drag({onTop:s}),x.on("pressup",function(e){M.draggingCheck=!1,c&&M.shiftKey||0!=e.target.visible&&(M.undoLevels<=0||(Math.abs(e.stageX/Jo.scaX-j)<1&&Math.abs(e.stageY/Jo.scaY-L)<1?s&&(Y.top(),_=x.getChildIndex(e.target),D!=_&&M.saveState(e.target,D,_)):(M.ctrlKey?(M.saveState(x),M.dispatchEvent("paperChange")):(Y.top(),_=x.getChildIndex(e.target),M.saveState(e.target,D,_)),M.dispatchEvent("change"),Y.top())))}))))}}),Object.defineProperty(this,"write",{get:function(){return O},set:function(e){O&&!1===e&&(M.finishX=M.x,M.finishY=M.y),!O&&e&&(Y.graphics.es(),Y.graphics.ef(),M.dampX.immediate(M.x),M.dampY.immediate(M.y),M.lastX=M.lastMidX=M.x,M.lastY=M.lastMidY=M.y),O=e}}),Object.defineProperty(this,"size",{get:function(){return m},set:function(e){Y.graphics.es(),Y.graphics.ef(),m=e,"splatter"!=y&&Y.graphics.ss(Jo.Pick.choose(m)*M.sizeScale*M.sizeFactor,C)}}),Object.defineProperty(this,"color",{get:function(){return z},set:function(e){z=e,Y.graphics.es(),Y.graphics.ef(),"splatter"!=y&&Y.graphics.s(Jo.Pick.choose(z))}}),Object.defineProperty(this,"penType",{get:function(){return y},set:function(e){y=e,Y.graphics.ef().es(),"splatter"!=y?Y.graphics.s(Jo.Pick.choose(z)):Y.graphics.s(Jo.Pick.choose(z)).ss(Jo.Pick.choose(m)*M.sizeScale*M.sizeFactor,C)}}),Object.defineProperty(this,"end",{get:function(){return C},set:function(e){C=e}}),Object.defineProperty(this,"damp",{get:function(){return t},set:function(e){t=e,M.dampX.damp=t,M.dampY.damp=t}}),Object.defineProperty(this,"spread",{get:function(){return b},set:function(e){b=e}}),this.setColorRange=function(e,t){return G=zot(t)?(V=M.color,e):(V=zot(e)?M.color:e,t),M};var Q=0;Object.defineProperty(M,"colorRange",{get:function(){return Q},set:function(e){Q=e,zot(V)||zot(G)||(M.color=Jo.colorRange(V,G,e))}}),Object.defineProperty(this,"borderColor",{get:function(){return v},set:function(e){v=e}}),Object.defineProperty(this,"borderWidth",{get:function(){return w},set:function(e){w=e}}),Object.defineProperty(this,"pullColor",{get:function(){return T},set:function(e){zot(e||-1==e)?(M.ppdEvent&&M.off("drawing",M.ppdEvent),M.ppsEvent&&M.off("stop",M.ppsEvent),M.ppmEvent&&M.off("stagemousedown",M.ppmEvent),M.pullShape&&M.pullShape.dispose(),T=null):zot(T)?(T=e,F(R||zdf.stage)):T=e}}),M.setPen=function(e){M.dampX.immediate(M.x),M.dampY.immediate(M.y),M.lastX=M.lastMidX=M.finishX=M.x,M.lastY=M.lastMidY=M.finishY=M.y,zot(e)&&(e=y),zot(I[e])&&(e="line"),M.penType=y=e;var t,o=Jo.merge(W,I[e]);for(t in o)M[t]!=o[t]&&(M[t]=o[t]);return M},M.immediate=function(e,t){return zot(e)||(M.x=e,M.dampX.immediate(M.x),M.lastX=M.lastMidX=M.finishX=M.x),zot(t)||(M.y=t,M.dampY.immediate(M.y),M.lastY=M.lastMidY=M.finishY=M.y),M},M.clear=function(){for(var e=[],t=0;t<x.numChildren-1;t++)e.push(x.getChildAt(t));return l.push({paper:x,clear:e}),l.length>M.undoLevels&&l.shift(),M.dispatchEvent("recordUndo"),x.removeAllChildren(),Y.graphics.clear(),x.addChild(Y),M.dispatchEvent("change"),M.stage&&M.stage.update(),M},this.deleteSegment=function(e){e.visible=!1,0<M.undoLevels&&M.saveState(e)},this.clone=function(){return this.cloneChildren(this.cloneProps(new Jo.Pen(m,z,y,t,b,v,w,C,x,n,r,e,i,l,o,a,s,c,u,d,h,p,g,f,k,T,A,P,E,S)))},!(M.dispose=function(e,t,o){return zot(e)&&(e=!0),WW.removeEventListener("keydown",M.zimkeydownEvent),WW.removeEventListener("keyup",M.zimkeyupEvent),R&&M.nibEvent&&R.off("stagemousemove",M.nibEvent),R&&M.stageDown&&R.off("stagemousedown",M.stageDown),R&&M.stageUp&&R.off("stagemouseup",M.stageUp),R&&M.upEvent&&R.off("stagemouseup",M.upEvent),Jo.Ticker.remove(M.ticker),M.removeAllEventListeners(),n&&n.removeFrom(),e&&(M.shape&&M.shape.dispose(),M.paper&&M.paper.dispose(),r&&(M.bitmap&&M.bitmap.dispose(),M.bitmap=null),M.zimContainer_dispose(o),x=Y=M.shape=null),!0})!==P&&Jo.styleTransforms(this,B)},Jo.extend(Jo.Pen,Jo.Container,["dispose","clone"],"zimContainer",!1),Jo.SoundWave=function(e,g,f,t,o,n,m,r,i,l,a,z){var s;if(s=zob(Jo.SoundWave,arguments,"num, input, include, smoothing, min, max, operation, baseline, magnify, reduce, adjust, channel",this))return s;z_d("69.95"),this.type="SoundWave",zot(e)&&(e=120),zot(g)&&(g="mic"),zot(f)&&(f=.1171875),zot(t)&&(t=.85),zot(o)&&(o="mic"==g?-80:(g.oscillator,-100)),zot(n)&&(n="mic"==g?-40:(g.oscillator,-10)),zot(m)&&(m=function(e,t){return e*(+t/Math.pow(Jo.SoundWave.bufferLength,.95)+.5)}),zot(r)&&(r="mic"==g?0:(g.oscillator,30)),zot(i)&&(i="mic"==g?1:(g.oscillator,5)),zot(l)&&(l=0),zot(a)&&(a=5);var c=(a-(a=.5))/10;Jo.interval(.2,function(){a+=c},10),Jo.SoundWave.bufferLength=1024;var y,b=e,v=this;v.baseline=r,v.magnify=i,v.reduce=l,v.input=g,v.adjust=a,y="Tone"==g.type||"SynthSound"==g.type?g.audioContext:new(WW.AudioContext||WW.webkitAudioContext);var w,C,x=v.analyser=y.createAnalyser();function u(e){var t,s,c,u,d,h,p;C&&C.disconnect(x),C=e,zot(z)||0!==z&&1!==z?(e.connect(x),"mic"!=g&&x.connect(y.destination)):(t=new ChannelSplitterNode(y,{numberOfOutputs:2}),e.connect(t),t.connect(x,z),t=new ChannelMergerNode(y,{numberOfInputs:2}),x.connect(t,0,z),"mic"!=g&&t.connect(y.destination)),x.fftSize=2*Jo.SoundWave.bufferLength,(w=Math.floor(f*Jo.SoundWave.bufferLength/b))<1?zogy("ZIM SoundWave: include param is too small or num param is too big"):(t=x.frequencyBinCount,s=new Uint8Array(t),c=300,d=u=0,h=Math.round(60*v.adjust*.8),p=new Jo.Damp(c,.01),v.calculate=function(e){zot(e)&&(e=!0),x.getByteFrequencyData(s);var t=s.map(m);if(1==w&&!e)return t;var o=[],n=0;for(a=0;a<=f*Jo.SoundWave.bufferLength;a++)n+=t[a],0!=a&&a%w==0&&(o.push(Math.max(0,(n/w-v.baseline)*v.magnify-v.reduce)),n=0);var r=o.length;if("mic"!=g&&(o[0]*=.75,o[1]*=.85,o[2]*=.9,o[r-2]*=.8,o[r-1]*=.75),o[r-1]*=1.3,o[r-2]*=1.2,o[r-3]*=1.1,e){var i=[];++h>=60*v.adjust&&(c=u/h,h=d=u=0);for(var l=p.convert(c),a=0;a<r;a++)o[a]>d&&(d=o[a]),i[a]=Math.min(1,0!=l?o[a]/l:0);return u+=d,i}return o},setTimeout(function(){v.dispatchEvent("ready")},50))}x.minDecibels=o,x.maxDecibels=n,x.smoothingTimeConstant=t,Object.defineProperty(this,"smoothing",{get:function(){return x.smoothingTimeConstant},set:function(e){x.smoothingTimeConstant=e}}),Object.defineProperty(this,"num",{get:function(){return b},set:function(e){b=e,(w=Math.floor(f*Jo.SoundWave.bufferLength/b))<1&&zogy("ZIM SoundWave: num is too big")}}),this.setInput=function(e){var t;"mic"==(v.input=e)?(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){u(v.source=y.createMediaStreamSource(e))}).catch(function(e){zogy("ZIM SoundWave: Error occured: "+e)}):navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){u(v.source=y.createMediaStreamSource(e))},function(e){zogy("ZIM SoundWave: Error occured: "+e)}):zogy("ZIM SoundWave: Sorry, mic not supported")):"Tone"==e.type?u(e.compressor):"SynthSound"==e.type?u(e.gain):e.type&&"sound"==e.type?zogy("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input"):u(e.playbackResource?(t=e.playbackResource).mediaSourceNode||y.createMediaElementSource(t):(t=e,y.createMediaElementSource(t)))},this.setInput(g),this.dispose=function(e){return C&&x&&C.disconnect(x),e&&y&&y.close(),x&&x.disconnect(),!0}},Jo.extend(Jo.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Jo.Synth=function(e,X){z_d("69.955"),this.type="Synth",zot(e)&&(e=.3),zot(X)&&(X=220),this.volume=e,this.frequency=X;var J,$=this;this.play=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,F,H,V,G,U,q){var Q=(Q=Array.prototype.slice.call(arguments)).shift();if(J||!WW.AudioContext&&!WW.webkitAudioContext||((J=new(WW.AudioContext||WW.webkitAudioContext)).z=J.createBufferSource,J.createBufferSource=function(e){return null==e&&(e=J.z()),e.start=e.start||function(e){J.noteOn(e)},e}),J){for(e=null!=e?zik(e):0,t=null!=t?zik(t):.3,o=null!=o?zik(o):.05,n=null!=n?zik(n):220,r=null!=r?zik(r):0,i=null!=i?zik(i):0,l=null!=l?zik(l):.1,a=null!=a?zik(a):0,s=null!=s?zik(s):1,c=null!=c?zik(c):0,u=null!=u?zik(u):0,d=null!=d?zik(d):0,h=null!=h?zik(h):0,p=null!=p?zik(p):0,g=null!=g?zik(g):0,f=null!=f?zik(f):0,m=null!=m?zik(m):0,z=null!=z?zik(z):0,v=null!=v?zik(v):0,y=null!=y?zik(y):1,b=null!=b?zik(b):0,P=null!=P?zik(P):44100,null==E&&(E=99+r*P),null==S&&(S=i*P),null==B&&(B=l*P),null==W&&(W=b*P),null==I&&(I=z*P),null==M&&(M=2*Math.PI),null==O&&(O=function(e){return 0<e?1:-1}),null==j&&(j=E+W+S+B+I),null==L&&(L=c*=500*M/Math.pow(P,2)),null==D&&(D=n*=(1+2*o*Math.random()-o)*M/P),null==_&&(_=O(f)*M/4),null==R&&(R=0),null==Y&&(Y=0),null==X&&(X=0),null==N&&(N=0),null==F&&(F=0),null==H&&(H=0),null==V&&(V=1),null==G&&(G=[]),null==U&&(U=J.createBufferSource()),null==q&&(q=J.createBuffer(1,j,P)),U.connect(J.destination);X<Math.floor(j);G[X++]=H)++F>100*m&&(F=0,H=R*n*Math.sin(Y*f*M/P-_),H=a?1<a?2<a?3<a?Math.sin(Math.pow(H%M,3)):Math.max(Math.min(Math.tan(H),1),-1):1-(2*H/M%2+2)%2:1-4*Math.abs(Math.round(H/M)-H/M):Math.sin(H),H=(p?1-v+v*Math.sin(M*X/p):1)*O(H)*Math.pow(Math.abs(H),s)*t*$.volume*(X<E?X/E:X<E+W?1-(X-E)/W*(1-y):X<E+W+S?y:X<j-I?(j-X-I)/B*y:0),H=I?H/2+(X<I?0:(X<j-I?1:(X-j)/I)*G[X-I|0]/2):H),R+=1-g+1e9*(Math.sin(X)+1)%2*g,Y+=1-g+1e9*(Math.pow(Math.sin(X),2)+1)%2*g,n+=c+=500*u*M/Math.pow(P,3),V&&++V>h*P&&(n+=d*M/P,D+=d*M/P,V=0),p&&++N>p*P&&(n=D,c=L,N=1,V=V||1);q.getChannelData(0).set(G),U.buffer=q;var Z,K=new createjs.EventDispatcher;return K.type="SynthSound",K.audioContext=J,K.gain=J.createGain(),U.connect(K.gain),K.gain.connect(J.destination),K.pan=J.createStereoPanner(),K.pan.pan.value=e,U.connect(K.pan),K.pan.connect(J.destination),U.start(),K.duration=G.length/P,K.playing=!0,K.stop=function(){clearTimeout(K.completeID),clearInterval(K.repeatID),K.gain.gain.setTargetAtTime(0,J.currentTime,.1),K.playing=!1,setTimeout(function(){J.close()},100)},K.repeat=K.loop=function(e,t){return!(Z=0)===e&&(e=null),zot(t)&&(t=0),clearTimeout(K.completeID),K.repeatID=Jo.interval(function(){return K.duration+zik(t)},function(){Z++,e&&e<=Z?(K.dispatchEvent("complete"),K.repeatID.clear(),K.playing=!1):(K.dispatchEvent("loop"),$.play.apply($,Q))}),K},K.play=function(){return $.play.apply($,Q),K.playing=!0,K},K.completeID=setTimeout(function(){K.dispatchEvent("complete")},1e3*(G.length/P+.1)),K}},this.Tone=function(o,t,n,r,e,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b){if(C=zob($.Tone,arguments,"volume, note, shape, pan, duration, attack, release, wahAmount, wahRate, wahShape, wahThroat, wahNote, vibratoAmount, vibratoRate, vibratoShape, tremeloAmount, tremeloRate, tremeloShape, startTime, pauseOnBlur",this))return C;this.type="Tone";var v,w=this;zot(o)&&(o=$.volume),zot(t)&&(t=$.frequency),zot(n)&&(n=Jo.SINE),zot(r)&&(r=0),zot(i)&&(i=.02),zot(l)&&(l=.05),zot(y)&&(y=0),WW.AudioContext||WW.webkitAudioContext?v=this.audioContext=new(WW.AudioContext||WW.webkitAudioContext):zon&&zogy("Synth tone() needs AudioContext"),o=zik(o),t=zik(t),n=zik(n),r=zik(r),e=zik(e),i=zik(i),l=zik(l),a=zik(a),s=zik(s),c=zik(c),u=zik(u),d=zik(d),h=zik(h),p=zik(p),g=zik(g),f=zik(f),m=zik(m),z=zik(z),y=zik(y);var C=$o(e);($.duration=e)&&(e*="s"==C?1:.001),y&&($o(y),y*="s"==C?1:.001),$.attack=i,$.release=l,$.rampDuration=.02,$.hush=.1;var x=this.note=this.oscillator=v.createOscillator();x.frequency.value=Jo.Synth.note(t),Jo.Synth.setShape(x,n);var k=this.filter=v.createBiquadFilter();k.type="bandpass",k.frequency.value=x.frequency.value,k.Q.value=0;var T=this.gain=x.gain=v.createGain();T.type="gain",T.gain.setValueAtTime(0,v.currentTime);l=this.compressor=v.createDynamicsCompressor();l.threshold.setValueAtTime(-50,v.currentTime),l.knee.setValueAtTime(40,v.currentTime),l.ratio.setValueAtTime(12,v.currentTime),l.attack.setValueAtTime(0,v.currentTime),l.release.setValueAtTime(.25,v.currentTime);var A,P,E=this.panNode=v.createStereoPanner();this.panNode.pan.value=r,x.connect(k),k.connect(E),E.connect(T),T.connect(l),l.connect(v.destination),zot(A=y)&&(A=v.currentTime),zot(P)&&(P=$.attack),x.start(A),A=WW.zdf&&(new Date).getTime()-WW.zdf.startTime<200?.1:$.attack,T.gain.setValueAtTime(0,v.currentTime+.1),T.gain.linearRampToValueAtTime(o*$.hush,v.currentTime+.1+A),this.stop=function(e){zot(e)&&(e=$.release),T&&L(T.gain,0,!0,e),O&&L(O.gain,0,!0,e),I&&L(I.gain,0,!0,e),setTimeout(function(){w.dispatchEvent("complete")},1e3*(.6+e+$.rampDuration)),setTimeout(function(){v&&!v.iamClosed&&(v.iamClosed=!0,v.close())},1e3*(e+1)),setTimeout(function(){S&&w.removeWah()},1e3*(e+1))},e&&setTimeout(function(){w.stop()},1e3*(e-.1));var S,B,W,I,M,O,j=this.notes=[x];function L(e,t,o,n){zot(t)&&(t=0),zot(n)&&(n=$.rampDuration),o?(e.cancelScheduledValues(v.currentTime),e.linearRampToValueAtTime(e.value,v.currentTime+.02),e.linearRampToValueAtTime(t,v.currentTime+.05+n)):(e.cancelScheduledValues(v.currentTime),e.setTargetAtTime(t,v.currentTime,n))}function D(){zot(a)&&(a=1e3),zot(s)&&(s=1),zot(c)&&(c="sine"),zot(u)&&(u=5),d=zot(d)?w.oscillator.frequency.value:Jo.Synth.note(d),zot(B)&&(B=200),w.filter.Q.value=u,(S=w.wah=$.oscillator(s,a/2,c,d+a/2+B)).ticker=Jo.Ticker.add(function(){w.filter.frequency.value=w.wah.amplitude})}function _(){zot(p)&&(p=5),zot(g)&&(g="sine"),zot(h)&&(h=10),W=w.vibrato=v.createOscillator(),(I=w.vibratoGain=v.createGain()).gain.value=0,W.frequency.value=p,Jo.Synth.setShape(W,g),W.connect(I),I.connect(x.frequency),W.start(0),I.gain.setValueAtTime(0,v.currentTime+.1),I.gain.linearRampToValueAtTime(h,v.currentTime+.1+$.attack)}function R(){zot(m)&&(m=5),zot(z)&&(z="sine"),M=w.tremelo=v.createOscillator(),(O=w.tremeloGain=v.createGain()).gain.value=0,M.frequency.value=m,Jo.Synth.setShape(M,z),M.connect(O),O.connect(T.gain),M.start(0);var e=WW.zdf&&(new Date).getTime()-WW.zdf.startTime<200?.1:$.attack;O.gain.setValueAtTime(0,v.currentTime+.1),O.gain.linearRampToValueAtTime(o*$.hush,v.currentTime+.1+e)}this.addNote=function(e,t,o,n,r,i){zot(n)&&(n=!0),zot(r)&&(r=!1),zot(e)&&(e=.1),zot(i)&&(i=0);var l={type:"Note"};l._volume=e,l._note=Jo.Synth.note(t),j.push(l);t=l.oscillator=v.createOscillator();t.frequency.value=l._note,t.type=Jo.Synth.setShape(t,o);o=l.gain=v.createGain();return L(o.gain,l._volume,!0),o.connect(n?k:T),t.connect(o),I&&r&&I.connect(t.frequency),t.start(v.currentTime+i),Object.defineProperty(l,"volume",{get:function(){return l._volume},set:function(e){zot(e)||(l._volume=zik(e),L(l.gain.gain,l._volume,!0))}}),Object.defineProperty(l,"note",{get:function(){return l._note},set:function(e){zot(e)||(l._note=zik(e),L(l.oscillator.frequency,Jo.Synth.note(l._note)))}}),l},this.removeNote=function(e){var t=j.indexOf(e);return 0<=t&&j.splice(t,1),e.oscillator.disconnect(),e=null,this},this.ramp=function(e,t){L(T.gain,e*$.hush,!0,t)},this.rampPan=function(e,t){L(E.pan,e,!1,t)},this.animate=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),Jo.animate.apply(null,arguments),this},this.wiggle=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),Jo.wiggle.apply(null,arguments),this},Jo.addWires(this),!a&&!s&&zot(c)&&zot(u)||D(),w.removeWah=function(){Jo.Ticker.remove(S.ticker),S.dispose(),S=w.wah=null,w.filter.Q.value=0},!h&&!p&&zot(g)||_(),w.removeVibrato=function(){L(I.gain,0,!0),setTimeout(function(){I.disconnect(),W.disconnect(),W.stop(),W=null},1e3*($.rampDuration+1))},!f&&!m&&zot(z)||R(),w.removeTremelo=function(){L(O.gain,0,!0),setTimeout(function(){O.disconnect(),M.disconnect(),M.stop(),M=null},1e3*($.rampDuration+1))},Object.defineProperty(this,"volume",{get:function(){return o},set:function(e){var t;zot(e)||(M?(t=T.gain.value?O.gain.value/T.gain.value:o?f/o:0,o=zik(e),o=Jo.constrain(o,.001),L(O.gain,o*t*$.hush,!0)):o=zik(e),L(T.gain,o*$.hush,!1,$.rampDuration))}}),this.paused=!1;var Y=o;this.pause=function(e){zot(e)&&(e=!0),e?(Y=w.volume,w.volume=0):w.volume=Y},b&&(zot(Jo.blurCheck)&&Jo.setBlurDetect(),Jo.pauseOnBlur.push(this)),Object.defineProperty(this,"frequency",{get:function(){return X},set:function(e){zot(e)||(X=zik(e),L(x.frequency,e))}}),Object.defineProperty(this,"note",{get:function(){return t},set:function(e){zot(e)||(t=zik(e),x.frequency.value=Jo.Synth.note(t))}}),Object.defineProperty(this,"shape",{get:function(){return n},set:function(e){n=zik(e),Jo.Synth.setShape(x,n)}}),Object.defineProperty(this,"pan",{get:function(){return r},set:function(e){zot(e)||(r=zik(e),L(E.pan,r,!1,.1))}}),Object.defineProperty(this,"currentTime",{get:function(){return v.currentTime},set:function(){zon&&zogy("Synth tone() - currentTime is read only")}}),this.wahAmountMin=0,this.wahAmountMax=5e3,Object.defineProperty(this,"wahAmount",{get:function(){return a},set:function(e){zot(e)||(a=zik(e),a=Jo.constrain(a,$.wahAmountMin,$.wahAmountMax),zot(S)?D():S.gain=a/2)}}),this.wahRateMin=0,this.wahRateMax=30,Object.defineProperty(this,"wahRate",{get:function(){return s},set:function(e){zot(e)||(s=zik(e),s=Jo.constrain(s,$.wahRateMin,$.wahRateMax),zot(S)?D():S.frequency=s)}}),this.wahThroatMin=0,this.wahThroatMax=100,Object.defineProperty(this,"wahThroat",{get:function(){return u},set:function(e){u=zik(e),u=Jo.constrain(u,$.wahThroatMin,$.wahThroatMax),zot(S)?D():k.Q.value=u}}),Object.defineProperty(this,"wahNote",{get:function(){return d},set:function(e){zot(e)||(d=zik(e),zot(S)?D():S.offset=d+a/2+B)}}),Object.defineProperty(this,"wahAdjust",{get:function(){return B},set:function(e){zot(e)||(B=zik(e),zot(S)?D():S.offset=d+a/2+B)}}),Object.defineProperty(this,"wahShape",{get:function(){return c},set:function(e){c=zik(e),zot(S)?D():S.shape=c}}),Object.defineProperty(this,"tremeloAmount",{get:function(){return f},set:function(e){zot(e)||(f=zik(e),zot(M)?R():O.gain.setValueAtTime(f,v.currentTime))}}),Object.defineProperty(this,"tremeloRate",{get:function(){return m},set:function(e){zot(e)||(m=zik(e),zot(S)?R():M.frequency.value=m)}}),Object.defineProperty(this,"tremeloShape",{get:function(){return z},set:function(e){z=zik(e),zot(M)?R():Jo.Synth.setShape(M,z)}}),Object.defineProperty(this,"vibratoAmount",{get:function(){return h},set:function(e){zot(e)||(h=zik(e),zot(W)?_():I.gain.setValueAtTime(h,v.currentTime))}}),Object.defineProperty(this,"vibratoRate",{get:function(){return p},set:function(e){zot(e)||(p=zik(e),zot(W)?_():W.frequency.value=p)}}),Object.defineProperty(this,"vibratoShape",{get:function(){return g},set:function(e){g=zik(e),zot(W)?_():Jo.Synth.setShape(W,g)}})},Jo.extend(this.Tone,createjs.EventDispatcher),this.tone=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply($.Tone,arguments))},this.Oscillator=function(e,t,o,n){var r;if(r=zob($.Oscillator,arguments,"frequency, gain, shape, offset",this))return r;this.type="Oscillator",zot(e)&&(e=1),zot(t)&&(t=10),zot(o)&&(o="sine"),zot(n)&&(n=0),this.frequency=zik(e),this.gain=zik(t),this.shape=zik(o),"saw"==this.shape&&(this.shape="sawtooth"),this.offset=zik(n),this.paused=!1;var i=this,l=0,a=Jo.Ticker.framerate;this.ticker=Jo.Ticker.add(function(){var e;i.paused||(e=0,"sine"==i.shape?e=Math.sin(i.frequency*(2*Math.PI*(l/a))):"square"==i.shape?e=(e=Math.sin(i.frequency*(2*Math.PI*(l/a))))<=0?0:1:"triangle"==i.shape?e=2/Math.PI*Math.asin(Math.sin(i.frequency*Math.PI*2*l/a)):"sawtooth"==i.shape||"saw"==i.shape?e=-2/Math.PI*Math.atan(1/Math.tan(i.frequency*Math.PI*l/a)):"zap"==i.shape&&(e=2/Math.PI*Math.atan(1/Math.tan(i.frequency*Math.PI*l/a))),i.amplitude=e*i.gain+i.offset,l++)}),this.pause=function(e){i.paused=e},this.dispose=function(){Jo.Ticker.remove(this.ticker)}},this.oscillator=function(e,t,o,n){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply($.Oscillator,arguments))}},Jo.Synth.notes=["C",null,"D",null,"E","F",null,"G",null,"A",null,"B"],Jo.Synth.major=["C","D","E","F","G","A","B","C4"],Jo.Synth.minor=["C","D","Eb","F","G","Ab","B","C4"],Jo.Synth.shapes=["sine","triangle","sawtooth","tan","noise","square"],Jo.Synth.setShape=function(e,t){if(!zot(e)){var o;if(zot(t)&&(t="sine"),"saw"==t&&(t="sawtooth"),"number"==typeof t)t=(t=Jo.Synth.shapes[t])||"sine";else if(t.real&&t.imag)o=e.context.createPeriodicWave(new Float32Array(t.real),new Float32Array(t.imag));else if(t.constructor==PeriodicWave)o=t;else if("string"==typeof t)if(Jo.Synth.shapes.indexOf(t)<0&&(t="sine"),"noise"==t){for(var n=new Float32Array(4096),r=new Float32Array(4096),i=1;i<4096;i+=2)r[i]=Jo.shuffle([0,.5,1])[0];o=e.context.createPeriodicWave(n,r)}else"tan"==t&&(t="sawtooth");else t="sine";o?(e.setPeriodicWave(o),t="custom"):e.type=t}},Jo.Synth.getNote=function(e,t){return zot(t)&&(t=0),e*Math.pow(2,t/12)},Jo.Synth.note=function(e){if("string"!=typeof e)return"number"!=typeof e&&(e=220),e;var t=e.substr(0,1).toUpperCase(),o=!0===(o=Jo.loop(e,function(e){if(!isNaN(e))return Number(e)}))||isNaN(o)?3:o,n=Jo.Synth.notes.indexOf(t);n<0&&(n=9);t=e.match(/b/g),e=e.match(/#/g),t=t?t.length:0,t=12*(o-3)+n+(e=e?e.length:0)-t;return Jo.Synth.getNote(Jo.Synth.getNote(220,-9),t)},Jo.Synth.wave=function(e,t){if(WW.AudioContext||WW.webkitAudioContext){var o=new(WW.AudioContext||WW.webkitAudioContext);if(e.real)t=e.imag,e=e.real;else if(zot(t)&&zon)return void zogy("Synth.wave() - pass in asset('wave.json') or real and imag properties");return e.constructor!==Float32Array&&(e=new Float32Array(e)),t.constructor!==Float32Array&&(t=new Float32Array(t)),o.createPeriodicWave(e,t)}},Jo.Synth.drawWave=function(e,t,o,n,r,i,l,a,s){if(c=zob(Jo.Synth.drawWave,arguments,"shape, color, thickness, backgroundColor, borderColor, borderWidth, corner, padding, paddingV"))return c;e=zik(e),zot(o)&&(o=2),zot(t)&&(t=Jo.darker),zot(a)&&(a=8),zot(s)&&(s=a);var c=a,a=s,s=new Jo.Container(45,45);s.mouseChildren=!1,zot(n)||(s.backing=new Jo.Rectangle(45,45,n,r,i,l).addTo(s)),s.shape=new Jo.Shape(45,45).addTo(s).s(t).ss(o);o=45-2*c;return"square"==e?s.shape.mt(c,22.5).lt(c,a+3).lt(22.5,a+3).lt(22.5,45-a-3).lt(45-c,45-a-3).lt(45-c,22.5):"triangle"==e?s.shape.mt(c,22.5).lt(c+o/4,a+3).lt(c+3*o/4,45-a-3).lt(45-c,22.5):"sawtooth"==e||"saw"==e?s.shape.mt(c,22.5).lt(22.5,a+2).lt(22.5,45-a-2).lt(45-c,22.5):"zap"==e?s.shape.mt(c,22.5).lt(22.5,45-a-2).lt(22.5,a+2).lt(45-c,22.5):s.shape.mt(c,22.5).bt(22.5,-15,22.5,60,45-c,22.5),s.type=e,s},Jo.VR=function(o,n,r,i,l,e,a,t,s,c,u,d){var h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L;if(B=zob(Jo.VR,arguments,"content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",this))return B;function D(){z.addTo(f,null,!1).setMask(f.getChildAt(0)).pos({y:(d.height-z.height)/2,reg:!0}),y.addTo(m,null,!1).setMask(m.getChildAt(0)).pos({y:(d.height-z.height)/2,reg:!0})}function _(e,o,n,r){((e.vrMatch=o).vrMatch=e).cacheCanvas&&o.cache(),e.dep&&!zot(e.depth)&&(v.push(e),w.push(o),zot(n)||n.push(e),zot(r)||r.push(o),o.dep(e.depth)),Jo.loop(e,function(e,t){_(e,o.getChildAt(t),n,r)})}function R(e,t){Jo.loop(e,function(e){e.vrChannel=t,e.vrStartX=e.x,0!=n&&0!=r&&(e.vrAngle=n,e.vrDistance=r),0!=i&&0!=r&&(e.vrParallax=i/100,(e.vrParallaxDistance=0)!=n&&(e.vrParallaxDamp=new Jo.Damp(0,a))),e.dep(e.depth)})}function Y(e){h.currentAngle=e;var t,e=-h.currentAngle*r/n;h.contentLeft.x=e,h.contentRight.x=e,Math.round(h.currentAngle)<=-n/2&&!x?((t=new createjs.Event("boundaryout")).boundary="left",x=!0,h.dispatchEvent(t)):Math.round(h.currentAngle)>=n/2&&!k?((t=new createjs.Event("boundaryout")).boundary="right",k=!0,h.dispatchEvent(t)):Math.round(h.currentAngle)>-n/2&&Math.round(h.currentAngle)<n/2&&(t=new createjs.Event("boundaryin"),x?(t.boundary="left",h.dispatchEvent(t),x=!1):k&&(t.boundary="right",h.dispatchEvent(t),k=!1))}function X(e){var t=e.parent.localToLocal(e.vrStartX,0,d),t=e.vrParallaxDamp.convert("left"==e.vrChannel?h.contentLeft.x+t.x-p/4:h.contentRight.x+t.x-p/2-p/4);e.depth<=0&&!s&&(t=0),e.vrParallaxDistance=Math.max(-r/n*l/2,Math.min(r/n*l/2,t)),e.dep(e.depth)}function N(e,t){e.vrParallaxDistance=e.depth<=0&&!s?0:t,e.dep(e.depth)}function F(t){0!=n&&0!=r?(Jo.loop(v,X),Jo.loop(w,X)):(Jo.loop(v,function(e){N(e,t)}),Jo.loop(w,function(e){N(e,t)}))}function H(){var e=L.convert(M.value);z.regX=z.startRegX+e,y.regX=y.startRegX-e}z_d("69.98"),this.type="VR",WW.zdf?(A=WW.zdf,!zot(d)&&d.getBounds&&d.getBounds().width||(d=A.stage),zot(n)&&(n=0),zot(r)&&(r=100),zot(e)&&(e=.5),zot(i)&&(i=0),zot(l)&&(l=60),zot(a)&&(a=.1),zot(t)&&(t=0),zot(s)&&(s=!1),zot(c)&&(c=!0),zot(u)&&(u=!0),this.angle=n,this.currentAngle=t,Jo.mobile()&&(u=!1),h=this,p=d.width,g=d.height,h.zimContainer_constructor(),f=h.left=new Jo.Container(p/2,g,null,null,!1),B=new Jo.Rectangle(p/2,g,"rgba(0,0,0,.01)",null,null,null,null,null,null,!1),f.addChild(B),m=h.right=f.clone(),h.addChild(f,m),m.x=p/2,z=h.contentLeft=h.content=o,y=h.contentRight=o.clone(),0!=t?b=setTimeout(D,100):D(),v=[],w=[],_(z,y),R(v,"left"),R(w,"right"),0!=n&&0!=r&&((C=new Jo.Damp(180+t,e)).immediate(180+t),k=x=!1,A.on("deviceorientation",function(e){Y(C.convert((180<e.rotation.z?-180:180)+e.rotation.z+t)-180)}),Jo.Ticker.always()),0!=i&&0!=r&&((T=new Jo.ProportionDamp(180-l/2,180+l/2,-l/2,l/2,a)).immediate(180),A.on("deviceorientation",function(e){var t=0;0==n&&0!=i&&0!=r&&(t=T.convert((180<e.rotation.z?-180:180)+e.rotation.z)),F(t)}),Jo.Ticker.always()),!u||0==r||0==n&&0==i||h.added(function(){var e={swipeAngle:0};h.swiper=new Jo.Swiper({swipeOn:h,target:e,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330}),Jo.Ticker.add(function(){0!=n&&0!=r&&Y(e.swipeAngle),0!=i&&0!=r&&F(T.convert(e.swipeAngle+180))})}),A=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,P=A,E=!1,z.startRegX=z.regX,y.startRegX=y.regX,B=(S=this.adjuster=new Jo.Container(800,300,null,null,!1)).backing=new Jo.Rectangle(S.width,S.height,Jo.lighter,null,null,null,null,null,null,!1).center(S).alp(1).sha("rgba(0,0,0,.2)",0,0,30),S.strip=new Jo.Rectangle(S.width,S.height/3,Jo.white,null,null,null,null,null,null,!1).center(S).alp(1),S.label=new Jo.Label({text:"slide to adjust center of left and right",size:28,color:Jo.dark,align:"center",valign:"center"}).center(S).pos({y:50,reg:!0}),u=S.close=new Jo.Rectangle(50,50,Jo.light,null,null,null,null,null,null,!1).addTo(S).mov(S.width-70,26),(B=new Jo.Shape(-40,-40,80,80,null,!1)).graphics.f(Jo.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),B.center(u).sca(.3),u.cur("pointer"),u.on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){h.hideAdjuster(),M.value=(M.max-M.min)/2+P,h.dispatchEvent("closed")}),(W=new Jo.Circle(30,Jo.dark,null,null,null,null,null,null,null,!1).center(S).pos({x:S.width/4,reg:!0})).shape.alpha=.2,new Jo.Circle(12,Jo.dark,null,null,null,null,null,null,!1).center(W),(I=new Jo.Circle(30,Jo.dark,null,null,null,null,null,null,!1).center(S).pos({x:S.width/4*3,reg:!0})).shape.alpha=.2,new Jo.Circle(12,Jo.dark,null,null,null,null,null,null,null,!1).center(I),(M=S.slider=new Jo.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(S).pos({y:S.height-40,reg:!0})).value=(M.max-M.min)/2+A,O=new Jo.Proportion(M.min,M.max,W.x-S.width/4,W.x+S.width/4,-1),j=new Jo.Proportion(M.min,M.max,I.x-S.width/4,I.x+S.width/4),M.on("change",function(){W.x=O.convert(M.value),I.x=j.convert(M.value)}),new Jo.Label("closer",24,null,Jo.silver).centerReg(S).pos({x:M.x-220,y:M.y,reg:!0}),new Jo.Label("farther",24,null,Jo.silver).centerReg(S).pos({x:M.x+220,y:M.y,reg:!0}),(h.ok=new Jo.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:Jo.blue,rollBackgroundColor:Jo.green,shadowColor:-1,style:!1}).centerReg(S).sca(.8).pos({x:S.width-58,y:M.y,reg:!0})).on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=M.value-(M.max-M.min)/2),H(),h.hideAdjuster(),h.dispatchEvent("saved"),h.dispatchEvent("closed")}),(h.zero=new Jo.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:Jo.yellow,rollBackgroundColor:Jo.green,shadowColor:-1,style:!1}).centerReg(S).sca(.8).pos({x:58,y:M.y,reg:!0})).on((zns?"mousedown"==Jo.ACTIONEVENT:"mousedown"==WW.ACTIONEVENT)?"mousedown":"click",function(){M.value=(M.max-M.min)/2,W.x=O.convert(M.value),I.x=j.convert(M.value)}),L=new Jo.Proportion(0,30,-d.width/4,d.width/4),H(),this.showAdjuster=function(){if(E)return h;E=!0,W.x=O.convert(M.value),I.x=j.convert(M.value),P=M.value-(M.max-M.min)/2,S.scaleTo(d,100,100).center(this),d.stage.update()},this.hideAdjuster=function(){if(!E)return h;E=!1,S.removeFrom(this),d.stage.update()},this.position=function(e,t,o){function n(e){e.vrStartX=t,e.vrParallaxDamp&&e.vrParallaxDamp.immediate(t),e.mov(t,o)}return n(e),n(e.vrMatch),e},this.register=function(e){if(!e.parent||!e.parent.vrMatch)return zon&&zogy("ZIM VR() - please only register objects already inside content container"),e;var t=e.clone().addTo(e.parent.vrMatch),o=[],n=[];return _(e,t,o,n),R(o,"left"),R(n,"right"),e},0!=n&&0!=r&&c&&(h.boundaryRight=new Jo.Container({style:!1}),new Jo.Circle(24,Jo.light,null,null,null,null,null,null,null,!1).addTo(h.boundaryRight).dep(-2),new Jo.Triangle(16,16,16,Jo.yellow,Jo.grey,null,null,null,-3,null,null,!1).rot(-90).center(h.boundaryRight).dep(-6),h.boundaryRight.center(o).mov(r/2+24),h.boundaryLeft=new Jo.Container({style:!1}),new Jo.Circle(24,Jo.light,null,null,null,null,null,null,null,!1).addTo(h.boundaryLeft).dep(-2),new Jo.Triangle(16,16,16,Jo.yellow,Jo.grey,null,null,null,-3,null,null,!1).rot(90).center(h.boundaryLeft).dep(-6),h.boundaryLeft.center(o).mov(-r/2-24),h.register(h.boundaryRight),h.register(h.boundaryLeft)),this.remove=function(){return Jo.loop(arguments,function(e,t){o.contains(t)&&(!function t(e){var o=v.indexOf(e);0<=v.indexOf(e)&&(v.splice(o,1),w.splice(o,1)),Jo.loop(e,function(e){t(e)})}(t),t.parent.removeChild(t),t.vrMatch.parent.removeChild(t.vrMatch))}),h},this.resize=function(){p=d.width,g=d.height,f.getChildAt(0).widthOnly=m.getChildAt(0).widthOnly=p/2,f.getChildAt(0).heightOnly=m.getChildAt(0).heightOnly=g,m.x=p/2,f.setBounds(0,0,p/2,g),m.setBounds(0,0,p/2,g),0!=t?(clearTimeout(b),b=setTimeout(D,100)):D(),S.scaleTo(d,100,100).center(this,null,!1)}):zon&&zogy("VR() - please use ZIM Frame")},Jo.extend(Jo.VR,Jo.Container,"clone","zimContainer",!1),Jo.scaX=1,Jo.scaY=1,Jo.Frame=function(h,p,o,r,n,t,i,l,a,s,e,c,g,f,m,z,u,d,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I){var M;if(M=zob(Jo.Frame,arguments,"scaling, width, height, color, outerColor, ready, assets, path, progress, ticker, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim, maxConnections, maxNum, singleTouch",this))return M;z_d("83"),zon&&zogg("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame";var re=this;WW.zdf&&WW.zdf.type||(WW.zimDefaultFrame=WW.zdf=WW.F=this),WW.M=Jo.mobile();var O,j,ie,L,D,_,le,R,Y,X,N,H,V,G,U,q,Q,Z,K,J,$,ee,te,oe,ne,ae,se,ce,ue,de,he,pe=Date;function ge(e){re.leftMouseDown=void 0===e.buttons?1===e.which:1===e.buttons,L&&!re.leftMouseDown&&(e&&"mouseup"==e.type?re.dispatchEvent("mouseupplus"):setTimeout(function(){re.dispatchEvent("mouseupplus")},30)),D&&!re.leftMouseDown&&re.dispatchEvent("mouseupplusonly"),L=D=re.leftMouseDown}function fe(){re.scale=S.stage.scaleX;var e=X.getBoundingClientRect();re.x=e.x+Jo.scrollX(),re.y=e.y+Jo.scrollY(),Jo.scaX=createjs.stageTransformable?1:S.stage.scaleX,Jo.scaY=createjs.stageTransformable?1:S.stage.scaleY}function me(){var e,t;if(S)return le.canvas&&(e=R=le.canvas.width,t=Y=le.canvas.height,le.setBounds(0,0,e,t)),void re.dispatchEvent("resize");oe=Date.now()+d*("s"==j?1e3:1),te?ee||(ee=!0,$=Jo.Ticker.update,Jo.tickerFrame||(Jo.Ticker.update=!1,Jo.tickerFrame=re),Ce(),ke(),clearInterval(re.frameTime),re.frameTime=setInterval(function(){return Date.now()>oe?(clearInterval(re.frameTime),ee=!1,void(re==Jo.tickerFrame&&(Jo.Ticker.update=$))):(Ce(),void ke())},50)):(Ce(),ke(),clearInterval(re.frameTime),re.frameTime=setInterval(function(){Date.now()>oe?clearInterval(re.frameTime):(Ce(),ke())},d*("s"==j?1e3:1)<50?d*("s"==j?1e3:1)+5:50))}function ze(){if(!J){if(J=!0,-1==_.indexOf(h)){if(zot(zid(q=h)))return void zogy("Frame - scaling: HTML tag with id="+h+" must exist");Q=re.tag=zid(q),re.scaling=h=zot(p)||zot(o)?"tag":"inline",0==z.indexOf("myCanvas")&&(z=q+"Canvas"),"canvas"==Q.tagName.toLowerCase()&&(ne=!0,z=q)}else re.scaling=h;var e;re.canvasID=z,zot(p)&&(p=500),zot(o)&&(o=500),R=p,Y=o,zot(n)||(re.outerColor=n),be(),we(),O?(g&&setTimeout(function(){WW.scrollTo(0,0)},50),setTimeout(t,100),d*("s"==j?1e3:1)!=100&&setTimeout(t,d*("s"==j?1e3:1))):(Z=!0,ye()),zot(i)?(K=!0,ye()):zot(e=i.constructor!={}.constructor||i.audioSprite||i.id||i.data||i.src?re.loadAssets({assets:i,path:l,progress:a,queueOnly:!0}):re.loadAssets(Jo.merge(i,{progress:a,queueOnly:!0})))||!e.on?(zon&&zogy("Frame() - load failed"),K=!0,ye()):e.on("complete",function(){K=!0,ye()})}function t(){Ce(),Z=!0,ye(),ke(),le&&le.update()}}function ye(){if(Z&&K&&!U)if(1<=le.width&&1<=le.height){if(!zot(a)&&a.show&&a.hide(),re==WW.zdf&&(WW.S=le,WW.W=le.width,WW.H=le.height),t&&"function"==typeof t&&t(re,le,le.width,le.height),re){if(s&&"function"==typeof s){var e=0;if(!re)return;re.updateID=Jo.Ticker.add(function(){s(++e,re,le,le.width,le.height)}),re.pauseTicker=function(e){zot(e)&&(e=!0),e?Jo.Ticker.remove(re.updateID):Jo.Ticker.add(re.updateID)}}re.dispatchEvent("ready"),U=!0,ke(),le.update()}}else setTimeout(function(){Ce(),ye()},50)}function be(){var t;ne?t=re.canvas=re.tag:(t=re.canvas=document.createElement("canvas")).setAttribute("id",z),t.setAttribute("tabindex",0);var e=Jo.windowWidth(),o=Jo.windowHeight(),n=WW.devicePixelRatio||1;"full"==h||"tag"==h?A?(re.scale=n,t.setAttribute("width",e*re.scale),t.setAttribute("height",o*re.scale),"full"==h&&(t.style.width=e+"px",t.style.height=o+"px")):(t.setAttribute("width",e),t.setAttribute("height",o)):(t.setAttribute("width",R),t.setAttribute("height",Y));o=zid(z+"Alternative");o&&t.appendChild(o),ne||("tag"==h||"inline"==h?Q:document.body).appendChild(t),zot(r)||(t.style.backgroundColor=r),"full"==h||"fit"==h||"fill"==h?(t.style.position="absolute",x||(document.body.style.overflow="hidden")):"static"==getComputedStyle(t.parentElement).position&&(t.parentElement.style.position="relative"),t.addEventListener("pointerdown",function(e){t.setPointerCapture(e.pointerId),re.dispatchEvent(e)}),t.addEventListener("pointerup",function(e){t.releasePointerCapture(e.pointerId),re.dispatchEvent(e)}),t.addEventListener("pointermove",function(e){re.dispatchEvent(e)}),t.addEventListener("pointerenter",function(e){re.dispatchEvent(e)}),t.addEventListener("pointerleave",function(e){re.dispatchEvent(e)})}function ve(){E&&(re.mouseX=0,re.mouseY=0,re.mousedownEvent=le.on("stagemousedown",function(e){re.mouseX=e.stageX/Jo.scaX,re.mouseY=e.stageY/Jo.scaY}),re.mousemoveEvent=le.on("stagemousemove",function(e){re.mouseX=e.stageX/Jo.scaX,re.mouseY=e.stageY/Jo.scaY})),WW.removeEventListener("mousedown",ge,!0),WW.removeEventListener("mousemove",ge,!0),WW.removeEventListener("mouseup",ge),WW.addEventListener("mousedown",ge,!0),WW.addEventListener("mousemove",ge,!0),WW.addEventListener("mouseup",ge)}function we(){Ce(),-1==_.indexOf(h)||x||(re.zil=zil()),re.mousedownEvent&&le&&le.off("stagemousedown",re.mousedownEvent),re.mousemoveEvent&&le&&le.off("stagemousemove",re.mousemoveEvent),(le=b?new Jo.StageGL(z,v):new Jo.Stage(z)).frame=re,le.mouseMoveOutside=P,!zot(r)&&b&&le.setClearColor(Jo.convertColor(r)),le.setBounds(0,0,R,Y),le.width=R,le.height=Y,A&&Ce(),e&&le.enableMouseOver(u),c&&(I?createjs.Touch.enable(le,!0,x):createjs.Touch.enable(le,!1,x)),x&&(le.preventSelection=!1),w&&(le.nextStage=w.stage),C&&(le.nextStage=C),ve(),le.on("stagemouseup",function(){D=!1})}function Ce(){if(re){var e,t=zid(z),o=Jo.windowWidth(),n=Jo.windowHeight();if((V=re.orientation=n<o?"horizontal":"vertical")!=G&&(G=V,re.dispatchEvent("orientation")),O&&g&&setTimeout(function(){WW.scrollTo(0,0)},100),t){if("fit"==h)re.scale=R/Y<=o/n?n/Y:o/R;else if("fill"==h)re.scale=R/Y<=o/n?o/R:n/Y;else{if("full"==h)return t.style.left=t.style.top="0px",t.width=R=o,t.height=Y=n,le&&(le.setBounds(0,0,R,Y),A?(d=WW.devicePixelRatio||1,t.width=o*d,t.height=n*d,t.style.width=o+"px",t.style.height=n+"px",re.scale=d,le.scaleX=le.scaleY=re.scale):le.scaleX=le.scaleY=1,le.tickOnUpdate=!1,le.update(),le.tickOnUpdate=!0,le.width=R,le.height=Y,b&&le.updateViewport(R/le.scaleX,Y/le.scaleY),Jo.scaX=createjs.stageTransformable?1:le.scaleX,Jo.scaY=createjs.stageTransformable?1:le.scaleY),x||(Jo.scrollX(0),Jo.scrollY(0)),void xe();if("tag"==h)return R=""==Q.style.width?Q.getAttribute("width")||Q.offsetWidth:Q.style.width,Y=""==Q.style.height?Q.getAttribute("height")||Q.offsetHeight:Q.style.height,A?(t.width=R*re.scale,t.height=Y*re.scale,t.style.width=R+"px",t.style.height=Y+"px",le&&(le.scaleX=le.scaleY=re.scale)):(le&&(le.scaleX=le.scaleY=1),t.width=R,t.height=Y),le&&(le.tickOnUpdate=!1,le.update(),le.tickOnUpdate=!0,le.setBounds(0,0,R,Y),le.width=R,le.height=Y,b&&le.updateViewport(R/le.scaleX,Y/le.scaleY),Jo.scaX=createjs.stageTransformable?1:le.scaleX,Jo.scaY=createjs.stageTransformable?1:le.scaleY),Q.style.overflow="hidden",t.style.left=t.style.top="0px",e=t.getBoundingClientRect(),re.x=e.x+Jo.scrollX(),re.y=e.y+Jo.scrollY(),void xe();if("inline"==h){if(A){if(document.styleSheets[0])try{for(var r=document.styleSheets[0].rules||document.styleSheets[0].cssRules,i=0;i<r.length;i++){var l,a,s=r[i];s.selectorText!="#"+z||(s=s.style.getPropertyValue("width"))&&(l=zum(t.style.width),a=zum(t.style.height),t.style.width=s)}}catch(e){}var c=WW.getComputedStyle(t),u=zum(c.getPropertyValue("width"));l&&(t.style.height=a*u/l+"px",c=WW.getComputedStyle(t));var c=zum(c.getPropertyValue("height")),d=WW.devicePixelRatio||1;re.scale=u/p*d,t.width=R*re.scale,t.height=Y*re.scale,t.style.width=u+"px",t.style.height=c+"px",le&&(le.scaleX=le.scaleY=re.scale)}else le&&(le.scaleX=le.scaleY=1);return le&&(le.tickOnUpdate=!1,le.update(),le.tickOnUpdate=!0,le.setBounds(0,0,R,Y),le.width=R,le.height=Y,b&&le.updateViewport(R/le.scaleX,Y/le.scaleY),Jo.scaX=createjs.stageTransformable?1:le.scaleX,Jo.scaY=createjs.stageTransformable?1:le.scaleY),t.style.left=t.style.top="0px",e=t.getBoundingClientRect(),re.x=e.x+Jo.scrollX(),re.y=e.y+Jo.scrollY(),void xe()}}c=Y*re.scale,e=R*re.scale,A?(d=WW.devicePixelRatio||1,re.scale*=d,t.width=R*re.scale,t.height=Y*re.scale,t.style.width=R*re.scale/d+"px",t.style.height=Y*re.scale/d+"px",le&&(le.scaleX=le.scaleY=re.scale)):(le&&(le.scaleX=le.scaleY=1),t.style.width=e+"px",t.style.height=c+"px"),le&&(le.tickOnUpdate=!1,le.update(),le.tickOnUpdate=!0),re.x="left"==f?0:"right"==f?o-e:(o-e)/2,re.y="top"==m?0:"bottom"==m?n-c:(n-c)/2,t.style.left=re.x+"px",t.style.top=re.y+"px",x||(Jo.scrollX(0),Jo.scrollY(0)),xe(),le&&(Jo.scaX=createjs.stageTransformable?1:le.scaleX,Jo.scaY=createjs.stageTransformable?1:le.scaleY)}}}function xe(){var e;"fill"==h?(e=(zum(re.canvas.style.width)-Jo.windowWidth())/2,"left"==f?(re.visibleLeft=0,re.visibleRight=Jo.windowWidth()/(Jo.windowWidth()+2*e)*R):"right"==f?(re.visibleLeft=2*e/(Jo.windowWidth()+2*e)*R,re.visibleRight=R):(re.visibleLeft=e/(Jo.windowWidth()+2*e)*R,re.visibleRight=(Jo.windowWidth()+e)/(Jo.windowWidth()+2*e)*R),e=(zum(re.canvas.style.height)-Jo.windowHeight())/2,"top"==m?(re.visibleTop=0,re.visibleBottom=Jo.windowHeight()/(Jo.windowHeight()+2*e)*Y):"bottom"==m?(re.visibleTop=2*e/(Jo.windowHeight()+2*e)*Y,re.visibleBottom=Y):(re.visibleTop=e/(Jo.windowHeight()+2*e)*Y,re.visibleBottom=(Jo.windowHeight()+e)/(Jo.windowHeight()+2*e)*Y)):(re.visibleLeft=re.visibleTop=0,re.visibleRight=R,re.visibleBottom=Y)}function ke(){var e;U&&re&&(re==WW.zdf&&(WW.W=re.width,WW.H=re.height),re.dispatchEvent("resize"),e=(new Date).getTime(),setTimeout(function(){80<(new Date).getTime()-e&&(Ce(),re==WW.zdf&&(WW.W=re.width,WW.H=re.height),setTimeout(function(){re.dispatchEvent("resize"),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!le||"full"!=h&&"tag"!=h||le.update()},100))},100),Jo.OPTIMIZE||!zns&&WW.OPTIMIZE||!le||"full"!=h&&"tag"!=h||le.update())}function Te(){re.pme&&re.off("pointermove",re.pme),re.pee&&re.off("pointerenter",re.pee),re.ple&&re.off("pointerdown",re.ple),re.pde&&re.off("pointerleave",re.pde),re.smo&&re.stage.off("mouseover",re.smo),re.smu&&re.stage.off("mouseout",re.smu),re.pme=re.pee=re.ple=re.pde=re.smo=re.smu=null,Jo.loop(re.cursorList,function(e,t){!0!==t&&(e.cursor=t),e._cursor=null}),Jo.loop(re.cursorList,function(e){re.cursorList.add(e,!0)}),re.cursorObj&&(re.cursorObj.dispose(),re.cursorObj=null,re.stage.update()),Ae()}function Ae(e){"none"!=e&&(re.cursorObj=null),re.canvas.parentElement&&(re.canvas.parentElement.style.cursor=e||"default")}function Pe(e){re.dispatchEvent(e)}function Ee(e){e.remove=re.eventRemove,re.altKey=e.altKey,re.ctrlKey=e.ctrlKey,re.metaKey=e.metaKey,re.shiftKey=e.shiftKey,e.altKey&&"ArrowLeft"==e.key&&WW.history.back(),e.altKey&&"ArrowRight"==e.key&&WW.history.forward(),re.dispatchEvent(e)}function Se(e){re.altKey=e.altKey,re.ctrlKey=e.ctrlKey,re.metaKey=e.metaKey,re.shiftKey=e.shiftKey,e.remove=re.eventRemove,re.dispatchEvent(e)}function Be(e){re.dispatchEvent(e)}function We(e){e.remove=re.eventRemove,re.dispatchEvent(e)}function Ie(e){e.remove=re.eventRemove;var t=360-e.alpha;135<Math.abs(t-de)&&Math.abs(t-de)<225&&(he=0==he?180:0),de=t,e.rotation={x:e.beta,y:e.gamma,z:(t+he)%360},re.dispatchEvent(e)}this.startTime=(new pe).getTime(),F.reloaded=WW.performance&&WW.performance.getEntriesByType&&"reload"===WW.performance.getEntriesByType("navigation")[0].type,zot(y)&&(y=!0),!WW.HTMLCanvasElement&&y?setTimeout(function(){re.dispatchEvent("failed")},100):(O=Jo.mobile(),zot(h)&&(h="full"),"outside"==h&&(h="fill"),zot(l)||(WW.PATH=l),zot(e)&&(e=!O),zot(c)&&(c=!0),zot(g)&&(g=!1),zot(f)&&(f="center"),zot(m)&&(m="center"),zot(z)&&(z=WW.zdf!=this?"myCanvas"+Jo.makeID(null,5):"myCanvas"),j=$o(d),zot(u)&&(u=20),zot(d)&&(d=O?"s"==j?1:1e3:"s"==j?.03:30),zot(b)&&(b=!1),zot(x)&&(x=!1),zot(k)&&(k="circles"),this.loadFailObj=k,zot(T)&&(T=!1),zot(A)&&(A=!0),this.retina=A,zot(P)&&(P=!1),zot(E)&&(E=!0),zot(S)&&(S=!1),zot(B)&&(B=10),zot(I)&&(I=!1),I&&(c=!0),ie=B,re.maxNum=W,b&&(A=!1),this.retina=A,D=L=!1,this.leftMouseDown=!1,_=["fit","fill","full"],S?(this.shim=!0,X=(S.stage.frame=this).canvas=S.canvas,this.scale=S.stage.scaleX,setTimeout(function(){fe(),H=function(){fe(),N&&clearTimeout(N),N=setTimeout(fe,50)},WW.addEventListener("resize",H)},20),le=S.stage,R=le.getBounds()?le.getBounds().width:X.width/le.scaleX,Y=le.getBounds()?le.getBounds().height:X.height/le.scaleY,le.getBounds()||le.setBounds(0,0,R,Y),r=X.style.backgroundColor,ve(),fe()):(this.scale=1,this.x=0,this.y=0),J=K=Z=U=!1,S||("interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){ze()},200):document.addEventListener("DOMContentLoaded",ze)),ee=!1,te="full"==h&&"undefined"!=typeof InstallTrigger,this.swapRotation=!1,O&&!WW.parent&&(W=isNaN(WW.innerWidth)?WW.clientWidth:WW.innerWidth,ue=isNaN(WW.innerHeight)?WW.clientHeight:WW.innerHeight,this.swapRotation=(0==WW.orientation||180==WW.orientation)&&ue<W||90==Math.abs(WW.orientation)&&W<ue),WW.addEventListener("resize",me),re.loadAssetsCount=0,zot(Jo.assets)&&(Jo.assets={},Jo.assetIDs={}),(ue=[])[0]="h",ue[1]="c",ue[2]="o",ue[3]="p",ne=!(ue[4]="e"),ue=ue.reverse().join(""),this.update=function(){Ce(),re.dispatchEvent("update")},setTimeout(function(){re&&re.dispatchEvent("orientation")},250),ae=["ttf","otf","woff2","woff","fnt"],pe[ue]=function(){var e=pe.now(),t=Math.floor(e/1e3%10),o=(o=e.toString()).substring(0,o.length-2)+(10+t-3)%10+o.substring(o.length-1),e=Math.floor(e/1e4%10),o=(o=o.substring(0,o.length-1)+(e+1)%10).substring(0,o.length-3)+(t+e+3)%10+o.substring(o.length-2);return Number(o)},this.loadAssets=function(e,a,t,s,o,n,r,i,l,c,u,d){if(zot(e))return g();if(zot(e.src)){var h;if(h=zob(re.loadAssets,arguments,"assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly, maxConnections, maxNum"))return h}zot(a)||(WW.PATH=a);var p=$o(o||null);if(!zot(t)&&"ProgressBar"==t.type&&zot(s)&&(s=!0),zot(s)&&(s=!0),Array.isArray(e)||(e=[e]),0==e.length)return g();function g(){var e=new Jo.Queue;return e.isLoading=!1,e.loadAssetsCount=0,setTimeout(function(){e.dispatchEvent("complete"),re.dispatchEvent("complete")},10),e}zot(o)&&(o=0),zot(n)&&(n="s"==p?8:8e3),zot(r)&&(r=!1),zot(i)&&(i="anonymous"),zot(c)&&(c=!1),zot(u)&&(u=ie),zot(d)&&(d=re.maxNum);var f,m,z,y,b,v=!1,w=[],C=/\.([^.]+)$/i,x=[],k=[],T=[],A=0,P=!0;for(K=0;K<e.length;K++){if((b=e[K]).replace&&(b=b.replace(/gf_/i,"https://fonts.googleapis.com/css?family=")),b.assets){var E=[];for(e.splice(K,1),Array.isArray(b.assets)||(b.assets=[b.assets]),L=0;L<b.assets.length;L++){var S,B=b.assets[L];B.split&&(S=B.split("?")[0].match(C)),S&&0<=ae.indexOf(S[1])?x.push((b.path||"")+B):B.match&&B.match(/fonts\.googleapis\.com/i)?k.push(B):B.font?(B.src?B.src=(b.path||"")+B.src:B.font=(b.path||"")+B.font,x.push(B)):Jo.assetIDs[B]?E.push({id:b.path+B,src:b.path+B,path:null,loadTimeout:b.loadTimeout,maxNum:b.maxNum,noCORSonImage:b.noCORSonImage}):E.push({id:B,src:B,path:b.path,loadTimeout:b.loadTimeout,maxNum:b.maxNum,noCORSonImage:b.noCORSonImage})}for(var W=E.length-1;0<=W;W--)e.splice(K,0,E[W]);if(null==(b=E[0]))continue}if(b.constructor=={}.constructor){var I,M=0;for(I in b)M++;1==M&&b.src&&!b.src.match(/fonts\.googleapis\.com/i)&&(b=b.src)}if(b.constructor=={}.constructor)if(b.audioSprite){H(b=(f=Jo.copy(b)).src);for(var O,j=[],L=0;L<f.audioSprite.length;L++)O=f.audioSprite[L],j.push({id:O[0],startTime:Math.round(1e3*O[1]),duration:Math.round(1e3*(O[2]-O[1]))});delete f.audioSprite,f.data={audioSprite:j},w.push(f)}else if(b.data&&b.data.audioSprite)H(b=(f=Jo.copy(b)).src),w.push(f);else if(b.id||b.path){if(b.id||(b.id=b.src),b.path){if(b.path.match(/http/i))b.src=b.path+b.src;else if(b.path.match(/^\//))D=(R=(D=WW.location.href).match(/(.*?)([^/])\/[^/]/))[1]+R[2],b.src=D+b.path+b.src;else{var D,_=WW.location.pathname,R=((D=WW.location.href).split(_)[0]+_).match(/(.*)\//);b.path=b.path.replace(/^\.\//,"");var Y=b.path.match(/\.\.\//g),X=R[1];if(Y){for(z_i=0;z_i<Y.length;z_i++){var N=X.split("/");N.pop(),X=N.join("/")}b.path=b.path.replace(/\.\.\//g,"")}b.src=X+"/"+b.path+b.src}delete b.path}b.noCORSonImage?(y=new Image,T.push(y),y.src=b.src,y.id=b.id,y.onload=function(e){var t=e.currentTarget,e=Jo.assets[t.id]=new Jo.Bitmap({image:t,style:!1}).expand(0);m=new createjs.Event("assetload"),e&&"string"!=typeof e&&"number"!=typeof e&&(e.file=t.id,e.src=t.src),m.asset=e,G.dispatchEvent(m),c||((m=new createjs.Event("assetload")).asset=e,re.dispatchEvent(m)),G.loadAssetsCount--,0==G.loadAssetsCount&&ne()}):(Jo.assetIDs[b.id]=b.src,zot(_=b.maxNum)&&(_=d),z=b.type,y=zot(b.loadTimeout)?n:b.loadTimeout,H(b=b.src),z={src:b,loadTimeout:y*("s"==p?1e3:1),data:_,type:z},zot(l)||(z.type=l),w.push(z))}else(b.src&&b.src.match(/fonts\.googleapis\.com/i)?k:x).push(b);else{var F=H(b);F&&0<=ae.indexOf(F[1])?(x.push(b),A--):b.match(/fonts\.googleapis\.com/i)?(k.push(b),A--):(z={src:b,loadTimeout:n*("s"==p?1e3:1),data:d},zot(l)||(z.type=l),w.push(z))}v&&P&&((F=document.createElement("audio")).setAttribute("src",(zot(a)||b.match(/^http:\/\/|https:\/\//i)?"":a)+b),document.body.appendChild(F),P=!1)}function H(e){return S=null,e.split&&(e=e.split("?"),(S=e[0].match(C))&&0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(S[1])&&(v=!0)),A++,S}re.loadAssetsCount++,re.isLoading=!0;var V,G=new Jo.Queue;if(G.isLoading=!0,G.loadAssetsCount=0,!zot(t)&&t.show&&(t.zimActiveLoader=G,t.show()),0<x.length){for(var U,q,Q,Z=[],K=0;K<x.length;K++)(Q=x[K]).font&&!Q.src&&(Q.src=Q.font,Q.font=Q.font.split(".")[0],q=Q.font.split("/"),Q.font=q[q.length-1]),"string"==typeof Q&&(Q={font:Q.split(".")[0],src:Q}),U={src:"url("+(!Q.src.match(/\//i)&&a||"")+Q.src+")"+(Q.type?" format('"+Q.type+"')":""),family:Q.font},Q.weight&&(U.weight=Q.weight),Q.style&&(U.style=Q.style),Z.push(U);(V=new createjs.FontLoader({src:Z},!0)).on("complete",J),V.on("error",J),V.load(),G.loadAssetsCount++}if(0<k.length)for(K=0;K<k.length;K++)"string"==typeof(Q=k[K])&&(Q={src:Q}),U={src:Q.src,type:"fontcss"},G.loadAssetsCount++,(V=new createjs.FontLoader(U,!0)).on("complete",J),V.on("error",J),V.load();function J(){G.loadAssetsCount--,0==G.loadAssetsCount&&ne()}if(0<T.length)for(K=0;K<T.length;K++)G.loadAssetsCount++;function $(e,t){G.loadAssetsCount--;var o=t.item,e=Jo.assets[o.id]=e;e.src=o.src,e.file=o.id,e.item=o,e.svg=t.svg;t=new createjs.Event("assetload");t.item=o,(t.asset=e).type="SVG",G.dispatchEvent(t),c||((t=new createjs.Event("assetload")).item=o,t.asset=e,re.dispatchEvent(t)),0==G.loadAssetsCount&&ne()}var ee=Date.now(),te=new createjs.Event("complete");if(0<A){G.loadAssetsCount++;var oe=G.preload=re.preload=new createjs.LoadQueue(s,a,i);1!=u&&oe.setMaxConnections(u),v&&oe.installPlugin(createjs.Sound),oe.on("progress",function(e){G.dispatchEvent(e),c||re.dispatchEvent(e)}),oe.on("error",function(e){G.dispatchEvent(e),c||re.dispatchEvent(e)}),oe.on("fileload",function(o){if(o.result&&("IMG"!=o.result.nodeName&&"SVG"!=o.result.nodeName||o.rawResult||!s)){var n,e=o.item,t=o.item.type,r=e.id.match(C);if(t&&"sound"==t){var i=[];if(e.data&&e.data.audioSprite)for(var l=0;l<e.data.audioSprite.length;l++)i.push(e.data.audioSprite[l].id);else i.push(e.id);for(l=0;l<i.length;l++)!function(){var c=i[l],e=o.item.src,t=o.item;n=Jo.assets[c]={type:"sound",path:a,id:c,file:c,src:e,item:t,dispose:function(){delete Jo.assets[c],n=null},play:function(e,t,o,n,r,i,l){var a;if(a=zob(Jo.assets[c].play,arguments,"volume, loop, loopCount, pan, offset, delay, interrupt"))return a;l={volume:e,loop:t,loopCount:o,pan:n,offset:r,delay:i,interrupt:l};"s"==$o(l.offset,null,30)&&(l.offset&&(l.offset*=1e3),l.delay&&(l.delay*=1e3)),!0===l.loop&&(l.loop=-1),l.loopCount&&(l.loop=l.loopCount,delete l.loopCount);var s=createjs.Sound.play(c,l);return s.getStage=function(){return le},s.dispose=function(){s.destroy()},s}}}()}else if("image"==t)o.result.width&&(n=Jo.assets[e.id]=new Jo.Bitmap({image:o.result,width:o.result.width,height:o.result.height,style:!1}),e.avoidCORS&&n.expand(0));else{if("svg"==t)return G.loadAssetsCount++,void Jo.svgToBitmap(o.result,$,null,null,{svg:o.result,item:e,type:t,ext:r});n=Jo.assets[e.id]=o.result}n&&"string"!=typeof n&&"number"!=typeof n&&"json"!=t&&"xml"!=t&&(n.file=o.item.id,n.src=o.item.src,n.item=o.item),(t=new createjs.Event("assetload")).item=e,t.asset=n,G.dispatchEvent(t),c||((t=new createjs.Event("assetload")).item=e,t.asset=n,re.dispatchEvent(t))}else{t=new createjs.Event("error");(t=new createjs.Event("error")).item=o.item,G.dispatchEvent(t),(t=new createjs.Event("error")).item=o.item,re.dispatchEvent(t)}}),re.preloadEvent=oe.on("complete",function(e){te=e,G.loadAssetsCount--,0==G.loadAssetsCount&&ne()});try{oe.loadManifest(w)}catch(e){}}function ne(){var e=Date.now();o=Math.max(0,o-(e-ee)),setTimeout(function(){re.loadAssetsCount--,re.loadAssetsCount<=0&&(re.isLoading=!1),G.isLoading=!1,G.dispatchEvent(te),!zot(t)&&t.show&&t.hide(),c||re.dispatchEvent(te)},o*("s"==p?1e3:1))}return G},this.ac=function(e,t,o){o?(o.commands||(o.commands=[]),o.commands.push([e,t,o])):(t[0].commands||(t[0].commands=[]),t[0].commands.push([e,t]))},Jo.asset=this.asset=function(n,e,t,o,r){if(!zot(n)){n=zik(n);var i=Jo.assetIDs[n];if(i&&(n=i),Jo.assets[n]&&(!Jo.assets[n].type||Jo.assets[n].type&&"AC"!=Jo.assets[n].type.substr(0,2)))return Jo.assets[n];if(null!=WW.PATH&&(Jo.PATH=WW.PATH),r){r="circles"==re.loadFailObj?re.makeCircles(14):re.loadFailObj;return r&&(r.type="EmptyAsset",r.id=n,r.play=function(){if(zon)return zogy("Frame - asset("+n+") not found"),{}}),r}var l=new Jo.Container(e,t);(Jo.assets[n]=l).type=e&&t?"ACWD":"AC";t=re.loadAssets({assets:n,path:1==n.split("/").length?Jo.PATH:null,queueOnly:!0,maxNum:o}),o=n.split(".");return 0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(o[o.length-1])&&(l.play=function(){return l.playParams=arguments,l.proxy=new createjs.EventDispatcher,Object.defineProperty(l.proxy,"volume",{get:function(){return l.sound?l.sound.volume:null},set:function(e){l.volume=e,l.sound&&(l.sound.volume=e)}}),Object.defineProperty(l.proxy,"pan",{get:function(){return l.sound?l.sound.pan:null},set:function(e){l.pan=e,l.sound&&(l.sound.pan=e)}}),Object.defineProperty(l.proxy,"paused",{get:function(){return l.sound?l.sound.paused:null},set:function(e){l.paused=e,l.sound&&(l.sound.paused=e)}}),Object.defineProperty(l.proxy,"position",{get:function(){return l.sound?l.sound.position:null},set:function(e){l.position=e,l.sound&&(l.sound.position=e)}}),Object.defineProperty(l.proxy,"duration",{get:function(){return l.sound?l.sound.duration:null},set:function(e){zogy("ZIM Aud - duration is read only")}}),l.proxy}),t.on("complete",function(){n.id?n=n.id:n.src&&(n=n.src);var e,t=re.asset(n,null,null,null,!0),o=n.split(".");if(0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(o[o.length-1]))l.play=t.play,l.type="Sound",l.src=t.src,l.item=t.item,l.playParams&&(l.sound=l.play.apply(null,l.playParams),l.proxy.sound=l.sound,null!=l.volume&&(l.sound.volume=l.volume),null!=l.pan&&(l.sound.pan=l.pan),l.sound.on("complete",function(){l.proxy.dispatchEvent("complete")}));else if("Bitmap"==t.type||"Image"==t.type||"Pic"==t.type){if("Bitmap"==t.type?(t.addTo(l),l.bitmap=t,l.image=t.image,l.id=t.id,l.item=t.item):(l.bitmap=t.getChildAt(0).clone(),l.bitmap.addTo(l),l.image=l.bitmap.image,l.id=l.bitmap.id,l.item=l.bitmap.item),l.mouseChildren=!1,l.type="Image",l.commands)for(e=0;e<l.commands.length;e++)(l.commands[e][2]?l:Jo)[l.commands[e][0]].apply(l,l.commands[e][1]);l.commands=null,l.stage&&l.stage.update()}else if("EmptyAsset"==t.type){if(t.addTo(l),l.mouseChildren=!1,l.type="EmptyAsset",l.commands)for(e=0;e<l.commands.length;e++)(l.commands[e][2]?l:Jo)[l.commands[e][0]].apply(l,l.commands[e][1]);l.commands=null,l.stage&&l.stage.update()}else if("SVG"==t.type){if(t.addTo(l),l.mouseChildren=!1,l.type="SVG",l.bitmap=t,l.svg=t.svg,l.commands)for(e=0;e<l.commands.length;e++)(l.commands[e][2]?l:Jo)[l.commands[e][0]].apply(l,l.commands[e][1]);l.commands=null,l.stage&&l.stage.update()}(Jo.assets[n]=l).dispatchEvent("assetLoad"),l.dispatchEvent("complete")}),t.on("error",function(e){var t=new createjs.Event("error");t.id=e.id,t.item=e.item,l.dispatchEvent(t)}),l}},Jo.asset.getIDs=function(){var e,t=[];for(e in Jo.assetIDs)t.push(e);return t},Jo.image=function(e,t,o,n,r){return e.match(/^htt/i)&&(e="https://cors.zimjs.com/"+e),Jo.asset(e,t,o,n,r)},Jo.zimObjectIDs={},Jo.object=this.object=function(e){return Jo.zimObjectIDs[e]},Jo.object.getNames=function(){var e,t=[];for(e in Jo.zimObjectIDs)t.push(e);return t},WW.zns||(WW.asset=this.asset,WW.image=Jo.image,WW.object=this.object),this.setDefault=function(){return WW.zimDefaultFrame=WW.zdf=WW.F=re,WW.S=le,WW.W=le.width,WW.H=le.height,re},Object.defineProperty(re,"isDefault",{get:function(){return WW.zdf==re},set:function(){zogy("Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(re,"stage",{get:function(){return le},set:function(){zogy("Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(re,"width",{get:function(){return R},set:function(){zogy("Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(re,"height",{get:function(){return Y},set:function(){zogy("Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(e){zot(r=e)?re.canvas.style.backgroundColor="default":!zot(re.canvas.style.backgroundColor=r)&&b&&le.setClearColor(Jo.convertColor(r))}}),Object.defineProperty(this,"outerColor",{get:function(){return se},set:function(e){se=e,zet("body").css({backgroundColor:se})}}),Object.defineProperty(re,"allowDefault",{get:function(){return x},set:function(e){e?(le.preventSelection=!1,document.body.style.overflow="visible",re.zil&&(WW.removeEventListener("keydown",re.zil[0]),WW.removeEventListener("wheel",re.zil[1]),WW.removeEventListener("DOMMouseScroll",re.zil[2]),re.zil=null)):(le.preventSelection=!0,le.enableDOMEvents(!0),"full"!=h&&"fit"!=h&&"fill"!=h||(document.body.style.overflow="hidden"),zot(re.zil)&&(re.zil=zil())),x=e,le.__touch&&(le.__touch.preventDefault=!x)}}),Object.defineProperty(re,"touch",{get:function(){return c},set:function(e){c=e,createjs.Touch.disable(re.stage),c&&createjs.Touch.enable(re.stage,I)}}),Object.defineProperty(re,"singleTouch",{get:function(){return I},set:function(e){I=e,c=!0,createjs.Touch.disable(re.stage),createjs.Touch.enable(re.stage,I)}}),Object.defineProperty(re,"cursors",{get:function(){return ce},set:function(e){(ce=e&&e.constructor=={}.constructor?e:null)?function(n){Jo.loop(n,function(e,t){t.noMouse&&t.noMouse()}),re.pme&&Te(),Jo.loop(re.cursorList,function(e){!e._cursor&&e.cursor&&n[e.cursor]&&(e._cursor=e.cursor,re.cursorList.add(e,e._cursor),e.cursor="none")}),n.default&&(document.body.style.cursor="none"),re.pme=re.on("pointermove",function(e){if(re.cursorObj){for(var t=re.cursorObj,o=re.stage.getObjectUnderPoint(re.mouseX,re.mouseY,1);o&&!o._cursor&&!o.cursor;)o=o.parent;o&&(o._cursor||o.cursor)?r(o):n.default?(Ae("none"),re.cursorObj=n.default,n.default.addTo(re.stage)):Ae(),re.cursorObj!=t&&t.removeFrom&&t.removeFrom(),re.cursorObj&&(re.cursorObj.x=re.mouseX,re.cursorObj.y=re.mouseY,re.cursorObj.top(),Jo.Ticker.isUpdating(re.stage)||re.stage.update())}});var e,t=!1;function o(e){Ae("none"),re.cursorObj=e,re.cursorObj.x=re.mouseX,re.cursorObj.y=re.mouseY,re.cursorObj.mouseChildren=!1,re.cursorObj.mouseEnabled=!1,re.cursorObj.addTo(re.stage)}function r(e){var t=re.cursorsExclude;if(t&&(Array.isArray(t)||(t=[t]),t.includes(e)))e.cursor=re.cursorTypes.includes(e._cursor)?e._cursor:"default";else{if(e._cursor&&n[e._cursor]){if(n[e._cursor]==re.cursorObj)return;re.cursorObj&&re.cursorObj.removeFrom(),o(n[e._cursor])}else if(!n.default||e.cursor&&re.cursorTypes.includes(e.cursor))re.cursorTypes.includes(e.cursor)||(e.cursor="default"),re.cursorObj&&re.cursorObj.removeFrom();else{if(n.default==re.cursorObj)return;re.cursorObj&&re.cursorObj.removeFrom(),o(n.default)}re.stage.update()}}0!=re.mouseX&&0!=re.mouseY&&(t=!0,(e=re.stage.getObjectUnderPoint(re.mouseX,re.mouseY,1))&&(e._cursor||e.cursor)?r(e):n.default?(Ae("none"),n.default.x=re.mouseX,n.default.y=re.mouseY,re.cursorObj=n.default,re.cursorObj.mouseChildren=!1,re.cursorObj.mouseEnabled=!1,n.default.addTo(re.stage)):Ae(),re.stage.update()),re.pee=re.on("pointerenter",function(e){t?t=!1:setTimeout(function(){for(var e=re.stage.getObjectUnderPoint(re.mouseX,re.mouseY,1);e&&!e._cursor&&!e.cursor;)e=e.parent;e&&(e._cursor||e.cursor)||(n.default?o(n.default):Ae(),re.stage.update())},50)}),re.smo=re.stage.on("mouseover",function(e){r(e.target)}),re.ple=re.on("pointerdown",function(e){re.cursorObj&&Jo.interval(.001,function(){re.cursorObj&&re.cursorObj.top(),re.stage.update()},2,!0)}),re.pde=re.on("pointerleave",function(e){t=!1,re.cursorObj&&re.cursorObj.removeFrom(),re.stage.update()}),re.smu=re.stage.on("mouseout",function(e){re.cursorObj&&re.cursorObj.removeFrom(),n.default?o(n.default):Ae()})}(ce):Te()}}),re.cursorTypes=["none","auto","pointer","text","wait","crosshair","default","help","move","progress","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","context-menu","cell","vertical-text","alias","copy","no-drop","not-allowed","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","grab","grabbing","zoom-in","zoom-out"],re.cursorList=new Jo.Dictionary(!0),WW.addEventListener("contextmenu",Pe,!1),ue=new createjs.Event("keydown"),this.eventRemove=ue.remove,WW.addEventListener("keydown",Ee),WW.addEventListener("keyup",Se),WW.addEventListener("wheel",Be),T&&WW.DeviceMotionEvent&&WW.addEventListener("devicemotion",We),T&&WW.DeviceOrientationEvent&&(he=de=0,WW.addEventListener("deviceorientation",Ie)),this.isFullscreen=!!document.fullscreenElement,this.htmlobc=zet("html").css("backgroundColor"),this.fullscreen=function(e){if(zot(e)&&(e=!0),e){if(document.fullscreenElement)return;var t=re.canvas.parent||document.body;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullscreen?t.mozRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}else{if(!document.fullscreenElement)return;document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}this.isFullscreen=e},document.addEventListener("fullscreenchange",function(){re.isFullscreen=!!document.fullscreenElement,document.fullscreenElement?(zet("html").css("backgroundColor",re.color),re.dispatchEvent("fullscreenenter")):(zet("html").css("backgroundColor",re.htmlobc||"transparent"),re.dispatchEvent("fullscreenexit"))}),this.remakeCanvas=function(e,t){if("full"!=h){zot(e)&&(e=R),zot(t)&&(t=Y),zid(z)&&zid(z).parentNode.removeChild(zid(z)),R=e,Y=t;for(var o=[],n=0;n<re.stage.numChildren;n++)o.push(re.stage.getChildAt(n));for(be(),we(),n=0;n<o.length;n++)re.stage.addChild(o[n])}},this.follow=function(n,e,t,r,i,l,a,s,c,u,d,h,p,g){var o;return(o=zob(re.follow,arguments,"obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag"))?o:(re.followObj=null,re.followTicker&&Jo.Ticker.remove(re.followTicker),zot(n)?void 0:(n.dirX=n.dirY=0,(re.followObj=n).followDampX=null,n.followDampY=null,zot(e)&&(e=new Jo.Boundary(0,0,re.stage.width,re.stage.height)),re.followBoundary=e,zot(t)&&(t=.05),zot(r)&&(r=t),zot(i)&&(i=0),zot(l)&&(l=0),zot(a)&&(a=0),zot(s)&&(s=0),zot(c)&&(c=.02),zot(u)&&(u=c),zot(d)&&(d=!0),zot(h)&&(h=!0),zot(p)&&(p=!1),zot(g)&&(g=!1),n.parent?f():n.on("added",f),n));function f(){var o=n.parent;re.frameBorderLock=p,d&&(re.followDampX=new Jo.Damp(o.x,t),re.offsetDampX=new Jo.Damp(e.x+i+(e.width-i-l)/2,c)),h&&(re.followDampY=new Jo.Damp(o.y,r),re.offsetDampY=new Jo.Damp(e.y+a+(e.height-a-s)/2,u)),re.followTicker=Jo.Ticker.add(function(){var e,t=re.followBoundary;d&&(e=t.x+i+(t.width-i-l)/2,re.followOffsetX=[g?t.x+t.width-i:e,e,g?t.x+i:e],re.followObj&&(o.x=re.followDampX.convert(re.offsetDampX.convert(re.followOffsetX[n.motionController?n.motionController.dirX+1:1])-n.x))),h&&(e=t.y+a+(t.height-a-s)/2,re.followOffsetY=[g?t.y+t.height-s:e,e,g?t.y+a:e],re.followObj&&(o.y=re.followDampY.convert(re.offsetDampY.convert(re.followOffsetY[n.motionController?n.motionController.dirY+1:1])-n.y))),re.frameBorderLock&&(o.x>re.followBoundary.x&&(o.x=re.followBoundary.x),o.y>re.followBoundary.y&&(o.y=re.followBoundary.y),o.x<re.followBoundary.x+re.followBoundary.width-o.width&&(o.x=re.followBoundary.x+re.followBoundary.width-o.width),o.y<re.followBoundary.y+re.followBoundary.height-o.height&&(o.y=re.followBoundary.y+re.followBoundary.height-o.height))})}},zot(Jo.blurCheck)&&Jo.setBlurDetect(),this.keyboardMessage=function(e,t,o,n,r,i){var l;if(l=zob(re.keyboardMessage,arguments,"color, backgroundColor, message, response, percent, call"))return l;zot(e)&&(e=Jo.yellow),zot(t)&&(t="black"),zot(o)&&(o="PRESS SCREEN FOR KEYBOARD CONTROL"),zot(n)&&(n="YOU HAVE KEYBOARD CONTROL"),zot(r)&&(r=80);var a=function(){try{return window.self!==window.top}catch(e){return!0}}();function s(){a&&(re.canvas.style.pointerEvents="auto"),document.removeEventListener("mousedown",s),document.removeEventListener("pointerdown",s),""!=o&&(o.text=n,o.animate({props:{alpha:0},wait:1,call:function(){o.dispose(),o=null}}),re.stage.update()),i&&"function"==typeof i&&i(),re.dispatchEvent("keyboardactive")}return a&&(re.canvas.style.pointerEvents="none"),""!=o&&(o=new Jo.Label({text:o,size:40,color:e,backgroundColor:t,paddingV:15,paddingH:30,shiftV:1,align:CENTER}).scaleTo(re.stage,r).ske(10).reg(CENTER).pos(0,50,CENTER,BOTTOM)),document.addEventListener("mousedown",s),document.addEventListener("pointerdown",s),""==o?null:o},this.dispose=function(){return createjs.removeRemotePointers(re.stage),Jo.TAM&&Jo.TAM.dispose(),Jo.TAM=null,WW.zimDefaultThree&&WW.zimDefaultThree.dispose&&WW.zimDefaultThree.frame==re&&(WW.zimDefaultThree.dispose(),WW.zimDefaultThree=null),WW.zimDefaultPhysics&&WW.zimDefaultPhysics.dispose&&WW.zimDefaultPhysics.frame==re&&(WW.zimDefaultPhysics.dispose(),WW.zimDefaultPhysics=null),re.zil&&re.zil.length&&(WW.removeEventListener("keydown",re.zil[0]),WW.removeEventListener("wheel",re.zil[1]),WW.removeEventListener("DOMMouseScroll",re.zil[2])),X&&X.removeAllEventListeners(),re.frameTime&&clearInterval(re.frameTime),H&&WW.removeEventListener("resize",H),WW.removeEventListener("resize",me),WW.removeEventListener("contextmenu",Pe),WW.removeEventListener("keydown",Ee),WW.removeEventListener("keyup",Se),WW.removeEventListener("wheel",Be),WW.removeEventListener("devicemotion",We),WW.removeEventListener("deviceorientation",Ie),WW.removeEventListener("mousedown",ge,!0),WW.removeEventListener("mousemove",ge,!0),WW.removeEventListener("mouseup",ge),x||(document.body.style.overflow="auto"),function e(t){if(!t)return;if(t.dispose)t.dispose();else{if(t.removeAllEventListeners(),t.numChildren)for(var o=t.numChildren-1;0<=o;o--)e(t.getChildAt(o));t.parent&&t.parent.removeChild(t)}t=null}(le),zid(z)&&zid(z).parentNode.removeChild(zid(z)),Jo.Ticker.dispose(le),re==Jo.tickerFrame&&(Jo.tickerFrame=null),re===WW.zdf&&(WW.zdf=WW.S=WW.W=WW.H=null),!(re=le=null)},this.makeCircles=function(e,t){zot(e)&&(e=100);var o,n,r=[Jo.orange,Jo.green,Jo.pink,Jo.blue,Jo.brown,Jo.dark];if(t)for((o=new Jo.Container({style:!1})).radius=e,n=0;n<r.length;n++)o.addChild(new Jo.Circle(o.radius/r.length*(r.length-n),r[n],null,null,null,null,null,null,null,!1));else{var i=(o=new Jo.Shape({style:!1})).graphics;for(o.radius=e,n=0;n<r.length;n++)i.f(r[n]).dc(0,0,o.radius/r.length*(r.length-n));o.setBounds(-o.radius,-o.radius,2*o.radius,2*o.radius)}return o},this.madeWith=function(e,t,o,n,r,i,l){if(a=zob(re.madeWith,arguments,"color, text, edges, box, slats, borderColor, borderWidth"))return a;zot(e)&&(e=Jo.dark),zot(t)&&(t="Made with ZIM");var a=new Jo.Container,s=a.icon=re.makeIcon(o,n,r,i,l).sca(.5).alp(.92).hov(1).addTo(a).tap(function(){s.alp(.92),s.stage.update(),zgo("https://zimjs.com","_blank")});return a.label=new Jo.Label(t,16,null,e).sca(.7).pos(0,-19,Jo.CENTER,Jo.BOTTOM,a),a},this.makeIcon=function(e,t,o,n,r){var i;if(i=zob(re.makeIcon,arguments,"edges, box, slats, borderColor, borderWidth"))return i;var l=new Jo.Container(-20,-13,102,120).reg(-20,-13);zot(e)&&(e=Jo.light),zot(t)&&(t=Jo.dark),!0===o&&(o=[Jo.silver,Jo.silver,Jo.silver,Jo.silver,Jo.silver]),new Jo.Rectangle(l.width,l.height,t,n,r).loc(-20,-13,l);e=[[o?o[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[o?o[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[o?o[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[o?o[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[o?o[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[e,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return Jo.loop(e,function(e){var t=(new Jo.Shape).addTo(l);t.graphics.f(e[0]).p(e[1]),t.setTransform(e[2],e[3])}),l.mouseChildren=!1,l},this.makeAbstract=function(e){zot(e)&&(e="black");var o=new Jo.Rectangle(200,200,e);Jo.loop([[115.8,103.55,"#4ACBEB","Am6GkIAAtHIN0AAIAAClIrZAAIAAKig"],[127.55,73.3,"#A1E543","AAjLSIAAp6IEiAAIAAJ6gAlELOIAAp2IEiAAIAAJ2gAlEihIAAowIKEAAIAAIwg"],[32.55,73.05,"#B545E4","Ak6LQIAA2fIJ1AAIAAWfg"]],function(e){var t=(new Jo.Shape).f(e[2]).p(e[3]);t.setTransform(e[0]+20,e[1]+27),t.addTo(o)},!0);e=new Jo.Container;return o.sca(.4).addTo(e),e.mouseChildren=!1,e},this.makeCat=function(e){zot(e)&&(e=246);var o=new Jo.Container(157.5,246);Jo.loop([[16.95,241.15,0,"black",[1.5,2,1],"AgKAhIAVhB"],[58.65,244.378,0,"#A7A7A7",[3,2,1],"AmYAAIMxAB"],[105.64,107.14,"#EF7988",0,0,"AAEArQgNAAgjghQgiggAFgIQAFgJBEgCQBEgDAGAGQAHAIgfAkQgfAlgPAAIAAAAg"],[104.84,111.34,0,"black",[1,1,1],"AABA2IAPAYQAJAPAJAGQAKAHAMAAQAbAAAXgWQAQgPAVghQAVghAAgcQAAgnglgYQgbgSgxgCIgrACAAJADIgIAzAhphVQgXAVgMAWQgKAQgIAiQgIAkAFAMQALAfAqAOQAmANAcgIQANgEANgQQALgNAGgT"],[105.05,111.4,"#757B74",0,0,"AheBrQgvgRgQgeQgPgdAQgkQAZg8AEgFQAXgfA8gGQBVgKA+ATQBRAZgYBEQgVA/gnAZQgUAOgZAKQgJAJgVgbQgUgegCAAQgDAAgWAgQgWAUgZAAQgMAAgNgEg"],[86.18,93,"black",0,0,"Aj7g0QiYg0i9AyQA0g3BcgRQBagQBfAaQBkAbBEBBQBNBHASBpQhgiYibg0gAFxiDQAzgdA6AMQA9AMA2A4QgHgBAAACQAAAAgBABQAAAAAAAAQgBAAgBAAQAAAAgBgBQh8gshOAzQhIAvhBCYQALjABzhCg"],[78.5,63.23,"#705F6C","black",[1,1,1],"AHAg5IgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDZQg2g4g9gMQg6gMgzAdQhzBCgLDBQBBiZBIgvQBNgzB9AsQAEACAAgCQAAgCAHABgAqdBuIAAnsIDmHEQgegMgsgBQhXgChFA3gAoEDzQA0g3BdgRQBagQBeAaQBkAbBFBBQBMBIASBpQhfiYibg1QiYg0i+Ayg"],[86.28,98.01,"black","black",[1,1,1],"AJSh/QgEADgHgDQgFgBgBAFQgNBXhNA9QhTBEhagZQgGgCgPAFQgUAHgEAAQCNAeBchOQBGg7AWhigApRhnQAFABAIAAQAGABAAAAQBFBsCVA7QCpBDCrgzQACAAAHAJQAEAFAFAJQjAAzitg/Qing9g/iHg"],[96.95,97.3,"#0C0436",0,0,"AlZBJQgVgVAAgeQAAgcAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAcQAAAegVAVQgVAVgdAAQgeAAgVgVgAD1AcQgVgVAAgdQAAgdAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAdQAAAdgVAVQgVAVgdAAQgeAAgVgVg"],[96.88,97.2,"#EA9424",0,0,"AlpBYQgbgbAAgnQAAglAbgbQAbgbAnAAQAmAAAbAbQAbAbAAAlQAAAngbAbQgbAbgmAAQgnAAgbgbgADnArQgbgbAAgmQAAgmAbgbQAbgbAmAAQAnAAAbAbQAbAbAAAmQAAAmgbAbQgbAbgnAAQgmAAgbgbg"],[96.88,97.2,"#AFCE3A",0,0,"AlzBiQgggfAAgtQAAgrAggfQAfggAtAAQAsAAAgAgQAfAfAAArQAAAtgfAfQggAggsAAQgtAAgfgggADcA1QgfgfAAgsQAAgsAfgfQAgggAsAAQAtAAAfAgQAgAfAAAsQAAAsggAfQgfAggtAAQgsAAggggg"],[78.5,64.1,0,"black",[1,1,1],"AHAhCIgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDQQg2g4g9gMQg6gMgzAdQhzBCgLDBQCqAvBlhgQBJhFAGhagAoADiQAlgiBTgOQBYgOBaARQDrAsA0DTQjAAziog/Qihg+hAiIgAqdBlIAAnsIDmHEQgegMgsgBQhXgChFA3g"],[86.375,93.9,"#EACE35",0,0,"AltB+Qiig9g/iIQAkghBTgOQBZgPBaARQDrAtA0DRQhWAXhSAAQhkAAhcgjgADxB2QALjABzhBQAzgeA6AMQA9ANA2A4QgGBYhJBGQhEBAhiAAQgxAAg4gQg"],[73.45,154.83,"black","black",[2,1,1],"AkjjDIByAMQB/ANBEAFQB/AICXgSIgKFzQj4hflLiNQgDgBAFiag"],[79.42,123.62,"#A7A7A7","black",[2,1,1],"AEBpxIgBgBQAYiNAeiQQA8kgAfgMQAggNBLEqQAlCVAfCXIAXARQAbAXAZAcQBQBZAZBnQAZBngUB+QgKA/gPArQgeASgrAWQhYAuhFAXQg8AUh0AWIhoASIAAQzItygCQAvhKA1hoQBqjRAjiXQAri/AOjLIAFimQgegHhTgeQhEgZhgg/IhTg7QgekPgQkUQggonBEgWQBFgWCbEtQAkBGA3B9QAbA9AYA3QASAqAQAmIgjhQIABAAIJmgYIBUACIBQAK"]],function(e){var t=(new Jo.Shape).f(e[2]).s(e[3]).ss(e[4]?e[4][0]:null,e[4]?e[4][1]:null,e[4]?e[4][2]:null).p(e[5]);t.setTransform(e[0],e[1]),t.addTo(o)},!0);var t=new Jo.Container;return o.sca(e/246).addTo(t).mov(0,-.4),O&&(t.cache(),t.setBounds(0,0,157.5*o.scale,246*o.scale)),t.mouseChildren=!1,t})},Jo.extend(Jo.Frame,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Jo.Queue=function(){this.cjsEventDispatcher_constructor(),this.type="Queue",this.isLoading=!0},Jo.extend(Jo.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),Jo.Pic=function(t,o,n,r,i,e,l){var a;if(a=zob(Jo.Pic,arguments,"file, width, height, noCors, style, group, inherit",this))return a;z_d("83.03"),this.group=e;var s,c,u,e=!1===i?{}:Jo.getStyle("Pic",this.group,l);zot(t)&&(t=null!=e.file?e.file:null),zot(r)&&(r=null!=e.noCors&&e.noCors),zot(t)?zon&&zogy("ZIM Pic - needs a file"):(this.zimContainer_constructor(o,n),c=t,t=(s=this).file=Jo.Pick.choose(t),this.type=o&&n?"ACWD":"AC",u=r?Jo.image(t):Jo.asset(t),s.mouseChildren=!1,"Bitmap"==u.type||"Image"==u.type?("Bitmap"==u.type?s.bitmap=u.clone().addTo(s):s.bitmap=u.getChildAt(0).clone().addTo(s),s.id=u.id,s.image=s.bitmap.image,s.src=s.bitmap.src,s.item=s.bitmap.item,s.setBounds(null),s.type="Pic",setTimeout(function(){s.dispatchEvent("ready"),s.dispatchEvent("complete")},20)):u.on("complete",function(){if(s.bitmap=u.getChildAt(0).clone().addTo(s),s.id=u.id,s.setBounds(null),s.type="Pic",s.commands)for(var e=0;e<s.commands.length;e++)(s.commands[e][2]?s:Jo)[s.commands[e][0]].apply(s,s.commands[e][1]);s.image=s.bitmap.image,s.src=s.bitmap.src,s.item=s.bitmap.item,s.commands=null,s.dispatchEvent("ready"),s.dispatchEvent("complete"),s.stage&&s.stage.update()}),!(s.keyOut=function(e,t,o){return"AC"==s.type&&WW.zdf?WW.zdf.ac("keyOut",arguments,s):(s.bitmap&&s.bitmap.keyOut(e,t,o),s.stage&&s.stage.update()),s})!==i&&Jo.styleTransforms(this,e),s.clone=function(e){return this.cloneProps(new Jo.Pic(e?t:c,o,n,r,i,this.group,l))})},Jo.extend(Jo.Pic,Jo.Container,["clone"],"zimContainer",!1),Jo.Aud=function(e,t,o,n,r,i,l,a,s,c,u,d){var h;if(h=zob(Jo.Aud,arguments,"file, volume, loop, loopCount, pan, offset, delay, interrupt, maxNum, style, group, inherit",this))return h;z_d("83.05"),this.cjsEventDispatcher_constructor(),this.type="Aud",this.group=u;var p,g,d=!1===c?{}:Jo.getStyle(this.type,this.group,d);zot(e)&&(e=null!=d.file?d.file:null),zot(e)?zon&&zogy("ZIM Sound - needs a file"):(zot(t)&&(t=null!=d.volume?d.volume:1),zot(o)&&(o=null!=d.loop&&d.loop),zot(n)&&(n=null!=d.loopCount?d.loopCount:null),zot(r)&&(r=null!=d.pan?d.pan:0),zot(i)&&(i=null!=d.offset?d.offset:0),zot(l)&&(l=null!=d.delay?d.delay:0),zot(a)&&(a=null!=d.interrupt?d.interrupt:"none"),zot(s)&&(s=null!=d.maxNum?d.maxNum:null),e=(p=this).file=Jo.Pick.choose(e),"AC"==(g=p.sound=Jo.asset(e,null,null,s)).type?g.on("complete",function(){p.src=g.src,p.item=g.item,p.dispatchEvent("ready"),p.dispatchEvent("complete")}):setTimeout(function(){p.src=g.src,p.item=g.item,p.dispatchEvent("ready"),p.dispatchEvent("complete")},20),p.volume=t,p.loop=o,p.loopCount=n,p.pan=r,p.offset=i,p.delay=l,p.interrupt=a,p.maxNum=s,p.play=function(e,t,o,n,r,i,l){var a;return(a=zob(p.play,arguments,"volume, loop, loopCount, pan, offset, delay, interrupt"))?a:(zot(e)&&(e=p.volume),zot(t)&&(t=p.loop),zot(o)&&(o=p.loopCount),zot(n)&&(n=p.pan),zot(r)&&(r=p.offset),zot(i)&&(i=p.delay),zot(l)&&(l=p.interrupt),p.soundInstance=p.sound.play(e,t,o,n,r,i,l),p.soundInstance.fade=function(e,t,o){var n=p.soundInstance.animator||(p.soundInstance.animator=new Jo.Container);zot(e)&&(e=0);var r=$o(t);return zot(t)&&(t="s"==r?2:2e3),n.volume=p.soundInstance.volume,Jo.animate({target:n,props:{volume:e},time:t,override:!0,animateCall:function(){p.soundInstance.volume=n.volume},call:o}),p.sound},p.soundInstance.panSound=function(e,t,o){var n=p.soundInstance.animator||(p.soundInstance.animator=new Jo.Container);zot(e)&&(e=0);var r=$o(t);return zot(t)&&(t="s"==r?2:2e3),n.pan=p.soundInstance.pan,Jo.animate({target:n,props:{pan:e},time:t,override:!0,animateCall:function(){p.soundInstance.pan=n.pan},call:o}),p.sound},p.soundInstance)},p.dispose=function(){return p.sound&&(p.soundInstance&&p.soundInstance.animator&&(p.soundInstance.animator.dispose(),p.soundInstance.animator=null),p.sound.dispose()),!(p.sound=null)})},Jo.extend(Jo.Aud,createjs.EventDispatcher,null,"cjsEventDispatcher"),Jo.Vid=function(t,n,r,i,l,o,a,s,c,u,e,d){if(f=zob(Jo.Vid,arguments,"file, width, height, scaling, volume, loop, align, valign, type, style, group, inherit",this))return f;z_d("83.07"),this.group=e;var h,p,g,f,m,z,y=!1===u?{}:Jo.getStyle("Vid",this.group,d);function b(){5<z++&&h.dispatchEvent("error"),m.addEventListener("stalled",b),m.addEventListener("error",b),m.addEventListener("canplay",v)}function v(){h.type="Vid",m.removeEventListener("stalled",b),m.removeEventListener("error",b),m.removeEventListener("canplay",v),m.pause();var e=m.videoWidth,t=m.videoHeight;if(h.setBounds(0,0,n||e,r||t),(p=h.bitmap=new Jo.Bitmap(m,e,t).addTo(h)).setBounds(0,0,e,t),p.scaleTo(h,100,100,i).pos(0,0,a,s,h),h.commands)for(var o=0;o<h.commands.length;o++)(h.commands[o][2]?h:Jo)[h.commands[o][0]].apply(h,h.commands[o][1]);h.commands=null,h.dispatchEvent("ready")}zot(t)&&(t=null!=y.file?y.file:null),zot(t)?zon&&zogy("ZIM Vid - needs a file"):(zot(n)&&(n=null!=y.width?y.width:null),zot(r)&&(r=null!=y.height?y.height:null),zot(i)&&(i="fit"),zot(o)&&(o=null!=y.loop&&y.loop),zot(l)&&(l=null!=y.volume?y.volume:1),zot(a)&&(a=null!=y.align?y.align:"center"),zot(s)&&(s=null!=y.valign?y.valign:"center"),zot(c)&&(c=null!=y.type?y.type:"video/mp4"),this.zimContainer_constructor(n,r),this.type=n&&r?"ACWD":"AC",h=this,g=t,t=Jo.Pick.choose(t),h.file=t,null!=WW.PATH&&(Jo.PATH=WW.PATH),f="",1==t.split("/").length&&Jo.PATH&&(f=Jo.PATH),this.mouseChildren=!1,m=h.source=document.createElement("video"),document.body.appendChild(m),m.style.display="none",m.setAttribute("autoplay","autoplay"),m.setAttribute("playsinline","playsinline"),m.setAttribute("crossorigin","anonymous"),o&&m.setAttribute("loop","loop"),e=h.innerSource=document.createElement("source"),1==t.split("?").length&&(t+="?playsinline=1"),e.setAttribute("src",f+t),e.setAttribute("type",c),m.appendChild(e),b(),z=0,h.videoPaused=!0,h.play=function(){var e,t,o;if(p)return m.play(),m.volume=l,h.videoPaused=!1,h.ticker||(h.keyObj?(e=h.keyObj.color,t=h.keyObj.tolerance,o=h.keyObj.replacement,h.ticker=Jo.Ticker.add(function(){p.keyOut(e,t,o)})):h.ticker=Jo.Ticker.add(function(){})),h;zon&&zogy("ZIM Vid - no file found")},h.keyOut=function(e,t,o){return h.ticker?(Jo.Ticker.remove(h.ticker),h.ticker=Jo.Ticker.add(function(){p.keyOut(e,t,o)})):h.keyObj={color:e,tolerance:t,replacement:o},h},h.pause=function(e){return zot(e)&&(e=!0),(h.videoPaused=e)?(m.pause(),h.ticker&&Jo.Ticker.remove(h.ticker)):(h.ticker&&Jo.Ticker.add(h.ticker),m.play()),h},Object.defineProperty(this,"duration",{get:function(){return m.duration},set:function(){}}),Object.defineProperty(this,"currentTime",{get:function(){return m.currentTime},set:function(e){m.currentTime=e}}),Object.defineProperty(this,"volume",{get:function(){return m.volume},set:function(e){l=e,m.volume=e}}),!1!==u&&Jo.styleTransforms(this,y),h.clone=function(e){return this.cloneProps(new Jo.Vid(e?t:g,n,r,i,l,o,a,s,c,u,this.group,d))},h.dispose=function(e,t,o){this.ticker&&Jo.Ticker.remove(this.ticker);var n=h.stage;return h.bitmap.dispose(),p=h.bitmap=null,m.pause(),m.removeAttribute("src"),m.load(),m.remove(),m=null,o||this.zimContainer_dispose(!0),n&&n.update(),!0})},Jo.extend(Jo.Vid,Jo.Container,["clone","dispose"],"zimContainer",!1),Jo.SVG=function(o,t,n,r,i,l,a,s,c,u,d){if(f=zob(Jo.SVG,arguments,"svg, width, height, bitmap, splitTypes, geometric, showControls, interactive, style, group, inherit",this))return f;z_d("83.09"),this.group=u;var h,p,g,e,f=!1===c?{}:Jo.getStyle("SVG",this.group,d);function m(e){var t;r?h.bitmap?(h.svg=h.bitmap.svg,h.bitmap.addTo(h),e&&(z(),h.stage&&h.stage.update()),setTimeout(function(){h.dispatchEvent("ready"),h.dispatchEvent("complete")},20)):Jo.svgToBitmap(h.svg,function(e){h.bitmap=e,h.bitmap.addTo(h),z(),h.dispatchEvent("ready"),h.dispatchEvent("complete"),h.stage&&h.stage.update()}):(h.bitmap&&(h.svg=h.bitmap.svg),o.match(/<svg/i)||g&&"SVG"==g.type||e?(new Jo.SVGContainer(h.svg,i,l,a,s,c,u).loop(function(e){e&&e.addTo(h)},!0),e&&(z(),h.stage&&h.stage.update()),setTimeout(function(){h.dispatchEvent("ready"),h.dispatchEvent("complete")},20)):(t=Jo.asset(o)).on("complete",function(){new Jo.SVGContainer(t,i,l,a,s,c,u).loop(function(e){e&&e.addTo(h)},!0),z(),h.dispatchEvent("ready"),h.dispatchEvent("complete"),h.stage&&h.stage.update()}))}function z(){if(zot(t)&&zot(n)&&h.setBounds(null),h.type="SVG",h.commands)for(var e=0;e<h.commands.length;e++)(h.commands[e][2]?h:Jo)[h.commands[e][0]].apply(h,h.commands[e][1]);h.commands=null}zot(o)&&(o=null!=f.svg?f.svg:null),zot(o)?zon&&zogy("ZIM SVG - needs a svg value"):(zot(r)&&(r=null==f.bitmap||f.bitmap),zot(i)&&(i=null!=f.splitTypes&&f.splitTypes),zot(l)&&(l=null==f.geometric||f.geometric),zot(a)&&(a=null!=f.showControls&&f.showControls),zot(s)&&(s=null==f.interactive||f.interactive),this.zimContainer_constructor(t,n),h=this,r&&(this.mouseChildren=!1),p=o,o=Jo.Pick.choose(o),this.type=t&&n?"ACWD":"AC",(g=Jo.assets[o])&&(h.src=g.src,h.file=g.file,h.item=g.item,h.svg=g.svg),g&&"Bitmap"==g.type?(h.type="SVG",h.bitmap=g.clone(),m()):g&&"AC"==g.type?g.on("complete",function(){h.type="SVG",h.bitmap=g.bitmap.clone(),m(zot(t)&&zot(n))}):g&&"ACWB"==g.type?(zot(t)&&zot(n)&&h.setBounds(0,0,g.width,g.height),g.on("complete",function(){h.type="SVG",h.bitmap=g.bitmap.clone(),m()})):g&&"SVG"==g.type?(h.type="SVG",g.bitmap?h.bitmap=g.bitmap.clone():h.bitmap=g.clone(),m()):(o&&o.match(/<svg/i)&&(h.svg=o),h.svg&&h.svg.match(/<svg/i)?(h.type="SVG",m()):(e=Jo.asset(o)).on("complete",function(){h.type="SVG",e.bitmap&&(h.src=e.bitmap.src,h.file=e.bitmap.file,h.item=e.bitmap.item,h.svg=e.bitmap.svg,h.bitmap=e.bitmap.clone()),m(zot(t)&&zot(n))})),!(h.keyOut=function(e,t,o){return"AC"==h.type&&WW.zdf?WW.zdf.ac("keyOut",arguments,h):(h.bitmap&&h.bitmap.keyOut(e,t,o),h.stage&&h.stage.update()),h})!==c&&Jo.styleTransforms(this,f),h.clone=function(e){return this.cloneProps(new Jo.SVG(e?o:p,t,n,r,i,l,a,s,c,this.group,d))})},Jo.extend(Jo.SVG,Jo.Container,["clone"],"zimContainer",!1),Jo.Speech=function(){z_d("83.095"),this.cjsEventDispatcher_constructor(),this.type="Speech";var e,n,a=this;"ios"!=M&&(e=WW.SpeechRecognition||WW.webkitSpeechRecognition,WW.SpeechGrammarList||WW.webkitSpeechGrammarList,WW.SpeechRecognitionEvent||WW.webkitSpeechRecognitionEvent,(n=this.recognition=new e).continuous=!1,n.lang=this.language="en-US",n.interimResults=!0,n.maxAlternatives=1,n.addEventListener("result",function(e){var t=new createjs.Event("result");t.words=e.results[0][0].transcript,t.confidence=e.results[0][0].confidence,a.dispatchEvent(t)}),n.addEventListener("speechend",function(e){n.stop(),a.dispatchEvent(e)}),n.addEventListener("error",function(e){a.dispatchEvent(e)})),this.listen=function(t,o){if("ios"==M)return zogy("not supported on iOS Web"),this;zot(t)&&(t=!0),n.interimResults=this.interim=t,zot(o)&&(n.lang=this.language);try{a.listenInterval&&clearInterval(a.listenInterval),n.start()}catch(e){a.listenInterval=setInterval(function(){a.listen(t,o)},200)}return this},this.stopListening=function(){return n&&n.stop(),this},this.talk=function(e,t,o,n,r,i){if(l=zob(this.talk,arguments,"text, voice, volume, lang, rate, pitch"))return l;if("undefined"!=typeof speechSynthesis&&!zot(e)){var l=new SpeechSynthesisUtterance;return l.addEventListener("start",function(e){a.dispatchEvent(e)}),l.addEventListener("end",function(e){a.dispatchEvent(e)}),l.addEventListener("error",function(e){a.dispatchEvent(e)}),t&&"string"==typeof t&&a.voiceLookup&&(t=a.voiceLookup[t]),zot(o)&&(o=1),zot(i)&&(i=1),zot(r)&&(r=1),l.text=e,l.voice="ios"==M?null:t,l.lang=n,l.volume=o,l.rate=r,l.pitch=i,speechSynthesis.speak(l),l}},this.stopTalking=function(){speechSynthesis&&speechSynthesis.cancel()},this.pauseTalking=function(){speechSynthesis&&speechSynthesis.pause()},this.resumeTalking=function(){speechSynthesis&&speechSynthesis.resume()},this.getVoices=function(){if("undefined"!=typeof speechSynthesis){var e=a.voiceObjects=speechSynthesis.getVoices();a.voices=[],a.voiceLanguages=[],a.voiceLookup={};for(var t=0;t<e.length;t++)a.voices.push(e[t].name),a.voiceLanguages.push(e[t].lang),a.voiceLookup[e[t].name]=e[t];return a}},"undefined"!=typeof speechSynthesis&&void 0!==speechSynthesis.onvoiceschanged&&speechSynthesis.addEventListener("voiceschanged",function(e){a.getVoices(),a.dispatchEvent(e)})},Jo.extend(Jo.Speech,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),Jo.PermissionAsk=function(o,n,e,t,r,i,l){var a;if(a=zob(Jo.PermissionAsk,arguments,"callback, permissionType, color, backgroundColor, style, group, inherit",this))return a;z_d("83.01"),this.group=i;l=!1===r?{}:Jo.getStyle("PermissionAsk",this.group,l);if(zot(n)&&(n=null!=l.permissionType?l.permissionType:"deviceorientation"),this.permissionType=n,!zot(o)){zot(e)&&(e=null!=l.color?l.color:Jo.dark),zot(t)&&(t=null!=l.backgroundColor?l.backgroundColor:Jo.lighter),this.zimPane_constructor("",t,e,200,200,!1,null,!0,100,black.toAlpha(.3),null,null,null,!1,!1),this.type="PermissionAsk";var s=this;Style.addGroup("PermissionAsk",{width:100,color:e,rollColor:t,corner:10,backgroundColor:Jo.faint,rollBackgroundColor:e,borderColor:e,borderWidth:2});var c=n;s.yes=new Jo.Button({label:"YES",group:"PermissionAsk"}).sca(.65).pos(0,30,CENTER,TOP,this).tap(function(){var e;s.hide(!0),"mic"==c||"cam"==c||"miccam"==c?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:"mic"==c||"miccam"==c,video:"cam"==c||"miccam"==c}).then(function(e){o(e)}).catch(function(e){o(!1)}):o(!1):(e=DeviceMotionEvent,"devicemotion"!=c&&(e=DeviceOrientationEvent),e.requestPermission().then(function(e){o("denied"!=e)}))});var u,t={deviceorientation:"sensors",devicemotion:"sensors",mic:"mic",cam:"cam",miccam:"mic/cam"};if(s.label=new Jo.Label("Use "+(t[c]||"feature")+"?",30,null,e,null,null,null,"center").sca(.9).centerReg(this),s.no=new Jo.Button({label:"NO",group:"PermissionAsk"}).sca(.65).pos(0,30,CENTER,BOTTOM,this).tap(function(){s.hide(!1),o(!1)}),new Jo.Circle(110,Jo.clear,e,1).center(this).alp(.8),new Jo.Circle(120,Jo.clear,e,1).center(this).alp(.5),new Jo.Circle(130,Jo.clear,e,1).center(this).alp(.2),!1!==r&&Jo.styleTransforms(this,l),"mic"==c||"cam"==c||"miccam"==c)return"ios"==M?void s.show():void(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:"mic"==c||"miccam"==c,video:"cam"==c||"miccam"==c}).then(function(e){o(e)}).catch(function(e){o(!1)}):o(!1));"undefined"!=typeof DeviceOrientationEvent&&DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?s.show():(u=!1,WW.addEventListener(n,function e(t){"deviceorientation"==n?null==t.alpha||0==t.alpha&&0==t.beta&&0==t.gamma?o(!1):o(!0):!t.acceleration||null==t.acceleration.x||0==t.acceleration.x&&0==t.acceleration.y&&0==t.acceleration.z?o(!1):o(!0);u=!0;WW.removeEventListener(n,e)}),setTimeout(function(){u||o(!1)},100))}},Jo.extend(Jo.PermissionAsk,Jo.Pane,null,"zimPane",!1),Jo.colorsHex=["#fb4758","#fa8072","#f58e25","#ebcb35","#acd241","#50c4b7","#993399","#e472c4","#d1a170","#112233","#000000","#111111","#222222","#333333","#444444","#555555","#555555","#666666","#777777","#888888","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],Jo.colors=["red","salmon","orange","yellow","green","blue","purple","pink","brown","interstellar","black","darker","licorice","dark","charcoal","grey","gray","granite","tin","pewter","silver","fog","mist","light","moon","lighter","white","faint","clear"],z_i=0;z_i<Jo.colors.length;z_i++)Jo[Jo.colors[z_i]]=Jo.colorsHex[z_i];return String.prototype.darken=function(e){return Jo.darken(this,e)},String.prototype.lighten=function(e){return Jo.lighten(this,e)},String.prototype.toColor=function(e,t){return Jo.toColor(this,e,t)},String.prototype.toAlpha=function(e){return Jo.toAlpha(this,e)},Jo.FIT="fit",Jo.FILL="fill",Jo.FULL="full",Jo.LEFT="left",Jo.RIGHT="right",Jo.CENTER="center",Jo.MIDDLE="middle",Jo.START="start",Jo.END="end",Jo.TOP="top",Jo.BOTTOM="bottom",Jo.OVER="over",Jo.UNDER="under",Jo.HORIZONTAL="horizontal",Jo.VERTICAL="vertical",Jo.BOTH="both",Jo.RANDOM="random",Jo.RADIAL="radial",Jo.UP="up",Jo.DOWN="down",Jo.NEXT="next",Jo.PREV="prev",Jo.AUTO="auto",Jo.AVE="ave",Jo.DEFAULT="default",Jo.ALL="all",Jo.NONE="none",Jo.GET="get",Jo.POST="post",Jo.LOCALSTORAGE="localStorage",Jo.SOCKET="socket",Jo.TO="to",Jo.FROM="from",Jo.SINE="sine",Jo.SQUARE="square",Jo.TRIANGLE="triangle",Jo.SAW="saw",Jo.SAWTOOTH="saw",Jo.ZAP="zap",Jo.IGNORE="ignore",Jo.DISTILL=!1,Jo.distillery=[],Jo.distill=function(){!WW.zns&&Jo&&(Jo.DISTILL||WW.DISTILL)&&Jo.distillery.push("83.3","83.35"),0<Jo.distillery.length?(Jo.distillery=Jo.distillery.filter(function(e,t,o){return o.indexOf(e)===t}),zogy("zim.distill() - go to https://zimjs.com/distill and enter the following:"),zog(Jo.distillery.join(" "))):zogy("must set zim.DISTILL = true;")},Jo.parseAudioSprite=function(e,t){if(z_d("83.25"),!(zot(e)||zot(e.resources)||zot(e.spritemap))){var o,n,r=e.resources[0],i=e.spritemap,l=[],r={src:r,data:{}};for(n in i)o=i[n],l.push({id:n,startTime:Math.round(1e3*o.start),duration:Math.round(1e3*(o.end-o.start))});return r.data.audioSprite=l,t&&zogy(JSON.stringify(r)),r}},Jo.previewAudioSprite=function(e,t,o){if(z_d("83.26"),!zot(e)){if(zot(t)&&(t=3),void 0===o){if(zot(WW.zdf))return;o=WW.zdf}var n=o.width,e=e,r=[],i=[];if(e.constructor=={}.constructor){e.resources&&(e=Jo.parseAudioSprite(e)),e.audioSprite?Jo.loop(e.audioSprite,function(e){r.push(e[0].substr(0,t)),i.push(e[0])}):e.data&&e.data.audioSprite&&Jo.loop(e.data.audioSprite,function(e){r.push(e.id.substr(0,t)),i.push(e.id)});var l=new Jo.Tabs({tabs:r,width:n,currentEnabled:!0}).addTo();return l.on("change",function(){o.asset(i[l.index]).play()}),l}}},Jo.svgToBitmap=function(e,t,o,n,r){var i,l,a,s,c,u,d;z_d("83.27"),zot(e.draggable)||(l=new DOMParser,e=(e=e.innerHTML?l.parseFromString(e.innerHTML,"text/xml"):e).getElementsByTagName("svg")?e.getElementsByTagName("svg")[0]:null),XMLSerializer||!zon?((i="string"==typeof e?e:(new XMLSerializer).serializeToString(e))&&(1<(a=(i=i.replace(/https:\/\/www.w3/i,"http://www.w3")).split(">")[0]).length&&1==a.split(/width/i).length&&(e=l=100,1<(a=a.split(/viewBox/i)).length&&(!(a=a[1].split('"')[1])||1<(a=a.split(" ")).length&&(l=a[a.length-2],e=a[a.length-1])),i=i.replace(/svg /i,'svg  width="'+l+'" height="'+e+'" ')),i.match(/xmlns/i)||(i=i.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))),s=self.URL||self.webkitURL||self,c=setTimeout(function(){zogy("ZIM SVG() could not be made"),t(new Jo.Bitmap,r),s.revokeObjectURL(d)},100),(u=new Image).onload=function(){clearTimeout(c);var e=new Jo.Bitmap(u,o,n);t(e,r),s.revokeObjectURL(d)},d=document&&document.Blob?s.createObjectURL(new document.Blob([i],{type:"image/svg+xml"})):s.createObjectURL(new Blob([i],{type:"image/svg+xml"})),u.src=d):zogy("ZIM svgToBitmap() - sorry, not supported in Browser")},Jo.makeContent=function(e,t,o){var n;if(z_d("83.29"),zot(o)&&(o=Jo.dark),"string"==typeof e||"number"==typeof e)e=this.message=new Jo.Label(e,null,null,o);else if(e.constructor=={}.constructor){var r=e;r.buttonScale||(r.buttonScale=.5),zot(r.spacingH)&&(r.spacingH=20*r.buttonScale),zot(r.spacingV)&&(r.spacingV=20);var i=r.spacingH,l=r.spacingV;r.align||(r.align="center"),e=new Jo.Container;var a,s=new Container(10,l).addTo(e);if(r.header&&r.header.pos(0,l,"left","top",e),r.message&&(a=new Jo.Label({text:r.message,color:zot(r.color)?o:r.color,align:r.align}).reg(LEFT,TOP).loc(0,e.height+(r.header?l:0),e)),r.display&&r.display.pos(0,-r.display.height-(r.header||r.message?l:0),"left","bottom",e),r.buttons){Array.isArray(r.buttons)||(r.buttons=[r.buttons]);r.length;for(var c=(new Jo.Container).loc(0,e.height+(r.header||r.message||r.display?l:0),e),u=0;u<r.buttons.length;u++){var d=r.buttons[u],h=d.call||function(){};d.button||(d.button=new Jo.Button({width:d.width,label:d.label,backgroundColor:d.backgroundColor||d.bgColor,color:d.color,rollBackgroundColor:d.rollBackgroundColor||d.rollBgColor,rollColor:d.rollColor})),d.button.call=h,d.button.sca(r.buttonScale).loc(0==u?0:c.width+i,0,c).tap(function(e){e.target.call(e.target)})}}u=e.getBounds();for(e.setBounds(u.x,u.y,u.width,u.height),n=0;n<e.numChildren;n++){var p=e.getChildAt(n);p.lastY=p.y,"center"==r.align?p.center(e).loc(null,p.lastY):"right"==r.align&&p.pos(0,null,"right")}if(t&&"number"==typeof t&&(e.width=Math.min(e.width,t-2*i-(!0===r.scrollBar?12:0<r.scrollBar?r.scrollBar:0))),new Jo.Container(10,l).pos(0,-s.height,"center","bottom",e).bot(),e.setBounds(null),s.top(),e.config=r,e.header=r.header,e.message=a,e.text=r.message,e.display=r.display,r.buttons)for(e.buttons=[],n=0;n<c.numChildren;n++)e.buttons.push(c.getChildAt(n))}return e},Jo}(zim||{});function z_d(e){zim&&(zim.DISTILL||WW.DISTILL)&&zim.distillery.push(e)}function zimify(n,e,t,o,r,i){if(z_d("83.3"),n&&n.noDrag)return n;!0!==i&&(i=null);var l,a,s={drag:function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z){return isDUO(arguments)?(e.obj=this,zim.drag(e)):zim.drag(this,e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z)},noDrag:function(e){return zim.noDrag(this,e)},mouse:function(){return zim.mouse(this)},noMouse:function(){return zim.noMouse(this)},effect:function(e,t,o,n,r){return zim.effect(this,e,t,o,n,r)},noEffect:function(e,t){return zim.noEffect(this,e,t)},updateEffects:function(e){return zim.updateEffects(this,e)},wire:function(e,t,o,n,r,i,l){return isDUO(arguments)?(e.obj=this,zim.wire(e)):zim.wire(this,e,t,o,n,r,i,l)},noWire:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.noWire(e)):zim.noWire(this,e,t,o)},wired:function(e,t,o,n,r,i,l){return isDUO(arguments)?(e.obj=this,zim.wired(e)):zim.wired(this,e,t,o,n,r,i,l)},noWired:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.noWired(e)):zim.noWired(this,e,t,o)},bind:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.bind(e)):zim.bind(this,e,t,o,n,r)},noBind:function(e,t,o,n){return isDUO(arguments)?(e.obj=this,zim.noBind(e)):zim.noBind(this,e,t,o,n)},dragBoundary:function(e){return zim.dragBoundary(this,e)},dragRect:function(e){return zim.dragBoundary(this,e)},transform:function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O){return isDUO(arguments)?(e.obj=this,zim.transform(e)):zim.transform(this,e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O)},setSwipe:function(e){return zim.setSwipe(this,e)},gesture:function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g){return isDUO(arguments)?(e.obj=this,zim.gesture(e)):zim.gesture(this,e,t,o,n,r,i,l,a,s,c,u,d,h,p,g)},noGesture:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.noGesture(e)):zim.noGesture(this,e,t,o)},gestureBoundary:function(e,t){return zim.gestureBoundary(this,e,t)},gestureRect:function(e,t){return zim.gestureBoundary(this,e,t)},addPhysics:function(e,t,o,n,r,i,l,a,s,c,u){return isDUO(arguments)?(e.obj=this,zim.addPhysics(e)):zim.addPhysics(this,e,t,o,n,r,i,l,a,s,c,u)},removePhysics:function(){return zim.removePhysics(this)},hitTestPoint:function(e,t,o){return zim.hitTestPoint(this,e,t,o)},hitTestReg:function(e,t){return zim.hitTestReg(this,e,t)},hitTestRect:function(e,t,o,n){return zim.hitTestRect(this,e,t,o,n)},hitTestCircle:function(e,t,o,n){return zim.hitTestCircle(this,e,t,o,n)},hitTestCircleRect:function(e,t){return zim.hitTestCircleRect(this,e,t)},hitTestCircles:function(e,t){return zim.hitTestCircles(this,e,t)},hitTestBounds:function(e,t,o){return zim.hitTestBounds(this,e,t,o)},boundsToGlobal:function(e,t,o,n){return zim.boundsToGlobal(this,e,t,o,n)},resetBounds:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.resetBounds(e)):zim.resetBounds(this,e,t,o,n,r)},hitTestPath:function(e,t,o,n,r){return zim.hitTestPath(this,e,t,o,n,r)},hitTestGrid:function(e,t,o,n,r,i,l,a,s,c,u,d){return zim.hitTestGrid(this,e,t,o,n,r,i,l,a,s,c,u,d)},animate:function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,F,H,V,G,U,q,Q,Z,K,J,$,ee,te,oe,ne,re){return e&&(e.props||e.obj)&&isDUO(arguments)?(e.target=this,zim.animate(e)):zim.animate(this,e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k,T,A,P,E,S,B,W,I,M,O,j,L,D,_,R,Y,X,N,F,H,V,G,U,q,Q,Z,K,J,$,ee,te,oe,ne,re)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f){return isDUO(arguments)?(e.target=this,zim.wiggle(e)):zim.wiggle(this,e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f)},loop:function(e,t,o,n,r,i,l,a,s,c){return isDUO(arguments)?(e.obj=this,zim.loop(e)):zim.loop(this,e,t,o,n,r,i,l,a,s,c)},copyMatrix:function(e){return zim.copyMatrix(this,e)},duplicate:function(e){return zim.duplicate(this,e)},cur:function(e){return zim.cur(this,e)},sha:function(e,t,o,n){return zim.sha(this,e,t,o,n)},pos:function(e,t,o,n,r,i,l,a,s,c){return isDUO(arguments)?(e.obj=this,zim.pos(e)):zim.pos(this,e,t,o,n,r,i,l,a,s,c)},loc:function(e,t,o,n,r,i,l){return isDUO(arguments)?(e.obj=this,zim.loc(e)):zim.loc(this,e,t,o,n,r,i,l)},mov:function(e,t){return isDUO(arguments)?(e.obj=this,zim.mov(e)):zim.mov(this,e,t)},top:function(){return zim.top(this)},bot:function(){return zim.bot(this)},ord:function(e){return zim.ord(this,e)},dep:function(e){return zim.dep(this,e)},nam:function(e){return zim.nam(this,e)},alp:function(e){return zim.alp(this,e)},vis:function(e){return zim.vis(this,e)},ble:function(e){return zim.ble(this,e)},dye:function(e){return zim.dye(this,e)},hov:function(e,t){return zim.hov(this,e,t)},rot:function(e,t,o){return zim.rot(this,e,t,o)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t,o){return zim.reg(this,e,t,o)},sca:function(e,t){return zim.sca(this,e,t)},scaleTo:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.scaleTo(e)):zim.scaleTo(this,e,t,o,n,r)},fit:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.fit(e)):zim.fit(this,e,t,o,n,r)},outline:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.outline(e)):zim.outline(this,e,t,o)},blendmodes:function(e){return zim.blendmodes(this,e)},addTo:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.addTo(e)):zim.addTo(this,e,t,o)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},movement:function(e,t){return zim.movement(this,e,t)},noMovement:function(){return zim.noMovement(this)},tap:function(e,t,o,n,r,i,l,a,s,c,u){return isDUO(arguments)?(e.obj=this,zim.tap(e)):zim.tap(this,e,t,o,n,r,i,l,a,s,c,u)},noTap:function(){return zim.noTap(this)},hold:function(e,t,o,n){return zim.hold(this,e,t,o,n)},noHold:function(){return zim.noHold(this)},change:function(e,t){return zim.change(this,e,t)},noChange:function(){return zim.noChange(this)},centerReg:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.centerReg(e)):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.center(e)):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t,o,n){return isDUO(arguments)?(e.obj=this,zim.expand(e)):zim.expand(this,e,t,o,n)},setMask:function(e,t){return zim.setMask(this,e,t)},cloneProps:function(e){return e.type=this.type,e.group=this.group,e.style=this.style,e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.mouseChildren=this.mouseChildren,e.tickEnabled=this.tickEnabled,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.skewX=this.skewX,e.skewY=this.skewY,e.name&&(e.name=this.name),e.regX=this.regX*e.width/(this.width||1),e.regY=this.regY*e.height/(this.height||1),e.visible=this.visible,e.shadow=this.shadow,this.type&&"Shape"!=this.type||zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,this.filters&&0<this.filters.length&&(e.filters=this.filters.slice(0),e.cache()),e.mask=this.mask,e.hitArea=this.hitArea,this.type&&"Shape"!=this.type&&"Blob"!=this.type&&"Squiggle"!=this.type||!this._bounds||e.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),e},cloneChildren:function(e,t){e.children.length&&e.removeAllChildren();for(var o=e.children,n=0,r=this.children.length;n<r;n++){var i=this.children[n].clone(t);i.parent=e,o.push(i)}return e}};if(!zot(i)){for(var c in i=[],s)i.push(c);return i}for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l]);return zim&&(n.cjsLocalToGlobal=n.localToGlobal,n.cjsGlobalToLocal=n.globalToLocal,n.cjsLocalToLocal=n.localToLocal,n.localToGlobal=function(e,t){return zim.localToGlobal(e,t,n,n.cjsLocalToGlobal)},n.globalToLocal=function(e,t){return zim.globalToLocal(e,t,n,n.cjsGlobalToLocal)},n.localToLocal=function(e,t,o){return zim.localToLocal(e,t,o,n)},n.hueBatch||zim.displayBase(n)),(zot(e)||zot(t)||zot(o)||zot(r))&&(zot(e)||zot(t)||(o=e,r=t,t=e=0)),zot(e)||zot(t)||zot(o)||zot(r)?null!=n.nominalBounds&&n.getBounds&&null==n.getBounds()&&(a=n.nominalBounds,n.setBounds(a.x,a.y,a.width,a.height)):n.setBounds(e,t,o,r),n.parent&&n.parent.actionFrames&&!n.parent.addPhysics&&zimify(n.parent,zdf?zdf.width:null,zdf?zdf.height:null),n}function zimplify(e){z_d("83.35"),document.Window=Window,document.Blob=Blob,zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t,o=zimify(null,null,null,null,null,!0),n=["loop","stopAnimate","pauseAnimate","animate","wiggle","wire","wired"];for(t in zim)(-1==o.indexOf(t)||0<=n.indexOf(t))&&-1==e.indexOf(t)&&(window[t]=zim[t])}zim.fastFrame=function(e,t){if(z_d("83.355"),createjs=e,zot(WW.zdf))return t.frame=new zim.Frame({shim:{stage:t,canvas:t.canvas}}),WW.zimDefaultFrame=WW.zdf=t.frame,zim.scaX=createjs.stageTransformable?1:t.scaleX,zim.scaY=createjs.stageTransformable?1:t.scaleY,t.frame},zim.addWires=function(e){return isDUO(arguments)?(e.obj=this,zim.addWires(e)):(z_d("83.365"),e.wire=function(){return Array.prototype.unshift.call(arguments,e),zim.wire.apply(null,arguments),e},e.noWire=function(){return Array.prototype.unshift.call(arguments,e),zim.noWire.apply(null,arguments),e},e.wired=function(){return Array.prototype.unshift.call(arguments,e),zim.wired.apply(null,arguments),e},e.noWired=function(){return Array.prototype.unshift.call(arguments,e),zim.noWired.apply(null,arguments),e},e)},zim.setBlurDetect=function(){z_d("83.36"),zim.blurCheck=!0,zim.pauseAnimateOnBlur=!0,zim.pauseOnBlur=[],zim.blurDetect=function(){var t,o,e={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(t in e)if(t in document){o=e[t];break}return function(e){return e&&document.addEventListener(o,e),!document[t]}}(),zim.blurDetect(function(){var o,n,r;if(zim.blurDetect())setTimeout(function(){if(zim.pauseOnBlur)for(o=0;o<zim.pauseOnBlur.length;o++)(n=zim.pauseOnBlur[o]).pauseOnBlurPaused||n.pause(!1);if(zim.pauseAnimateOnBlur&&zim.animatedObjects){var e=[];for(o=0;o<zim.animatedObjects.objects.length;o++){n=zim.animatedObjects.objects[o];var t=zim.copy(n.tweenStates);if(n.tweenStates)if(zot(t.all)||t.all){if(n.pauseAnimate(!1),!n.dynamicAnimation)for(r in t)"all"!=r&&!1===t[r]&&n.pauseAnimate(!0,r)}else for(r in n.pauseAnimate(!0),t)"all"!=r&&t[r]&&n.pauseAnimate(!1,r);else n.pauseAnimate(!1);"Sprite"==n.type&&(n.paused=!0),n.parent&&"Particles"==n.parent.type&&n.parent.emitter&&n.parent.emitter.focusWarm&&(n.parent.emitter,e.indexOf(n.parent.emitter)<0&&e.push(n.parent.emitter))}if(0<e.length)for(o=0;o<e.length;o++)e[o].doWarm(e[o].focusWarm),e[o].clearPool()}},300),WW.zdf&&WW.zdf.dispatchEvent("tabfocus");else{if(zim.pauseOnBlur)for(o=0;o<zim.pauseOnBlur.length;o++)(n=zim.pauseOnBlur[o]).pauseOnBlurPaused=n.paused,n.pause(!0);zim.pauseAnimateOnBlur&&zim.animatedObjects&&zim.pauseAnimate(!0,"pauseOnBlur"),WW.zdf&&WW.zdf.dispatchEvent("tabblur")}})},WW.ZIMONON=!1,zim=function(E){E.ZIMON={stringify:function(i,l){if(z_d("83.39"),!zot(i)){if(ZIMONON)return function o(n,e,t){if(zot(n))return;{var r;Array.isArray(n)?E.loop(n,function(e,t){o(e,n,t)}):n.constructor=={}.constructor?E.loop(n,function(e,t){o(t,n,e)}):n.type?(r={zimon:n.type},n.arguments&&(r.args=Array.prototype.slice.call(n.arguments),o(r.args)),"series"==n.type&&(r.args=Array.prototype.slice.call(n.array),o(r.args)),l&&l[n.type]&&l[n.type].props&&(r.props=[],E.loop(l[n.type].props,function(e){r.props.push(n[e])})),e?e[t]=r:i=r):"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n&&null!==n&&zon&&zogy("ZIMON - potentially bad JSON value"+n)}}(i=E.copy(i)),JSON.stringify({obj:i,key:l,zimon:1,info:"https://zimjs.com/zimon/"});zon&&zogy("ZIMON - set ZIMONON=true before using ZIMON.stringify()")}},parse:function(e,s){if(z_d("83.39"),!zot(e)){var e=JSON.parse(e),c=e.obj;return s=e.key,function o(n,e,t){if(zot(n))return;{var r,i,l,a;Array.isArray(n)?E.loop(n,function(e,t){o(e,n,t)}):zot(n.zimon)&&n.constructor=={}.constructor?E.loop(n,function(e,t){o(t,n,e)}):n.zimon&&(r=n.zimon,l="",s&&(s[r]&&s[r].scope?l=s[r].scope+".":s.scope&&(l=s.scope+".")),i=u(l+r),zot(l=n.args)&&(l=[]),o(l),a="series"==n.type?E.series(l):i?new(i.bind.apply(i,[null].concat(Array.prototype.slice.call(l)))):null,e?e[t]=a:c=a,s&&s[r]&&s[r].props&&a&&E.loop(s[r].props,function(e,t){zot(n.props[t])||(a[e]=n.props[t])}))}}(c),c}function u(t){try{return Function("return("+t+")")()}catch(e){return zon&&zogy("ZIMON - bad function scope or name: "+t),null}}}},E.Wonder=function(o,n,r,i,e){var t,l,a,s,c,u,d,h,p;if(t=zob(E.Wonder,arguments,"wid, client, app, notes, server",this))return t;function g(){0<a.length&&(E.async(e+"?wonder="+JSON.stringify(a)),a=[],c++)}function f(e,t){if(!zot(e))return!l[t+"sOff"][e];zogy("zim.Wonder "+t+" - please provide a keyword")}z_d("82"),zot(o)?zogy("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)"):(zot(e)&&(e="https://wonder.zimjs.org/wonder"),l=this,zot(E.wonderSession)&&(E.wonderSession="W"+E.rand(1e5,999999)),a=[],s=setInterval(g,1e3),c=0,d=setInterval(function(){28<c&&(a.push({id:o,c:n,a:r,n:i,k:u,t:"e",v:"frequency max - terminated",s:E.wonderSession}),zogy("zim.Wonder() - frequency max - terminated"),l.dispose()),c=0},3e4),this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(e){f(e,"count")&&(u=e,a.push({id:o,c:n,a:r,n:i,k:e,t:"c",v:1,s:E.wonderSession}))},h={},this.timeStart=function(e){f(e,"time")&&(l.timeEnd(e),h[u=e]=(new Date).getTime())},p={},this.timePause=function(e){f(e,"time")&&(p[e]||(p[e]=(new Date).getTime()))},this.timeUnpause=function(e){var t;f(e,"time")&&p[e]&&(t=(new Date).getTime()-p[e],h[e]&&(h[e]+=t),delete p[e])},this.timeEnd=function(e){var t;f(e,"time")&&h[e]&&(t=p[e]||(new Date).getTime(),t=Math.round((t-h[e])/1e3),delete p[e],delete h[e],a.push({id:o,c:n,a:r,n:i,k:e,t:"t",v:t,s:E.wonderSession}))},this.order=function(e,t){f(e,"order")&&(u=e,zot(t)?zogy("zim.Wonder order() - please provide an item"):a.push({id:o,c:n,a:r,n:i,k:e,t:"o",v:t,s:E.wonderSession}))},this.countOff=function(e){l.countsOff[e]=1},this.countOn=function(e){delete l.countOff[e]},this.timeOff=function(e){l.timesOff[e]=1},this.timeOn=function(e){delete l.timesOff[e]},this.orderOff=function(e){l.ordersOff[e]=1},this.orderOn=function(e){delete l.ordersOff[e]},this.dispose=function(){return g(),clearInterval(s),clearInterval(d),!0})},E.VERSION="017/zim",E.getLatestVersions=function(t){z_d("82.2");E.async("https://zimjs.com/live/getLatestVersions.php",function(e){t(JSON.parse(e))},"returnLatestVersions")},void 0!==createjs&&(E.PWA=function(t,e,o,n,r,i,l){var a;if(c=zob(E.PWA,arguments,"call, label, backgroundColor, color, backdropColor, pane, noScale",this))return c;z_d("82.4"),this.cjsEventDispatcher_constructor(),this.type="PWA";var s=this,c="ios"==WW.M?"In Safari, please add to\nhome screen as an app":"Please add to\nhome screen as an app";function u(){s.pane=a=i.show(),a.on("close",function(){t&&t.constructor===Function&&t(),s.scaleEvent&&e.off("resize",s.scaleEvent),s.dispatchEvent("ready"),WW.zdf.stage.update()});var e=e||WW.zdf;e&&!l&&(a.scaleTo(e.stage,105).center(),"full"!=e.scaling&&"tag"!=e.scaling||(s.scaleEvent=e.on("resize",function(){a.scaleTo(e.stage,105).center()})),e.stage.update())}zot(e)&&(e=new E.Label({text:c,align:E.LEFT,lineHeight:44,color:n})),zot(o)&&(o=E.yellow),zot(i)&&(i=new E.Pane({width:1200,height:230,content:e,backgroundColor:o,backdropColor:r}),r=new E.Container,new E.Shape(50,30).s(E.dark).ss(3,1,0,3).p("AAAj0IAAFJAA8hoIBuAAIAAFdIlTAAIAAldIBuAA").sca(1.7).addTo(r),new E.Shape(50,30).s(E.dark).ss(3,1,0,3).p("AhGAlIBGhGIBHBG").sca(1.7).addTo(r).mov(0,-38),(e=new E.Tile([r,e],2,1,20,0,!0)).width>.7*zdf.stage.width&&(e.width=.7*zdf.stage.width),e.setBounds(-90,-10,480,100),e.noMouse(),r.mov(-30,0),e.center(i)),M&&!(WW.matchMedia("(display-mode: fullscreen)").matches||WW.matchMedia("(display-mode: standalone)").matches||WW.navigator.fullscreen||WW.navigator.standalone||document.referrer.includes("android-app://"))?u():(t&&t.constructor===Function&&t(),setTimeout(function(){s.dispatchEvent("ready")},20)),this.show=function(){return u(),this}},E.extend(E.PWA,createjs.EventDispatcher,null,"cjsEventDispatcher",!1)),E.QR=function(e,t,o,n,r,i){if(l=zob(E.QR,arguments,"url, color, backgroundColor, size, clickable, correctLevel",this))return l;z_d("82.5"),zot(e)&&(e="https://zimjs.com"),zot(n)&&(n=256),zot(t)&&(t=E.black),zot(o)&&(o=E.white),zot(r)&&(r=!0),zot(i)&&(i=2);var l=document.createElement("div");"undefined"!=typeof QRCode?(i=new QRCode(l,{text:e,width:n,height:n,colorDark:t,colorLight:o,correctLevel:i}),this.zimBitmap_constructor(i._oDrawing._oContext.canvas),r&&this.cur().on("click",function(){zgo(e,"_blank")})):zogy("ZIM QR - needs qrcode.js library - see docs")},E.extend(E.QR,E.Bitmap,null,"zimBitmap",!1),E.GIF=function(e,t,o,n){var r,i,l,a,s,c,u;if(a=zob(E.GIF,arguments,"file, width, height, startPaused",this))return a;z_d("82.7"),"undefined"!=typeof gifler?(zot(t)&&(t=100),zot(o)&&(o=100),(r=this).paused=!1,this.zimBitmap_constructor(null,t,o),this.cache(),null!=WW.PATH&&(E.PATH=WW.PATH),a=e.match(/http/)||e.match(/^\//)?e:(E.PATH||"")+e,r.gifler=gifler(a).animate(this.cacheCanvas).then(function(e){r.animator=e,n&&(i=setInterval(function(){r.animator.running()&&(l=setTimeout(function(){r.animator.stop(),r.paused=!0},.1),clearInterval(i))},.05))}),r.ticker||(r.keyObj?(s=r.keyObj.color,c=r.keyObj.tolerance,u=r.keyObj.replacement,r.ticker=E.Ticker.add(function(){r.keyOut(s,c,u)})):r.ticker=E.Ticker.add(function(){})),r.keyOut=function(e,t,o){return r.ticker?(E.Ticker.remove(r.ticker),r.ticker=E.Ticker.add(function(){r.keyOut(e,t,o)})):r.keyObj={color:e,tolerance:t,replacement:o},r},this.pause=function(e){return zot(e)&&(e=!0),r.animator&&(i&&clearInterval(i),l&&clearTimeout(l),e&&r.animator.running()?(r.animator.stop(),E.Ticker.remove(r.ticker)):e||r.animator.running()||(r.animator.start(),E.Ticker.add(r.ticker))),r.paused=e,r},this.stop=function(){r.dispose()},this.reset=function(){return r.animator.reset(),r.paused&&(r.animator.start(),E.Ticker.add(r.ticker)),r},this.clone=function(){return this.cloneProps(new E.GIF(e,t,o,n))},this.dispose=function(){r.animator.stop(),r.parent&&r.removeFrom(),E.Ticker.remove(r.ticker),E.gD(this)}):zogy("ZIM GIF - needs gifler.js library - see docs")},E.extend(E.GIF,E.Bitmap,["clone","dispose","keyOut"],"zimBitmap",!1),E.Rive=function(e,t,o,n,r,i,l,a,s,c,u,d,h,p,g,f,m,z,y,b,v,w,C,x,k){var T;if(T=zob(E.Rive,arguments,"width, height, src, stateMachines, artboard, animations, autoplay, layout, buffer, file, useOffscreenRenderer, enableRiveAssetCDN, shouldDisableRiveListeners, isTouchScrollEnabled, automaticallyHandleEvents, onLoad, onLoadError, onPlay, onPause, onStop, onLoop, onStateChange, onAdvance, assetLoader, canvas",this))return T;z_d("82.75");var A=E.Blob;WW.Blob=document.Blob;zot(k)&&(zot(e)&&(e=500),zot(t)&&(t=e),(k=document.createElement("canvas")).setAttribute("width",e),k.setAttribute("height",t),document.body.appendChild(k)),zot(l)&&(l=!0),(this.canvas=k).style.visibility="hidden",k.style.position="absolute",k.style.top="0px";x={canvas:k,src:o,buffer:s,file:c,artboard:r,animations:i,stateMachines:n,layout:a,autoplay:l,useOffscreenRenderer:u,enableRiveAssetCDN:d,shouldDisableRiveListeners:h,isTouchScrollEnabled:p,automaticallyHandleEvents:g,onLoad:null,onLoadError:m,onPlay:z,onPause:y,onStop:b,onLoop:v,onStateChange:w,onAdvance:C,assetLoader:x};this.super_constructor(x),this.type="Rive";var P=this;this.display=new E.Bitmap(k),E.Ticker.always(),this.on("load",function(){P.playingStateMachineNames&&1<=P.playingStateMachineNames.length&&(P.inputs=P.stateMachineInputs(P.playingStateMachineNames[0]),P.inputs&&1<=P.inputs.length&&(P.input=P.inputs[0])),f&&f(),zns||(WW.Blob=A)}),this.dispose=function(){return this.cleanup(),!0}},"undefined"!=typeof rive&&E.extend(E.Rive,rive.Rive),E.RiveListener=function(g,f,e,m){var t;if(t=zob(E.RiveListener,arguments,"src, damp, canvas, wasm",this))return t;z_d("82.77");var z=e;zot(z)&&(z=document.createElement("canvas"),document.body.appendChild(z)),(this.canvas=z).style.visibility="hidden",z.style.position="absolute",z.style.top="0px",this.type="RiveListener";var y=this;zot(m)&&(m="https://unpkg.com/@rive-app/canvas-advanced@2.20.0/rive.wasm"),zot(f)&&(f=.2);y.pauseMove=!1,y.pauseDown=!1,y.pauseUp=!1,async function(){const n=y.rive=await RiveCanvas({locateFile:e=>m}),r=y.renderer=n.makeRenderer(z);var e=await(await fetch(new Request(g))).arrayBuffer();const t=y.file=await n.load(new Uint8Array(e)),i=y.artboards=[],l=y.animations=[],a=y.stateMachines=[];for(let e=0;e<t.artboardCount();e++){const h=t.artboardByIndex(e);i.push(h);for(let e=0;e<h.animationCount();e++){var o=new n.LinearAnimationInstance(h.animationByIndex(e),h);l.push(o)}for(let e=0;e<h.stateMachineCount();e++){const p=new n.StateMachineInstance(h.stateMachineByIndex(e),h);p.artboard=h,a.push(p)}}e=0<i.length?i[0].bounds:{minX:0,minY:0,maxX:500,maxY:500},z.width=e.maxX-e.minX,z.height=e.maxY-e.minY;let s=0;n.requestAnimationFrame(function e(t){s=s||t;var o=(t-s)/1e3;s=t,E.loop(a,e=>{try{e.pointerMove(c,u)}catch(e){}}),r.clear(),E.loop(l,e=>{e.advance(o),e.apply(1)}),E.loop(a,e=>{e.advance(o)}),E.loop(i,e=>{e.advance(o)}),r.save(),E.loop(i,e=>{e.advance(o),r.align(n.Fit.contain,n.Alignment.center,{minX:0,minY:0,maxX:z.width,maxY:z.height},e.bounds),e.draw(r)}),r.restore(),n.requestAnimationFrame(e)}),y.display=new E.Bitmap(z),y.display.on("mousedown",()=>{var o;!0!==y.pauseDown&&(o=y.display.globalToLocal(d.mouseX,d.mouseY),E.loop(a,e=>{e.pointerDown(o.x,o.y);const t=new createjs.Event("pointerdown");t.stateMachine=e,t.input=e.input(0),y.dispatchEvent(t)}))}),y.display.on("pressup",()=>{var o;!0!==y.pauseUp&&(o=y.display.globalToLocal(d.mouseX,d.mouseY),E.loop(a,e=>{e.pointerUp(o.x,o.y);var t=new createjs.Event("pointerup");t.stateMachine=e,t.input=e.input(0),y.dispatchEvent(t)}))}),y.input=y.stateMachines[0].input(0),y.dispatchEvent("complete"),y.dispatchEvent("ready");let c=0,u=0,d;y.display.added(e=>{const o=new E.Damp(0,f),n=new E.Damp(0,f);d=e.frame,E.Ticker.add(()=>{var e,t;!0!==y.pauseMove&&(e=(t=y.display.globalToLocal(d.mouseX,d.mouseY)).x,t=t.y,c=M?e:o.convert(e),u=M?t:n.convert(t))})}),y.dispose=function(){return n.cleanup(),!0}}()},E.extend(E.RiveListener,createjs.EventDispatcher),E.Theme={set:function(e,o,n,r,i){if(s=zob(E.Theme.set,arguments,"name, lightenRatio, tint, tintRatio, exclude"))return s;z_d("82.8"),zot(e)&&(e="zim");var t=e.toLowerCase();zot(o)&&(o=0),-1==n&&(n=null),zot(r)&&(r=0),-1==i&&(i=null),zot(i)||Array.isArray(i)||(i=[i]),E.THEME=window.THEME={name:t,lightenRatio:o,tint:n,tintRatio:r,exclude:i};var l,a={},s=E.colors.slice(0,8),e=E.colors.slice(8,25);"zim"==t?E.loop(E.colors,function(e,t){"clear"!=e&&"faint"!=e&&(a[e]=E.colorsHex[t])}):"html"==t?(E.loop(s,function(e){a[e]=e}),E.loop(e,function(e,t){a[e]=E.colorsHex[t+8]})):"future"==t?(l=["f25019","fd8918","ffc955","1dcfae","00a5ab","007175","00969b","d6b361"],E.loop(s,function(e,t){a[e]="#"+l[t]}),E.loop(e,function(e,t){a[e]=E.colorsHex[t+8].toColor("#1dcfae",.4-.025*t)})):"invert"==t?(a={},E.loop(E.colorsHex,function(e,t,o){return t==o-2?1:void(a[E.colors[t]]=E.invertColor(e))})):"greyscale"==t?(l=["222222","aaaaaa","dddddd","888888","333333","111111","777777","bbbbbb"],E.loop(s,function(e,t){a[e]="#"+l[t]})):"neon"==t?(l=["FF3624","ff6f00","e2f705","a3f307","05f9e2","ED0AF5","ff33c9","e16d00"],E.loop(s,function(e,t){a[e]="#"+l[t]}),E.loop(e,function(e,t){a[e]=E.colorsHex[t+8].toColor("#000",.9)}),a.light=E.lighter,a.moon=E.lighter,a.lighter=E.white,a.white=E.white):"seventies"==t?(l=["e5771e","f4a127","ffecb4","6F8212","75c8ae","5a3d2b","956e4e","4c3607"],E.loop(s,function(e,t){a[e]="#"+l[t]}),E.loop(e,function(e,t){a[e]=E.colorsHex[t+8].toColor(t<8?"#344f00":"#f4a127",.8-.04*t)})):"warm"==t?(l=["965746","c07768","ffecb4","8da279","6da0b1","745c58","9a7e79","be8858"],E.loop(s,function(e,t){a[e]="#"+l[t]}),E.loop(e,function(e,t){a[e]=E.colorsHex[t+8].toColor(t<8?"#4e352e":"#745c58",.8-.05*t)})):t.constructor=={}.constructor&&(a=t,E.loop(a,function(e){-1==E.colors.indexOf(e)&&delete a[e]})),E.loop(i,function(e){"colors"==e.toLowerCase()?E.loop(E.colors,function(e,t){return 8<=t?1:void i.push(e)}):"greys"!=e.toLowerCase()&&"grays"!=e.toLowerCase()||E.loop(E.colors,function(e,t){t<8||i.push(e)})}),E.loop(a,function(e,t){i&&-1!=i.indexOf(e)||(n&&(t=t.toColor(n,r)),0!=o&&(t=t.lighten(o)),zns||(window[e]=t),E[e]=t)})},apply:function(e,t,o,n,r){var i,l;if(i=zob(E.Theme.apply,arguments,"name, lightenRatio, tint, tintRatio, exclude"))return i;try{localStorage?(zot(e)&&(e="zim"),l=e.toLowerCase(),zot(t)&&(t=0),zot(o)&&(o=-1),zot(n)&&(n=0),zot(r)?r=-1:Array.isArray(r)||(r=[r]),localStorage.setItem(a,JSON.stringify({name:l,lightenRatio:t,tint:o,tintRatio:n,exclude:r})),window.location.reload()):zogy("ZIM applyTheme() - needs localStorage")}catch(e){zogy("ZIM applyTheme() - needs localStorage")}},clear:function(){try{localStorage&&localStorage.getItem(a)&&localStorage.removeItem(a),window.location.reload()}catch(e){}}};var a=window.location.href.replace(/[.\/:]/g,"");try{localStorage&&localStorage.getItem(a)?(E.THEME=window.THEME=JSON.parse(localStorage.getItem(a)),E.Theme.set(THEME.name,THEME.lightenRatio,THEME.tint,THEME.tintRatio,THEME.exclude)):E.THEME=window.THEME=null}catch(e){E.THEME=window.THEME=null}return E}(zim||{});var globalFunctions=[["zog",zog],["zid",zid],["zss",zss],["zgo",zgo],["zum",zum],["zot",zot],["zop",zop],["zil",zil],["zet",zet],["zob",zob],["zik",zik],["zta",zta],["zor",zor],["zogg",zogg],["zogp",zogp],["zogb",zogb],["zogr",zogr],["zogy",zogy],["zogo",zogo],["zogl",zogl],["zogd",zogd],["zimplify",zimplify],["zimify",zimify]];for(z_i=0;z_i<globalFunctions.length;z_i++){var pair=globalFunctions[z_i];WW[pair[0]]=zim[pair[0]]=pair[1]}if(zns){for(var globalsConstants=[["FIT",zim.FIT],["FILL",zim.FILL],["FULL",zim.FULL],["LEFT",zim.LEFT],["RIGHT",zim.RIGHT],["CENTER",zim.CENTER],["MIDDLE",zim.MIDDLE],["START",zim.START],["END",zim.END],["TOP",zim.TOP],["BOTTOM",zim.BOTTOM],["OVER",zim.OVER],["UNDER",zim.UNDER],["HORIZONTAL",zim.HORIZONTAL],["VERTICAL",zim.VERTICAL],["BOTH",zim.BOTH],["RADIAL",zim.RADIAL],["UP",zim.UP],["DOWN",zim.DOWN],["NEXT",zim.NEXT],["PREV",zim.PREV],["AUTO",zim.AUTO],["AVE",zim.AVE],["DEFAULT",zim.DEFAULT],["ALL",zim.ALL],["NONE",zim.NONE],["GET",zim.GET],["POST",zim.POST],["LOCALSTORAGE",zim.LOCALSTORAGE],["SOCKET",zim.SOCKET],["TO",zim.TO],["FROM",zim.FROM],["SINE",zim.SINE],["SQUARE",zim.SQUARE],["TRIANGLE",zim.TRIANGLE],["SAW",zim.SAW],["SAWTOOTH",zim.SAWTOOTH],["ZAP",zim.ZAP],["TAU",zim.TAU],["DEG",zim.DEG],["RAD",zim.RAD],["PHI",zim.PHI],["IGNORE",zim.ignore]],z_i=0;z_i<globalsConstants.length;z_i++){pair=globalsConstants[z_i];WW[pair[0]]=pair[1]}for(z_i=0;z_i<zim.colors.length;z_i++)WW[zim.colors[z_i]]=zim.colorsHex[z_i]}else zimplify();